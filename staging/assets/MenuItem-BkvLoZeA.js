import{a as Y,x as Z,e as ee,y as te,z as ae,A as ne,b as M,i as se,d as v,B as le,_ as S,C as re,k as $,D as oe,E as ce,S as ie,P as e}from"./index-CGLP8AGt.js";import{r as n,e as t}from"./index-DtHxqM--.js";import{u as U}from"./useControllableState-ICkXF1jW.js";import{M as D,u as ue,a as me}from"./useAttachedMenu-DarvD7vl.js";import{T as fe}from"./Text-CeswpK61.js";import{a as de,b as pe}from"./bucket-2-6VDW4ZdD.js";var G,B,L;const K=n.forwardRef(function(o,c){let{children:s,className:i,disabled:l,kind:u="default",label:m,onClick:g,renderIcon:b,shortcut:f,...d}=o;const[r,E]=n.useState(!1),[x,N]=n.useState(!1),{refs:I,floatingStyles:p,context:R}=Y({open:r,onOpenChange:E,placement:x?"left-start":"right-start",whileElementsMounted:ee,middleware:[Z({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:P,getFloatingProps:j}=te([ae(R,{delay:100,enabled:!0,handleClose:ne({requireIntent:!1})})]),h=M(),k=n.useContext(D),_=n.useRef(null),V=se([c,_,I.setReference]),C=!!s,w=l&&!C,z=u==="danger"&&!C;function H(){k.dispatch({type:"registerItem",payload:{ref:_,disabled:!!l}})}function q(){_.current&&E(!0)}function J(){E(!1)}function F(a){w||(C?q():(k.state.requestCloseRoot(a),g&&g(a)))}const T=n.useRef(!1),O=a=>$(a,ce)||$(a,ie);function Q(a){C&&$(a,oe)&&(q(),a.stopPropagation()),T.current=O(a),d.onKeyDown&&d.onKeyDown(a)}function W(a){T.current&&O(a)&&F(a),T.current=!1}const X=v(i,`${h}--menu-item`,{[`${h}--menu-item--disabled`]:w,[`${h}--menu-item--danger`]:z});n.useEffect(()=>{H()},[]);const{direction:A}=ue();return n.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||A==="rtl"?N(!0):N(!1)},[A]),n.useEffect(()=>{b&&!k.state.hasIcons&&k.dispatch({type:"enableIcons"})},[b,k.state.hasIcons,k]),n.useEffect(()=>{Object.keys(p).forEach(a=>{I.floating.current&&a!=="position"&&(I.floating.current.style[a]=p[a])})},[p,I.floating]),t.createElement(le,{context:R,order:["reference","floating"],modal:!1},t.createElement("li",S({role:"menuitem"},d,{ref:V,className:X,tabIndex:-1,"aria-disabled":w??void 0,"aria-haspopup":C??void 0,"aria-expanded":C?r:void 0,onClick:F,onKeyDown:Q,onKeyUp:W},P()),t.createElement("div",{className:`${h}--menu-item__selection-icon`},d["aria-checked"]&&(G||(G=t.createElement(re,null)))),t.createElement("div",{className:`${h}--menu-item__icon`},b&&t.createElement(b,null)),t.createElement(fe,{as:"div",className:`${h}--menu-item__label`,title:m},m),f&&!C&&t.createElement("div",{className:`${h}--menu-item__shortcut`},f),C&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${h}--menu-item__shortcut`},x?B||(B=t.createElement(de,null)):L||(L=t.createElement(pe,null))),t.createElement(me,S({label:m,open:r,onClose:()=>{var a;J(),(a=_.current)==null||a.focus()},ref:I.setFloating},j()),s))))});K.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const ge=n.forwardRef(function(o,c){let{className:s,defaultSelected:i,label:l,onChange:u,selected:m,...g}=o;const b=M(),f=n.useContext(D),[d,r]=U({value:m,onChange:u,defaultValue:i??!1});function E(N){r(!d)}n.useEffect(()=>{f.state.hasSelectableItems||f.dispatch({type:"enableSelectableItems"})},[f.state.hasSelectableItems,f]);const x=v(s,`${b}--menu-item-selectable--selected`);return t.createElement(K,S({},g,{ref:c,label:l,className:x,role:"menuitemcheckbox","aria-checked":d,onClick:E}))});ge.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const be=n.forwardRef(function(o,c){let{children:s,className:i,label:l,...u}=o;const m=M(),g=v(i,`${m}--menu-item-group`);return t.createElement("li",{className:g,role:"none",ref:c},t.createElement("ul",S({},u,{role:"group","aria-label":l}),s))});be.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const he=y=>y.toString(),Ce=n.forwardRef(function(o,c){let{className:s,defaultSelectedItem:i,items:l,itemToString:u=he,label:m,onChange:g,selectedItem:b,...f}=o;const d=M(),r=n.useContext(D),[E,x]=U({value:b,onChange:g,defaultValue:i??{}});function N(p,R){x(p)}n.useEffect(()=>{r.state.hasSelectableItems||r.dispatch({type:"enableSelectableItems"})},[r.state.hasSelectableItems,r]);const I=v(s,`${d}--menu-item-radio-group`);return t.createElement("li",{className:I,role:"none",ref:c},t.createElement("ul",S({},f,{role:"group","aria-label":m}),l.map((p,R)=>t.createElement(K,{key:R,label:u(p),role:"menuitemradio","aria-checked":p===E,onClick:P=>{N(p)}}))))});Ce.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Ee=n.forwardRef(function(o,c){let{className:s,...i}=o;const l=M(),u=v(s,`${l}--menu-item-divider`);return t.createElement("li",S({},i,{className:u,role:"separator",ref:c}))});Ee.propTypes={className:e.string};export{K as M,Ee as a,be as b,Ce as c,ge as d};
