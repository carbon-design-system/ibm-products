import{P as i,e as f,u as fe,r as $,k as st,c as T,_ as at,n as Ve,a4 as lt,a3 as ot,i as Ce}from"./iframe-BfCV3bOI.js";import{u as ut}from"./useNormalizedInputProps-BrwBC_vx.js";import{F as mt}from"./FormContext-DqvfHl8l.js";import{c as ct}from"./clamp--00YEiB8.js";import{u as dt}from"./useControllableState-DFU9FhNB.js";import"./documentLang-E105Y72C.js";import{A as Oe}from"./index-CErJu9sK.js";import{i as ft}from"./utils-DPQn4WAo.js";import{T as ke}from"./Text-CfUeD5YQ.js";import{ar as pt}from"./bucket-16-Lh1Yht85.js";import{A as bt}from"./bucket-0-Ciw2Dsly.js";let ue=new Map,ce=!1;try{ce=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let q=!1;try{q=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ke={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class de{format(t){let e="";if(!ce&&this.options.signDisplay!=null?e=ht(this.numberFormatter,this.options.signDisplay,t):e=this.numberFormatter.format(t),this.options.style==="unit"&&!q){var r;let{unit:s,unitDisplay:l="short",locale:c}=this.resolvedOptions();if(!s)return e;let u=(r=Ke[s])===null||r===void 0?void 0:r[l];e+=u[c]||u.default}return e}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,e){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,e);if(e<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(e)}`}formatRangeToParts(t,e){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,e);if(e<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),s=this.numberFormatter.formatToParts(e);return[...r.map(l=>({...l,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...s.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!ce&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!q&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,e={}){this.numberFormatter=gt(t,e),this.options=e}}function gt(n,t={}){let{numberingSystem:e}=t;if(e&&n.includes("-nu-")&&(n.includes("-u-")||(n+="-u-"),n+=`-nu-${e}`),t.style==="unit"&&!q){var r;let{unit:c,unitDisplay:u="short"}=t;if(!c)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Ke[c])===null||r===void 0)&&r[u]))throw new Error(`Unsupported unit ${c} with unitDisplay = ${u}`);t={...t,style:"decimal"}}let s=n+(t?Object.entries(t).sort((c,u)=>c[0]<u[0]?-1:1).join():"");if(ue.has(s))return ue.get(s);let l=new Intl.NumberFormat(n,t);return ue.set(s,l),l}function ht(n,t,e){if(t==="auto")return n.format(e);if(t==="never")return n.format(Math.abs(e));{let r=!1;if(t==="always"?r=e>0||Object.is(e,0):t==="exceptZero"&&(Object.is(e,-0)||Object.is(e,0)?e=Math.abs(e):r=e>0),r){let s=n.format(-e),l=n.format(e),c=s.replace(l,"").replace(/\u200e|\u061C/,"");return[...c].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),s.replace(l,"!!!").replace(c,"+").replace("!!!",l)}else return n.format(e)}}const yt=new RegExp("^.*\\(.*\\).*$"),$t=["latn","arab","hanidec","deva","beng"];class Be{parse(t){return me(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,r){return me(this.locale,this.options,t).isValidPartialNumber(t,e,r)}getNumberingSystem(t){return me(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const Te=new Map;function me(n,t,e){let r=Re(n,t);if(!n.includes("-nu-")&&!r.isValidPartialNumber(e)){for(let s of $t)if(s!==r.options.numberingSystem){let l=Re(n+(n.includes("-u-")?"-nu-":"-u-nu-")+s,t);if(l.isValidPartialNumber(e))return l}}return r}function Re(n,t){let e=n+(t?Object.entries(t).sort((s,l)=>s[0]<l[0]?-1:1).join():""),r=Te.get(e);return r||(r=new vt(n,t),Te.set(e,r)),r}class vt{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=z(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let c=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let u=e.indexOf(".");u===-1&&(u=e.length),e=e.replace(".",""),u-2===0?e=`0.${e}`:u-2===-1?e=`0.0${e}`:u-2===-2?e="0.00":e=`${e.slice(0,u-2)}.${e.slice(u-2)}`,c>-1&&(e=`-${e}`)}let r=e?+e:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var s,l;let c={...this.options,style:"decimal",minimumFractionDigits:Math.min(((s=this.options.minimumFractionDigits)!==null&&s!==void 0?s:0)+2,20),maximumFractionDigits:Math.min(((l=this.options.maximumFractionDigits)!==null&&l!==void 0?l:0)+2,20)};return new Be(this.locale,c).parse(new de(this.locale,c).format(r))}return this.options.currencySign==="accounting"&&yt.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=z(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&this.symbols.group&&(t=z(t," ",this.symbols.group),t=z(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=z(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=wt(t,this.formatter,this.options,e);var r,s;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((s=this.options.maximumFractionDigits)!==null&&s!==void 0?s:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const Me=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Nt=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function wt(n,t,e,r){var s,l,c,u;let I=new Intl.NumberFormat(n,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),_=I.formatToParts(-10000.111),k=I.formatToParts(10000.111),V=Nt.map(o=>I.formatToParts(o));var P;let H=(P=(s=_.find(o=>o.type==="minusSign"))===null||s===void 0?void 0:s.value)!==null&&P!==void 0?P:"-",R=(l=k.find(o=>o.type==="plusSign"))===null||l===void 0?void 0:l.value;!R&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(R="+");let J=(c=new Intl.NumberFormat(n,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(o=>o.type==="decimal"))===null||c===void 0?void 0:c.value,X=(u=_.find(o=>o.type==="group"))===null||u===void 0?void 0:u.value,E=_.filter(o=>!Me.has(o.type)).map(o=>Ae(o.value)),v=V.flatMap(o=>o.filter(w=>!Me.has(w.type)).map(w=>Ae(w.value))),g=[...new Set([...E,...v])].sort((o,w)=>w.length-o.length),C=g.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${g.join("|")}|[\\p{White_Space}]`,"gu"),S=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),M=new Map(S.map((o,w)=>[o,w])),Q=new RegExp(`[${S.join("")}]`,"g");return{minusSign:H,plusSign:R,decimal:J,group:X,literals:C,numeral:Q,index:o=>String(M.get(o))}}function z(n,t,e){return n.replaceAll?n.replaceAll(t,e):n.split(t).join(e)}function Ae(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const xt=i.shape({localeMatcher:i.oneOf(["best fit","lookup"]),style:i.oneOf(["decimal","currency","percent","unit"]),currency:i.string,currencyDisplay:i.oneOf(["symbol","narrowSymbol","code","name"]),currencySign:i.oneOf(["standard","accounting"]),unit:i.string,unitDisplay:i.oneOf(["short","narrow","long"]),notation:i.oneOf(["standard","scientific","engineering","compact"]),compactDisplay:i.oneOf(["short","long"]),signDisplay:i.oneOf(["auto","never","always","exceptZero"]),minimumIntegerDigits:i.number,minimumFractionDigits:i.number,maximumFractionDigits:i.number,minimumSignificantDigits:i.number,maximumSignificantDigits:i.number,useGrouping:i.oneOfType([i.bool,i.oneOf(["always","auto","min2"])]),numberingSystem:i.string,roundingIncrement:i.number,roundingMode:i.oneOf(["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"]),trailingZeroDisplay:i.oneOf(["auto","stripIfInteger"])});var Le,We;const je={"increment.number":"increment.number","decrement.number":"decrement.number"},St={[je["increment.number"]]:"Increment number",[je["decrement.number"]]:"Decrement number"},Dt=f.forwardRef((n,t)=>{const{allowEmpty:e=!1,className:r,decorator:s,disabled:l=!1,disableWheel:c=!1,formatOptions:u,helperText:I="",hideLabel:_=!1,hideSteppers:k,iconDescription:V,id:P,inputMode:H="decimal",invalid:R=!1,invalidText:pe,label:J,light:X,locale:E="en-US",max:v,min:g,onBlur:C,onChange:S,onClick:M,onKeyUp:Q,pattern:be="[0-9]*",readOnly:o,size:w="md",slug:A,step:K=1,translateWithId:ge=a=>St[a],type:h="number",defaultValue:D=h==="number"?0:NaN,warn:Ge=!1,warnText:Ye="",stepStartValue:ee=0,value:N,...L}=n,m=fe(),{isFluid:O}=$.useContext(mt),[qe,he]=$.useState(!1),[te,W]=$.useState(()=>N!==void 0?N:D!==void 0?D:e?"":0),[Pt,He]=$.useState(N),F=$.useMemo(()=>new Be(E,u),[E,u]),[y,ie,ye]=dt({name:"NumberInput",defaultValue:typeof D=="string"?F.parse(D):D,value:typeof N=="string"?F.parse(N):N}),[j,re]=$.useState(y),[B,U]=f.useState(()=>isNaN(y)?"":new de(E,u).format(y)),$e=$.useMemo(()=>F.getNumberingSystem(B),[F,B]),ve=$.useMemo(()=>new de(E,{...u,numberingSystem:$e}),[E,u,$e]),ne=$.useCallback(a=>isNaN(a)||a===null?"":ve.format(a),[ve]);ye&&!(isNaN(j)&&isNaN(y))&&j!==y&&(U(ne(y)),re(y));const Z=$.useRef(null),Je=st([t,Z]),Xe=T({[`${m}--number`]:!0,[`${m}--number--helpertext`]:!0,[`${m}--number--readonly`]:o,[`${m}--number--light`]:X,[`${m}--number--nolabel`]:_,[`${m}--number--nosteppers`]:k,[`${m}--number--${w}`]:w}),Qe=Ft({allowEmpty:e,invalid:R,value:h==="number"?te:y,max:v,min:g}),d=ut({id:P,readOnly:o,disabled:l,invalid:!Qe,invalidText:pe,warn:Ge,warnText:Ye}),[Ne,we]=[ge("increment.number"),ge("decrement.number")],et=T(`${m}--number__input-wrapper`,{[`${m}--number__input-wrapper--warning`]:d.warn,[`${m}--number__input-wrapper--slug`]:A,[`${m}--number__input-wrapper--decorator`]:s}),tt=T({[`${m}--number__invalid`]:d.invalid||d.warn,[`${m}--number__invalid--warning`]:d.warn});$.useEffect(()=>{h==="number"&&N!==void 0&&(W(e&&N===""?"":N),He(N))},[N,h,e]);let G;d.invalid&&(G=d.invalidId),d.warn&&(G=d.warnId),d.validation||(G=I?d.helperId:void 0);function it(a){if(!l){if(h==="number"){const p={value:e&&a.target.value===""?"":Number(a.target.value),direction:te<a.target.value?"up":"down"};W(p.value),S&&S(a,p);return}if(h==="text"){const p=e&&a.target.value===""?"":a.target.value;ie(F.parse(p)),U(p)}}}const xe=a=>{"type"in a.target&&a.target.type==="button"?he(!1):he(a.type==="focus")},rt=T(`${m}--form-item`,{[r]:!!r,[`${m}--number-input--fluid--invalid`]:O&&d.invalid,[`${m}--number-input--fluid--focus`]:O&&qe,[`${m}--number-input--fluid--disabled`]:O&&l}),Se=d.icon,De=a=>{const p=a.toString().split(".");return p[1]?p[1].length:0},se=(a,p)=>{if(Z.current){const x=h==="number"?Number(Z.current.value):y;let b;Number.isNaN(x)||!x?typeof ee=="number"&&ee?b=ee:g&&g<0&&v&&v>0||!v&&!g||v?(p==="up"&&(b=1),p==="down"&&(b=-1)):g&&g>0&&v&&v>0||g?b=g:b=0:p==="up"?b=x+K:b=x-K;const le=Math.max(De(x),De(K)),nt=parseFloat(b.toFixed(le)),Ee=ct(nt,g??-1/0,v??1/0),oe={value:Ee,direction:p};if(h==="number"&&W(oe.value),h==="text"){const Ie=ne(Ee),_e=F.parse(Ie);ie(_e),U(Ie),re(_e)}return S&&S(a,oe),oe}},Fe=(a,p)=>{if(Z.current){const x=se(a,p);M&&M(a,x)}},Pe=A??s,Y=ft(Pe,Oe)?$.cloneElement(Pe,{size:"mini"}):null;let ae;return Y?.type===Oe&&(ae=Y.props.revertActive),$.useEffect(()=>{!ae&&A&&D&&W(D)},[D,ae,A]),f.createElement("div",{className:rt,onFocus:O?xe:void 0,onBlur:O?xe:void 0},f.createElement("div",{className:Xe,"data-invalid":d.invalid?!0:void 0},f.createElement(Ue,{disabled:d.disabled,hideLabel:_,id:P,label:J}),f.createElement("div",{className:et},f.createElement("input",at({},L,{"data-invalid":d.invalid?!0:void 0,"aria-invalid":d.invalid,"aria-describedby":G,"aria-readonly":o,disabled:d.disabled,ref:Je,id:P,max:v,min:g,onClick:M,onChange:it,onKeyUp:Q,onKeyDown:a=>{h==="text"&&(Ve(a,lt)&&se(a,"up"),Ve(a,ot)&&se(a,"down")),L?.onKeyDown&&L?.onKeyDown(a)},onFocus:a=>{c&&a.target.addEventListener("wheel",ze),L.onFocus&&L.onFocus(a)},onBlur:a=>{if(c&&a.target.removeEventListener("wheel",ze),h==="text"){const p=ye?F.parse(B):y,x=isNaN(p)?"":ne(p);U(x);const b=F.parse(x);if(S){const le={value:b,direction:j<b?"up":"down"};isNaN(j)&&isNaN(b)||S(a,le)}isNaN(j)&&isNaN(y)||re(y),isNaN(y)&&isNaN(b)||ie(b)}C&&C(a)},pattern:be,inputMode:H,readOnly:o,step:K,type:h,value:h==="number"?te:B})),A?Y:s?f.createElement("div",{className:`${m}--number__input-inner-wrapper--decorator`},Y):"",Se?f.createElement(Se,{className:tt}):null,!k&&f.createElement("div",{className:`${m}--number__controls`},f.createElement("button",{"aria-label":we||V,className:`${m}--number__control-btn down-icon`,disabled:l||o,onClick:a=>Fe(a,"down"),onBlur:C,tabIndex:-1,title:we||V,type:"button"},Le||(Le=f.createElement(pt,{className:"down-icon"}))),f.createElement("div",{className:`${m}--number__rule-divider`}),f.createElement("button",{"aria-label":Ne||V,className:`${m}--number__control-btn up-icon`,disabled:l||o,onClick:a=>Fe(a,"up"),onBlur:C,tabIndex:-1,title:Ne||V,type:"button"},We||(We=f.createElement(bt,{className:"up-icon"}))),f.createElement("div",{className:`${m}--number__rule-divider`}))),O&&f.createElement("hr",{className:`${m}--number-input__divider`}),d.validation?d.validation:f.createElement(Ze,{id:d.helperId,disabled:l,description:I})))});Dt.propTypes={allowEmpty:i.bool,className:i.string,decorator:i.node,defaultValue:i.oneOfType([i.number,i.string]),disableWheel:i.bool,disabled:i.bool,formatOptions:xt,helperText:i.node,hideLabel:i.bool,hideSteppers:i.bool,iconDescription:i.string,id:i.string.isRequired,inputMode:i.oneOf(["none","text","tel","url","email","numeric","decimal","search"]),invalid:i.bool,invalidText:i.node,label:i.node,light:Ce(i.bool),locale:i.string,max:i.number,min:i.number,stepStartValue:i.number,onBlur:i.func,onChange:i.func,onClick:i.func,onKeyUp:i.func,pattern:i.string,readOnly:i.bool,size:i.oneOf(["sm","md","lg"]),slug:Ce(i.node),step:i.number,translateWithId:i.func,type:i.oneOf(["number","text"]),value:i.oneOfType([i.number,i.string]),warn:i.bool,warnText:i.node};const Ue=({disabled:n,id:t,hideLabel:e,label:r})=>{const s=fe(),l=T({[`${s}--label`]:!0,[`${s}--label--disabled`]:n,[`${s}--visually-hidden`]:e});return r?f.createElement(ke,{as:"label",htmlFor:t,className:l},r):null};Ue.propTypes={disabled:i.bool,hideLabel:i.bool,id:i.string,label:i.node};function Ze({disabled:n,description:t,id:e}){const r=fe(),s=T(`${r}--form__helper-text`,{[`${r}--form__helper-text--disabled`]:n});return t?f.createElement(ke,{as:"div",id:e,className:s},t):null}Ze.propTypes={description:i.node,disabled:i.bool,id:i.string};function Ft({allowEmpty:n,invalid:t,value:e,max:r,min:s}){return t?!1:e===""?n:!(e>r||e<s)}function ze(n){n.preventDefault()}export{Dt as N,xt as a};
