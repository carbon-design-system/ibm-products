{"version":3,"file":"useFocusRowExpander-BbZbsPtS.js","sources":["../../src/components/Datagrid/useFocusRowExpander.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2023, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect } from 'react';\n\n// Focuses the row expander after a nested/expandable row state change.\n// We have to add this workaround because react-table is re-rendering the entire row\n// which removes the focus from the expander and interrupts the keyboard navigation\n// flow.\nexport const useFocusRowExpander = ({\n  instance,\n  lastExpandedRowIndex = 0,\n  blockClass,\n  activeElement,\n}) => {\n  useEffect(() => {\n    // We need to return at this point so that the focus is not stolen from\n    // other interactive elements in the Datagrid\n    if (!activeElement.classList.contains(`${blockClass}__row-expander`)) {\n      return;\n    }\n    const tableId = instance?.tableId;\n    const rowElements = document.querySelectorAll(`#${tableId} tbody tr`);\n    const rowElementsArray = Array.from(rowElements);\n    const activeRow = rowElementsArray.filter((r) => {\n      if (r.getAttribute('data-nested-row-id') === lastExpandedRowIndex) {\n        return r;\n      }\n      return null;\n    });\n    if (activeRow.length) {\n      const rowExpander = activeRow[0].querySelector(\n        `.${blockClass}__row-expander`\n      );\n      rowExpander?.focus();\n    }\n  }, [\n    instance?.tableId,\n    instance?.expandedRows,\n    lastExpandedRowIndex,\n    blockClass,\n    activeElement,\n  ]);\n};\n"],"names":["useFocusRowExpander","instance","lastExpandedRowIndex","blockClass","activeElement","useEffect","tableId","rowElements","activeRow","r"],"mappings":"yCAaO,MAAMA,EAAsB,CAAC,CAClC,SAAAC,EACA,qBAAAC,EAAuB,EACvB,WAAAC,EACA,cAAAC,CACF,IAAM,CACJC,EAAAA,UAAU,IAAM,CAGd,GAAI,CAACD,EAAc,UAAU,SAAS,GAAGD,CAAU,gBAAgB,EACjE,OAEF,MAAMG,EAAUL,GAAU,QACpBM,EAAc,SAAS,iBAAiB,IAAID,CAAO,WAAW,EAE9DE,EADmB,MAAM,KAAKD,CAAW,EACZ,OAAQE,GACrCA,EAAE,aAAa,oBAAoB,IAAMP,EACpCO,EAEF,IACR,EACGD,EAAU,QACQA,EAAU,CAAC,EAAE,cAC/B,IAAIL,CAAU,gBAAA,GAEH,MAAA,CAEjB,EAAG,CACDF,GAAU,QACVA,GAAU,aACVC,EACAC,EACAC,CAAA,CACD,CACH"}