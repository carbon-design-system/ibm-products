import{b as D,u as G,l as at,a as lt,o as it,f as ct,X as ut,h as pt,g as ft,j as J,c as F,_ as K}from"./index-CQ0F2wkl.js";import{P as l}from"./index-Dk74W0Oi.js";import{r as d,R as p}from"./index-BwDkhjyp.js";const j={};function dt(r,a,i){return function(f,e,o){if(f[e]!==void 0){if(!j[o]||!j[o][e]){j[o]={...j[o],[e]:!0};const g=f[e],H=i?i(g):null;a&&!a.includes(g)&&(i?`${g}${e}${o}${H}${g}`:`${g}${e}${o}${a.join(", ")}${g}`)}for(var s=arguments.length,E=new Array(s>3?s-3:0),b=3;b<s;b++)E[b-3]=arguments[b];return r(f,e,o,...E)}}}function Et(r,a,i){const n=d.useRef(null);d.useEffect(()=>{n.current=i},[i]),d.useEffect(()=>{var o;const f=s=>{n.current&&n.current(s)},e="current"in r?r.current:r;return(o=e==null?void 0:e.addEventListener)==null||o.call(e,a,f),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,a,f)}},[r,a])}function z(r,a){const i=d.useRef(null);d.useEffect(()=>{i.current=a},[a]),d.useEffect(()=>{function n(f){i.current&&i.current(f)}return window.addEventListener(r,n),()=>{window.removeEventListener(r,n)}},[r])}function gt(r){switch(r){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return r}}const O=p.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),bt=r=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[r],ht=p.forwardRef(function(a,i){var k;let{isTabTip:n,align:f=n?"bottom-start":"bottom",as:e="span",autoAlign:o=!1,caret:s=!n,className:E,children:b,dropShadow:g=!0,highContrast:H=!1,onRequestClose:w,open:B,...Y}=a;const h=D(),Z=d.useRef(null),m=d.useRef(null),C=d.useRef(null),v=G("enable-v12-dynamic-floating-styles")||o;let P=gt(f);z("blur",()=>{B&&(w==null||w())}),z("click",c=>{var t;B&&!((t=C==null?void 0:C.current)!=null&&t.contains(c.target))&&(w==null||w())});const q=p.Children.toArray(b).some(c=>{var t,u;return(u=(t=c==null?void 0:c.props)==null?void 0:t.className)==null?void 0:u.includes("slug")})?7:6,y=d.useRef({offset:10,caretHeight:q});at(()=>{if(s&&C.current){const c=window.getComputedStyle(C.current,null),t=c.getPropertyValue("--cds-popover-offset"),u=c.getPropertyValue("--cds-popover-caret-height");t&&(y.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),u&&(y.current.caretHeight=u.includes("px")?Number(u.split("px",1)[0])*1:Number(u.split("rem",1)[0])*16)}});const{refs:x,floatingStyles:V,placement:R,middlewareData:T}=lt(v?{placement:P,strategy:"fixed",middleware:[it(n?0:(k=y==null?void 0:y.current)==null?void 0:k.offset),o&&ct({fallbackPlacements:P.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start"}),ut({element:m}),o&&pt()],whileElementsMounted:ft}:{}),_=d.useMemo(()=>({floating:Z,setFloating:x.setFloating,caretRef:m,autoAlign:o}),[x.setFloating,o]);n&&(["bottom-start","bottom-end"].includes(P)||(P="bottom-start")),d.useEffect(()=>{var c,t;if(v){const u={...V,visibility:(c=T.hide)!=null&&c.referenceHidden?"hidden":"visible"};if(Object.keys(u).forEach($=>{x.floating.current&&(x.floating.current.style[$]=u[$])}),s&&T&&T.arrow&&(m!=null&&m.current)){const{x:$,y:S}=T.arrow,N={top:"bottom",right:"left",bottom:"top",left:"right"}[R.split("-")[0]];m.current.style.left=$!=null?`${$}px`:"",m.current.style.top=S!=null?`${S}px`:"",m.current.style.right="",m.current.style.bottom="",N&&(m.current.style[N]=`${-((t=y==null?void 0:y.current)==null?void 0:t.caretHeight)}px`)}}},[V,x.floating,v,T,R,s]);const tt=J([i,C]),et=o&&R!==P?R:P,ot=F({[`${h}--popover-container`]:!0,[`${h}--popover--caret`]:s,[`${h}--popover--drop-shadow`]:g,[`${h}--popover--high-contrast`]:H,[`${h}--popover--open`]:B,[`${h}--popover--auto-align ${h}--autoalign`]:v,[`${h}--popover--${et}`]:!0,[`${h}--popover--tab-tip`]:n},E),rt=p.Children.map(b,c=>{var W,M;const t=c,u=(W=t==null?void 0:t.type)==null?void 0:W.displayName,$=(t==null?void 0:t.type)==="button",S=v&&u&&["ToggletipButton"].includes(u),N=v&&!["ToggletipContent","PopoverContent"].includes(u);if(p.isValidElement(t)&&($||S||N)){const U=(M=t==null?void 0:t.props)==null?void 0:M.className,A=(t==null?void 0:t.props).ref,st=F(`${h}--popover--tab-tip__button`,U);return p.cloneElement(t,{className:n&&(t==null?void 0:t.type)==="button"?st:U||"",ref:L=>{var I,X;(v&&((I=t==null?void 0:t.type)==null?void 0:I.displayName)!=="PopoverContent"||v&&((X=t==null?void 0:t.type)==null?void 0:X.displayName)==="ToggletipButton")&&x.setReference(L),typeof A=="function"?A(L):A!=null&&(A.current=L)}})}else return t}),nt=e;return p.createElement(O.Provider,{value:_},p.createElement(nt,K({},Y,{className:ot,ref:tt}),v||n?rt:b))});ht.propTypes={align:dt(l.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],bt),as:l.oneOfType([l.string,l.elementType]),autoAlign:l.bool,caret:l.bool,children:l.node,className:l.string,dropShadow:l.bool,highContrast:l.bool,isTabTip:l.bool,onRequestClose:l.func,open:l.bool.isRequired};function mt(r,a){let{className:i,children:n,...f}=r;const e=D(),{setFloating:o,caretRef:s,autoAlign:E}=p.useContext(O),b=J([o,a]),g=G("enable-v12-dynamic-floating-styles")||E;return p.createElement("span",K({},f,{className:`${e}--popover`}),p.createElement("span",{className:F(`${e}--popover-content`,i),ref:b},n,g&&p.createElement("span",{className:F({[`${e}--popover-caret`]:!0,[`${e}--popover--auto-align`]:!0}),ref:s})),!g&&p.createElement("span",{className:F({[`${e}--popover-caret`]:!0}),ref:s}))}const Q=p.forwardRef(mt);Q.displayName="PopoverContent";Q.propTypes={children:l.node,className:l.string};export{ht as P,Q as a,Et as b,dt as d,gt as m,z as u};
