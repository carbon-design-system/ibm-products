{"version":3,"file":"TearsheetShell-C8v5h5aU.js","sources":["../../src/components/Tearsheet/TearsheetShell.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Import portions of React that are needed.\nimport React, {\n  useEffect,\n  useState,\n  useRef,\n  ComponentProps,\n  PropsWithChildren,\n  ReactNode,\n  ForwardedRef,\n  RefObject,\n} from 'react';\nimport { useResizeObserver } from '../../global/js/hooks/useResizeObserver';\n\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pkg } from '../../settings';\nimport pconsole from '../../global/js/utils/pconsole';\nimport { getNodeTextContent } from '../../global/js/utils/getNodeTextContent';\nimport { deprecateProp } from '../../global/js/utils/props-helper';\n\n// Carbon and package components we use.\nimport {\n  Button,\n  ComposedModal,\n  Layer,\n  ModalHeader,\n  Section,\n  usePrefix,\n  unstable_FeatureFlags as FeatureFlags,\n  Heading,\n} from '@carbon/react';\n\nimport { ActionSet } from '../ActionSet';\nimport { Wrap } from '../../global/js/utils/Wrap';\nimport { usePortalTarget } from '../../global/js/hooks/usePortalTarget';\nimport { useIsomorphicEffect, usePreviousValue } from '../../global/js/hooks';\nimport { useFocus } from '../../global/js/hooks/useFocus';\nimport { TearsheetAction } from './Tearsheet';\n\n// The block part of our conventional BEM class names (bc__E--M).\nconst bc = `${pkg.prefix}--tearsheet`;\nconst componentName = 'TearsheetShell';\n\nconst maxDepth = 3;\n\ninterface TearsheetShellProps extends PropsWithChildren {\n  actions?: TearsheetAction[];\n\n  ariaLabel?: string;\n\n  /**\n   * An optional class or classes to be added to the outermost element.\n   */\n  className?: string;\n\n  /**\n   * The accessibility title for the close icon (if shown).\n   *\n   * **Note:** This prop is only required if a close icon is shown, i.e. if\n   * there are a no navigation actions and/or hasCloseIcon is true.\n   */\n  closeIconDescription?: string;\n\n  /**\n   * Used to track the current step on components which use `StepsContext` and `TearsheetShell`\n   */\n  currentStep?: number;\n\n  /**\n   * Optional prop that allows you to pass any component.\n   */\n  decorator?: ReactNode;\n\n  /**\n   * A description of the flow, displayed in the header area of the tearsheet.\n   */\n  description?: ReactNode;\n\n  /**\n   * Enable a close icon ('x') in the header area of the tearsheet. By default,\n   * (when this prop is omitted, or undefined or null) a tearsheet does not\n   * display a close icon if there are navigation actions (\"transactional\n   * tearsheet\") and displays one if there are no navigation actions (\"passive\n   * tearsheet\"), and that behavior can be overridden if required by setting\n   * this prop to either true or false.\n   */\n  hasCloseIcon?: boolean;\n\n  /**\n   * To indicate an error occurred in the Tearsheet step\n   * Mainly used by CreateTearsheet component to pass error state\n   */\n  hasError?: boolean;\n\n  /**\n   * The content for the header actions area, displayed alongside the title in\n   * the header area of the tearsheet. This is typically a drop-down, or a set\n   * of small buttons, or similar. NB the headerActions is only applicable for\n   * wide tearsheets.\n   */\n  headerActions?: ReactNode;\n\n  /**\n   * The content for the influencer section of the tearsheet, displayed\n   * alongside the main content. This is typically a menu, or filter, or\n   * progress indicator, or similar. NB the influencer is only applicable for\n   * wide tearsheets.\n   */\n  influencer?: ReactNode;\n\n  /**\n   * The position of the influencer section, 'left' or 'right'.\n   */\n  influencerPosition?: 'left' | 'right';\n\n  /**\n   * The width of the influencer: 'narrow' (the default) is 256px, and 'wide'\n   * is 320px.\n   */\n  influencerWidth?: 'narrow' | 'wide';\n\n  /**\n   * A label for the tearsheet, displayed in the header area of the tearsheet\n   * to maintain context for the tearsheet (e.g. as the title changes from page\n   * to page of a multi-page task).\n   */\n  label?: ReactNode;\n\n  /**\n   * Provide a ref to return focus to once the tearsheet is closed.\n   */\n  launcherButtonRef?: RefObject<any>;\n\n  /**\n   * Navigation content, such as a set of tabs, to be displayed at the bottom\n   * of the header area of the tearsheet. NB the navigation is only applicable\n   * for wide tearsheets.\n   */\n  navigation?: ReactNode;\n\n  /**\n   * An optional handler that is called when the user closes the tearsheet (by\n   * clicking the close button, if enabled, or clicking outside, if enabled).\n   * Returning `false` here prevents the modal from closing.\n   */\n  onClose?: () => void;\n\n  /**\n   * Specifies whether the tearsheet is currently open.\n   */\n  open?: boolean;\n\n  /**\n   * The DOM element that the tearsheet should be rendered within. Defaults to document.body.\n   */\n  portalTarget?: HTMLElement;\n\n  /**\n   * Specify a CSS selector that matches the DOM element that should be\n   * focused when the Modal opens.\n   */\n  selectorPrimaryFocus?: string;\n\n  /**\n   * Specify the CSS selectors that match the floating menus.\n   *\n   * See https://react.carbondesignsystem.com/?path=/docs/components-composedmodal--overview#focus-management\n   */\n  selectorsFloatingMenus?: string[];\n\n  /**\n   * Specifies the width of the tearsheet, 'narrow' or 'wide'.\n   */\n  size: 'narrow' | 'wide';\n\n  /**\n   * The main title of the tearsheet, displayed in the header area.\n   */\n  title?: ReactNode;\n\n  verticalPosition?: 'normal' | 'lower';\n\n  // Deprecated props\n  /**\n   * @deprecated Property replaced by `decorator`\n   */\n  slug?: ReactNode;\n}\n\n// NOTE: the component SCSS is not imported here: it is rolled up separately.\n\n// Global data structure to communicate the state of tearsheet stacking\n// (i.e. when more than one tearsheet is open). Each tearsheet supplies a\n// handler to be called whenever the stacking of the tearsheets changes, which\n// happens when a tearsheet opens or closes. The 'open' array contains one\n// handler per OPEN tearsheet ordered from lowest to highest in visual z-order.\n// The 'all' array contains all the handlers for open and closed tearsheets.\n// The 'sizes' array contains an array of the sizes for every stacked tearsheet.\n// This is so we can opt-out of including the stacking scale effect when there\n// are stacked tearsheets with mixed sizes (ie, using wide and narrow together)\ntype stackTypes = {\n  open: Array<{\n    (a: number, b: number): void;\n  }>;\n  all: Array<{\n    (a: number, b: number): void;\n  }>;\n  sizes: Array<string>;\n};\n\nconst stack: stackTypes = { open: [], all: [], sizes: [] };\n\n// these props are only applicable when size='wide'\nexport const tearsheetShellWideProps = [\n  'headerActions',\n  'influencer',\n  'influencerPosition',\n  'influencerWidth',\n  'navigation',\n];\n\nexport const tearsheetIsPassive = (actions) => !actions || !actions?.length;\nexport const tearsheetHasCloseIcon = (actions, hasCloseIcon) =>\n  hasCloseIcon ?? tearsheetIsPassive(actions);\n\n/**\n * Since the Tearsheet has an H3 heading, any headings inside the Tearsheet should start at H4.\n * This is a helper to do that.\n */\nconst SectionLevel3 = ({\n  children,\n  ...rest\n}: ComponentProps<typeof Section>) => (\n  <Section level={3} {...rest}>\n    {children}\n  </Section>\n);\n\n/**\n *  TearSheetShell is used internally by TearSheet and TearSheetNarrow\n *\n * The component is not public.\n *\n * See the canvas tab for the component API details.\n * */\nexport const TearsheetShell = React.forwardRef(\n  (\n    {\n      // The component props, in alphabetical order (for consistency).\n      actions,\n      decorator,\n      ariaLabel,\n      children,\n      className,\n      closeIconDescription = 'Close',\n      currentStep,\n      description,\n      hasCloseIcon,\n      hasError,\n      headerActions,\n      influencer,\n      influencerPosition,\n      influencerWidth,\n      label,\n      navigation,\n      onClose,\n      open,\n      portalTarget: portalTargetIn,\n      selectorPrimaryFocus,\n      selectorsFloatingMenus = [],\n      size,\n      slug: deprecated_slug,\n      title,\n      verticalPosition,\n      launcherButtonRef,\n      // Collect any other property values passed in.\n      ...rest\n    }: TearsheetShellProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const carbonPrefix = usePrefix();\n    const bcModalHeader = `${carbonPrefix}--modal-header`;\n    const renderPortalUse = usePortalTarget(portalTargetIn);\n    const localRef = useRef(undefined);\n    const resizer = useRef<HTMLDivElement | null>(null);\n    const modalBodyRef = useRef(null);\n    const modalRef = (ref || localRef) as RefObject<HTMLDivElement>;\n    const { width } = useResizeObserver(resizer as RefObject<HTMLDivElement>);\n    const prevOpen = usePreviousValue(open);\n    const { keyDownListener, claimFocus } = useFocus(\n      modalRef,\n      selectorPrimaryFocus\n    );\n    const modalRefValue = modalRef.current;\n    const wide = size === 'wide';\n\n    // Keep track of the stack depth and our position in it (1-based, 0=closed)\n    const [depth, setDepth] = useState(0);\n    const [position, setPosition] = useState(0);\n\n    // Keep a record of the previous value of depth.\n    const prevDepth = useRef<number | undefined>(undefined);\n    useEffect(() => {\n      prevDepth.current = depth;\n    });\n\n    // A \"passive\" tearsheet is one with no navigation actions.\n    const isPassive = tearsheetIsPassive(actions);\n    const effectiveHasCloseIcon = tearsheetHasCloseIcon(actions, hasCloseIcon);\n\n    // Callback that will be called whenever the stacking order changes.\n    // position is 1-based with 0 indicating closed.\n    function handleStackChange(newDepth: number, newPosition: number) {\n      setDepth(newDepth);\n      setPosition(newPosition);\n    }\n\n    useEffect(() => {\n      if (open) {\n        claimFocus();\n      }\n    }, [open, currentStep, effectiveHasCloseIcon, claimFocus]);\n\n    useEffect(() => {\n      if (prevOpen && !open && launcherButtonRef?.current) {\n        setTimeout(() => {\n          launcherButtonRef?.current?.focus();\n        }, 10);\n      }\n    }, [open, prevOpen, launcherButtonRef]);\n\n    useEffect(() => {\n      requestAnimationFrame(() => {\n        if (\n          open &&\n          depth === position &&\n          !modalRef?.current?.contains(document.activeElement)\n        ) {\n          claimFocus();\n        }\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [claimFocus, depth, modalRef, position]);\n\n    useEffect(() => {\n      if (hasError && !modalRef?.current?.contains(document.activeElement)) {\n        claimFocus();\n      }\n    }, [claimFocus, hasError, modalRef]);\n\n    useEffect(() => {\n      const notify = () =>\n        stack.all.forEach((handler) => {\n          handler(\n            Math.min(stack.open.length, maxDepth),\n            stack.open.indexOf(handler) + 1\n          );\n        });\n\n      // Register this tearsheet's stack change callback/listener.\n      stack.all.push(handleStackChange);\n      stack.sizes.push(size);\n\n      // If the tearsheet is mounting with open=true or open is changing from\n      // false to true to open it then append its notification callback to\n      // the end of the stack array (as its ID), and call all the callbacks\n      // to notify all open tearsheets that the stacking has changed.\n      if (open) {\n        stack.open.push(handleStackChange);\n        notify();\n      }\n\n      // Cleanup function called whenever the tearsheet unmounts or the open\n      // prop changes value (in which case it is called prior to this hook\n      // being called again).\n      return function cleanup() {\n        // Remove the notification callback from the all handlers array.\n        stack.all.splice(stack.all.indexOf(handleStackChange), 1);\n        stack.sizes.splice(stack.sizes.indexOf(size), 1);\n\n        // Remove the notification callback from the open handlers array, if\n        // it's there, and notify all open tearsheets that the stacking has\n        // changed (only necessary if this tearsheet was open).\n        const openIndex = stack.open.indexOf(handleStackChange);\n        if (openIndex >= 0) {\n          stack.open.splice(openIndex, 1);\n          notify();\n        }\n      };\n    }, [open, size]);\n\n    const areAllSameSizeVariant = () => new Set(stack.sizes).size === 1;\n\n    useIsomorphicEffect(() => {\n      const setScaleValues = () => {\n        if (!areAllSameSizeVariant()) {\n          return {\n            [`--${bc}--stacking-scale-factor-single`]: 1,\n            [`--${bc}--stacking-scale-factor-double`]: 1,\n          };\n        }\n        return {\n          [`--${bc}--stacking-scale-factor-single`]: (width - 32) / width,\n          [`--${bc}--stacking-scale-factor-double`]: (width - 64) / width,\n        };\n      };\n      if (modalRef.current) {\n        Object.entries(setScaleValues()).map(([key, value]) => {\n          modalRef.current.style.setProperty(key, String(value));\n        });\n      }\n    }, [modalRef, width]);\n\n    if (position <= depth) {\n      // Include a modal header if and only if one or more of these is given.\n      // We can't use a Wrap for the ModalHeader because ComposedModal requires\n      // the direct child to be the ModalHeader instance.\n      const includeHeader =\n        label ||\n        title ||\n        description ||\n        headerActions ||\n        navigation ||\n        effectiveHasCloseIcon;\n\n      // Include an ActionSet if and only if one or more actions is given.\n      const includeActions = actions && actions?.length > 0;\n\n      const areAllSameSizeVariant = () => new Set(stack.sizes).size === 1;\n\n      return renderPortalUse(\n        <FeatureFlags enableExperimentalFocusWrapWithoutSentinels>\n          <ComposedModal\n            {\n              // Pass through any other property values.\n              ...rest\n            }\n            aria-label={ariaLabel || getNodeTextContent(title)}\n            className={cx(bc, className, {\n              [`${bc}--stacked-${position}-of-${depth}`]:\n                // Don't apply this on the initial open of a single tearsheet.\n                depth > 1 || (depth === 1 && (prevDepth?.current ?? 0) > 1),\n              [`${bc}--wide`]: wide,\n              [`${bc}--narrow`]: !wide,\n              [`${bc}--has-slug`]: deprecated_slug,\n              [`${bc}--has-ai-label`]:\n                !!decorator && decorator['type']?.displayName === 'AILabel',\n              [`${bc}--has-decorator`]:\n                !!decorator && decorator['type']?.displayName !== 'AILabel',\n              [`${bc}--has-close`]: effectiveHasCloseIcon,\n            })}\n            decorator={decorator || deprecated_slug}\n            containerClassName={cx(`${bc}__container`, {\n              [`${bc}__container--lower`]: verticalPosition === 'lower',\n              [`${bc}__container--mixed-size-stacking`]:\n                !areAllSameSizeVariant(),\n            })}\n            {...{ onClose, open, selectorPrimaryFocus }}\n            onKeyDown={keyDownListener}\n            preventCloseOnClickOutside={!isPassive}\n            ref={modalRef}\n            selectorsFloatingMenus={[\n              `.${carbonPrefix}--overflow-menu-options`,\n              `.${carbonPrefix}--tooltip`,\n              '.flatpickr-calendar',\n              `.${bc}__container`,\n              `.${carbonPrefix}--menu`,\n              ...selectorsFloatingMenus,\n            ]}\n            size=\"sm\"\n          >\n            {includeHeader && (\n              <ModalHeader\n                className={cx(`${bc}__header`, {\n                  [`${bc}__header--with-close-icon`]: effectiveHasCloseIcon,\n                  [`${bc}__header--with-nav`]: navigation,\n                })}\n                closeClassName={cx({\n                  [`${bc}__header--no-close-icon`]: !effectiveHasCloseIcon,\n                })}\n                closeModal={onClose}\n                iconDescription={\n                  effectiveHasCloseIcon ? closeIconDescription : undefined\n                }\n              >\n                <Section\n                  className={`${bc}__header-content`}\n                  element={wide ? Layer : undefined}\n                >\n                  <Wrap className={`${bc}__header-fields`}>\n                    {/* we create the label and title here instead of passing them\n                      as modal header props so we can wrap them in layout divs */}\n                    <Wrap className={`${bcModalHeader}__label`}>{label}</Wrap>\n                    <Section\n                      className={cx(\n                        `${bcModalHeader}__heading`,\n                        `${bc}__heading`\n                      )}\n                    >\n                      <Heading>{title}</Heading>\n                    </Section>\n                    <Wrap className={`${bc}__header-description`}>\n                      {description}\n                    </Wrap>\n                  </Wrap>\n                  <Wrap className={`${bc}__header-actions`}>\n                    {headerActions}\n                  </Wrap>\n                </Section>\n                <Wrap className={`${bc}__header-navigation`}>{navigation}</Wrap>\n              </ModalHeader>\n            )}\n            <Wrap\n              ref={modalBodyRef}\n              className={`${carbonPrefix}--modal-content ${bc}__body`}\n            >\n              {/* Left influencer */}\n              <Wrap\n                className={cx({\n                  [`${bc}__influencer`]: true,\n                  [`${bc}__influencer--wide`]: influencerWidth === 'wide',\n                })}\n                neverRender={influencerPosition === 'right'}\n                element={SectionLevel3}\n              >\n                <Wrap element={Layer} className={`${bc}__layer`}>\n                  {influencer}\n                </Wrap>\n              </Wrap>\n              <Wrap className={`${bc}__right`}>\n                {/* Main area */}\n                <Wrap className={`${bc}__main`} alwaysRender={includeActions}>\n                  <Wrap\n                    className={`${bc}__content`}\n                    alwaysRender={\n                      !!(influencer && influencerPosition === 'right')\n                    }\n                    element={SectionLevel3}\n                  >\n                    {wide ? (\n                      children\n                    ) : (\n                      <Wrap element={Layer} className={`${bc}__layer`}>\n                        {children}\n                      </Wrap>\n                    )}\n                  </Wrap>\n                  {/* Right influencer */}\n                  <Wrap\n                    className={cx({\n                      [`${bc}__influencer`]: true,\n                      [`${bc}__influencer--wide`]: influencerWidth === 'wide',\n                    })}\n                    neverRender={influencerPosition !== 'right'}\n                    element={SectionLevel3}\n                  >\n                    <Wrap element={Layer} className={`${bc}__layer`}>\n                      {influencer}\n                    </Wrap>\n                  </Wrap>\n                </Wrap>\n                {includeActions && (\n                  <Wrap className={`${bc}__button-container`}>\n                    <ActionSet\n                      actions={actions}\n                      buttonSize={wide ? '2xl' : undefined}\n                      className={`${bc}__buttons`}\n                      size={wide ? '2xl' : 'lg'}\n                      aria-hidden={!open}\n                    />\n                  </Wrap>\n                )}\n              </Wrap>\n            </Wrap>\n            <div className={`${bc}__resize-detector`} ref={resizer} />\n          </ComposedModal>\n        </FeatureFlags>\n      );\n    } else {\n      pconsole.warn('Tearsheet not rendered: maximum stacking depth exceeded.');\n      return null;\n    }\n  }\n);\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nTearsheetShell.displayName = componentName;\n\nexport const portalType =\n  typeof Element === 'undefined'\n    ? PropTypes.object\n    : // eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope\n      PropTypes.instanceOf(Element);\n\nexport const deprecatedProps = {\n  /**\n   *  @deprecated Property replaced by `decorator`\n   */\n  slug: deprecateProp(PropTypes.node, 'Property replaced by `decorator`'),\n\n  /**\n   * **Deprecated**\n   *\n   * The position of the top of tearsheet in the viewport. The 'normal'\n   * position is a short distance down from the top of the\n   * viewport, leaving room at the top for a global header bar to show through\n   * from below. The 'lower' position (the default) provides a little extra room at the top\n   * to allow an action bar navigation or breadcrumbs to also show through.\n   */\n  verticalPosition: PropTypes.oneOf(['normal', 'lower']),\n};\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\n\n// Note that the descriptions here should be kept in sync with those for the\n// corresponding props for Tearsheet and TearsheetNarrow components.\nTearsheetShell.propTypes = {\n  /**\n   * The actions to be shown as buttons in the action area at the bottom of the\n   * tearsheet. Each action is specified as an object with optional fields\n   * 'label' to supply the button label, 'kind' to select the button kind (must\n   * be 'primary', 'secondary' or 'ghost'), 'loading' to display a loading\n   * indicator, and 'onClick' to receive notifications when the button is\n   * clicked. Additional fields in the object will be passed to the Button\n   * component, and these can include 'disabled', 'ref', 'className', and any\n   * other Button props. Any other fields in the object will be passed through\n   * to the button element as HTML attributes.\n   *\n   * See https://react.carbondesignsystem.com/?path=/docs/components-button--default#component-api\n   */\n  /**@ts-ignore*/\n  actions: PropTypes.arrayOf(\n    // NB we don't include the validator here, as the component wrapping this\n    // one should ensure appropriate validation is done.\n    PropTypes.shape({\n      /**@ts-ignore*/\n      ...Button.propTypes,\n      kind: PropTypes.oneOf([\n        'ghost',\n        'danger--ghost',\n        'secondary',\n        'danger',\n        'primary',\n      ]),\n      label: PropTypes.string,\n      loading: PropTypes.bool,\n      // we duplicate this Button prop to improve the DocGen here\n      /**@ts-ignore*/\n      onClick: Button.propTypes.onClick,\n    })\n  ),\n\n  /**\n   * The main content of the tearsheet.\n   */\n  children: PropTypes.node,\n\n  /**\n   * An optional class or classes to be added to the outermost element.\n   */\n  className: PropTypes.string,\n\n  /**\n   * The accessibility title for the close icon (if shown).\n   *\n   * **Note:** This prop is only required if a close icon is shown, i.e. if\n   * there are a no navigation actions and/or hasCloseIcon is true.\n   */\n  /**@ts-ignore*/\n  closeIconDescription: PropTypes.string,\n\n  /**\n   * Optional prop that allows you to pass any component.\n   */\n  decorator: PropTypes.oneOfType([PropTypes.node, PropTypes.bool]),\n\n  /**\n   * A description of the flow, displayed in the header area of the tearsheet.\n   */\n  description: PropTypes.node,\n\n  /**\n   * Enable a close icon ('x') in the header area of the tearsheet. By default,\n   * (when this prop is omitted, or undefined or null) a tearsheet does not\n   * display a close icon if there are navigation actions (\"transactional\n   * tearsheet\") and displays one if there are no navigation actions (\"passive\n   * tearsheet\"), and that behavior can be overridden if required by setting\n   * this prop to either true or false.\n   */\n  /**@ts-ignore*/\n  hasCloseIcon: PropTypes.bool,\n\n  /**\n   * The content for the header actions area, displayed alongside the title in\n   * the header area of the tearsheet. This is typically a drop-down, or a set\n   * of small buttons, or similar. NB the headerActions is only applicable for\n   * wide tearsheets.\n   */\n  headerActions: PropTypes.element,\n\n  /**\n   * The content for the influencer section of the tearsheet, displayed\n   * alongside the main content. This is typically a menu, or filter, or\n   * progress indicator, or similar. NB the influencer is only applicable for\n   * wide tearsheets.\n   */\n  influencer: PropTypes.element,\n\n  /**\n   * The position of the influencer section, 'left' or 'right'.\n   */\n  influencerPosition: PropTypes.oneOf(['left', 'right']),\n\n  /**\n   * The width of the influencer: 'narrow' (the default) is 256px, and 'wide'\n   * is 320px.\n   */\n  influencerWidth: PropTypes.oneOf(['narrow', 'wide']),\n\n  /**\n   * A label for the tearsheet, displayed in the header area of the tearsheet\n   * to maintain context for the tearsheet (e.g. as the title changes from page\n   * to page of a multi-page task).\n   */\n  label: PropTypes.node,\n\n  /**\n   * Provide a ref to return focus to once the tearsheet is closed.\n   */\n  /**@ts-ignore */\n  launcherButtonRef: PropTypes.any,\n\n  /**\n   * Navigation content, such as a set of tabs, to be displayed at the bottom\n   * of the header area of the tearsheet. NB the navigation is only applicable\n   * for wide tearsheets.\n   */\n  navigation: PropTypes.element,\n\n  /**\n   * An optional handler that is called when the user closes the tearsheet (by\n   * clicking the close button, if enabled, or clicking outside, if enabled).\n   * Returning `false` here prevents the modal from closing.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specifies whether the tearsheet is currently open.\n   */\n  open: PropTypes.bool,\n\n  /**\n   * The DOM element that the tearsheet should be rendered within. Defaults to document.body.\n   */\n  /**@ts-ignore*/\n  portalTarget: portalType,\n\n  /**\n   * Specify a CSS selector that matches the DOM element that should be\n   * focused when the Modal opens.\n   */\n  selectorPrimaryFocus: PropTypes.string,\n\n  /**\n   * Specify the CSS selectors that match the floating menus.\n   *\n   * See https://react.carbondesignsystem.com/?path=/docs/components-composedmodal--overview#focus-management\n   */\n  /**@ts-ignore*/\n  selectorsFloatingMenus: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * Specifies the width of the tearsheet, 'narrow' or 'wide'.\n   */\n  /**@ts-ignore*/\n  size: PropTypes.oneOf(['narrow', 'wide']).isRequired,\n  /**\n   * The main title of the tearsheet, displayed in the header area.\n   */\n  title: PropTypes.node,\n  ...deprecatedProps,\n};\n"],"names":["bc","pkg","componentName","maxDepth","stack","tearsheetShellWideProps","tearsheetIsPassive","actions","tearsheetHasCloseIcon","hasCloseIcon","SectionLevel3","children","rest","Section","TearsheetShell","React","decorator","ariaLabel","className","closeIconDescription","currentStep","description","hasError","headerActions","influencer","influencerPosition","influencerWidth","label","navigation","onClose","open","portalTargetIn","selectorPrimaryFocus","selectorsFloatingMenus","size","deprecated_slug","title","verticalPosition","launcherButtonRef","ref","carbonPrefix","usePrefix","bcModalHeader","renderPortalUse","usePortalTarget","localRef","useRef","resizer","modalBodyRef","modalRef","width","useResizeObserver","prevOpen","usePreviousValue","keyDownListener","claimFocus","useFocus","wide","depth","setDepth","useState","position","setPosition","prevDepth","useEffect","isPassive","effectiveHasCloseIcon","handleStackChange","newDepth","newPosition","notify","handler","openIndex","areAllSameSizeVariant","useIsomorphicEffect","setScaleValues","key","value","includeHeader","includeActions","FeatureFlags","ComposedModal","getNodeTextContent","cx","ModalHeader","Layer","Wrap","Heading","ActionSet","portalType","PropTypes","deprecatedProps","deprecateProp","Button"],"mappings":"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"}