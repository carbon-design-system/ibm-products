import{b as te,F as ae,d as ne,v as re,P as t}from"./index-C360Eztx.js";import{p as B,B as _}from"./settings-CFkY3W_8.js";import{C as se,M as ie,a as oe,b as le}from"./ComposedModal-CJn3uPYK.js";import{F as pe}from"./FormGroup-DOeAvcbG.js";import{L as de}from"./InlineLoading-DwO_qCAY.js";import{P as me}from"./codePreviewer-DRSklQgQ.js";import{R as ue}from"./RadioButton-D-XNbmNx.js";import{R as ce}from"./RadioButtonGroup-D7T4QptB.js";import{T as fe}from"./TextInput-DJpFdpZP.js";import{r as s,e}from"./index-DtHxqM--.js";import{g as ye}from"./devtools-XPxnGn1y.js";import{u as ge}from"./usePortalTarget-CutnQ3UR.js";import{u as he}from"./uuidv4-BN2rGLQG.js";import{a as be}from"./bucket-6-BjeV6rPm.js";const y="ExportModal",k={preformattedExtensions:Object.freeze([]),validExtensions:Object.freeze([])};let o=s.forwardRef(({body:g,className:R,error:h,errorMessage:$,filename:p,hidePasswordLabel:P,inputLabel:C,inputType:O="text",invalidInputText:F,loading:d,loadingMessage:L,onClose:m,onRequestSubmit:u,open:b,portalTarget:I,preformattedExtensions:r=k.preformattedExtensions,preformattedExtensionsLabel:S,primaryButtonText:z,secondaryButtonText:j,showPasswordLabel:D,successMessage:H,successful:l,title:x,triggerButtonRef:V,validExtensions:c=k.validExtensions,...G},W)=>{const n=`${B.prefix}--export-modal`,[i,v]=s.useState(""),[A,U]=s.useState(!1),[f,T]=s.useState(""),J=ge(I),E=te();s.useEffect(()=>{var a,N;v(p),r&&r.length>0&&((a=r[0])!=null&&a.extension)&&T((N=r==null?void 0:r[0])==null?void 0:N.extension)},[p,r,b]),s.useEffect(()=>{if(l){const a=document.querySelector(`.${n} .${E}--modal-close-button button`);a==null||a.focus()}},[l,n,E]);const K=a=>{v(a.target.value)},Q=a=>{T(a)},X=()=>{U(!0)},Y=()=>{const a=f?`${p}.${f.toLocaleLowerCase()}`:i;u==null||u(a)},q=()=>{if(!A||!c||!c.length)return!1;if(!i.includes("."))return!0;const a=i.split(".").pop();return!c.includes(a)},Z=s.useRef(he()),ee=d||!i||q(),w=d||h||l,M={id:`text-input--${Z.current}`,value:i,onChange:K,labelText:C,invalid:q(),invalidText:F,onBlur:X,"data-modal-primary-focus":!0};return J(e.createElement(ae,{enableExperimentalFocusWrapWithoutSentinels:!0},e.createElement(se,{...G,className:ne(n,R),"aria-label":x,size:"sm",preventCloseOnClickOutside:!0,launcherButtonRef:V,open:b,ref:W,onClose:m,...ye(y)},e.createElement(ie,{className:`${n}__header`,closeModal:m,title:x}),e.createElement(oe,{className:`${n}__body-container`},!w&&e.createElement(e.Fragment,null,g&&e.createElement("p",{className:`${n}__body`},g),r.length?e.createElement(pe,{legendText:S},e.createElement(ce,{orientation:"vertical",onChange:Q,valueSelected:f,name:"extensions","aria-label":"extensions"},r.map(a=>e.createElement(ue,{key:a.extension,id:a.extension,value:a.extension,labelText:`${a.extension} (${a.description})`,"data-modal-primary-focus":!0})))):e.createElement("div",{className:`${n}__input-container`},O==="text"?e.createElement(fe,{...M}):e.createElement(me,{...M,showPasswordLabel:D,hidePasswordLabel:P,tooltipPosition:"left"}))),e.createElement("div",{"aria-live":"polite",className:`${n}__messaging`},d&&e.createElement(e.Fragment,null,e.createElement(de,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,L)),l&&e.createElement(e.Fragment,null,e.createElement(re,{size:16,className:`${n}__checkmark-icon`}),e.createElement("p",null,H)),h&&e.createElement(e.Fragment,null,e.createElement(be,{size:16,className:`${n}__error-icon`}),e.createElement("p",null,$)))),!w&&e.createElement(le,{className:`${n}__footer`},e.createElement(_,{type:"button",kind:"secondary",onClick:m},j),e.createElement(_,{type:"submit",kind:"primary",onClick:Y,disabled:ee},z)))))});o=B.checkComponentEnabled(o,y);o.propTypes={body:t.string,className:t.string,error:t.bool,errorMessage:t.string,filename:t.string.isRequired,hidePasswordLabel:t.string,inputLabel:t.string,inputType:t.oneOf(["text","password"]),invalidInputText:t.string,loading:t.bool,loadingMessage:t.string,onClose:t.func,onRequestSubmit:t.func,open:t.bool,portalTarget:t.node,preformattedExtensions:t.arrayOf(t.shape({extension:t.string,description:t.string})),preformattedExtensionsLabel:t.string,primaryButtonText:t.string.isRequired,secondaryButtonText:t.string.isRequired,showPasswordLabel:t.string,successMessage:t.string,successful:t.bool,title:t.string.isRequired,triggerButtonRef:t.any,validExtensions:t.array};o.displayName=y;o.__docgenInfo={description:"Modal dialog version of the export pattern",methods:[],displayName:"ExportModal",props:{body:{required:!1,tsType:{name:"string"},description:"Body content for the modal",type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"Optional class name",type:{name:"string"}},error:{required:!1,tsType:{name:"boolean"},description:"specify if an error occurred",type:{name:"bool"}},errorMessage:{required:!1,tsType:{name:"string"},description:"messaging to display in the event of an error",type:{name:"string"}},filename:{required:!0,tsType:{name:"string"},description:"name of the file being exported",type:{name:"string"}},hidePasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to hide key",type:{name:"string"}},inputLabel:{required:!1,tsType:{name:"string"},description:"label for the text input",type:{name:"string"}},inputType:{required:!1,tsType:{name:"union",raw:"'text' | 'password'",elements:[{name:"literal",value:"'text'"},{name:"literal",value:"'password'"}]},description:"specify the type of text input",defaultValue:{value:"'text'",computed:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'password'",computed:!1}]}},invalidInputText:{required:!1,tsType:{name:"string"},description:"text for an invalid input",type:{name:"string"}},loading:{required:!1,tsType:{name:"boolean"},description:"specify if the modal is in a loading state",type:{name:"bool"}},loadingMessage:{required:!1,tsType:{name:"string"},description:"message to display during the loading state",type:{name:"string"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Specify a handler for closing modal",type:{name:"func"}},onRequestSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:'Specify a handler for "submitting" modal. Returns the file name',type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specify whether the Modal is currently open",type:{name:"bool"}},portalTarget:{required:!1,tsType:{name:"ReactNode"},description:"The DOM node the tearsheet should be rendered within. Defaults to document.body.",type:{name:"node"}},preformattedExtensions:{required:!1,tsType:{name:"unknown"},description:"Array of extensions to display as radio buttons",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"arrayOf",value:{name:"shape",value:{extension:{name:"string",required:!1},description:{name:"string",required:!1}}}}},preformattedExtensionsLabel:{required:!1,tsType:{name:"string"},description:"Label for the preformatted label form group",type:{name:"string"}},primaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the primary button",type:{name:"string"}},secondaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the secondary button",type:{name:"string"}},showPasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to show key",type:{name:"string"}},successMessage:{required:!1,tsType:{name:"string"},description:"messaging to display if the export was successful",type:{name:"string"}},successful:{required:!1,tsType:{name:"boolean"},description:"specify if the export was successful",type:{name:"bool"}},title:{required:!0,tsType:{name:"string"},description:"The text displayed at the top of the modal",type:{name:"string"}},triggerButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Reference to trigger button",type:{name:"any"}},validExtensions:{required:!1,tsType:{name:"unknown"},description:"array of valid extensions the file can have",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"array"}}}};export{o as E};
