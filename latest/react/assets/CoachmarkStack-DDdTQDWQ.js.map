{"version":3,"file":"CoachmarkStack-DDdTQDWQ.js","sources":["../../src/components/CoachmarkStack/CoachmarkStackHome.tsx","../../src/components/CoachmarkStack/CoachmarkStack.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2023, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  forwardRef,\n  useRef,\n  useEffect,\n  useState,\n  ReactNode,\n} from 'react';\nimport pconsole from '../../global/js/utils/pconsole';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { Idea } from '@carbon/react/icons';\nimport { Button, Tooltip } from '@carbon/react';\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\nimport { pkg /*, carbon */ } from '../../settings';\nimport { createPortal } from 'react-dom';\nimport { CoachmarkHeader } from '../Coachmark/CoachmarkHeader';\nimport { useIsomorphicEffect } from '../../global/js/hooks';\nimport { ButtonProps } from '@carbon/react';\n\ntype TooltipAlignment = 'top' | 'bottom';\ninterface CoachmarkStackHomeProps {\n  /**\n   * Optional class name for this component.\n   */\n  className?: string;\n  /**\n   * The label for the button that will close the stack\n   */\n  closeButtonLabel?: string;\n  /**\n   * The description of the Coachmark.\n   */\n  description: React.ReactNode;\n  /**\n   * If the stack home is open.\n   */\n  isOpen: boolean;\n\n  /**\n   * Optional prop to render any media like images or any animated media.\n   */\n  renderMedia?: (params) => ReactNode;\n\n  /**\n   * The labels used to link to the stackable Coachmarks.\n   */\n  navLinkLabels: string[];\n  /**\n   * For internal use only by CoachmarkStack and CoachmarkStackHome.\n   */\n  onClickNavItem: (index: number) => void;\n  /**\n   * Function to call when the stack closes.\n   */\n  onClose: () => void;\n  /**\n   * By default, the CoachmarkStackHome will be appended to the end of `document.body`.\n   * The CoachmarkStackHome will remain persistent as the user navigates the app until\n   * the user closes the CoachmarkStackHome.\n   *\n   * Alternatively, the app developer can tightly couple the CoachmarkStackHome to a DOM\n   * element or other component by specifying a CSS selector. The CoachmarkStackHome will\n   * remain visible as long as that element remains visible or mounted. When the\n   * element is hidden or component is unmounted, the CoachmarkStackHome will disappear.\n   */\n  portalTarget?: string;\n  /**\n   * The title of the Coachmark.\n   */\n  title: string;\n  /**\n   * Label's tooltip position\n   */\n  tooltipAlign?: TooltipAlignment;\n}\n\n// Carbon and package components we use.\n/* TODO: @import(s) of carbon components and other package components. */\n\n// The block part of our conventional BEM class names (blockClass__E--M).\nconst blockClass = `${pkg.prefix}--coachmark-stacked-home`;\nconst overlayClass = `${pkg.prefix}--coachmark-overlay`;\nconst componentName = 'CoachmarkStackHome';\n\n/**\n * DO NOT USE. This component is for the exclusive use\n * of other Onboarding components.\n */\nexport const CoachmarkStackHome = forwardRef<\n  HTMLDivElement,\n  CoachmarkStackHomeProps\n>(\n  (\n    {\n      className,\n      description,\n      isOpen,\n      renderMedia,\n      navLinkLabels,\n      onClickNavItem,\n      onClose,\n      portalTarget,\n      closeButtonLabel,\n      title,\n      tooltipAlign,\n      ...rest\n    },\n    ref\n  ) => {\n    const buttonFocusRef = useRef<ButtonProps<React.ElementType> | null>(null);\n    const [linkFocusIndex, setLinkFocusIndex] = useState(0);\n    const navItemRefs = useRef<(HTMLLIElement | null)[]>([]);\n    const [overflowStates, setOverflowStates] = useState<boolean[]>([]);\n\n    useEffect(() => {\n      setTimeout(() => {\n        if (isOpen && buttonFocusRef.current) {\n          buttonFocusRef.current.focus();\n        }\n      }, 100);\n    }, [isOpen]);\n\n    const portalNode = useRef<Element | null>(null);\n\n    useIsomorphicEffect(() => {\n      portalNode.current = portalTarget\n        ? (document?.querySelector(portalTarget) ??\n          document?.querySelector('body'))\n        : document?.querySelector('body');\n    }, [portalTarget]);\n\n    if (!navLinkLabels) {\n      return pconsole.warn(\n        `${componentName} is an Onboarding internal component and is not intended for general use.`\n      );\n    }\n\n    const itemRefHandler = (index, node) => {\n      if (node && navItemRefs.current[index] !== node) {\n        const isOverflowing = node.scrollWidth > node.clientWidth;\n        navItemRefs.current[index] = node;\n        setOverflowStates((prev) => {\n          const newState = [...prev];\n          newState[index] = isOverflowing;\n          return newState;\n        });\n      }\n    };\n\n    function renderNavLink(\n      index,\n      label,\n      ref: React.RefObject<ButtonProps<React.ElementType>> | null = null\n    ) {\n      const isOverflowing = overflowStates[index] ?? false;\n\n      return (\n        <li\n          key={index}\n          ref={(node) => {\n            itemRefHandler(index, node);\n          }}\n        >\n          <Button\n            kind=\"ghost\"\n            size=\"sm\"\n            onClick={() => {\n              setLinkFocusIndex(index);\n              onClickNavItem(index + 1);\n            }}\n            ref={ref}\n          >\n            {isOverflowing ? (\n              <Tooltip\n                highContrast={false}\n                label={label}\n                align={tooltipAlign}\n                className={`${blockClass}__navLinkLabels-tooltip`}\n              >\n                <span className={`${blockClass}__navLinkLabels-text`}>\n                  {label}\n                </span>\n              </Tooltip>\n            ) : (\n              label\n            )}\n          </Button>\n        </li>\n      );\n    }\n\n    return portalNode?.current\n      ? createPortal(\n          <div\n            {\n              // Pass through any other property values as HTML attributes.\n              ...rest\n            }\n            className={cx(blockClass, className)}\n            ref={ref}\n            {...getDevtoolsProps(componentName)}\n          >\n            <CoachmarkHeader\n              onClose={() => {\n                setLinkFocusIndex(0);\n                onClose();\n              }}\n            />\n            <div className={`${overlayClass}__body`}>\n              <div className={`${overlayClass}-element`}>\n                {!renderMedia && (\n                  <Idea size={20} className={`${blockClass}__icon-idea`} />\n                )}\n\n                {renderMedia && (\n                  <div className={`${blockClass}__element-stepped-media`}>\n                    {renderMedia({ playStep: 0 })}\n                  </div>\n                )}\n\n                <div className={`${overlayClass}-element__content`}>\n                  {title && (\n                    <h2 className={`${overlayClass}-element__title`}>\n                      {title}\n                    </h2>\n                  )}\n                  {description && (\n                    <p className={`${overlayClass}-element__body`}>\n                      {description}\n                    </p>\n                  )}\n                </div>\n\n                <ul className={`${blockClass}__nav-links`}>\n                  {navLinkLabels.map((label, index) => {\n                    if (index === linkFocusIndex) {\n                      return renderNavLink(\n                        index,\n                        label,\n                        buttonFocusRef as React.RefObject<\n                          ButtonProps<React.ElementType>\n                        >\n                      );\n                    }\n                    return renderNavLink(index, label);\n                  })}\n                </ul>\n                {closeButtonLabel && (\n                  <div className={`${overlayClass}__footer`}>\n                    <Button\n                      size=\"sm\"\n                      onClick={() => {\n                        setLinkFocusIndex(0);\n                        onClose();\n                      }}\n                    >\n                      {closeButtonLabel}\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>,\n          portalNode?.current\n        )\n      : null;\n  }\n);\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nCoachmarkStackHome.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nCoachmarkStackHome.propTypes = {\n  /**\n   * Optional class name for this component.\n   */\n  className: PropTypes.string,\n  /**\n   * The label for the button that will close the stack\n   */\n  closeButtonLabel: PropTypes.string,\n  /**\n   * The description of the Coachmark.\n   */\n  description: PropTypes.node.isRequired,\n  /**\n   * If the stack home is open.\n   */\n  isOpen: PropTypes.bool.isRequired,\n\n  /**\n   * The labels used to link to the stackable Coachmarks.\n   */\n  navLinkLabels: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  /**\n   * For internal use only by CoachmarkStack and CoachmarkStackHome.\n   */\n  onClickNavItem: PropTypes.func.isRequired,\n  /**\n   * Function to call when the stack closes.\n   */\n  onClose: PropTypes.func.isRequired,\n  /**\n   * By default, the CoachmarkStackHome will be appended to the end of `document.body`.\n   * The CoachmarkStackHome will remain persistent as the user navigates the app until\n   * the user closes the CoachmarkStackHome.\n   *\n   * Alternatively, the app developer can tightly couple the CoachmarkStackHome to a DOM\n   * element or other component by specifying a CSS selector. The CoachmarkStackHome will\n   * remain visible as long as that element remains visible or mounted. When the\n   * element is hidden or component is unmounted, the CoachmarkStackHome will disappear.\n   */\n  portalTarget: PropTypes.string,\n  /**\n   * Optional prop to render any media like images or animated media.\n   */\n  renderMedia: PropTypes.func,\n\n  /**\n   * The title of the Coachmark.\n   */\n  title: PropTypes.string.isRequired,\n  /**\n   * Label's tooltip position\n   */\n  tooltipAlign: PropTypes.oneOf(['top', 'bottom']),\n};\n","/**\n * Copyright IBM Corp. 2023, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Import portions of React that are needed.\nimport React, {\n  Children,\n  useEffect,\n  useRef,\n  useState,\n  useCallback,\n  ReactNode,\n} from 'react';\nimport { createPortal } from 'react-dom';\n\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\nimport { pkg /*, carbon */ } from '../../settings';\n\n// Carbon and package components we use.\n/* TODO: @import(s) of carbon components and other package components. */\n\n// The block part of our conventional BEM class names (blockClass__E--M).\nconst blockClass = `${pkg.prefix}--coachmark-stack`;\nconst componentName = 'CoachmarkStack';\nconst elementBlockClass = `${pkg.prefix}--coachmark-stack-element`;\n\nimport { CoachmarkOverlay } from '../Coachmark/CoachmarkOverlay';\nimport { CoachmarkStackHome } from './CoachmarkStackHome';\nimport { CoachmarkTagline } from '../Coachmark/CoachmarkTagline';\nimport {\n  CoachmarkContext,\n  CoachmarkContextType,\n} from '../Coachmark/utils/context';\nimport { COACHMARK_OVERLAY_KIND } from '../Coachmark/utils/enums';\nimport { useIsomorphicEffect } from '../../global/js/hooks';\n\ntype TooltipAlignment = 'top' | 'bottom';\ninterface CoachmarkStackProps {\n  /**\n   * CoachmarkStack should use a single CoachmarkOverlayElements component as a child.\n   */\n  children: ReactNode;\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className?: string;\n  /**\n   * The label for the button that will close the Stack\n   */\n  closeButtonLabel?: string;\n  // Pass through to CoachmarkStackHome\n  /**\n   * The description of the Coachmark.\n   */\n  description: ReactNode;\n  /**\n   * Optional prop to render any media like images or any animated media.\n   */\n  renderMedia?: (params) => ReactNode;\n  /**\n   * The labels used to link to the stackable Coachmarks.\n   */\n  navLinkLabels: string[];\n  /**\n   * Function to call when the CoachmarkStack closes.\n   */\n  onClose?: () => void;\n  /**\n   * Where in the DOM to render the stack.\n   * The default is `document.body`.\n   */\n  portalTarget?: string;\n  /**\n   * The tagline title which will be fixed to the bottom right of the window and will serve as the display trigger.\n   */\n  tagline: string;\n  /**\n   * Determines the theme of the component.\n   */\n  theme?: 'light' | 'dark';\n  /**\n   * The title of the Coachmark.\n   */\n  title: string;\n  /**\n   * Label's tooltip position\n   */\n  tooltipAlign?: TooltipAlignment;\n  /**\n   * Tooltip text and aria label for the Close button icon.\n   */\n  closeIconDescription?: string;\n}\n\nconst defaults = {\n  onClose: () => {},\n  // Pass through to CoachmarkStackHome\n  theme: 'light',\n  portalTarget: 'body',\n};\n\n// NOTE\n// The stack is limited to a depth of two Coachmarks:\n// - a single parent CoachmarkStackHome\n// - a single child Coachmark when stacked\n// The parent will include links to all the children.\n// No child Coachmark will include links to any other child Coachmarks.\n\n/**\n * Stacked coachmarks are used to call out specific functionality or concepts\n * within the UI that may not be intuitive but are important for the\n * user to gain understanding of the product's main value and discover new use cases.\n * This variant allows the stacking of multiple coachmark overlays to be displayed by interacting with the tagline.\n * @deprecated This component is deprecated.\n */\nexport const CoachmarkStack = React.forwardRef<\n  HTMLDivElement,\n  CoachmarkStackProps\n>(\n  (\n    {\n      children,\n      className,\n      onClose = defaults.onClose,\n      // Pass through to CoachmarkStackHome\n      description,\n      renderMedia,\n      navLinkLabels,\n      portalTarget = defaults.portalTarget,\n      closeButtonLabel,\n      tagline,\n      theme = defaults.theme,\n      title,\n      tooltipAlign,\n      closeIconDescription,\n      ...rest\n    },\n    ref\n  ) => {\n    const portalNode = useRef<HTMLBodyElement | null>(null);\n\n    useIsomorphicEffect(() => {\n      portalNode.current = portalTarget\n        ? (document?.querySelector(portalTarget) ??\n          document?.querySelector('body'))\n        : document?.querySelector('body');\n    }, [portalTarget]);\n\n    const stackHomeRef = useRef<HTMLDivElement | null>(null);\n    const stackedCoachmarkRefs = useRef<HTMLDivElement[]>([]);\n    const [isOpen, setIsOpen] = useState(false);\n    // selectedItemNumber -1 = parent close button was clicked, remove entire stack\n    // selectedItemNumber 0 = (default) the parent is visible, all children are hidden\n    // selectedItemNumber 1+ = a child is visible and stacked atop the parent\n    const [selectedItemNumber, setSelectedItemNumber] = useState(0);\n    // // The parent height and width values to return to after unstacked\n    const [parentHeight, setParentHeight] = useState<number>();\n    // parent height = child height when stacked behind a child that is shorter\n    const childArray = Children.toArray(children);\n    const mountedRef = useRef<boolean | undefined>(undefined);\n    // same value as CSS animation speed\n    const delayMs = 240;\n\n    // Unmount or unstack a child\n    const handleClickNavItem = (itemNumber) => {\n      setSelectedItemNumber(itemNumber);\n    };\n    const handleClose = useCallback(\n      (isParentCloseButton) => {\n        if (isParentCloseButton) {\n          // Trigger slide-out animation\n          setSelectedItemNumber(-1);\n\n          // Unmount after animation is complete\n          const timer = setTimeout(() => {\n            setIsOpen(false);\n            onClose();\n          }, delayMs);\n          return () => clearTimeout(timer);\n        } else {\n          // Unstack child\n          setSelectedItemNumber(0);\n        }\n      },\n      [onClose]\n    );\n    const escFunction = useCallback(\n      (event) => {\n        if (event.key === 'Escape') {\n          if (selectedItemNumber === 0) {\n            handleClose(true);\n          } else {\n            handleClose(false);\n          }\n        }\n      },\n      [handleClose, selectedItemNumber]\n    );\n\n    useEffect(() => {\n      document.addEventListener('keydown', escFunction, false);\n\n      return () => {\n        document.removeEventListener('keydown', escFunction, false);\n      };\n    }, [escFunction]);\n\n    const contextValue: CoachmarkContextType = {\n      buttonProps: {\n        tabIndex: 0,\n        'aria-expanded': isOpen,\n        onClick: () => {\n          setIsOpen(true);\n        },\n        // Compensate for accidental open/close on double-click.\n        // Only open on double-click.\n        onDoubleClick: () => {\n          setIsOpen(true);\n        },\n      },\n      closeButtonProps: {\n        onClick: () => handleClose(false),\n      },\n      isOpen: isOpen,\n      closeIconDescription,\n    };\n    useEffect(() => {\n      mountedRef.current = true;\n      return () => {\n        mountedRef.current = false;\n      };\n    }, []);\n\n    useEffect(() => {\n      const targetSelectedItem = selectedItemNumber - 1;\n      if (!parentHeight) {\n        if (stackHomeRef.current) {\n          const height = stackHomeRef.current.clientHeight;\n          if (height > 0) {\n            setParentHeight(height);\n          }\n        }\n        return;\n      }\n\n      if (stackHomeRef.current) {\n        stackHomeRef.current.style.height = `${parentHeight}px`;\n      }\n\n      if (!isOpen || targetSelectedItem < 0) {\n        if (stackHomeRef.current) {\n          stackHomeRef.current.classList.remove(`${blockClass}--scaled-home`);\n          stackHomeRef.current.classList.add(`${blockClass}--unscaled-home`);\n          stackHomeRef.current.focus();\n        }\n        return;\n      }\n\n      const targetHomeHeight =\n        stackedCoachmarkRefs.current[targetSelectedItem].clientHeight;\n\n      if (stackHomeRef.current) {\n        stackHomeRef.current.style.height = `calc(${targetHomeHeight}px + 3rem)`;\n        stackedCoachmarkRefs.current[targetSelectedItem].focus();\n        stackHomeRef.current.classList.remove(`${blockClass}--unscaled-home`);\n        stackHomeRef.current.classList.add(`${blockClass}--scaled-home`);\n      }\n    }, [selectedItemNumber, isOpen, parentHeight]);\n\n    const wrappedChildren = Children.map(childArray, (child, idx) => {\n      const mountedClass = mountedRef.current\n        ? `${elementBlockClass}--is-mounted`\n        : '';\n      return (\n        <CoachmarkOverlay\n          key={idx}\n          ref={(ref) => {\n            stackedCoachmarkRefs.current[idx] = ref as HTMLDivElement;\n          }}\n          kind={COACHMARK_OVERLAY_KIND.STACKED}\n          onClose={() => handleClose(false)}\n          theme={theme}\n          fixedIsVisible={false}\n          className={cx(\n            elementBlockClass,\n            mountedClass,\n            idx === selectedItemNumber - 1 &&\n              `${elementBlockClass}--is-visible`,\n            mountedRef.current && `${elementBlockClass}--is-mounted`\n          )}\n        >\n          {child}\n        </CoachmarkOverlay>\n      );\n    });\n\n    return (\n      <CoachmarkContext.Provider value={contextValue}>\n        <div\n          {\n            // Pass through any other property values as HTML attributes.\n            ...rest\n          }\n          className={cx(\n            blockClass,\n            `${pkg.prefix}--coachmark-overlay--stack`,\n            className\n          )}\n          ref={ref}\n          {...getDevtoolsProps(componentName)}\n        >\n          <CoachmarkTagline title={tagline} onClose={onClose} />\n\n          <CoachmarkStackHome\n            ref={stackHomeRef}\n            className={cx(\n              `${pkg.prefix}--coachmark-overlay`,\n              `${pkg.prefix}--coachmark-overlay__${theme}`,\n              elementBlockClass,\n              selectedItemNumber > 0 && `${elementBlockClass}--is-stacked`,\n              selectedItemNumber > 0 &&\n                `${elementBlockClass}--is-stacked__${theme}`,\n              isOpen && `${elementBlockClass}--is-visible`,\n              mountedRef.current && `${elementBlockClass}--is-mounted`\n            )}\n            isOpen={isOpen && selectedItemNumber < 1}\n            description={description}\n            renderMedia={renderMedia}\n            navLinkLabels={navLinkLabels}\n            onClickNavItem={handleClickNavItem}\n            onClose={() => {\n              handleClose(true);\n            }}\n            portalTarget={portalTarget}\n            closeButtonLabel={closeButtonLabel}\n            title={title}\n            tooltipAlign={tooltipAlign}\n          />\n          {portalNode?.current\n            ? createPortal(wrappedChildren, portalNode?.current)\n            : null}\n        </div>\n      </CoachmarkContext.Provider>\n    );\n  }\n);\n\n/**@ts-ignore*/\nCoachmarkStack.deprecated = {\n  level: 'warn',\n  details: `${componentName} is deprecated.`,\n};\n\n// Return a placeholder if not released and not enabled by feature flag\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nCoachmarkStack.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nCoachmarkStack.propTypes = {\n  /**\n   * CoachmarkStack should use a single CoachmarkOverlayElements component as a child.\n   */\n  children: PropTypes.node.isRequired,\n\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n\n  /**\n   * The label for the button that will close the Stack\n   */\n  closeButtonLabel: PropTypes.string,\n\n  /**\n   * Tooltip text and aria label for the Close button icon.\n   */\n  closeIconDescription: PropTypes.string,\n\n  // Pass through to CoachmarkStackHome\n  /**\n   * The description of the Coachmark.\n   */\n  description: PropTypes.node.isRequired,\n\n  /**\n   * The labels used to link to the stackable Coachmarks.\n   */\n  navLinkLabels: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n\n  /**\n   * Function to call when the CoachmarkStack closes.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Where in the DOM to render the stack.\n   * The default is `document.body`.\n   */\n  portalTarget: PropTypes.string,\n\n  /**\n   * Optional prop to render any media like images or animated media.\n   */\n  renderMedia: PropTypes.func,\n\n  /**\n   * The tagline title which will be fixed to the bottom right of the window and will serve as the display trigger.\n   */\n  tagline: PropTypes.string.isRequired,\n\n  /**\n   * Determines the theme of the component.\n   */\n  theme: PropTypes.oneOf(['light', 'dark']),\n  /**\n   * The title of the Coachmark.\n   */\n  title: PropTypes.string.isRequired,\n  /**\n   * Label's tooltip position\n   */\n  tooltipAlign: PropTypes.oneOf(['top', 'bottom']),\n};\n"],"names":["blockClass","pkg","overlayClass","componentName","CoachmarkStackHome","forwardRef","className","description","isOpen","renderMedia","navLinkLabels","onClickNavItem","onClose","portalTarget","closeButtonLabel","title","tooltipAlign","rest","ref","buttonFocusRef","useRef","linkFocusIndex","setLinkFocusIndex","useState","navItemRefs","overflowStates","setOverflowStates","useEffect","portalNode","useIsomorphicEffect","pconsole","itemRefHandler","index","node","isOverflowing","prev","newState","renderNavLink","label","React","Button","Tooltip","createPortal","cx","getDevtoolsProps","CoachmarkHeader","Idea","PropTypes","elementBlockClass","defaults","CoachmarkStack","children","tagline","theme","closeIconDescription","stackHomeRef","stackedCoachmarkRefs","setIsOpen","selectedItemNumber","setSelectedItemNumber","parentHeight","setParentHeight","childArray","Children","mountedRef","delayMs","handleClickNavItem","itemNumber","handleClose","useCallback","isParentCloseButton","timer","escFunction","event","contextValue","targetSelectedItem","height","targetHomeHeight","wrappedChildren","child","idx","mountedClass","CoachmarkOverlay","COACHMARK_OVERLAY_KIND","CoachmarkContext","CoachmarkTagline"],"mappings":"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"}