import{R as s,r as S}from"./index-BwDkhjyp.js";import{a as Y}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{I as we,D as j,a as Pe,m as fe,u as ge,b as Ie}from"./_storybook-styles-BIyeN6xl.js";import{S as ke}from"./StoryDocsPage-ohgCD2zx.js";import{D as ye}from"./DatagridActions-G0ND-Mi5.js";import{D as be}from"./DatagridPagination-woIT_spq.js";import{A as O}from"./getArgTypes-CUsKgYxs.js";import{c as K,b8 as Ae}from"./index-CO-HQMMN.js";import{p as M,B as Re,bx as Ce}from"./settings-9_3hiHpE.js";import{W as he}from"./index-C_eOEul8.js";import{r as He}from"./index.esm-BAPKfp34.js";import{P as o,p as W}from"./index-Dk74W0Oi.js";import"./feature-flags-AXXmAEUF.js";import{C as Te}from"./Checkbox-78mZcw5K.js";import{g as Se}from"./_commonjsHelpers-BosuxZz1.js";import{b as Ne,c as Oe}from"./index-C0xX6qoh.js";import{u as Ve,C as Be,a as ae,P as Fe,K as Me,b as We,D as Ge,c as Ue,r as Ye,e as Je,S as Ke,v as Qe}from"./modifiers.esm-C4IbBq9K.js";import{c as Xe}from"./bucket-5-DLUbIH5T.js";import{a as Ze}from"./bucket-10-DgP_ha3n.js";import{g as G}from"./getNodeTextContent-C8IeKkUQ.js";import{u as je}from"./uuidv4-BQrI85uz.js";import{S as et}from"./Search-Bca_YerL.js";import{T as tt}from"./TearsheetNarrow-DbIZYCDt.js";import{u as rt}from"./useActionsColumn-Da1QrBgD.js";import{u as st}from"./useStickyColumn-BBcJ4sEV.js";import{a as ve}from"./bucket-6-DcTgwLU8.js";import{T as xe}from"./bucket-17-ClE8iwID.js";import{C as ot}from"./bucket-2-Bt1jIBkN.js";import"./v4-CQkTLCs1.js";import"./devtools-7ohusRRR.js";import"./TableRow-DhScMThG.js";import"./index-DQ9l4IMz.js";import"./wrapComponent-CtH_5A9t.js";import"./bucket-0-a_zZqU1p.js";import"./TableToolbar-BPuz1HRW.js";import"./Text-DeIkfaUm.js";import"./ErrorEmptyState-D3uKM-CF.js";import"./Link-1779lvRe.js";import"./EmptyState-MmqFbPGo.js";import"./props-helper-2oDpPmvU.js";import"./EmptyStateV2-DxoffY8u.js";import"./iframe-BleUBiry.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-CWTkDKb2.js";import"./index-BONylQH5.js";import"./index-CJvxHwuA.js";import"./events-OVwOsPzJ.js";import"./NoDataEmptyState-DjuBxuBV.js";import"./NoDataIllustration-BBVEDCbB.js";import"./NotFoundEmptyState-BEoIyMfH.js";import"./NotFoundIllustration-93UN-7f2.js";import"./useResizeObserver-CYrpFlRY.js";import"./useIsomorphicEffect-D7JMtAof.js";import"./useWindowResize-D9ZeDfzU.js";import"./useControllableState-DwpxGhsf.js";import"./useAttachedMenu-CUrQfPQx.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-CeOnRtOi.js";import"./useClickOutside-Dcd11u7q.js";import"./AccordionItem-coiinT6v.js";import"./index-Y0d6iLU4.js";import"./LayerContext-DbU-6VX4.js";import"./motionConstants-CR5hPmRc.js";import"./tslib.es6-B4_xh3D5.js";import"./use-reduced-motion-BisnjenD.js";import"./index-DkUr2NOz.js";import"./ActionSet-CseuYsKo.js";import"./ButtonSet-Cn6zokRw.js";import"./InlineLoading-BdVs8Ys4.js";import"./DatePicker-DAE6aAKW.js";import"./FormContext-C7kRVu4t.js";import"./bucket-18-BI__9nmH.js";import"./bucket-1-CErLq4nZ.js";import"./Dropdown-CIyg-5U1.js";import"./index-Czv2bu3D.js";import"./extends-CCbyfPlC.js";import"./index-DcAOwtUU.js";import"./FormGroup-C6KGJYle.js";import"./NumberInput-CIYFWR2V.js";import"./useNormalizedInputProps-BXOXUZo5.js";import"./bucket-16-C765DF6-.js";import"./RadioButton-DLr_wNA0.js";import"./RadioButtonGroup-CVuKOGBL.js";import"./MultiSelect-lvyoAb38.js";import"./usePreviousValue-Cw-zRxyE.js";import"./debounce-CI22LTdx.js";import"./toNumber-DVQITUtX.js";import"./TagSet-Cz_7UaJI.js";import"./Tag-CzJ1JcPE.js";import"./DefinitionTooltip-Bt_QaLsT.js";import"./DismissibleTag-kip0D0g7.js";import"./ComposedModal-COQTPQ85.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-gin0UG4f.js";import"./usePortalTarget-CBi58TPO.js";import"./OperationalTag-C8RAue0F.js";import"./SkeletonText-6ZJzUUul.js";import"./bucket-14-mit-FcZ1.js";import"./index-C5SNi40Q.js";import"./bucket-7-4HCVGIgn.js";import"./index-CHtKUyL9.js";import"./index-C2eUe6cH.js";import"./index-DrFu-skq.js";import"./story-helper-6_fmjwZ-.js";import"./index-Do3G8CTu.js";import"./bucket-12-BR4Aca2V.js";import"./TableToolbarSearch-OSxKeChy.js";import"./Select-BrrhfnHl.js";import"./SelectItem-6Xvx7oKV.js";import"./index-Db6axI1E.js";import"./bucket-9-CnK3eVdV.js";import"./TearsheetShell-DY0OIocw.js";import"./useFocus-CpNJuhjW.js";import"./wait-CTNFjQS8.js";var Z={exports:{}};(function(r,i){Object.defineProperty(i,"__esModule",{value:!0});function n(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}var f=typeof process=="object"&&!0;function u(e,t){if(!e)throw f?new Error("Invariant failed"):new Error(t())}i.invariant=u;var y=Object.prototype.hasOwnProperty,h=Array.prototype.splice,b=Object.prototype.toString;function m(e){return b.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return _(t).forEach(function(d){y.call(t,d)&&(e[d]=t[d])}),e},_=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function z(e){return Array.isArray(e)?c(e.constructor(e.length),e):m(e)==="Map"?new Map(e):m(e)==="Set"?new Set(e):e&&typeof e=="object"?c(Object.create(Object.getPrototypeOf(e)),e):e}var k=function(){function e(){this.commands=c({},R),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,d){return t===d},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),e.prototype.extend=function(t,d){this.commands[t]=d},e.prototype.update=function(t,d){var p=this,l=typeof d=="function"?{$apply:d}:d;Array.isArray(t)&&Array.isArray(l)||u(!Array.isArray(l),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),u(typeof l=="object"&&l!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(p.commands).join(", ")+".")});var T=t;return _(l).forEach(function(q){if(y.call(p.commands,q)){var $=t===T;T=p.commands[q](l[q],T,l,t),$&&p.isEquals(T,t)&&(T=t)}else{var D=m(t)==="Map"?p.update(t.get(q),l[q]):p.update(t[q],l[q]),H=m(T)==="Map"?T.get(q):T[q];(!p.isEquals(D,H)||typeof D>"u"&&!y.call(t,q))&&(T===t&&(T=z(t)),m(T)==="Map"?T.set(q,D):T[q]=D)}}),T},e}();i.Context=k;var R={$push:function(e,t,d){return w(t,d,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,d){return w(t,d,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,d,p){return a(t,d),e.forEach(function(l){C(l),t===p&&l.length&&(t=z(p)),h.apply(t,l)}),t},$set:function(e,t,d){return g(d),e},$toggle:function(e,t){P(e,"$toggle");var d=e.length?z(t):t;return e.forEach(function(p){d[p]=!t[p]}),d},$unset:function(e,t,d,p){return P(e,"$unset"),e.forEach(function(l){Object.hasOwnProperty.call(t,l)&&(t===p&&(t=z(p)),delete t[l])}),t},$add:function(e,t,d,p){return A(t,"$add"),P(e,"$add"),m(t)==="Map"?e.forEach(function(l){var T=l[0],q=l[1];t===p&&t.get(T)!==q&&(t=z(p)),t.set(T,q)}):e.forEach(function(l){t===p&&!t.has(l)&&(t=z(p)),t.add(l)}),t},$remove:function(e,t,d,p){return A(t,"$remove"),P(e,"$remove"),e.forEach(function(l){t===p&&t.has(l)&&(t=z(p)),t.delete(l)}),t},$merge:function(e,t,d,p){return v(t,e),_(e).forEach(function(l){e[l]!==t[l]&&(t===p&&(t=z(p)),t[l]=e[l])}),t},$apply:function(e,t){return x(e),e(t)}},L=new k;i.isEquals=L.update.isEquals,i.extend=L.extend,i.default=L.update,i.default.default=r.exports=c(i.default,i);function w(e,t,d){u(Array.isArray(e),function(){return"update(): expected target of "+n(d)+" to be an array; got "+n(e)+"."}),P(t[d],d)}function P(e,t){u(Array.isArray(e),function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"})}function a(e,t){u(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+n(e)}),C(t.$splice)}function C(e){u(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"})}function x(e){u(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got "+n(e)+"."})}function g(e){u(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function v(e,t){u(t&&typeof t=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+n(t)}),u(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got "+n(e)})}function A(e,t){var d=m(e);u(d==="Map"||d==="Set",function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(d)})}})(Z,Z.exports);var it=Z.exports;const nt=Se(it);var at=Ne,lt=Oe,dt="[object Boolean]";function ct(r){return r===!0||r===!1||lt(r)&&at(r)==dt}var ut=ct;const mt=Se(ut),X=r=>mt(r.isVisible)?r.isVisible:!0,N=`${M.prefix}--datagrid`,ee=({id:r,children:i,classList:n,disabled:f,ariaLabel:u,isSticky:y,selected:h})=>{const{attributes:b,isDragging:m,listeners:c,setNodeRef:_,transform:z,transition:k}=Ve({disabled:f,id:r}),R=s.createElement(s.Fragment,null,s.createElement("div",{className:K({disabled:f},`${N}__draggable-handleStyle`)},y?s.createElement(Ze,{size:16}):s.createElement(Xe,{size:16})),i),L={transform:f?void 0:Be.Transform.toString(z),transition:k};return s.createElement("li",{className:K(n,`${N}__draggable-handleHolder`,{[`${N}__draggable-handleHolder--selected`]:h,[`${N}__draggable-handleHolder--sticky`]:y,[`${N}__draggable-handleHolder--dragging`]:m}),id:r,ref:_,style:L,...b,...c,"aria-disabled":void 0,"aria-selected":h,role:"option"},s.createElement("span",{className:`${N}__shared-ui--assistive-text`},u),s.createElement("div",{className:K({[`${N}__draggable-handleStyle`]:!f},[`${N}__draggable-handleHolder-droppable`])},R))};ee.propTypes={ariaLabel:o.string.isRequired,children:o.element.isRequired,classList:o.string,disabled:o.bool,id:o.string.isRequired,isSticky:o.bool,selected:o.bool};ee.__docgenInfo={description:"",methods:[],displayName:"DraggableElement",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},children:{required:!0,tsType:{name:"ReactNode"},description:"",type:{name:"element"}},classList:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},id:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},isSticky:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},selected:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}}},composes:["PropsWithChildren"]};const U=`${M.prefix}--datagrid`,V=(r,i)=>r&&i&&r.id===i.id,te=({columns:r,filterString:i,id:n,moveElement:f,onSelectColumn:u,setAriaRegionText:y})=>{const h=`${U}__draggable-item`,b=r.filter(a=>G(a.Header).trim().length!==0).filter(Boolean).filter(a=>!a.isAction).filter(a=>a.id!=="spacer").filter(a=>i.length===0||G(a.Header).toLowerCase().includes(i)),c=(()=>{const a=[...b];return a.forEach(C=>{C.sticky&&(C.disabled=!0)}),a})(),_=a=>{var p;const{active:C,over:x}=a,g=c.filter(l=>l.id===x.id);if(g!=null&&g.length&&((p=g[0])!=null&&p.disabled))return;const v=c.findIndex(l=>V(l,C)),A=c.findIndex(l=>V(l,x)),e=G(c[v].Header);y(`${e} dropped. New position ${A+1} of ${c.length}.`);const t=r.findIndex(l=>V(l,C)),d=r.findIndex(l=>V(l,x));f(t,d)},z=a=>{const{active:C}=a,x=c.findIndex(v=>V(v,C)),g=G(c[x].Header);y(`${g} grabbed. Current position ${x+1} of ${c.length}.`)},k=a=>{const{active:C,over:x}=a,g=c.findIndex(e=>V(e,C)),v=c.findIndex(e=>V(e,x)),A=G(c[g].Header);y(`${A} grabbed. Original position ${g+1}, new position ${v+1} of ${c.length}.`)},R=ae(Fe,{activationConstraint:{distance:4}}),L=ae(Me,{coordinateGetter:(a,C)=>{const{currentCoordinates:x}=C;let g=a.target;for(;g&&!g.classList.contains(h);)g=g.parentNode;const v=g.offsetHeight;switch(a.code){case"ArrowRight":case"ArrowLeft":return x;case"ArrowUp":return{...x,y:x.y-v};case"ArrowDown":return{...x,y:x.y+v}}}}),w=We(R,L),P=(a,C)=>{if(a.code==="Space")return u(C,!X(C)),a.preventDefault(),a.stopPropagation(),!1};return s.createElement(Ge,{collisionDetection:Ue,onDragEnd:_,onDragStart:z,onDragMove:k,sensors:w,modifiers:[Ye,Je]},s.createElement(s.Fragment,null,s.createElement("div",{className:`${U}__draggable-underlay`,"aria-hidden":"true",key:`draggable-underlay-${n}`},b.map(a=>s.createElement("div",{className:`${U}__draggable-underlay-item`,key:a.id}))),s.createElement(Ke,{items:c,strategy:Qe},b.map(a=>{const C=G(a.Header),g=C.split(new RegExp(`(${i})`,"gi")).map(t=>t.toLowerCase()===i.toLowerCase()?`<strong>${t}</strong>`:t).join(""),v=!!a.sticky,A=a.disabled,e=s.createElement(s.Fragment,null,s.createElement(Te,{checked:X(a),disabled:A||v,onChange:(t,{checked:d})=>u(a,d),id:`${U}__customization-column-${a.id}`,labelText:C,title:C,className:`${U}__customize-columns-checkbox`,hideLabel:!0,onKeyDown:t=>P(t,a)}),s.createElement("div",{dangerouslySetInnerHTML:{__html:g},className:`${U}__customize-columns-checkbox-visible-label`}));return s.createElement(ee,{classList:h,key:a.id,id:a.id,disabled:i.length>0||v,ariaLabel:C,isSticky:v,selected:X(a)},e)}))))};te.propTypes={columns:W.PropTypes.array.isRequired,filterString:W.PropTypes.string.isRequired,id:W.PropTypes.string.isRequired,moveElement:W.PropTypes.func.isRequired,onSelectColumn:W.PropTypes.func.isRequired,setAriaRegionText:W.PropTypes.func.isRequired};te.__docgenInfo={description:"",methods:[],displayName:"DraggableItemsList",props:{columns:{description:"",type:{name:"array"},required:!0},filterString:{description:"",type:{name:"string"},required:!0},id:{description:"",type:{name:"string"},required:!0},moveElement:{description:"",type:{name:"func"},required:!0},onSelectColumn:{description:"",type:{name:"func"},required:!0},setAriaRegionText:{description:"",type:{name:"func"},required:!0}}};const I=`${M.prefix}--datagrid`,re=({getVisibleColumnsCount:r,filterString:i,columns:n,setColumnsObject:f,onSelectColumn:u,assistiveTextInstructionsLabel:y,assistiveTextDisabledInstructionsLabel:h,selectAllLabel:b,customizeTearsheetHeadingLabel:m})=>{const c=S.useRef(je()),_=S.useRef(null),[z,k]=s.useState(""),R=s.useCallback((w,P)=>{const a=n[w];f(nt(n,{$splice:[[w,1],[P,0,a]]}))},[n,f]),L=n==null?void 0:n.filter(w=>!w.sticky);return s.createElement("div",{className:`${I}__customize-columns-column-list`,ref:_},s.createElement("ol",{className:`${I}__customize-columns-column-list--focus`,role:"listbox","aria-label":m,"aria-describedby":`${I}__customize-columns--instructions`,tabIndex:0},s.createElement("span",{"aria-live":"assertive",className:`${I}__shared-ui--assistive-text`},z),s.createElement("span",{id:`${I}__customize-columns--instructions`,className:`${I}__shared-ui--assistive-text`},i.length===0?y:h),s.createElement("div",{id:`${I}__customize-columns-select-all`,className:K(`${I}__customize-columns-select-all`,{[`${I}__customize-columns-select-all--selected`]:r()>0}),selected:r()>0},s.createElement(Te,{className:`${I}__customize-columns-checkbox-wrapper`,checked:r()===n.length,indeterminate:r()<n.length&&r()>0,onChange:()=>{u(L,r()!==n.length)},id:`${I}__customization-column-select-all`,labelText:b})),s.createElement(te,{id:c.current,columns:n,filterString:i,moveElement:R,setAriaRegionText:k,onSelectColumn:u})))};re.propTypes={assistiveTextDisabledInstructionsLabel:o.string,assistiveTextInstructionsLabel:o.string,columns:o.array.isRequired,customizeTearsheetHeadingLabel:o.string,disabledInstructionsLabel:o.string,filterString:o.string.isRequired,getVisibleColumnsCount:o.func.isRequired,instructionsLabel:o.string,onSelectColumn:o.func.isRequired,selectAllLabel:o.string,setColumnStatus:o.func,setColumnsObject:o.func.isRequired};re.__docgenInfo={description:"",methods:[],displayName:"Columns",props:{assistiveTextDisabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{description:"",type:{name:"string"},required:!1},columns:{description:"",type:{name:"array"},required:!0},customizeTearsheetHeadingLabel:{description:"",type:{name:"string"},required:!1},disabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},filterString:{description:"",type:{name:"string"},required:!0},getVisibleColumnsCount:{description:"",type:{name:"func"},required:!0},instructionsLabel:{description:"",type:{name:"string"},required:!1},onSelectColumn:{description:"",type:{name:"func"},required:!0},selectAllLabel:{description:"",type:{name:"string"},required:!1},setColumnStatus:{description:"",type:{name:"func"},required:!1},setColumnsObject:{description:"",type:{name:"func"},required:!0}}};const pt=`${M.prefix}--datagrid`,se=({searchText:r,setSearchText:i,findColumnPlaceholderLabel:n})=>S.createElement("div",{className:`${pt}__customize-columns-tearsheet--actions`},S.createElement(et,{placeholder:n,value:r,size:"lg",labelText:n,onChange:f=>{i(f.target.value)}}));se.propTypes={columns:o.array.isRequired,findColumnPlaceholderLabel:o.string,originalColumnDefinitions:o.array.isRequired,resetToDefaultLabel:o.string,searchText:o.string.isRequired,setColumnsObject:o.func.isRequired,setSearchText:o.func.isRequired};se.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{columns:{description:"",type:{name:"array"},required:!0},findColumnPlaceholderLabel:{description:"",type:{name:"string"},required:!1},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},resetToDefaultLabel:{description:"",type:{name:"string"},required:!1},searchText:{description:"",type:{name:"string"},required:!0},setColumnsObject:{description:"",type:{name:"func"},required:!0},setSearchText:{description:"",type:{name:"func"},required:!0}}};const ft=`${M.prefix}--datagrid`,oe=({isOpen:r,setIsTearsheetOpen:i,onSaveColumnPrefs:n,columnDefinitions:f,originalColumnDefinitions:u,customizeTearsheetHeadingLabel:y="Customize columns",primaryButtonTextLabel:h="Save",secondaryButtonTextLabel:b="Cancel",instructionsLabel:m="Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.",findColumnPlaceholderLabel:c="Find column",resetToDefaultLabel:_="Reset to default",assistiveTextInstructionsLabel:z="Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:k="Reordering columns are disabled because they are filtered currently.",selectAllLabel:R="Column name"})=>{const[L,w]=S.useState(""),[P,a]=S.useState(""),[C,x]=S.useState(""),[g,v]=S.useState(f),[A,e]=S.useState(!1),t=S.useRef(void 0),d=()=>{v(f),i(!1)},p=()=>{i(!1);const $=g.map(D=>({id:D.id,isVisible:D.isVisible}));n($)},l=($,D)=>{const H=g.map(E=>Array.isArray($)?$.includes(E)&&E.canFilter&&!E.disabled?{...E,isVisible:D}:E:$.id===E.id?{...E,isVisible:D}:E),ne=H.filter(E=>E.isVisible&&!["datagridSelection","actions"].includes(E.id)).length,Le=H.map(E=>ne>0?["datagridSelection","actions"].includes(E.id)?{...E,isVisible:!0}:E:["datagridSelection","actions"].includes(E.id)?{...E,isVisible:!1}:E);v(Le),e(ne!==0)},T=S.useCallback(()=>g.filter($=>$.isVisible).length,[g]),q=C.trim().toLowerCase();return S.useEffect(()=>{t.current!==f&&v(f);const $=g.filter(H=>H.id==="actions").length,D=g.filter(H=>H.id==="datagridSelection").length;w(T()-$-D<0?0:T()-$-D),a(g.length-$-D),t.current=f},[T,g,f]),s.createElement(tt,{className:`${ft}__customize-columns-tearsheet`,open:r,title:`${y} (${L}/${P})`,description:m,actions:[{kind:"secondary",label:b,onClick:d},{kind:"primary",label:h,onClick:p,disabled:!A}]},s.createElement(se,{columns:g,originalColumnDefinitions:u,searchText:C,setColumnsObject:$=>{v($),e(!0)},setSearchText:x,findColumnPlaceholderLabel:c,resetToDefaultLabel:_}),r&&s.createElement(re,{assistiveTextInstructionsLabel:z,assistiveTextDisabledInstructionsLabel:k,getVisibleColumnsCount:T,columns:g,filterString:q,onSelectColumn:l,setColumnsObject:$=>{v($),e(T()!==0)},selectAllLabel:R,customizeTearsheetHeadingLabel:y}))};oe.propTypes={assistiveTextDisabledInstructionsLabel:o.string,assistiveTextInstructionsLabel:o.string,columnDefinitions:o.array.isRequired,customizeTearsheetHeadingLabel:o.string,findColumnPlaceholderLabel:o.string,instructionsLabel:o.string,isOpen:o.bool.isRequired,onSaveColumnPrefs:o.func.isRequired,originalColumnDefinitions:o.array.isRequired,primaryButtonTextLabel:o.string,resetToDefaultLabel:o.string,secondaryButtonTextLabel:o.string,selectAllLabel:o.string,setIsTearsheetOpen:o.func.isRequired};oe.__docgenInfo={description:"",methods:[],displayName:"CustomizeColumnsTearsheet",props:{customizeTearsheetHeadingLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},primaryButtonTextLabel:{defaultValue:{value:"'Save'",computed:!1},description:"",type:{name:"string"},required:!1},secondaryButtonTextLabel:{defaultValue:{value:"'Cancel'",computed:!1},description:"",type:{name:"string"},required:!1},instructionsLabel:{defaultValue:{value:"'Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.'",computed:!1},description:"",type:{name:"string"},required:!1},findColumnPlaceholderLabel:{defaultValue:{value:"'Find column'",computed:!1},description:"",type:{name:"string"},required:!1},resetToDefaultLabel:{defaultValue:{value:"'Reset to default'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{defaultValue:{value:"'Press space bar to toggle drag drop mode, use arrow keys to move selected elements.'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextDisabledInstructionsLabel:{defaultValue:{value:"'Reordering columns are disabled because they are filtered currently.'",computed:!1},description:"",type:{name:"string"},required:!1},selectAllLabel:{defaultValue:{value:"'Column name'",computed:!1},description:"",type:{name:"string"},required:!1},columnDefinitions:{description:"",type:{name:"array"},required:!0},isOpen:{description:"",type:{name:"bool"},required:!0},onSaveColumnPrefs:{description:"",type:{name:"func"},required:!0},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ie=({instance:r})=>{const{onSaveColumnPrefs:i,isTearsheetOpen:n,setIsTearsheetOpen:f,labels:u,...y}=r.customizeColumnsProps,{state:h}=S.useContext(we),{featureFlags:b}=h||{};return S.useEffect(()=>{b&&!(b!=null&&b["enable-datagrid-useCustomizeColumns"])&&console.error("Datagrid useCustomizeColumns extension has not been enabled via feature flag.")},[b]),s.createElement(oe,{...y,...u,isOpen:n,setIsTearsheetOpen:f,columnDefinitions:r.allColumns,originalColumnDefinitions:r.columns,onSaveColumnPrefs:m=>{setTimeout(()=>{const c=m.filter(_=>!_.isVisible).map(_=>_.id);r.setHiddenColumns(c),typeof r.setColumnOrder=="function"?r.setColumnOrder(m.map(_=>_.id)):console.warn("Column order can not be updated. Did you forget to add 'useColumnOrder' in 'useDatagrid'")},0),typeof i=="function"&&i(m)}})};ie.propTypes={instance:o.object.isRequired};ie.__docgenInfo={description:"",methods:[],displayName:"TearsheetWrapper",props:{instance:{description:"",type:{name:"object"},required:!0}}};const gt=`${M.prefix}--datagrid`,Q=({onClick:r,setIsTearsheetOpen:i,isTearsheetOpen:n,iconTooltipLabel:f="Customize columns",...u})=>S.createElement(Re,{...u,renderIcon:y=>S.createElement(Ae,{size:16,...y}),iconDescription:f,tooltipPosition:"bottom",kind:"ghost",hasIconOnly:!0,"test-id":`${gt}__customize-columns-trigger`,onClick:()=>{i(!n),typeof r=="function"&&r()}});Q.defaultProps={onClick:()=>{}};Q.propTypes={iconTooltipLabel:o.string,isTearsheetOpen:o.bool.isRequired,onClick:o.func.isRequired,setIsTearsheetOpen:o.func.isRequired};Q.__docgenInfo={description:"",methods:[],displayName:"ButtonWrapper",props:{iconTooltipLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isTearsheetOpen:{description:"",type:{name:"bool"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const _e=r=>{const[i,n]=S.useState(!1);r.useInstance.push(f=>{const{customizeColumnsProps:u}=f,{labels:y}=u||{};Object.assign(f,{customizeColumnsProps:{...u,isTearsheetOpen:i,setIsTearsheetOpen:n},CustomizeColumnsButton:h=>S.createElement(Q,{iconTooltipLabel:y==null?void 0:y.iconTooltipLabel,isTearsheetOpen:i,setIsTearsheetOpen:n,...h}),CustomizeColumnsTearsheet:ie})})},Ee=He.useColumnOrder,qe=()=>s.createElement(ke,{omitCodedExample:!0,blocks:[{title:"Customizing columns",description:"Customizing columns allows user to reorder and hide certain columns of the datagrid. Consuming component can use the provided callback to save/update according to their persistent strategy.\n- Include `useCustomizeColumns` and `useColumnOrder` hooks (required)\n  - `useColumnOrder` comes from `react-table` but is exported by `@carbon/ibm-products` to be used alongside `useCustomizeColumns`.\n- Implement `options.DatagridActions` component\n  - this component will have props: `datagridState`\n  - render `datagridState.CustomizeColumnsButton` component wherever makes sense.\n- Options available to set:\n  - `options.initialState.hiddenColumns: Array<ColumnId: String>`\n    - Array of column ids that will be hidden after initial render\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useTable#table-options)\n  - `options.initialState.columnOrder: Array<ColumnId: String>`\n    - Order of the columns. Any column ids not in this array will be ordered by their position in the `options.columns`\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useColumnOrder#table-options)\n  - `options.customizeColumnsProps.onSaveColumnPrefs`\n    - type: `Function(Columns: Array<{ColumnId: String, isVisible: Boolean}>) => void`\n    - Callback function when 'Save' button clicked on the narrow tearsheet. It allows consumer to preserve the updated column preference. This output can also be used to compute the `hiddenColumns` and `columnOrder`\n        ",source:{code:`
const columns = React.useMemo(() => defaultHeader, []);
const [data] = useState(makeData(10));
const DatagridActions = (datagridState) => (
  <TableToolbarContent>
    <TableToolbarSearch ... />
    <Button ... />
    <datagridState.CustomizeColumnsButton />
  </TableToolbarContent>
)
const datagridState = useDatagrid(
  {
    columns,
    data,
    initialState: {
      hiddenColumns: ['age'],
      columnOrder: [],
    },
    customizeColumnsProps: {
      onSaveColumnPrefs: (newColDefs) => {
        console.log(newColDefs);
      },
    },
    DatagridActions,
  },
  useCustomizeColumns,
  useColumnOrder,
);

return (
  <Datagrid datagridState={datagridState} />
);
          `}}]});qe.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const Ds={title:"Deprecated/Datagrid/Datagrid/ColumnCustomization",component:j,tags:["autodocs"],parameters:{styles:Pe,docs:{page:qe},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},$e=`${M.prefix}--datagrid`,ze=[{Header:"Row Index",accessor:(r,i)=>i,id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50,disableGlobalFilter:!0},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],J={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:r=>{console.log("row size changed to: ",r)},rowActions:[{id:"edit",itemText:"Edit",icon:ve,onClick:Y("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:xe,isDelete:!0,onClick:Y("Clicked row action: delete")}]},yt=({...r})=>{const[i,n]=S.useState([]),f=s.useMemo(()=>{const h=[...ze];return h.forEach(b=>{i.some(m=>{if(b.accessor===m)return b.disableGlobalFilter=!0,!0;b.disableGlobalFilter=!1})}),h},[i]),[u]=S.useState(fe(10)),y=ge({className:"c4p--datagrid__hidden--columns",columns:f,data:u,initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[]},DatagridActions:ye,DatagridPagination:be,...r.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:h=>{const b=h.map((m,c)=>m.isVisible?null:m.id).filter(m=>m!==null);n(b)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},_e,Ee);return s.createElement(he,{flags:{"enable-datagrid-useCustomizeColumns":!0}},s.createElement(j,{datagridState:y}),s.createElement("div",{className:`${$e}-story__hidden-column-id-snippet`},s.createElement("p",null,"Hidden column ids:"),s.createElement(Ce,{type:"multi"},JSON.stringify(y.state.hiddenColumns,null,2))))},bt=({...r})=>s.createElement(yt,{defaultGridProps:{...r}}),De={gridTitle:J.gridTitle,gridDescription:J.gridDescription,useDenseHeader:J.useDenseHeader,customizeColumnsProps:J.customizeColumnsProps},Ct="With column customization",B=bt.bind({});B.storyName=Ct;B.argTypes={gridTitle:O.gridTitle,gridDescription:O.gridDescription,useDenseHeader:O.useDenseHeader,customizeColumnsProps:O.customizeColumnsProps};B.args={...De};const ht=({...r})=>{const[i,n]=S.useState([]),f=ze.slice(2,15),u=s.useMemo(()=>{const b=[{Header:"Row Index",accessor:(m,c)=>c,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName",disabled:!0},...f,{Header:"",accessor:"actions",sticky:"right",width:48,isAction:!0}];return b.forEach(m=>{i.some(c=>{if(m.accessor===c)return m.disableGlobalFilter=!0,!0;m.disableGlobalFilter=!1})}),b},[i]),[y]=S.useState(fe(10)),h=ge({className:"c4p--datagrid__hidden--columns",columns:u,data:y,ascendingSortableLabelText:"ascending",descendingSortableLabelText:"descending",defaultSortableLabelText:"none",initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[],sortableColumn:{id:"rowIndex",order:"ASC"}},DatagridActions:ye,DatagridPagination:be,rowActions:[{id:"edit",itemText:"Edit",icon:ve,onClick:Y("Clicked row action: edit")},{id:"approve",itemText:"Approve",icon:ot,onClick:Y("Clicked row action: approve")},{id:"delete",itemText:"Delete",icon:xe,isDelete:!0,hasDivider:!0,onClick:Y("Clicked row action: delete")}],...r.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:b=>{const m=b.map((c,_)=>c.isVisible?null:c.id).filter(c=>c!==null);n(m)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},_e,Ee,st,rt,Ie);return s.createElement(he,{flags:{"enable-datagrid-useCustomizeColumns":!0}},s.createElement(j,{datagridState:h}),s.createElement("div",{className:`${$e}-story__hidden-column-id-snippet`},s.createElement("p",null,"Hidden column ids:"),s.createElement(Ce,{type:"multi"},JSON.stringify(h.state.hiddenColumns,null,2))))},Tt=({...r})=>s.createElement(ht,{defaultGridProps:{...r}}),St="With column customization and frozen columns",F=Tt.bind({});F.storyName=St;F.argTypes={gridTitle:O.gridTitle,gridDescription:O.gridDescription,useDenseHeader:O.useDenseHeader,customizeColumnsProps:O.customizeColumnsProps};F.args={...De};var le,de,ce;B.parameters={...B.parameters,docs:{...(le=B.parameters)==null?void 0:le.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationUsage defaultGridProps={{
    ...args
  }} />;
}`,...(ce=(de=B.parameters)==null?void 0:de.docs)==null?void 0:ce.source}}};var ue,me,pe;F.parameters={...F.parameters,docs:{...(ue=F.parameters)==null?void 0:ue.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationWithFixedColumn defaultGridProps={{
    ...args
  }} />;
}`,...(pe=(me=F.parameters)==null?void 0:me.docs)==null?void 0:pe.source}}};const Ls=["ColumnCustomizationUsageStory","ColumnCustomizationWithFixedColumnAndDisabledStory"];export{B as ColumnCustomizationUsageStory,F as ColumnCustomizationWithFixedColumnAndDisabledStory,Ls as __namedExportsOrder,Ds as default};
