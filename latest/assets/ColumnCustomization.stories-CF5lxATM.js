import{e as s,r as S}from"./index-CPiZ6Cnx.js";import{a as Y}from"./chunk-D5ZWXAHU-CGElDDNX.js";import{I as ke,D as ee,a as Ae,m as be,u as he,b as He}from"./_storybook-styles-BGLJR536.js";import{S as Re}from"./StoryDocsPage-B_QkJq2W.js";import{D as Ce}from"./DatagridActions-CU0Xw3sA.js";import{D as Te}from"./DatagridPagination-Bik0EraL.js";import{A as B}from"./getArgTypes-CUsKgYxs.js";import{c as Q,P as i,L as W,ba as Ne}from"./index-CXyjPnaX.js";import{p as M,B as Be,bx as Se}from"./settings-DkGFwmHv.js";import{W as ve}from"./index-iyWVj1lU.js";import{r as Oe}from"./index.esm-DXfeWmHt.js";import"./feature-flags-B_abUzZ5.js";import{C as xe}from"./Checkbox-CPOZKaZ_.js";import{g as qe}from"./_commonjsHelpers-BosuxZz1.js";import{a as Ve,b as Fe}from"./toNumber-CT-AZYiF.js";import{u as Me,C as We,a as le,P as Ge,K as Ue,b as Ye,D as Je,c as Ke,r as Qe,e as Xe,S as Ze,v as je}from"./modifiers.esm-C3De_rjH.js";import{c as et}from"./bucket-5-CJguTH3X.js";import{a as tt}from"./bucket-10-FXk_qGVw.js";import{g as G}from"./getNodeTextContent-C8IeKkUQ.js";import{u as rt}from"./uuidv4-BQrI85uz.js";import{S as st}from"./Search-soxfLq4A.js";import{T as ot}from"./TearsheetNarrow-DZi_YlaY.js";import{u as it}from"./useActionsColumn-Cmc618aQ.js";import{u as nt}from"./useStickyColumn-BUv47_K5.js";import{a as _e}from"./bucket-6-BQYdmIZX.js";import{T as Ee}from"./bucket-17-Ddrrb1BH.js";import{C as at}from"./bucket-2-L5Cs0C3i.js";import"./v4-CQkTLCs1.js";import"./devtools-BgfuqBVa.js";import"./TableRow-D3yAcReO.js";import"./index-DJK44odq.js";import"./wrapComponent-fq0T_7oD.js";import"./bucket-0-DUfmGMOu.js";import"./TableToolbar-Ct4VknGD.js";import"./Text-vNWzJqus.js";import"./ErrorEmptyState-BmnmOYHm.js";import"./Link-EP4KkhUp.js";import"./EmptyState-CUkH7jOq.js";import"./props-helper-C4XfpXsc.js";import"./index-Bd5XT4xl.js";import"./EmptyStateV2-4jIz0TGx.js";import"./iframe-BAt2XFX8.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-CT4uFz_c.js";import"./useId-BvKGLBYe.js";import"./index-BSHYryQu.js";import"./index-Bsyy8W_U.js";import"./events-OVwOsPzJ.js";import"./NoDataEmptyState-Bne6n0HF.js";import"./NoDataIllustration-CphiFmfE.js";import"./NotFoundEmptyState-BUvXFb66.js";import"./NotFoundIllustration-CSqqjm0d.js";import"./useResizeObserver-CZKdqPxj.js";import"./useIsomorphicEffect-CqAX3nH-.js";import"./MenuItem-8LA01F7J.js";import"./useControllableState-uQXf5Mu5.js";import"./useAttachedMenu-MiCadXk0.js";import"./useWindowResize-D2S-8bQl.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-BLF2Ep9P.js";import"./useClickOutside-CmCSbinx.js";import"./AccordionItem-DdQEl6DI.js";import"./index-Dcfl0vi2.js";import"./LayerContext-BGhaVt7n.js";import"./motionConstants-DlACNM8M.js";import"./use-reduced-motion-BpDRJM_F.js";import"./index-DkUr2NOz.js";import"./ActionSet-niQNGcwi.js";import"./ButtonSet-DCPCKVSR.js";import"./InlineLoading-DZri6jHG.js";import"./DatePicker-BtYXwe2U.js";import"./FormContext-CgeSXHS1.js";import"./bucket-18-By6NmkK1.js";import"./bucket-1-EQaPuUyr.js";import"./Dropdown-Bou1JX7F.js";import"./index-ieEXB2QH.js";import"./FormGroup-9BStNhuZ.js";import"./NumberInput-7N1NynOx.js";import"./useNormalizedInputProps-Dv8FHz9Q.js";import"./bucket-16-DAqQSLfq.js";import"./RadioButton-DFKglrJp.js";import"./RadioButtonGroup-CxQn_S4P.js";import"./MultiSelect-Dga-GlIZ.js";import"./usePreviousValue-CSEZflXC.js";import"./TagSet-DjhKdSeL.js";import"./Tag-C5xfWRec.js";import"./DefinitionTooltip-BPN6Mdin.js";import"./DismissibleTag-CXwbi23M.js";import"./ComposedModal-DIgif1vZ.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-i_P_nIQh.js";import"./usePortalTarget-D7xkRihu.js";import"./OperationalTag-BZksMbtL.js";import"./SkeletonText-B30TI_EU.js";import"./bucket-14-BKxafgTW.js";import"./index-CwMfrGy4.js";import"./bucket-7-DdSKRZLi.js";import"./index-z3zJDXtl.js";import"./index-Df9so8jS.js";import"./index-DMCuvgYY.js";import"./index-DrFu-skq.js";import"./story-helper-CTHQ3yzD.js";import"./index-mnDakJPj.js";import"./bucket-12-Oh5ngpb2.js";import"./OverflowMenuItem-B5Kp6Vn3.js";import"./TableToolbarSearch-BaoSzmTx.js";import"./Select-DThIiph8.js";import"./SelectItem-CBhng3Ob.js";import"./index-Spu41qs0.js";import"./bucket-9-BSWQ2dSd.js";import"./TearsheetShell-Cac5arl4.js";import"./checkForOverflow-B788XW49.js";import"./useFocus-CyuX_LJM.js";import"./wait-CTNFjQS8.js";var J={exports:{}},ue;function lt(){return ue||(ue=1,function(r,o){Object.defineProperty(o,"__esModule",{value:!0});function n(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}var m=typeof process=="object"&&!0;function d(e,t){if(!e)throw m?new Error("Invariant failed"):new Error(t())}o.invariant=d;var y=Object.prototype.hasOwnProperty,C=Array.prototype.splice,b=Object.prototype.toString;function p(e){return b.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return q(t).forEach(function(u){y.call(t,u)&&(e[u]=t[u])}),e},q=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function $(e){return Array.isArray(e)?c(e.constructor(e.length),e):p(e)==="Map"?new Map(e):p(e)==="Set"?new Set(e):e&&typeof e=="object"?c(Object.create(Object.getPrototypeOf(e)),e):e}var k=function(){function e(){this.commands=c({},H),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,u){return t===u},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),e.prototype.extend=function(t,u){this.commands[t]=u},e.prototype.update=function(t,u){var f=this,l=typeof u=="function"?{$apply:u}:u;Array.isArray(t)&&Array.isArray(l)||d(!Array.isArray(l),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),d(typeof l=="object"&&l!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(f.commands).join(", ")+".")});var T=t;return q(l).forEach(function(E){if(y.call(f.commands,E)){var z=t===T;T=f.commands[E](l[E],T,l,t),z&&f.isEquals(T,t)&&(T=t)}else{var D=p(t)==="Map"?f.update(t.get(E),l[E]):f.update(t[E],l[E]),R=p(T)==="Map"?T.get(E):T[E];(!f.isEquals(D,R)||typeof D>"u"&&!y.call(t,E))&&(T===t&&(T=$(t)),p(T)==="Map"?T.set(E,D):T[E]=D)}}),T},e}();o.Context=k;var H={$push:function(e,t,u){return w(t,u,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,u){return w(t,u,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,u,f){return a(t,u),e.forEach(function(l){h(l),t===f&&l.length&&(t=$(f)),C.apply(t,l)}),t},$set:function(e,t,u){return g(u),e},$toggle:function(e,t){I(e,"$toggle");var u=e.length?$(t):t;return e.forEach(function(f){u[f]=!t[f]}),u},$unset:function(e,t,u,f){return I(e,"$unset"),e.forEach(function(l){Object.hasOwnProperty.call(t,l)&&(t===f&&(t=$(f)),delete t[l])}),t},$add:function(e,t,u,f){return A(t,"$add"),I(e,"$add"),p(t)==="Map"?e.forEach(function(l){var T=l[0],E=l[1];t===f&&t.get(T)!==E&&(t=$(f)),t.set(T,E)}):e.forEach(function(l){t===f&&!t.has(l)&&(t=$(f)),t.add(l)}),t},$remove:function(e,t,u,f){return A(t,"$remove"),I(e,"$remove"),e.forEach(function(l){t===f&&t.has(l)&&(t=$(f)),t.delete(l)}),t},$merge:function(e,t,u,f){return v(t,e),q(e).forEach(function(l){e[l]!==t[l]&&(t===f&&(t=$(f)),t[l]=e[l])}),t},$apply:function(e,t){return x(e),e(t)}},L=new k;o.isEquals=L.update.isEquals,o.extend=L.extend,o.default=L.update,o.default.default=r.exports=c(o.default,o);function w(e,t,u){d(Array.isArray(e),function(){return"update(): expected target of "+n(u)+" to be an array; got "+n(e)+"."}),I(t[u],u)}function I(e,t){d(Array.isArray(e),function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"})}function a(e,t){d(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+n(e)}),h(t.$splice)}function h(e){d(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"})}function x(e){d(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got "+n(e)+"."})}function g(e){d(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function v(e,t){d(t&&typeof t=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+n(t)}),d(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got "+n(e)})}function A(e,t){var u=p(e);d(u==="Map"||u==="Set",function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(u)})}}(J,J.exports)),J.exports}var ut=lt();const dt=qe(ut);var Z,de;function ct(){if(de)return Z;de=1;var r=Ve(),o=Fe(),n="[object Boolean]";function m(d){return d===!0||d===!1||o(d)&&r(d)==n}return Z=m,Z}var mt=ct();const pt=qe(mt),j=r=>pt(r.isVisible)?r.isVisible:!0,N=`${M.prefix}--datagrid`,te=({id:r,children:o,classList:n,disabled:m,ariaLabel:d,isSticky:y,selected:C})=>{const{attributes:b,isDragging:p,listeners:c,setNodeRef:q,transform:$,transition:k}=Me({disabled:m,id:r}),H=s.createElement(s.Fragment,null,s.createElement("div",{className:Q({disabled:m},`${N}__draggable-handleStyle`)},y?s.createElement(tt,{size:16}):s.createElement(et,{size:16})),o),L={transform:m?void 0:We.Transform.toString($),transition:k};return s.createElement("li",{className:Q(n,`${N}__draggable-handleHolder`,{[`${N}__draggable-handleHolder--selected`]:C,[`${N}__draggable-handleHolder--sticky`]:y,[`${N}__draggable-handleHolder--dragging`]:p}),id:r,ref:q,style:L,...b,...c,"aria-disabled":void 0,"aria-selected":C,role:"option"},s.createElement("span",{className:`${N}__shared-ui--assistive-text`},d),s.createElement("div",{className:Q({[`${N}__draggable-handleStyle`]:!m},[`${N}__draggable-handleHolder-droppable`])},H))};te.propTypes={ariaLabel:i.string.isRequired,children:i.element.isRequired,classList:i.string,disabled:i.bool,id:i.string.isRequired,isSticky:i.bool,selected:i.bool};te.__docgenInfo={description:"",methods:[],displayName:"DraggableElement",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},children:{required:!0,tsType:{name:"ReactNode"},description:"",type:{name:"element"}},classList:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},id:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},isSticky:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},selected:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}}},composes:["PropsWithChildren"]};const U=`${M.prefix}--datagrid`,O=(r,o)=>r&&o&&r.id===o.id,re=({columns:r,filterString:o,id:n,moveElement:m,onSelectColumn:d,setAriaRegionText:y})=>{const C=`${U}__draggable-item`,b=r.filter(a=>G(a.Header).trim().length!==0).filter(Boolean).filter(a=>!a.isAction).filter(a=>a.id!=="spacer").filter(a=>o.length===0||G(a.Header).toLowerCase().includes(o)),c=(()=>{const a=[...b];return a.forEach(h=>{h.sticky&&(h.disabled=!0)}),a})(),q=a=>{var f;const{active:h,over:x}=a,g=c.filter(l=>l.id===x.id);if(g!=null&&g.length&&((f=g[0])!=null&&f.disabled))return;const v=c.findIndex(l=>O(l,h)),A=c.findIndex(l=>O(l,x)),e=G(c[v].Header);y(`${e} dropped. New position ${A+1} of ${c.length}.`);const t=r.findIndex(l=>O(l,h)),u=r.findIndex(l=>O(l,x));m(t,u)},$=a=>{const{active:h}=a,x=c.findIndex(v=>O(v,h)),g=G(c[x].Header);y(`${g} grabbed. Current position ${x+1} of ${c.length}.`)},k=a=>{const{active:h,over:x}=a,g=c.findIndex(e=>O(e,h)),v=c.findIndex(e=>O(e,x)),A=G(c[g].Header);y(`${A} grabbed. Original position ${g+1}, new position ${v+1} of ${c.length}.`)},H=le(Ge,{activationConstraint:{distance:4}}),L=le(Ue,{coordinateGetter:(a,h)=>{const{currentCoordinates:x}=h;let g=a.target;for(;g&&!g.classList.contains(C);)g=g.parentNode;const v=g.offsetHeight;switch(a.code){case"ArrowRight":case"ArrowLeft":return x;case"ArrowUp":return{...x,y:x.y-v};case"ArrowDown":return{...x,y:x.y+v}}}}),w=Ye(H,L),I=(a,h)=>{if(a.code==="Space")return d(h,!j(h)),a.preventDefault(),a.stopPropagation(),!1};return s.createElement(Je,{collisionDetection:Ke,onDragEnd:q,onDragStart:$,onDragMove:k,sensors:w,modifiers:[Qe,Xe]},s.createElement(s.Fragment,null,s.createElement("div",{className:`${U}__draggable-underlay`,"aria-hidden":"true",key:`draggable-underlay-${n}`},b.map(a=>s.createElement("div",{className:`${U}__draggable-underlay-item`,key:a.id}))),s.createElement(Ze,{items:c,strategy:je},b.map(a=>{const h=G(a.Header),g=h.split(new RegExp(`(${o})`,"gi")).map(t=>t.toLowerCase()===o.toLowerCase()?`<strong>${t}</strong>`:t).join(""),v=!!a.sticky,A=a.disabled,e=s.createElement(s.Fragment,null,s.createElement(xe,{checked:j(a),disabled:A||v,onChange:(t,{checked:u})=>d(a,u),id:`${U}__customization-column-${a.id}`,labelText:h,title:h,className:`${U}__customize-columns-checkbox`,hideLabel:!0,onKeyDown:t=>I(t,a)}),s.createElement("div",{dangerouslySetInnerHTML:{__html:g},className:`${U}__customize-columns-checkbox-visible-label`}));return s.createElement(te,{classList:C,key:a.id,id:a.id,disabled:o.length>0||v,ariaLabel:h,isSticky:v,selected:j(a)},e)}))))};re.propTypes={columns:W.PropTypes.array.isRequired,filterString:W.PropTypes.string.isRequired,id:W.PropTypes.string.isRequired,moveElement:W.PropTypes.func.isRequired,onSelectColumn:W.PropTypes.func.isRequired,setAriaRegionText:W.PropTypes.func.isRequired};re.__docgenInfo={description:"",methods:[],displayName:"DraggableItemsList",props:{columns:{description:"",type:{name:"array"},required:!0},filterString:{description:"",type:{name:"string"},required:!0},id:{description:"",type:{name:"string"},required:!0},moveElement:{description:"",type:{name:"func"},required:!0},onSelectColumn:{description:"",type:{name:"func"},required:!0},setAriaRegionText:{description:"",type:{name:"func"},required:!0}}};const P=`${M.prefix}--datagrid`,se=({getVisibleColumnsCount:r,filterString:o,columns:n,setColumnsObject:m,onSelectColumn:d,assistiveTextInstructionsLabel:y,assistiveTextDisabledInstructionsLabel:C,selectAllLabel:b,customizeTearsheetHeadingLabel:p})=>{const c=S.useRef(rt()),q=S.useRef(null),[$,k]=s.useState(""),H=s.useCallback((w,I)=>{const a=n[w];m(dt(n,{$splice:[[w,1],[I,0,a]]}))},[n,m]),L=n==null?void 0:n.filter(w=>!w.sticky);return s.createElement("div",{className:`${P}__customize-columns-column-list`,ref:q},s.createElement("ol",{className:`${P}__customize-columns-column-list--focus`,role:"listbox","aria-label":p,"aria-describedby":`${P}__customize-columns--instructions`,tabIndex:0},s.createElement("span",{"aria-live":"assertive",className:`${P}__shared-ui--assistive-text`},$),s.createElement("span",{id:`${P}__customize-columns--instructions`,className:`${P}__shared-ui--assistive-text`},o.length===0?y:C),s.createElement("div",{id:`${P}__customize-columns-select-all`,className:Q(`${P}__customize-columns-select-all`,{[`${P}__customize-columns-select-all--selected`]:r()>0}),selected:r()>0},s.createElement(xe,{className:`${P}__customize-columns-checkbox-wrapper`,checked:r()===n.length,indeterminate:r()<n.length&&r()>0,onChange:()=>{d(L,r()!==n.length)},id:`${P}__customization-column-select-all`,labelText:b})),s.createElement(re,{id:c.current,columns:n,filterString:o,moveElement:H,setAriaRegionText:k,onSelectColumn:d})))};se.propTypes={assistiveTextDisabledInstructionsLabel:i.string,assistiveTextInstructionsLabel:i.string,columns:i.array.isRequired,customizeTearsheetHeadingLabel:i.string,disabledInstructionsLabel:i.string,filterString:i.string.isRequired,getVisibleColumnsCount:i.func.isRequired,instructionsLabel:i.string,onSelectColumn:i.func.isRequired,selectAllLabel:i.string,setColumnStatus:i.func,setColumnsObject:i.func.isRequired};se.__docgenInfo={description:"",methods:[],displayName:"Columns",props:{assistiveTextDisabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{description:"",type:{name:"string"},required:!1},columns:{description:"",type:{name:"array"},required:!0},customizeTearsheetHeadingLabel:{description:"",type:{name:"string"},required:!1},disabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},filterString:{description:"",type:{name:"string"},required:!0},getVisibleColumnsCount:{description:"",type:{name:"func"},required:!0},instructionsLabel:{description:"",type:{name:"string"},required:!1},onSelectColumn:{description:"",type:{name:"func"},required:!0},selectAllLabel:{description:"",type:{name:"string"},required:!1},setColumnStatus:{description:"",type:{name:"func"},required:!1},setColumnsObject:{description:"",type:{name:"func"},required:!0}}};const ft=`${M.prefix}--datagrid`,oe=({searchText:r,setSearchText:o,findColumnPlaceholderLabel:n})=>S.createElement("div",{className:`${ft}__customize-columns-tearsheet--actions`},S.createElement(st,{placeholder:n,value:r,size:"lg",labelText:n,onChange:m=>{o(m.target.value)}}));oe.propTypes={columns:i.array.isRequired,findColumnPlaceholderLabel:i.string,originalColumnDefinitions:i.array.isRequired,resetToDefaultLabel:i.string,searchText:i.string.isRequired,setColumnsObject:i.func.isRequired,setSearchText:i.func.isRequired};oe.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{columns:{description:"",type:{name:"array"},required:!0},findColumnPlaceholderLabel:{description:"",type:{name:"string"},required:!1},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},resetToDefaultLabel:{description:"",type:{name:"string"},required:!1},searchText:{description:"",type:{name:"string"},required:!0},setColumnsObject:{description:"",type:{name:"func"},required:!0},setSearchText:{description:"",type:{name:"func"},required:!0}}};const gt=`${M.prefix}--datagrid`,ie=({isOpen:r,setIsTearsheetOpen:o,onSaveColumnPrefs:n,columnDefinitions:m,originalColumnDefinitions:d,customizeTearsheetHeadingLabel:y="Customize columns",primaryButtonTextLabel:C="Save",secondaryButtonTextLabel:b="Cancel",instructionsLabel:p="Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.",findColumnPlaceholderLabel:c="Find column",resetToDefaultLabel:q="Reset to default",assistiveTextInstructionsLabel:$="Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:k="Reordering columns are disabled because they are filtered currently.",selectAllLabel:H="Column name"})=>{const[L,w]=S.useState(""),[I,a]=S.useState(""),[h,x]=S.useState(""),[g,v]=S.useState(m),[A,e]=S.useState(!1),t=S.useRef(void 0),u=()=>{v(m),o(!1)},f=()=>{o(!1);const z=g.map(D=>({id:D.id,isVisible:D.isVisible}));n(z)},l=(z,D)=>{const R=g.map(_=>Array.isArray(z)?z.includes(_)&&_.canFilter&&!_.disabled?{..._,isVisible:D}:_:z.id===_.id?{..._,isVisible:D}:_),ae=R.filter(_=>_.isVisible&&!["datagridSelection","actions"].includes(_.id)).length,Pe=R.map(_=>ae>0?["datagridSelection","actions"].includes(_.id)?{..._,isVisible:!0}:_:["datagridSelection","actions"].includes(_.id)?{..._,isVisible:!1}:_);v(Pe),e(ae!==0)},T=S.useCallback(()=>g.filter(z=>z.isVisible).length,[g]),E=h.trim().toLowerCase();return S.useEffect(()=>{t.current!==m&&v(m);const z=g.filter(R=>R.id==="actions").length,D=g.filter(R=>R.id==="datagridSelection").length;w(T()-z-D<0?0:T()-z-D),a(g.length-z-D),t.current=m},[T,g,m]),s.createElement(ot,{className:`${gt}__customize-columns-tearsheet`,open:r,title:`${y} (${L}/${I})`,description:p,actions:[{kind:"secondary",label:b,onClick:u},{kind:"primary",label:C,onClick:f,disabled:!A}]},s.createElement(oe,{columns:g,originalColumnDefinitions:d,searchText:h,setColumnsObject:z=>{v(z),e(!0)},setSearchText:x,findColumnPlaceholderLabel:c,resetToDefaultLabel:q}),r&&s.createElement(se,{assistiveTextInstructionsLabel:$,assistiveTextDisabledInstructionsLabel:k,getVisibleColumnsCount:T,columns:g,filterString:E,onSelectColumn:l,setColumnsObject:z=>{v(z),e(T()!==0)},selectAllLabel:H,customizeTearsheetHeadingLabel:y}))};ie.propTypes={assistiveTextDisabledInstructionsLabel:i.string,assistiveTextInstructionsLabel:i.string,columnDefinitions:i.array.isRequired,customizeTearsheetHeadingLabel:i.string,findColumnPlaceholderLabel:i.string,instructionsLabel:i.string,isOpen:i.bool.isRequired,onSaveColumnPrefs:i.func.isRequired,originalColumnDefinitions:i.array.isRequired,primaryButtonTextLabel:i.string,resetToDefaultLabel:i.string,secondaryButtonTextLabel:i.string,selectAllLabel:i.string,setIsTearsheetOpen:i.func.isRequired};ie.__docgenInfo={description:"",methods:[],displayName:"CustomizeColumnsTearsheet",props:{customizeTearsheetHeadingLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},primaryButtonTextLabel:{defaultValue:{value:"'Save'",computed:!1},description:"",type:{name:"string"},required:!1},secondaryButtonTextLabel:{defaultValue:{value:"'Cancel'",computed:!1},description:"",type:{name:"string"},required:!1},instructionsLabel:{defaultValue:{value:"'Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.'",computed:!1},description:"",type:{name:"string"},required:!1},findColumnPlaceholderLabel:{defaultValue:{value:"'Find column'",computed:!1},description:"",type:{name:"string"},required:!1},resetToDefaultLabel:{defaultValue:{value:"'Reset to default'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{defaultValue:{value:"'Press space bar to toggle drag drop mode, use arrow keys to move selected elements.'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextDisabledInstructionsLabel:{defaultValue:{value:"'Reordering columns are disabled because they are filtered currently.'",computed:!1},description:"",type:{name:"string"},required:!1},selectAllLabel:{defaultValue:{value:"'Column name'",computed:!1},description:"",type:{name:"string"},required:!1},columnDefinitions:{description:"",type:{name:"array"},required:!0},isOpen:{description:"",type:{name:"bool"},required:!0},onSaveColumnPrefs:{description:"",type:{name:"func"},required:!0},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ne=({instance:r})=>{const{onSaveColumnPrefs:o,isTearsheetOpen:n,setIsTearsheetOpen:m,labels:d,...y}=r.customizeColumnsProps,{state:C}=S.useContext(ke),{featureFlags:b}=C||{};return S.useEffect(()=>{b&&!(b!=null&&b["enable-datagrid-useCustomizeColumns"])&&console.error("Datagrid useCustomizeColumns extension has not been enabled via feature flag.")},[b]),s.createElement(ie,{...y,...d,isOpen:n,setIsTearsheetOpen:m,columnDefinitions:r.allColumns,originalColumnDefinitions:r.columns,onSaveColumnPrefs:p=>{setTimeout(()=>{const c=p.filter(q=>!q.isVisible).map(q=>q.id);r.setHiddenColumns(c),typeof r.setColumnOrder=="function"?r.setColumnOrder(p.map(q=>q.id)):console.warn("Column order can not be updated. Did you forget to add 'useColumnOrder' in 'useDatagrid'")},0),typeof o=="function"&&o(p)}})};ne.propTypes={instance:i.object.isRequired};ne.__docgenInfo={description:"",methods:[],displayName:"TearsheetWrapper",props:{instance:{description:"",type:{name:"object"},required:!0}}};const yt=`${M.prefix}--datagrid`,X=({onClick:r,setIsTearsheetOpen:o,isTearsheetOpen:n,iconTooltipLabel:m="Customize columns",...d})=>S.createElement(Be,{...d,renderIcon:y=>S.createElement(Ne,{size:16,...y}),iconDescription:m,tooltipPosition:"bottom",kind:"ghost",hasIconOnly:!0,"test-id":`${yt}__customize-columns-trigger`,onClick:()=>{o(!n),typeof r=="function"&&r()}});X.defaultProps={onClick:()=>{}};X.propTypes={iconTooltipLabel:i.string,isTearsheetOpen:i.bool.isRequired,onClick:i.func.isRequired,setIsTearsheetOpen:i.func.isRequired};X.__docgenInfo={description:"",methods:[],displayName:"ButtonWrapper",props:{iconTooltipLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isTearsheetOpen:{description:"",type:{name:"bool"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ze=r=>{const[o,n]=S.useState(!1);r.useInstance.push(m=>{const{customizeColumnsProps:d}=m,{labels:y}=d||{};Object.assign(m,{customizeColumnsProps:{...d,isTearsheetOpen:o,setIsTearsheetOpen:n},CustomizeColumnsButton:C=>S.createElement(X,{iconTooltipLabel:y==null?void 0:y.iconTooltipLabel,isTearsheetOpen:o,setIsTearsheetOpen:n,...C}),CustomizeColumnsTearsheet:ne})})},$e=Oe.useColumnOrder,De=()=>s.createElement(Re,{omitCodedExample:!0,blocks:[{title:"Customizing columns",description:"Customizing columns allows user to reorder and hide certain columns of the datagrid. Consuming component can use the provided callback to save/update according to their persistent strategy.\n- Include `useCustomizeColumns` and `useColumnOrder` hooks (required)\n  - `useColumnOrder` comes from `react-table` but is exported by `@carbon/ibm-products` to be used alongside `useCustomizeColumns`.\n- Implement `options.DatagridActions` component\n  - this component will have props: `datagridState`\n  - render `datagridState.CustomizeColumnsButton` component wherever makes sense.\n- Options available to set:\n  - `options.initialState.hiddenColumns: Array<ColumnId: String>`\n    - Array of column ids that will be hidden after initial render\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useTable#table-options)\n  - `options.initialState.columnOrder: Array<ColumnId: String>`\n    - Order of the columns. Any column ids not in this array will be ordered by their position in the `options.columns`\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useColumnOrder#table-options)\n  - `options.customizeColumnsProps.onSaveColumnPrefs`\n    - type: `Function(Columns: Array<{ColumnId: String, isVisible: Boolean}>) => void`\n    - Callback function when 'Save' button clicked on the narrow tearsheet. It allows consumer to preserve the updated column preference. This output can also be used to compute the `hiddenColumns` and `columnOrder`\n        ",source:{code:`
const columns = React.useMemo(() => defaultHeader, []);
const [data] = useState(makeData(10));
const DatagridActions = (datagridState) => (
  <TableToolbarContent>
    <TableToolbarSearch ... />
    <Button ... />
    <datagridState.CustomizeColumnsButton />
  </TableToolbarContent>
)
const datagridState = useDatagrid(
  {
    columns,
    data,
    initialState: {
      hiddenColumns: ['age'],
      columnOrder: [],
    },
    customizeColumnsProps: {
      onSaveColumnPrefs: (newColDefs) => {
        console.log(newColDefs);
      },
    },
    DatagridActions,
  },
  useCustomizeColumns,
  useColumnOrder,
);

return (
  <Datagrid datagridState={datagridState} />
);
          `}}]});De.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const Ls={title:"Deprecated/Datagrid/Datagrid/ColumnCustomization",component:ee,tags:["autodocs"],parameters:{styles:Ae,docs:{page:De},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},Le=`${M.prefix}--datagrid`,we=[{Header:"Row Index",accessor:(r,o)=>o,id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50,disableGlobalFilter:!0},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],K={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:r=>{console.log("row size changed to: ",r)},rowActions:[{id:"edit",itemText:"Edit",icon:_e,onClick:Y("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:Ee,isDelete:!0,onClick:Y("Clicked row action: delete")}]},bt=({...r})=>{const[o,n]=S.useState([]),m=s.useMemo(()=>{const C=[...we];return C.forEach(b=>{o.some(p=>{if(b.accessor===p)return b.disableGlobalFilter=!0,!0;b.disableGlobalFilter=!1})}),C},[o]),[d]=S.useState(be(10)),y=he({className:"c4p--datagrid__hidden--columns",columns:m,data:d,initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[]},DatagridActions:Ce,DatagridPagination:Te,...r.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:C=>{const b=C.map((p,c)=>p.isVisible?null:p.id).filter(p=>p!==null);n(b)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},ze,$e);return s.createElement(ve,{flags:{"enable-datagrid-useCustomizeColumns":!0}},s.createElement(ee,{datagridState:y}),s.createElement("div",{className:`${Le}-story__hidden-column-id-snippet`},s.createElement("p",null,"Hidden column ids:"),s.createElement(Se,{type:"multi"},JSON.stringify(y.state.hiddenColumns,null,2))))},ht=({...r})=>s.createElement(bt,{defaultGridProps:{...r}}),Ie={gridTitle:K.gridTitle,gridDescription:K.gridDescription,useDenseHeader:K.useDenseHeader,customizeColumnsProps:K.customizeColumnsProps},Ct="With column customization",V=ht.bind({});V.storyName=Ct;V.argTypes={gridTitle:B.gridTitle,gridDescription:B.gridDescription,useDenseHeader:B.useDenseHeader,customizeColumnsProps:B.customizeColumnsProps};V.args={...Ie};const Tt=({...r})=>{const[o,n]=S.useState([]),m=we.slice(2,15),d=s.useMemo(()=>{const b=[{Header:"Row Index",accessor:(p,c)=>c,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName",disabled:!0},...m,{Header:"",accessor:"actions",sticky:"right",width:48,isAction:!0}];return b.forEach(p=>{o.some(c=>{if(p.accessor===c)return p.disableGlobalFilter=!0,!0;p.disableGlobalFilter=!1})}),b},[o]),[y]=S.useState(be(10)),C=he({className:"c4p--datagrid__hidden--columns",columns:d,data:y,ascendingSortableLabelText:"ascending",descendingSortableLabelText:"descending",defaultSortableLabelText:"none",initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[],sortableColumn:{id:"rowIndex",order:"ASC"}},DatagridActions:Ce,DatagridPagination:Te,rowActions:[{id:"edit",itemText:"Edit",icon:_e,onClick:Y("Clicked row action: edit")},{id:"approve",itemText:"Approve",icon:at,onClick:Y("Clicked row action: approve")},{id:"delete",itemText:"Delete",icon:Ee,isDelete:!0,hasDivider:!0,onClick:Y("Clicked row action: delete")}],...r.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:b=>{const p=b.map((c,q)=>c.isVisible?null:c.id).filter(c=>c!==null);n(p)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},ze,$e,nt,it,He);return s.createElement(ve,{flags:{"enable-datagrid-useCustomizeColumns":!0}},s.createElement(ee,{datagridState:C}),s.createElement("div",{className:`${Le}-story__hidden-column-id-snippet`},s.createElement("p",null,"Hidden column ids:"),s.createElement(Se,{type:"multi"},JSON.stringify(C.state.hiddenColumns,null,2))))},St=({...r})=>s.createElement(Tt,{defaultGridProps:{...r}}),vt="With column customization and frozen columns",F=St.bind({});F.storyName=vt;F.argTypes={gridTitle:B.gridTitle,gridDescription:B.gridDescription,useDenseHeader:B.useDenseHeader,customizeColumnsProps:B.customizeColumnsProps};F.args={...Ie};var ce,me,pe;V.parameters={...V.parameters,docs:{...(ce=V.parameters)==null?void 0:ce.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationUsage defaultGridProps={{
    ...args
  }} />;
}`,...(pe=(me=V.parameters)==null?void 0:me.docs)==null?void 0:pe.source}}};var fe,ge,ye;F.parameters={...F.parameters,docs:{...(fe=F.parameters)==null?void 0:fe.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationWithFixedColumn defaultGridProps={{
    ...args
  }} />;
}`,...(ye=(ge=F.parameters)==null?void 0:ge.docs)==null?void 0:ye.source}}};const ws=["ColumnCustomizationUsageStory","ColumnCustomizationWithFixedColumnAndDisabledStory"];export{V as ColumnCustomizationUsageStory,F as ColumnCustomizationWithFixedColumnAndDisabledStory,ws as __namedExportsOrder,Ls as default};
