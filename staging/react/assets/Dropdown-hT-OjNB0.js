import{e as n,a as Ke,b as Se,r as o,u as Be,d as Ue,c as x,_ as g,C as qe,f as ze,s as He,g as We,h as Ve,P as t,i as T}from"./iframe-BM8UuOT_.js";import{u as de,L as $,a as Ge,b as Je}from"./index-DlLSDJCX.js";import{m as Qe}from"./mergeRefs-BZpmU3mx.js";import{F as Xe}from"./FormContext-BxAlDPBq.js";import{A as Ye}from"./index-B2-UkdcH.js";import{d as ie}from"./defaultItemToString-zSItMTD_.js";import{i as Ze}from"./utils-DEU5vRWz.js";import{W as es,a as ss}from"./bucket-19-C2Jy_3fG.js";const{ItemMouseMove:ts,MenuMouseLeave:os}=de.stateChangeTypes;function ce(r,I){const{changes:c,type:f}=I;switch(f){case ts:case os:return c.highlightedIndex===r.highlightedIndex?r:c;default:return c}}const pe=n.forwardRef(({autoAlign:r=!1,className:I,decorator:c,disabled:f=!1,direction:j="bottom",items:R,label:O,["aria-label"]:ue,ariaLabel:fe,itemToString:d=ie,itemToElement:K=null,renderSelectedItem:S,type:me="default",size:E,onChange:k,id:be,titleText:D="",hideLabel:we,helperText:C="",translateWithId:ye,light:B,invalid:a,invalidText:ge,warn:h,warnText:he,initialSelectedItem:U,selectedItem:q,downshiftProps:z,readOnly:_,slug:F,..._e},xe)=>{const w=Ke("enable-v12-dynamic-floating-styles"),{refs:m,floatingStyles:H,middlewareData:$e}=Se(w||r?{placement:j,strategy:"fixed",middleware:[He({apply({rects:e,elements:l}){Object.assign(l.floating.style,{width:`${e.reference.width}px`})}}),r&&We(),r&&Ve()],whileElementsMounted:ze}:{});o.useEffect(()=>{if(w||r){const e={...H,visibility:$e.hide?.referenceHidden?"hidden":"visible"};Object.keys(e).forEach(l=>{m.floating.current&&(m.floating.current.style[l]=e[l])})}},[H,r,m.floating]);const s=Be(),{isFluid:W}=o.useContext(Xe),V=o.useCallback(({selectedItem:e})=>{k&&k({selectedItem:e??null})},[k]),G=o.useCallback((e,l)=>e!==null&&typeof e=="object"&&"disabled"in e&&e.disabled===!0,[]),J=o.useCallback(e=>{const{highlightedIndex:l}=e;if(l!==void 0&&l>-1&&typeof window!==void 0){const u=document.querySelectorAll(`li.${s}--list-box__menu-item[role="option"]`)[l];u&&u.scrollIntoView({behavior:"smooth",block:"nearest"})}},[s]),v=o.useMemo(()=>R,[R]),Q=o.useMemo(()=>({items:v,itemToString:d,initialSelectedItem:U,onSelectedItemChange:V,stateReducer:ce,isItemDisabled:G,onHighlightedIndexChange:J,...z}),[v,d,U,V,ce,G,J,z]),Ie=Ue();q!==void 0&&(Q.selectedItem=q);const{isOpen:b,getToggleButtonProps:Ee,getLabelProps:ke,getMenuProps:X,getItemProps:De,selectedItem:i,highlightedIndex:Ce}=de(Q),p=me==="inline",Y=!a&&h,[Fe,P]=o.useState(!1),ve=x(`${s}--dropdown`,{[`${s}--dropdown--invalid`]:a,[`${s}--dropdown--warning`]:Y,[`${s}--dropdown--open`]:b,[`${s}--dropdown--focus`]:Fe,[`${s}--dropdown--inline`]:p,[`${s}--dropdown--disabled`]:f,[`${s}--dropdown--light`]:B,[`${s}--dropdown--readonly`]:_,[`${s}--dropdown--${E}`]:E,[`${s}--list-box--up`]:j==="top",[`${s}--autoalign`]:r}),Pe=x(`${s}--label`,{[`${s}--label--disabled`]:f,[`${s}--visually-hidden`]:we}),Ae=x(`${s}--form__helper-text`,{[`${s}--form__helper-text--disabled`]:f}),Le=x(`${s}--dropdown__wrapper`,`${s}--list-box__wrapper`,I,{[`${s}--dropdown__wrapper--inline`]:p,[`${s}--list-box__wrapper--inline`]:p,[`${s}--dropdown__wrapper--inline--invalid`]:p&&a,[`${s}--list-box__wrapper--inline--invalid`]:p&&a,[`${s}--list-box__wrapper--fluid--invalid`]:W&&a,[`${s}--list-box__wrapper--slug`]:F,[`${s}--list-box__wrapper--decorator`]:c}),Z=C?`dropdown-helper-text-${Ie}`:void 0,A=K,y=Ee({"aria-label":ue||fe}),ee=C&&!W?n.createElement("div",{id:Z,className:Ae},C):null,se=e=>{P(e.type==="focus"&&!i)},te=o.useRef(null),Me=Qe(y.ref,xe,te),[L,Ne]=o.useState(),[oe,ne]=o.useState(!1),le=o.useCallback(e=>{(e.code!=="Space"||!["ArrowDown","ArrowUp"," ","Enter"].includes(e.key))&&ne(!0),(oe&&e.code==="Space"||!["ArrowDown","ArrowUp"," ","Enter"].includes(e.key))&&(L&&clearTimeout(L),Ne(setTimeout(()=>{ne(!1)},3e3))),["ArrowDown"].includes(e.key)&&P(!1),["Enter"].includes(e.key)&&!i&&!b&&P(!0),y.onKeyDown&&(e.key!=="ArrowUp"||b&&e.key==="ArrowUp")&&y.onKeyDown(e)},[oe,L,y]),Te=o.useMemo(()=>_?{onClick:e=>{e.preventDefault(),te.current?.focus()},onKeyDown:e=>{["ArrowDown","ArrowUp"," ","Enter"].includes(e.key)&&e.preventDefault()}}:{onKeyDown:le},[_,le]),je=o.useMemo(()=>X({ref:w||r?m.setFloating:null}),[r,X,m.setFloating,w]),M=F??c,re=Ze(M,Ye)?o.cloneElement(M,{size:"mini"}):M,ae=ke(),Re=o.isValidElement(D)?{id:ae.id}:ae;return n.createElement("div",g({className:Le},_e),D&&n.createElement("label",g({className:Pe},Re),D),n.createElement($,{onFocus:se,onBlur:se,size:E,className:ve,invalid:a,invalidText:ge,warn:h,warnText:he,light:B,isOpen:b,ref:w||r?m.setReference:null,id:be},a&&n.createElement(es,{className:`${s}--list-box__invalid-icon`}),Y&&n.createElement(ss,{className:`${s}--list-box__invalid-icon ${s}--list-box__invalid-icon--warning`}),n.createElement("button",g({type:"button",className:`${s}--list-box__field`,disabled:f,"aria-disabled":_?!0:void 0,"aria-describedby":!p&&!a&&!h&&ee?Z:void 0,title:i&&d!==void 0?d(i):ie(O)},y,Te,{ref:Me}),n.createElement("span",{className:`${s}--list-box__label`},i?S?S(i):d(i):O),n.createElement($.MenuIcon,{isOpen:b,translateWithId:ye})),F?re:c?n.createElement("div",{className:`${s}--list-box__inner-wrapper--decorator`},re):"",n.createElement($.Menu,je,b&&v.map((e,l)=>{const N=e!==null&&typeof e=="object",u=De({item:e,index:l}),Oe=N&&"text"in e&&K?e.text:d(e);return n.createElement($.MenuItem,g({key:u.id,isActive:i===e,isHighlighted:Ce===l,title:Oe,disabled:u["aria-disabled"]},u),typeof e=="object"&&A!==void 0&&A!==null?n.createElement(A,g({key:u.id},e)):d(e),i===e&&n.createElement(qe,{className:`${s}--list-box__menu-item__selected-icon`}))}))),!p&&!a&&!h&&ee)});pe.displayName="Dropdown";pe.propTypes={"aria-label":t.string,ariaLabel:T(t.string),autoAlign:t.bool,className:t.string,decorator:t.node,direction:t.oneOf(["top","bottom"]),disabled:t.bool,downshiftProps:t.object,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,initialSelectedItem:t.oneOfType([t.object,t.string,t.number]),invalid:t.bool,invalidText:t.node,itemToElement:t.func,itemToString:t.func,items:t.array.isRequired,label:t.node.isRequired,light:T(t.bool),onChange:t.func,readOnly:t.bool,renderSelectedItem:t.func,selectedItem:t.oneOfType([t.object,t.string,t.number]),size:Je,slug:T(t.node),titleText:t.node.isRequired,translateWithId:t.func,type:Ge,warn:t.bool,warnText:t.node};export{pe as D};
//# sourceMappingURL=Dropdown-hT-OjNB0.js.map
