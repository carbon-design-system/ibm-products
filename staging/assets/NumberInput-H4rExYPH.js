import{P as i,b as le,i as it,d as R,_ as rt,m as Fe,J as nt,H as st,g as Ee}from"./index-C360Eztx.js";import{e as d,r as $}from"./index-DtHxqM--.js";import{u as at}from"./useNormalizedInputProps-cPzcHHVT.js";import{F as lt}from"./FormContext-C4Nuixum.js";import{c as ot}from"./clamp--00YEiB8.js";import{u as ut}from"./useControllableState-P5wT7SAH.js";import{T as Me}from"./Text-DKfZ87L_.js";import{a3 as mt}from"./bucket-16-DWe95sPE.js";import{c as ct}from"./bucket-0-CylTshg8.js";let re=new Map,se=!1;try{se=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let G=!1;try{G=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ae={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class ae{format(t){let e="";if(!se&&this.options.signDisplay!=null?e=pt(this.numberFormatter,this.options.signDisplay,t):e=this.numberFormatter.format(t),this.options.style==="unit"&&!G){var r;let{unit:a,unitDisplay:l="short",locale:o}=this.resolvedOptions();if(!a)return e;let m=(r=Ae[a])===null||r===void 0?void 0:r[l];e+=m[o]||m.default}return e}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,e){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,e);if(e<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(e)}`}formatRangeToParts(t,e){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,e);if(e<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),a=this.numberFormatter.formatToParts(e);return[...r.map(l=>({...l,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...a.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!se&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!G&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,e={}){this.numberFormatter=dt(t,e),this.options=e}}function dt(n,t={}){let{numberingSystem:e}=t;if(e&&n.includes("-nu-")&&(n.includes("-u-")||(n+="-u-"),n+=`-nu-${e}`),t.style==="unit"&&!G){var r;let{unit:o,unitDisplay:m="short"}=t;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Ae[o])===null||r===void 0)&&r[m]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${m}`);t={...t,style:"decimal"}}let a=n+(t?Object.entries(t).sort((o,m)=>o[0]<m[0]?-1:1).join():"");if(re.has(a))return re.get(a);let l=new Intl.NumberFormat(n,t);return re.set(a,l),l}function pt(n,t,e){if(t==="auto")return n.format(e);if(t==="never")return n.format(Math.abs(e));{let r=!1;if(t==="always"?r=e>0||Object.is(e,0):t==="exceptZero"&&(Object.is(e,-0)||Object.is(e,0)?e=Math.abs(e):r=e>0),r){let a=n.format(-e),l=n.format(e),o=a.replace(l,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),a.replace(l,"!!!").replace(o,"+").replace("!!!",l)}else return n.format(e)}}const ft=new RegExp("^.*\\(.*\\).*$"),bt=["latn","arab","hanidec","deva","beng"];class Le{parse(t){return ne(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,r){return ne(this.locale,this.options,t).isValidPartialNumber(t,e,r)}getNumberingSystem(t){return ne(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const Pe=new Map;function ne(n,t,e){let r=Ie(n,t);if(!n.includes("-nu-")&&!r.isValidPartialNumber(e)){for(let a of bt)if(a!==r.options.numberingSystem){let l=Ie(n+(n.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(l.isValidPartialNumber(e))return l}}return r}function Ie(n,t){let e=n+(t?Object.entries(t).sort((a,l)=>a[0]<l[0]?-1:1).join():""),r=Pe.get(e);return r||(r=new gt(n,t),Pe.set(e,r)),r}class gt{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=W(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let o=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let m=e.indexOf(".");m===-1&&(m=e.length),e=e.replace(".",""),m-2===0?e=`0.${e}`:m-2===-1?e=`0.0${e}`:m-2===-2?e="0.00":e=`${e.slice(0,m-2)}.${e.slice(m-2)}`,o>-1&&(e=`-${e}`)}let r=e?+e:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var a,l;let o={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((l=this.options.maximumFractionDigits)!==null&&l!==void 0?l:0)+2,20)};return new Le(this.locale,o).parse(new ae(this.locale,o).format(r))}return this.options.currencySign==="accounting"&&ft.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=W(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&this.symbols.group&&(t=W(t," ",this.symbols.group),t=W(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=W(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=yt(t,this.formatter,this.options,e);var r,a;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const _e=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),ht=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function yt(n,t,e,r){var a,l,o,m;let g=new Intl.NumberFormat(n,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),v=g.formatToParts(-10000.111),j=g.formatToParts(10000.111),z=ht.map(c=>g.formatToParts(c));var I;let _=(I=(a=v.find(c=>c.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&I!==void 0?I:"-",F=(l=j.find(c=>c.type==="plusSign"))===null||l===void 0?void 0:l.value;!F&&((r==null?void 0:r.signDisplay)==="exceptZero"||(r==null?void 0:r.signDisplay)==="always")&&(F="+");let H=(o=new Intl.NumberFormat(n,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(c=>c.type==="decimal"))===null||o===void 0?void 0:o.value,J=(m=v.find(c=>c.type==="group"))===null||m===void 0?void 0:m.value,Y=v.filter(c=>!_e.has(c.type)).map(c=>Ce(c.value)),q=z.flatMap(c=>c.filter(b=>!_e.has(b.type)).map(b=>Ce(b.value))),N=[...new Set([...Y,...q])].sort((c,b)=>b.length-c.length),M=N.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${N.join("|")}|[\\p{White_Space}]`,"gu"),C=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),S=new Map(C.map((c,b)=>[c,b])),A=new RegExp(`[${C.join("")}]`,"g");return{minusSign:_,plusSign:F,decimal:H,group:J,literals:M,numeral:A,index:c=>String(S.get(c))}}function W(n,t,e){return n.replaceAll?n.replaceAll(t,e):n.split(t).join(e)}function Ce(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const $t=typeof document<"u";$t&&document.documentElement.lang;const vt=i.shape({localeMatcher:i.oneOf(["best fit","lookup"]),style:i.oneOf(["decimal","currency","percent","unit"]),currency:i.string,currencyDisplay:i.oneOf(["symbol","narrowSymbol","code","name"]),currencySign:i.oneOf(["standard","accounting"]),unit:i.string,unitDisplay:i.oneOf(["short","narrow","long"]),notation:i.oneOf(["standard","scientific","engineering","compact"]),compactDisplay:i.oneOf(["short","long"]),signDisplay:i.oneOf(["auto","never","always","exceptZero"]),minimumIntegerDigits:i.number,minimumFractionDigits:i.number,maximumFractionDigits:i.number,minimumSignificantDigits:i.number,maximumSignificantDigits:i.number,useGrouping:i.oneOfType([i.bool,i.oneOf(["always","auto","min2"])]),numberingSystem:i.string,roundingIncrement:i.number,roundingMode:i.oneOf(["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"]),trailingZeroDisplay:i.oneOf(["auto","stripIfInteger"])});var Oe,Te;const Ve={"increment.number":"increment.number","decrement.number":"decrement.number"},wt={[Ve["increment.number"]]:"Increment number",[Ve["decrement.number"]]:"Decrement number"},xt=d.forwardRef(function(t,e){var Ne,Se;const{allowEmpty:r=!1,className:a,decorator:l,disabled:o=!1,disableWheel:m=!1,defaultValue:g=0,formatOptions:v,helperText:j="",hideLabel:z=!1,hideSteppers:I,iconDescription:_,id:F,inputMode:oe,invalid:H=!1,invalidText:J,label:Y,light:q,locale:N="en-US",max:M,min:C,onChange:S,onClick:A,onKeyUp:ue,pattern:c="[0-9]*",readOnly:b,size:me="md",slug:O,step:T=1,translateWithId:ce=s=>wt[s],type:y="number",warn:ze=!1,warnText:ke="",value:w,...h}=t,u=le(),{isFluid:V}=$.useContext(lt),[Ke,de]=$.useState(!1),[k,K]=$.useState(()=>w!==void 0?w:g!==void 0?g:r?"":0),[Be,Ue]=$.useState(w),E=$.useMemo(()=>new Le(N,v),[N,v]),[B,pe,Ze]=ut({name:"NumberInput",defaultValue:typeof g=="string"?E.parse(g):g,value:typeof w=="string"?E.parse(w):w}),[U,X]=d.useState(()=>isNaN(B)?"":new ae(N,v).format(B)),fe=$.useMemo(()=>E.getNumberingSystem(U),[E,U]),be=$.useMemo(()=>new ae(N,{...v,numberingSystem:fe}),[N,v,fe]),ge=$.useCallback(s=>isNaN(s)||s===null?"":be.format(s),[be]),P=$.useRef(null),Ge=it([e,P]),He=R({[`${u}--number`]:!0,[`${u}--number--helpertext`]:!0,[`${u}--number--readonly`]:b,[`${u}--number--light`]:q,[`${u}--number--nolabel`]:z,[`${u}--number--nosteppers`]:I,[`${u}--number--${me}`]:me}),Je=Nt({allowEmpty:r,invalid:H,value:y==="number"?k:B,max:M,min:C}),p=at({id:F,readOnly:b,disabled:o,invalid:!Je,invalidText:J,warn:ze,warnText:ke}),[he,ye]=[ce("increment.number"),ce("decrement.number")],Ye=R(`${u}--number__input-wrapper`,{[`${u}--number__input-wrapper--warning`]:p.warn,[`${u}--number__input-wrapper--slug`]:O,[`${u}--number__input-wrapper--decorator`]:l}),qe=R({[`${u}--number__invalid`]:p.invalid||p.warn,[`${u}--number__invalid--warning`]:p.warn});w!==Be&&(K(w),Ue(w));let Z;p.invalid&&(Z=p.invalidId),p.warn&&(Z=p.warnId),p.validation||(Z=j?p.helperId:void 0);function Xe(s){if(!o){if(y==="number"){const f={value:r&&s.target.value===""?"":Number(s.target.value),direction:k<s.target.value?"up":"down"};K(f.value),S&&S(s,f);return}if(y==="text"){const f=r&&s.target.value===""?"":s.target.value;pe(E.parse(f)),X(f)}}}const $e=s=>{"type"in s.target&&s.target.type==="button"?de(!1):de(s.type==="focus")},Qe=R(`${u}--form-item`,{[a]:!!a,[`${u}--number-input--fluid--invalid`]:V&&p.invalid,[`${u}--number-input--fluid--focus`]:V&&Ke,[`${u}--number-input--fluid--disabled`]:V&&o}),ve=p.icon,we=s=>{const f=s.toString().split(".");return f[1]?f[1].length:0},Q=(s,f)=>{if(P.current){const D=y==="number"?Number(P.current.value):E.parse(P.current.value),te=f==="up"?D+T:D-T,et=Math.max(we(D),we(T)),tt=parseFloat(te.toFixed(et)),ie=ot(tt,C??-1/0,M??1/0);let L;if(y==="number"&&(L={value:r&&P.current.value===""&&T===0?"":ie,direction:f},K(L.value)),y==="text"){const De=ge(ie);L={value:r&&P.current.value===""&&T===0?"":De,direction:f},pe(ie),X(De)}return S&&S(s,L),L}},xe=(s,f)=>{if(P.current){const{state:D}=Q(s,f);A&&A(s,D)}};let x=d.isValidElement(O??l)?O??l:null;x&&((Ne=x.type)==null?void 0:Ne.displayName)==="AILabel"&&(x=d.cloneElement(x,{size:"mini"}));let ee;return x&&((Se=x.type)==null?void 0:Se.displayName)==="AILabel"&&(ee=x.props.revertActive),$.useEffect(()=>{!ee&&O&&g&&K(g)},[g,ee,O]),d.createElement("div",{className:Qe,onFocus:V?$e:void 0,onBlur:V?$e:void 0},d.createElement("div",{className:He,"data-invalid":p.invalid?!0:void 0},d.createElement(We,{disabled:p.disabled,hideLabel:z,id:F,label:Y}),d.createElement("div",{className:Ye},d.createElement("input",rt({},h,{"data-invalid":p.invalid?!0:void 0,"aria-invalid":p.invalid,"aria-describedby":Z,"aria-readonly":b,disabled:p.disabled,ref:Ge,id:F,max:M,min:C,onClick:A,onChange:Xe,onKeyUp:ue,onKeyDown:s=>{y==="text"&&(Fe(s,nt)&&Q(s,"up"),Fe(s,st)&&Q(s,"down")),h!=null&&h.onKeyDown&&(h==null||h.onKeyDown(s))},onFocus:s=>{m&&s.target.addEventListener("wheel",Re),h.onFocus&&h.onFocus(s)},onBlur:s=>{if(m&&s.target.removeEventListener("wheel",Re),y==="text"){const f=Ze?E.parse(U):B,D=isNaN(f)?"":ge(f);if(X(D),S){const te={value:D,direction:k<s.target.value?"up":"down"};S(s,te)}}h.onBlur&&h.onBlur(s)},pattern:c,inputMode:oe,readOnly:b,step:T,type:y,value:y==="number"?k:U})),O?x:l?d.createElement("div",{className:`${u}--number__input-inner-wrapper--decorator`},x):"",ve?d.createElement(ve,{className:qe}):null,!I&&d.createElement("div",{className:`${u}--number__controls`},d.createElement("button",{"aria-label":ye||_,className:`${u}--number__control-btn down-icon`,disabled:o||b,onClick:s=>xe(s,"down"),tabIndex:-1,title:ye||_,type:"button"},Oe||(Oe=d.createElement(mt,{className:"down-icon"}))),d.createElement("div",{className:`${u}--number__rule-divider`}),d.createElement("button",{"aria-label":he||_,className:`${u}--number__control-btn up-icon`,disabled:o||b,onClick:s=>xe(s,"up"),tabIndex:-1,title:he||_,type:"button"},Te||(Te=d.createElement(ct,{className:"up-icon"}))),d.createElement("div",{className:`${u}--number__rule-divider`}))),V&&d.createElement("hr",{className:`${u}--number-input__divider`}),p.validation?p.validation:d.createElement(je,{id:p.helperId,disabled:o,description:j})))});xt.propTypes={allowEmpty:i.bool,className:i.string,decorator:i.node,defaultValue:i.oneOfType([i.number,i.string]),disableWheel:i.bool,disabled:i.bool,formatOptions:vt,helperText:i.node,hideLabel:i.bool,hideSteppers:i.bool,iconDescription:i.string,id:i.string.isRequired,inputMode:i.oneOf(["none","text","tel","url","email","numeric","decimal","search"]),invalid:i.bool,invalidText:i.node,label:i.node,light:Ee(i.bool),locale:i.string,max:i.number,min:i.number,onChange:i.func,onClick:i.func,onKeyUp:i.func,pattern:i.string,readOnly:i.bool,size:i.oneOf(["sm","md","lg"]),slug:Ee(i.node),step:i.number,translateWithId:i.func,type:i.oneOf(["number","text"]),value:i.oneOfType([i.number,i.string]),warn:i.bool,warnText:i.node};const We=({disabled:n,id:t,hideLabel:e,label:r})=>{const a=le(),l=R({[`${a}--label`]:!0,[`${a}--label--disabled`]:n,[`${a}--visually-hidden`]:e});return r?d.createElement(Me,{as:"label",htmlFor:t,className:l},r):null};We.propTypes={disabled:i.bool,hideLabel:i.bool,id:i.string,label:i.node};function je({disabled:n,description:t,id:e}){const r=le(),a=R(`${r}--form__helper-text`,{[`${r}--form__helper-text--disabled`]:n});return t?d.createElement(Me,{as:"div",id:e,className:a},t):null}je.propTypes={description:i.node,disabled:i.bool,id:i.string};function Nt({allowEmpty:n,invalid:t,value:e,max:r,min:a}){return t?!1:e===""?n:!(e>r||e<a)}function Re(n){n.preventDefault()}export{xt as N,vt as a};
