import{b as de,d as o,P as t,g as H}from"./index-Ccw_5OKp.js";import{e as a,r as $}from"./index-DtHxqM--.js";import{u as pe}from"./useNormalizedInputProps-Cy1SYPx-.js";import{F as ce}from"./FormContext-C4Nuixum.js";import{T as N}from"./Text-CPocCdE2.js";const ue=i=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":i}),me=i=>({"aria-describedby":i}),xe=i=>({"aria-describedby":i}),be=i=>{let{sharedTextInputProps:x,invalid:p,invalidId:l,warn:d,warnId:v,hasHelper:b,helperId:w}=i;return{...x,...p?ue(l):{},...d?me(v):{},...b?xe(w):{}}};function fe(i,x){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"characters";const l=x-i;if(l<=10&&l>0){const d=l===1?p.slice(0,-1):p;return`${l} ${d} left.`}return l<=0?`Maximum ${p} reached.`:null}const M=a.forwardRef(function(x,p){var D;let{className:l,decorator:d,disabled:v=!1,helperText:b,hideLabel:w,id:C,inline:r=!1,invalid:V=!1,invalidText:j,labelText:E,light:P,onChange:B=()=>{},onClick:G=()=>{},placeholder:z,readOnly:T,size:c,type:J="text",warn:K=!1,warnText:Q,enableCounter:O=!1,maxCount:h,slug:_,...A}=x;const e=de(),{defaultValue:y,value:I}=A,[R,U]=$.useState((y==null?void 0:y.toString().length)||(I==null?void 0:I.toString().length)||0),n=pe({id:C,readOnly:T,disabled:v,invalid:V,invalidText:j,warn:K,warnText:Q}),X=o(`${e}--text-input`,{[`${e}--text-input--light`]:P,[`${e}--text-input--invalid`]:n.invalid,[`${e}--text-input--warning`]:n.warn,[`${e}--text-input--${c}`]:c,[`${e}--layout--size-${c}`]:c}),F={id:C,onChange:s=>{var f;n.disabled||(U((f=s.target.value)==null?void 0:f.length),B(s))},onClick:s=>{n.disabled||G(s)},placeholder:z,type:J,ref:p,className:X,title:z,disabled:n.disabled,readOnly:T,"aria-describedby":b&&n.helperId,...A};O&&(F.maxLength=h);const Y=o([o(`${e}--form-item`,l)],`${e}--text-input-wrapper`,{[`${e}--text-input-wrapper--readonly`]:T,[`${e}--text-input-wrapper--light`]:P,[`${e}--text-input-wrapper--inline`]:r,[`${e}--text-input-wrapper--inline--invalid`]:r&&n.invalid}),Z=o(`${e}--label`,{[`${e}--visually-hidden`]:w,[`${e}--label--disabled`]:n.disabled,[`${e}--label--inline`]:r,[`${e}--label--inline--${c}`]:r&&!!c}),ee=o(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:n.disabled,[`${e}--form__helper-text--inline`]:r}),te=o(`${e}--text-input__field-outer-wrapper`,{[`${e}--text-input__field-outer-wrapper--inline`]:r}),ne=o(`${e}--text-input__field-wrapper`,{[`${e}--text-input__field-wrapper--warning`]:n.warn,[`${e}--text-input__field-wrapper--slug`]:_,[`${e}--text-input__field-wrapper--decorator`]:d}),ae=o({[`${e}--text-input__invalid-icon`]:n.invalid||n.warn,[`${e}--text-input__invalid-icon--warning`]:n.warn}),ie=o(`${e}--label`,{[`${e}--label--disabled`]:v,[`${e}--text-input__label-counter`]:!0}),le=O&&h?a.createElement(N,{as:"div",className:ie},`${R}/${h}`):null,re=E?a.createElement(N,{as:"label",htmlFor:C,className:Z},E):null,L=a.createElement("div",{className:`${e}--text-input__label-wrapper`},re,le),S=b?a.createElement(N,{as:"div",id:n.helperId,className:ee},b):null,se=a.createElement("input",be({sharedTextInputProps:F,invalid:n.invalid,invalidId:n.invalidId,warn:n.warn,warnId:n.warnId})),{isFluid:g}=$.useContext(ce),W=$.useRef(null),[k,oe]=$.useState(""),u=fe(R,h);$.useEffect(()=>{if(u&&u!==k){const s=W.current;if(s){s.textContent="";const f=setTimeout(()=>{s&&(s.textContent=u,oe(u))},1e3);return()=>{f&&clearTimeout(f)}}}},[u,k]);const q=n.icon;let m=a.isValidElement(_??d)?_??d:null;return m&&((D=m.type)==null?void 0:D.displayName)==="AILabel"&&(m=a.cloneElement(m,{size:"mini"})),a.createElement("div",{className:Y},r?a.createElement("div",{className:`${e}--text-input__label-helper-wrapper`},L,!g&&(n.validation||S)):L,a.createElement("div",{className:te},a.createElement("div",{className:ne,"data-invalid":n.invalid||null},q&&a.createElement(q,{className:ae}),se,_?m:d?a.createElement("div",{className:`${e}--text-input__field-inner-wrapper--decorator`},m):"",a.createElement("span",{className:`${e}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:W},u),g&&a.createElement("hr",{className:`${e}--text-input__divider`}),g&&!r&&n.validation),!g&&!r&&(n.validation||S)))});M.displayName="TextInput";M.propTypes={className:t.string,decorator:t.node,defaultValue:t.oneOfType([t.string,t.number]),disabled:t.bool,enableCounter:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node.isRequired,light:H(t.bool),maxCount:t.number,onChange:t.func,onClick:t.func,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:H(t.node),type:t.string,value:t.oneOfType([t.string,t.number]),warn:t.bool,warnText:t.node};export{M as T,be as t,fe as u};
