import{b as R,i as te,c as ae,d as I,_ as se,j as re,m as b,E as ne,S as ce,P as e,g as oe,k as le}from"./index-C360Eztx.js";import{e as r,r as l}from"./index-DtHxqM--.js";import{n as y,c as w}from"./events-CdfZZS3f.js";import{F as ie}from"./FormContext-C4Nuixum.js";import{S as ue}from"./bucket-15-DqPvCVP_.js";var D;const O=r.forwardRef(function({autoComplete:i="off",className:F,closeButtonLabelText:C="Clear search input",defaultValue:$,disabled:h,isExpanded:o=!0,id:K,labelText:j,light:x,onChange:v=()=>{},onClear:k=()=>{},onKeyDown:V,onExpand:s,placeholder:S="Search",renderIcon:_,role:q="searchbox",size:g="md",type:B="text",value:c,...H},M){const A=!!(c||$),t=R(),{isFluid:G}=l.useContext(ie),n=l.useRef(null),J=te([M,n]),P=l.useRef(null),L=ae("search-input"),u=K||L,T=`${u}-search`,[Q,d]=l.useState(A||!1),[U,W]=l.useState(c),X=I({[`${t}--search`]:!0,[`${t}--search--sm`]:g==="sm",[`${t}--search--md`]:g==="md",[`${t}--search--lg`]:g==="lg",[`${t}--search--light`]:x,[`${t}--search--disabled`]:h,[`${t}--search--fluid`]:G},F),Y=I({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!Q||!o});c!==U&&(d(!!c),W(c));function N(){var a;if(!c&&n.current&&(n.current.value=""),n.current){const f=Object.assign({},n.current,{value:""}),m={bubbles:!1,cancelable:!1,currentTarget:n.current,defaultPrevented:!1,eventPhase:0,isDefaultPrevented:()=>!1,isPropagationStopped:()=>!1,isTrusted:!1,nativeEvent:new Event("change"),persist:y,preventDefault:y,stopPropagation:y,target:f,timeStamp:0,type:"change"};v(m)}k(),d(!1),(a=n.current)==null||a.focus()}function Z(a){d(a.target.value!=="")}function z(a){var f,m;b(a,le)&&(a.stopPropagation(),(f=n.current)!=null&&f.value?N():s&&o&&((m=P.current)==null||m.focus()))}function ee(a){(b(a,ne)||b(a,ce))&&(a.stopPropagation(),s&&s(a))}return r.createElement("div",{role:"search","aria-label":S,className:X},r.createElement("div",{"aria-labelledby":s?T:void 0,role:s?"button":void 0,className:`${t}--search-magnifier`,onClick:s,onKeyDown:ee,tabIndex:s&&!o?0:-1,ref:P,"aria-expanded":s&&o?!0:s&&!o?!1:void 0,"aria-controls":s?u:void 0},r.createElement(E,{icon:_})),r.createElement("label",{id:T,htmlFor:u,className:`${t}--label`},j),r.createElement("input",se({autoComplete:i,className:`${t}--search-input`,defaultValue:$,disabled:h,role:q,ref:J,id:u,onChange:w([v,Z]),onKeyDown:w([V,z]),placeholder:S,type:B,value:c,tabIndex:s&&!o?-1:void 0},H)),r.createElement("button",{"aria-label":C,className:Y,disabled:h,onClick:N,title:C,type:"button"},D||(D=r.createElement(re,null))))});O.displayName="Search";O.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:oe(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function E({icon:p}){const i=R();return p?r.createElement(p,{className:`${i}--search-magnifier-icon`}):r.createElement(ue,{className:`${i}--search-magnifier-icon`})}E.propTypes={icon:e.oneOfType([e.func,e.object])};export{O as S};
