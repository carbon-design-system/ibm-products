import{j as a,aA as W,e,r as m,B as d,aj as F}from"./iframe-Bn5s87s4.js";import{useMDXComponents as z}from"./index-DEJj3RFA.js";import{P as I,a as u}from"./ProgressIndicator-DuFaBOSv.js";import{T as q,R as E}from"./TileGroup-BmeXNjH_.js";import{T as S}from"./TextInput-DKAT8fdL.js";import{S as y,H as b}from"./index-DlCtKpC6.js";import{u as p,a as O,S as j}from"./StepGroup-Cd2pQlAB.js";import{T as L}from"./Tearsheet-BeUiHKn8.js";import{H as X,a as J}from"./HeaderName-Z790LxE8.js";import{H as U}from"./HeaderContainer-nxpKhYEA.js";import{L as V}from"./index-D9UDgIUg.js";import{S as K}from"./SidePanel-Dhn7nGGO.js";import"./preload-helper-PPVm8Dsz.js";import"./Text-DPxQhslY.js";import"./bucket-19-C9HfQtRN.js";import"./bucket-9-CWwdCVGV.js";import"./index-C9jChmFj.js";import"./bucket-18-CjQdBR0X.js";import"./utils-DQejB-zS.js";import"./bucket-14-DJtJQxMb.js";import"./useNormalizedInputProps-jypMYg7X.js";import"./FormContext-C5gYs1Iz.js";import"./TearsheetShell-B43UyWKV.js";import"./useResizeObserver-tdiREPfS.js";import"./useIsomorphicEffect-C6KJAnKi.js";import"./getNodeTextContent-C8IeKkUQ.js";import"./props-helper-CnD5lOtX.js";import"./ComposedModal-0BWEXzM1.js";import"./ButtonSet-CXQgRZeZ.js";import"./InlineLoading-D_UBaimj.js";import"./bucket-6-4QPuED9F.js";import"./mergeRefs-BZpmU3mx.js";import"./requiredIfGivenPropIsTruthy-C6rAip-Q.js";import"./wrapFocus-p8CeO0Q6.js";import"./Wrap-Chkdp82D.js";import"./usePortalTarget-GjmdVlNb.js";import"./index-CcsFybhx.js";import"./useFocus-D9EoHutA.js";import"./usePreviousValue-Sk-kuPEp.js";import"./ActionSet-GABrFEnO.js";import"./devtools-mVE9FHp6.js";import"./Link-C50XFcPM.js";import"./LayerContext-BihYEre2.js";import"./clamp--00YEiB8.js";import"./index-DYQz9bQ1.js";import"./usePrefersReducedMotion-BH6pVHWR.js";import"./usePresence-DF_StNwK.js";import"./bucket-0-Ba9itZYk.js";function _(n){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...z(),...n.components};return a.jsxs(a.Fragment,{children:[a.jsx(t.h1,{id:"step-flows",children:"Step flows"}),`
`,a.jsx(t.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,a.jsxs(t.ul,{children:[`
`,a.jsx(t.li,{children:a.jsx(t.a,{href:"#overview",children:"Overview"})}),`
`,a.jsx(t.li,{children:a.jsx(t.a,{href:"#example-usage",children:"Example usage"})}),`
`]}),`
`,a.jsx(t.h2,{id:"overview",children:"Overview"}),`
`,a.jsxs(t.p,{children:[`The step flow utility can be used to compose stepping experiences across any
variation of components. This utility allows for stepping as commonly seen in
the `,a.jsx(t.code,{children:"CreateTearsheet"})," and ",a.jsx(t.code,{children:"CreateFullPage"}),` components, but through a more
composable and headless delivery. This allows for the flexibility to incorporate
stepped experiences within any component.`]}),`
`,a.jsx(t.p,{children:"Included assets:"}),`
`,a.jsxs(t.ul,{children:[`
`,a.jsx(t.li,{children:a.jsx(t.code,{children:"StepProvider"})}),`
`,a.jsx(t.li,{children:a.jsx(t.code,{children:"useStepContext"})}),`
`,a.jsxs(t.li,{children:[a.jsx(t.code,{children:"StepGroup"}),", handles rendering of step components so ",a.jsx(t.em,{children:"only"}),` the current step
is in the DOM`]}),`
`]}),`
`,a.jsx(t.h2,{id:"example-usage",children:"Example usage"}),`
`,a.jsxs(t.p,{children:["Wrap your stepped component in the ",a.jsx(t.code,{children:"StepProvider"}),` from the utility. Use
`,a.jsx(t.code,{children:"<StepGroup>"}),` and step components with your new step enabled tearsheet
component. Any content outside of the `,a.jsx(t.code,{children:"<StepGroup>"})," will render on every step."]}),`
`,a.jsx(t.pre,{children:a.jsx(t.code,{className:"language-tsx",children:`const Example = () => {
  return <StepProvider>
    <Tearsheet>
      <StepGroup>
        <Step1 />
        <Step2 />
        {someCondition && <ConditionalStep />}
      </StepGroup>
    <Tearsheet>
  </StepProvider>
}
`})}),`
`,a.jsxs(t.p,{children:["Any component inside of the step enabled component (",a.jsx(t.code,{children:"StepProvider"}),`) can use
`,a.jsx(t.code,{children:"useStepContext()"}),` to retrieve the step context state, giving the ability to get
and set the state.`]}),`
`,a.jsx(t.pre,{children:a.jsx(t.code,{className:"language-tsx",children:`const Step1 = () => {
  const { setFormState, formState } = useStepContext();
  const { email } = formState ?? {};
  return (
    <TextInput
      labelText="Email"
      value={email ?? ''}
      onChange={(e) => {
        setFormState?.((prev: object) => ({
          ...prev,
          email: e.target.value,
        }));
      }}
    />
  );
};
`})}),`
`,a.jsxs(t.p,{children:["Step state (returned from ",a.jsx(t.code,{children:"useStepContext"}),"):"]}),`
`,a.jsx(t.pre,{children:a.jsx(t.code,{className:"language-ts",children:`// This interface should be extended by the consumer to match
// their own unique use case given the fields within their
// own stepped experience
interface formStateType {
  [key: string]: any;
}

export interface StepState {
  formState: formStateType;
  setFormState: Dispatch<SetStateAction<formStateType>>;
  totalSteps: number | undefined;
  setTotalSteps: Dispatch<SetStateAction<number | undefined>>;
  currentStep: number;
  handleGoToStep: (a: number) => void;
  handleNext: () => void;
  handlePrevious: () => void;
}
`})}),`
`,a.jsx(W,{of:A})]})}function Q(n={}){const{wrapper:t}={...z(),...n.components};return t?a.jsx(t,{...n,children:a.jsx(_,{...n})}):_(n)}const Y=".c4p--side-panel .custom-intro-tile{block-size:120px;inline-size:200px}.step-container{inline-size:50%;min-inline-size:320px}.my-custom-action-set{display:grid;grid-auto-rows:minmax(auto,auto);grid-template-columns:repeat(6,1fr)}.step-action-button{inline-size:100%}.step-action-button__cancel{grid-column:span 4}.cds--tile-group div{display:flex;flex-wrap:wrap;gap:1rem}.custom-intro-tile{block-size:240px;inline-size:280px}.selected-intro-option{padding-block-end:1.5rem;text-transform:capitalize}.step-form-items{display:flex;container-type:size}.step-form-items #city{margin-inline-end:1.5rem}.c4p--tearsheet__content{position:relative;display:flex;flex-direction:column;padding:1.5rem 1.5rem 0}.c4p--step-actions__button-container.my-custom-action-set{position:fixed;background-color:var(--cds-background, #ffffff);border-block-start:1px solid var(--cds-border-subtle-01, #c6c6c6);inline-size:100%;inset-block-end:0;inset-inline-start:0;margin-block-start:auto;max-block-size:120px}.c4p--step-actions__button-container.my-custom-action-set button{inline-size:100%;max-inline-size:none}.c4p--tearsheet__influencer{padding:1.5rem 2rem}.c4p--tearsheet .c4p--tearsheet__influencer+.c4p--tearsheet__right .c4p--step-actions__button-container.my-custom-action-set{inset-inline-start:257px;inline-size:calc(100% - 257px)}.step-heading{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);padding-block-end:1.5rem}#root{display:flex;align-items:center;justify-content:center;min-block-size:100vh}",R=({children:n,open:t,onClose:r,influencer:s,title:l,hasCloseIcon:i,closeIconDescription:f="Close",selectorPrimaryFocus:h,...x})=>{const c=p(),o=s?.(c)||null;return e.createElement(L,{...x,influencer:o,open:t,onClose:r,title:l,hasCloseIcon:i,closeIconDescription:f,selectorPrimaryFocus:h},n)};R.__docgenInfo={description:"",methods:[],displayName:"StepTearsheet",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},influencer:{required:!1,tsType:{name:"union",raw:"((a: StepState) => ReactNode) | null",elements:[{name:"unknown"},{name:"null"}]},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"ReactNode"},description:""},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:""},closeIconDescription:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Close'",computed:!1}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:""}}};const w=({buttonRenderer:n})=>{const t=p();return n(t)};w.displayName="StepActions";const k=!0,D=n=>{m.useEffect(()=>{document?.querySelector(n)?.focus()},[n])};function Z(){const{setFormState:n,formState:t}=p(),{email:r}=t??{};return D("#email"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 1"),e.createElement(S,{id:"email",onChange:s=>{n?.(l=>({...l,email:s.target.value}))},labelText:"Email",value:r??""}))}function ee(){const{setFormState:n,formState:t}=p(),{city:r,state:s}=t||{};return D("#city"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 2"),e.createElement("div",{className:"step-form-items"},e.createElement(S,{id:"city",onChange:l=>{n(i=>({...i,city:l.target.value}))},labelText:"City",value:r??""}),e.createElement(S,{id:"state",onChange:l=>{n(i=>({...i,state:l.target.value}))},labelText:"State",value:s??""})))}function te(){const{formState:n}=p();return e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 3"),e.createElement("div",null,"Form state",e.createElement(F,{type:"multi"},JSON.stringify(n,null,2))))}const ne=({currentStep:n,handleGoToStep:t},r,s,l)=>s?null:e.createElement("div",{className:"tearsheet-stories__dummy-content-block"},e.createElement("h6",{className:"selected-intro-option"},l),e.createElement(I,{vertical:!0,onChange:i=>t(i+1)},e.createElement(u,{complete:n>1,current:n===1,label:"Step 1",secondaryLabel:"Optional label"}),e.createElement(u,{complete:n>2,current:n===2,label:"Step 2"}),e.createElement(u,{current:n===3,label:"Step 3",complete:n>3}),l==="plus"&&e.createElement(u,{current:n===4,label:"Plus only step"}))),ae=()=>e.createElement(e.Fragment,null,"This step only renders for plus flows."),B=()=>{const n=m.useRef(null),[t,r]=m.useState(!1),[s,l]=m.useState(!0),[i,f]=m.useState("standard"),h=(c,o)=>s?!1:!c?.email&&o===1||(!c?.city||!c?.state)&&o===2,x=c=>!!s;return e.createElement(O,null,e.createElement("div",{ref:n},e.createElement(d,{onClick:()=>r(!0)},t?"Close":"Open"),e.createElement(R,{influencer:s?null:c=>ne(c,k,s,i),open:t,onClose:()=>r(!1),title:"Tearsheet title",hasCloseIcon:!1,selectorPrimaryFocus:"#email"},s&&e.createElement(q,{valueSelected:i,defaultSelected:"standard",legend:"Choose create flow",name:"radio tile group",onChange:c=>f(c)},e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-1",value:"standard"},"Standard"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-2",value:"premium"},"Premium"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-3",value:"plus"},"Plus")),!s&&e.createElement(j,null,e.createElement(Z,null),e.createElement(ee,null),e.createElement(te,null),i==="plus"&&e.createElement(ae,null)),e.createElement("div",{className:"c4p--step-actions__button-container my-custom-action-set"},e.createElement(w,{buttonRenderer:({currentStep:c,handleNext:o,totalSteps:g,handleGoToStep:v,setFormState:C,handlePrevious:N,formState:T})=>e.createElement(e.Fragment,null,e.createElement(d,{className:"step-action-button step-action-button__cancel",kind:"ghost",onClick:()=>{r(!1),l(!0)},size:"xl"},"Cancel"),e.createElement(d,{className:"step-action-button",kind:"secondary",onClick:()=>{if(c===1&&k){l(!0);return}N()},disabled:x(),size:"xl"},"Back"),e.createElement(d,{disabled:h(T,c),size:"xl",className:"step-action-button",onClick:()=>{if(s){l(!1);return}c===g?(r(!1),v(1),C({}),l(!0)):o()}},c===g?"Submit":"Next"))})))))};B.__docgenInfo={description:"",methods:[],displayName:"Example"};const G=({subtitle:n,children:t,open:r,onClose:s,title:l,selectorPrimaryFocus:i,size:f="md",...h})=>{const x=p(),c=n?.(x)||null;return e.createElement(K,{size:f,open:r,onRequestClose:s,title:l,selectorPrimaryFocus:i,subtitle:c,...h},e.createElement(V,null,t))};G.__docgenInfo={description:"",methods:[],displayName:"StepSidePanel",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},subtitle:{required:!1,tsType:{name:"union",raw:"((a: StepState) => ReactNode) | null",elements:[{name:"unknown"},{name:"null"}]},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"string"},description:""},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:""},closeIconDescription:{required:!1,tsType:{name:"string"},description:""},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"},{name:"literal",value:"'xl'"},{name:"literal",value:"'2xl'"}]},description:"",defaultValue:{value:"'md'",computed:!1}}}};const P=!0,H=n=>{m.useEffect(()=>{document?.querySelector(n)?.focus()},[n])};function se(){const{setFormState:n,formState:t}=p(),{email:r}=t??{};return H("#email"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 1"),e.createElement(S,{id:"email",onChange:s=>{n?.(l=>({...l,email:s.target.value}))},labelText:"Email",value:r??""}))}function le(){const{setFormState:n,formState:t}=p(),{city:r,state:s}=t||{};return H("#city"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 2"),e.createElement("div",{className:"step-form-items"},e.createElement(S,{id:"city",onChange:l=>{n(i=>({...i,city:l.target.value}))},labelText:"City",value:r??""}),e.createElement(S,{id:"state",onChange:l=>{n(i=>({...i,state:l.target.value}))},labelText:"State",value:s??""})))}function re(){const{formState:n}=p();return e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 3"),e.createElement("div",null,"Form state",e.createElement(F,{type:"multi"},JSON.stringify(n,null,2))))}const ie=({currentStep:n,handleGoToStep:t},r,s,l)=>s?null:e.createElement("div",{className:"tearsheet-stories__dummy-content-block"},e.createElement("h6",{className:"selected-intro-option"},l),e.createElement(I,{onChange:i=>t(i+1)},e.createElement(u,{complete:n>1,current:n===1,label:"Step 1"}),e.createElement(u,{complete:n>2,current:n===2,label:"Step 2"}),e.createElement(u,{current:n===3,label:"Step 3",complete:n>3}),l==="plus"&&e.createElement(u,{current:n===4,label:"Plus only step"}))),oe=()=>e.createElement(e.Fragment,null,"This step only renders for plus flows."),$=()=>{const n=m.useRef(null),[t,r]=m.useState(!1),[s,l]=m.useState(!0),[i,f]=m.useState("standard"),h=(o,g)=>s?!1:!o?.email&&g===1||(!o?.city||!o?.state)&&g===2,x=o=>!!s,c=()=>e.createElement(U,{render:()=>e.createElement(X,{"aria-label":"IBM [Product]"},e.createElement(J,{href:"/",prefix:"IBM"},"[Product]"))});return e.createElement(e.Fragment,null,c(),e.createElement(O,null,e.createElement("div",{ref:n},e.createElement(d,{onClick:()=>r(o=>!o)},t?"Close":"Open"),e.createElement(G,{subtitle:s?null:o=>ie(o,P,s,i),open:t,onClose:()=>r(!1),title:"Side panel title",selectorPrimaryFocus:"#email"},s&&e.createElement(q,{valueSelected:i,defaultSelected:"standard create flow",legend:"Choose create flow",name:"radio tile group",onChange:o=>f(o)},e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-1",value:"standard create flow"},"Standard"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-2",value:"premium create flow"},"Premium"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-3",value:"plus create flow"},"Plus")),!s&&e.createElement(j,null,e.createElement(se,null),e.createElement(le,null),e.createElement(re,null),i==="plus"&&e.createElement(oe,null)),e.createElement("div",{className:"c4p--step-actions__button-container my-custom-action-set"},e.createElement(w,{buttonRenderer:({currentStep:o,handleNext:g,totalSteps:v,handleGoToStep:C,setFormState:N,handlePrevious:T,formState:M})=>e.createElement(e.Fragment,null,e.createElement(d,{className:"step-action-button step-action-button__cancel",kind:"ghost",onClick:()=>{r(!1),l(!0)},size:"xl"},"Cancel"),e.createElement(d,{className:"step-action-button",kind:"secondary",onClick:()=>{if(o===1&&P){l(!0);return}T()},disabled:x(),size:"xl"},"Back"),e.createElement(d,{disabled:h(M,o),size:"xl",className:"step-action-button",onClick:()=>{if(s){l(!1);return}o===v?(r(!1),C(1),N({}),l(!0)):g()}},o===v?"Submit":"Next"))}))))))};$.__docgenInfo={description:"",methods:[],displayName:"Example"};const st={title:"Patterns/Step flows",component:j,tags:["autodocs"],parameters:{styles:Y,docs:{page:Q}}},A=B.bind({});A.args={};const ce=$.bind({});ce.args={};const lt=["tearsheetWithSteps","sidePanelWithSteps"];export{lt as __namedExportsOrder,st as default,ce as sidePanelWithSteps,A as tearsheetWithSteps};
//# sourceMappingURL=StepFlow.stories-CmYBUP2G.js.map
