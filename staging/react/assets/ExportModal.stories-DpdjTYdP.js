import{j as n,aB as S,r as a,e,B as d,A as M}from"./iframe-Cx5KSUkN.js";import{C as N,M as w,a as O,b as $}from"./ComposedModal-CZIDkxYx.js";import{F as R}from"./FormGroup-BK3HGy7x.js";import{L as H}from"./InlineLoading-CiXSaq1b.js";import{R as A}from"./RadioButton-C-R-Tpyc.js";import{R as P}from"./RadioButtonGroup-9N2R0eij.js";import{T as z}from"./TextInput-BSsh92ZE.js";import{useMDXComponents as D}from"./index-lpRWsnM8.js";import{w as y}from"./wait-CTNFjQS8.js";import{a as L}from"./bucket-6-CTMsIO5l.js";import{s as B}from"./codePreviewer-C0R__HqG.js";import"./index-CiscxeF_.js";import"./LayerContext-cpvj6sRw.js";import"./clamp--00YEiB8.js";import"./ButtonSet-DM5qsHJo.js";import"./mergeRefs-BZpmU3mx.js";import"./requiredIfGivenPropIsTruthy-C6rAip-Q.js";import"./wrapFocus-DKguJtfl.js";import"./Text-Dfk9uCpH.js";import"./index-B9RenrJ5.js";import"./bucket-18-BsWhzxVc.js";import"./utils-Cm2OYkF4.js";import"./bucket-19-L8p_zxw3.js";import"./useNormalizedInputProps-Ckl1dNXt.js";import"./FormContext-B2Gj6hIG.js";import"./AccordionItem-l1ahdCo-.js";import"./SkeletonText-DlkLeaaB.js";import"./AspectRatio-CJz7tOC6.js";import"./BreadcrumbItem-D31gGD6f.js";import"./Link-CqhHBFwL.js";import"./bucket-13-Dcu5duvg.js";import"./Checkbox-D0CmUts8.js";import"./index-DMtEKiNH.js";import"./inheritsLoose-DHKJTbHM.js";import"./MultiSelect-QRL94PtN.js";import"./defaultItemToString-zSItMTD_.js";import"./useAttachedMenu-8SzJaBid.js";import"./DataTable-B8ZkGvG6.js";import"./TableRow-DzqLFxTX.js";import"./wrapComponent-Cn-xnvE3.js";import"./bucket-0-DSsX9IMy.js";import"./bucket-1-DxKSVg0b.js";import"./TableToolbar-BnP_KZ9E.js";import"./index-DDD0vdKi.js";import"./TableSelectRow-CzEltwVB.js";import"./OverflowMenuItem-6yxr4_5x.js";import"./TableToolbarSearch-B6flQQoC.js";import"./Search-BGGTyo9i.js";import"./bucket-15-Cv3_8V3l.js";import"./index-sYdbAcSp.js";import"./useOutsideClick-jUy6eBsu.js";import"./DatePicker-BHTipTjE.js";import"./bucket-2-BlvkVtPX.js";import"./NumberInput-BsNfWt2F.js";import"./useControllableState-K1GvegTe.js";import"./bucket-16-CUZPTeHj.js";import"./Dropdown-UDtNxzP0.js";import"./Form-9ZTixqiB.js";import"./FormLabel-Cg58jY9o.js";import"./Grid-BshoCGfa.js";import"./Row-DDTo-tFc.js";import"./Column-DjqfOiIB.js";import"./Icon.Skeleton-DU0Og2vO.js";import"./ListItem-DcH9o7gL.js";import"./MenuItem-CWMHTNfB.js";import"./index-Dk561UWg.js";import"./Notification-BWBY10gL.js";import"./bucket-10-vy7WitAF.js";import"./useMatchMedia-P1A856Pl.js";import"./DefinitionTooltip-B_d1_SjV.js";import"./Tag-CKDyYBWG.js";import"./OperationalTag-D2fJj9gl.js";import"./Pagination-B-kaBTkU.js";import"./Select-rbMv15LB.js";import"./SelectItem-B0UdvIw8.js";import"./ProgressIndicator-DhgULmwy.js";import"./bucket-9-B7qA5Jwb.js";import"./TileGroup-DUJiySmU.js";import"./bucket-14-moavN2LV.js";import"./TimePickerSelect-Bq69nLb5.js";import"./Slider-CaZTEQCu.js";import"./StructuredList-CuHI5v2Y.js";import"./Tabs-CJ9I_XQd.js";import"./DismissibleTag-Jzqa0QEv.js";import"./SelectableTag-D76FiE4E.js";import"./TextArea-D_XiDcI8.js";import"./Tile-DsQg91En.js";import"./Toggle-By5-_vYR.js";import"./Content-BlvmhYsy.js";import"./HeaderName-vqTciH3C.js";import"./Link-jAL1WjTj.js";import"./HeaderContainer-Be6TgpA6.js";import"./HeaderGlobalBar-DsXENH2b.js";import"./AriaPropTypes-Bt0fl-0-.js";import"./SideNavLink-BpjF6pCZ.js";import"./bucket-11-DlLc9LPL.js";import"./SideNavLinkText-Bzx59Q8I.js";import"./HeaderPanel-BLYV9Sl9.js";import"./SideNavMenuItem-DZMj9hNb.js";import"./UnorderedList-C-mhMNRW.js";import"./bucket-5-Bv11manZ.js";import"./index-_jMLRox9.js";import"./bucket-7-RD2fLsYP.js";import"./bucket-8-Co6LXGLS.js";import"./bucket-12-DjefWyAy.js";import"./bucket-17-PPxCoRvV.js";import"./bucket-20-DFG_j5XO.js";const W=".export-modal__body{margin-block-end:1rem;padding-inline-end:calc(20% - 1rem)}.export-modal__messaging{display:flex;align-items:center}.export-modal__messaging p{margin-inline-start:.5rem}.export-modal__checkmark-icon{fill:var(--cds-button-primary, #0f62fe)}.export-modal__error-icon{fill:var(--cds-button-danger-primary, #da1e28)}",j=[y];function T(s){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...D(),...s.components};return n.jsxs(n.Fragment,{children:[n.jsx(t.h1,{id:"export-modal",children:"Export Modal"}),`
`,n.jsxs(t.p,{children:[n.jsx(t.a,{href:"https://pages.github.ibm.com/carbon/ibm-products/patterns/export/usage/",rel:"nofollow",children:"Usage guidelines"}),`
|
`,n.jsx(t.a,{href:"https://www.carbondesignsystem.com/components/modal/usage",rel:"nofollow",children:"Carbon modal usage guidelines"}),`
|
`,n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-modal",rel:"nofollow",children:"Carbon modal documentation"})]}),`
`,n.jsx(t.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#overview",children:"Overview"})}),`
`,n.jsxs(t.li,{children:[n.jsx(t.a,{href:"#example-usage",children:"Example usage"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#standard",children:"Standard"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#with-extension-validation",children:"With Extension Validation"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#with-preformatted-extensions",children:"With Preformatted Extensions"})}),`
`]}),`
`]}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,n.jsx(t.h2,{id:"overview",children:"Overview"}),`
`,n.jsx(t.p,{children:`Export modal is a pattern which is applicable to both exporting and downloading.
Below is the Modal dialog version of the export pattern.`}),`
`,n.jsx(t.p,{children:"To build this pattern, we recommend including the following ingredients:"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-composedmodal",rel:"nofollow",children:"ComposedModal"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-button",rel:"nofollow",children:"cds-button"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-formgroup",rel:"nofollow",children:"FormGroup"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-textinput",rel:"nofollow",children:"TextInput"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-radiobutton",rel:"nofollow",children:"RadioButton"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-loading",rel:"nofollow",children:"Loading"})}),`
`]}),`
`,n.jsx(t.h3,{id:"standard",children:"Standard"}),`
`,n.jsx(S,{of:b,additionalActions:[{title:"Open in Stackblitz",onClick:()=>B({story:b,customFunctionDefs:j,styles:F.parameters.styles})}]}),`
`,n.jsx(t.h3,{id:"with-extension-validation",children:"With Extension Validation"}),`
`,n.jsx(S,{of:E,additionalActions:[{title:"Open in Stackblitz",onClick:()=>B({story:E,customFunctionDefs:j,styles:F.parameters.styles})}]}),`
`,n.jsx(t.h3,{id:"with-preformatted-extensions",children:"With Preformatted Extensions"}),`
`,n.jsx(S,{of:g,additionalActions:[{title:"Open in Stackblitz",onClick:()=>B({story:g,customFunctionDefs:j,styles:F.parameters.styles})}]})]})}function G(s={}){const{wrapper:t}={...D(),...s.components};return t?n.jsx(t,{...s,children:n.jsx(T,{...s})}):T(s)}const F={title:"Patterns/Export Modal",component:()=>{},tags:["autodocs"],parameters:{styles:W,docs:{page:G}}},V=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState("Sample02.pdf"),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(!1),m=i||x||u,o="export-modal",c=()=>{t(!1),f(!1),_(!1)},h=async()=>{p(!0),await y(1e3),f(!0),p(!1)},k=i||!l;return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",preventCloseOnClickOutside:!0,onClose:c},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:c}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement(z,{labelText:"File name",value:l,onChange:v=>C(v.target.value)}),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},i&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),u&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),x&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:c},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:h,disabled:k},"Export"))))},X=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState("Sample02.pdf"),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(!1),m=i||x||u,o="export-modal",c=()=>{t(!1),f(!1),_(!1)},h=async()=>{p(!0),await y(1e3),f(!0),p(!1)},k=()=>{let r=["pdf"];if(!r||!r.length)return!1;if(!l.includes("."))return!0;const I=l.split(".").pop();return!r.includes(I)},v=i||!l||k();return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",onClose:c},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:c}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement("p",{className:`${o}__body`},"File must be exported in a PDF format."),!m&&e.createElement(z,{labelText:"File name",value:l,onChange:r=>C(r.target.value),invalid:k(),invalidText:"File must have valid extension .pdf"}),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},i&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),u&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),x&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:c},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:h,disabled:v},"Export"))))},Y=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState(!1),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(""),m=l||u||i,o="export-modal",c=[{extension:"YAML",description:"best for IBM managed cloud"},{extension:"BAR",description:"best for integration server"}];a.useEffect(()=>{s||_(c[0].extension)},[s]);const h=()=>{t(!1),p(!1),f(!1)},k=async()=>{C(!0),await y(1e3),p(!0),C(!1)},v=l;return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",onClose:h},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:h}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement(R,{legendText:"Choose an export format"},e.createElement(P,{orientation:"vertical",onChange:r=>_(r),valueSelected:x,name:"extensions","aria-label":"extensions"},c.map(r=>e.createElement(A,{key:r.extension,id:r.extension,value:r.extension,labelText:`${r.extension} (${r.description})`,"data-modal-primary-focus":!0})))),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},l&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),i&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),u&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:h},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:k,disabled:v},"Export"))))},b=V.bind({});b.args={};const E=X.bind({});E.args={};const g=Y.bind({});g.args={};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [name, setName] = useState('Sample02.pdf');
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const primaryButtonDisabled = loading || !name;
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" preventCloseOnClickOutside onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <TextInput labelText="File name" value={name} onChange={evt => setName(evt.target.value)} />}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...b.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [name, setName] = useState('Sample02.pdf');
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const hasInvalidExtension = () => {
    let validExtensions = ['pdf'];
    if (!validExtensions || !validExtensions.length) {
      return false;
    }
    if (!name.includes('.')) {
      return true;
    }
    const ext = name.split('.').pop();
    if (!validExtensions.includes(ext)) {
      return true;
    }
    return false;
  };
  const primaryButtonDisabled = loading || !name || hasInvalidExtension();
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <p className={\`\${blockClass}__body\`}>
                File must be exported in a PDF format.
              </p>}
            {!submitted && <TextInput labelText="File name" value={name} onChange={evt => setName(evt.target.value)} invalid={hasInvalidExtension()} invalidText="File must have valid extension .pdf" />}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...E.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const [extension, setExtension] = useState('');
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const preformattedExtensions = [{
    extension: 'YAML',
    description: 'best for IBM managed cloud'
  }, {
    extension: 'BAR',
    description: 'best for integration server'
  }];
  useEffect(() => {
    if (!isOpen) {
      setExtension(preformattedExtensions[0].extension);
    }
  }, [isOpen]);
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const primaryButtonDisabled = loading;
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <FormGroup legendText="Choose an export format">
                <RadioButtonGroup orientation="vertical" onChange={value => setExtension(value)} valueSelected={extension} name="extensions" aria-label="extensions">
                  {preformattedExtensions.map(o => <RadioButton key={o.extension} id={o.extension} value={o.extension} labelText={\`\${o.extension} (\${o.description})\`} data-modal-primary-focus />)}
                </RadioButtonGroup>
              </FormGroup>}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...g.parameters?.docs?.source}}};const Yt=["Standard","WithExtensionValidation","WithPreformattedExtensions"];export{b as Standard,E as WithExtensionValidation,g as WithPreformattedExtensions,Yt as __namedExportsOrder,F as default};
