import{b as pe,i as ue,d as o,P as t,g as D}from"./index-4poXP75K.js";import{e as a,r as d}from"./index-DtHxqM--.js";import{u as me}from"./useNormalizedInputProps-OpqrZ34r.js";import{F as fe}from"./FormContext-C4Nuixum.js";import{A as xe}from"./index-CVEmjZFv.js";import{i as be}from"./utils--12iVJsW.js";import{T as I}from"./Text-Cjos7Soh.js";const $e=i=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":i}),ve=i=>({"aria-describedby":i}),_e=i=>({"aria-describedby":i}),we=({sharedTextInputProps:i,invalid:m,invalidId:p,warn:u,warnId:r,hasHelper:$,helperId:b})=>({...i,...m?$e(p):{},...u?ve(r):{},...$?_e(b):{}}),ge=(i,m,p="character",u="characters")=>{if(typeof m>"u")return null;const r=m-i;return r<=10&&r>0?`${r} ${r===1?p:u} left.`:r<=0?`Maximum ${u} reached.`:null},j=a.forwardRef(function({className:m,decorator:p,disabled:u=!1,helperText:r,hideLabel:$,id:b,inline:s=!1,invalid:B=!1,invalidText:G,labelText:E,light:N,onChange:H=()=>{},onClick:J=()=>{},placeholder:T,readOnly:w,size:f,type:K="text",warn:Q=!1,warnText:U,enableCounter:g=!1,maxCount:v,slug:h,...C},X){const e=pe(),{defaultValue:y,value:P}=C,R=d.useRef(null),Y=ue([X,R]);function A(){var c;return(y||P||((c=R.current)==null?void 0:c.value)||"").toString().length}const[L,F]=d.useState(A());d.useEffect(()=>{F(A())},[P,y,g]);const n=me({id:b,readOnly:w,disabled:u,invalid:B,invalidText:G,warn:Q,warnText:U}),Z=o(`${e}--text-input`,{[`${e}--text-input--light`]:N,[`${e}--text-input--invalid`]:n.invalid,[`${e}--text-input--warning`]:n.warn,[`${e}--text-input--${f}`]:f,[`${e}--layout--size-${f}`]:f}),V={id:b,onChange:l=>{var c;n.disabled||(F((c=l.target.value)==null?void 0:c.length),H(l))},onClick:l=>{n.disabled||J(l)},placeholder:T,type:K,ref:Y,className:Z,title:T,disabled:n.disabled,readOnly:w,"aria-describedby":r&&n.helperId,...C};g&&(V.maxLength=v);const ee=o([o(`${e}--form-item`,m)],`${e}--text-input-wrapper`,{[`${e}--text-input-wrapper--readonly`]:w,[`${e}--text-input-wrapper--light`]:N,[`${e}--text-input-wrapper--inline`]:s,[`${e}--text-input-wrapper--inline--invalid`]:s&&n.invalid}),te=o(`${e}--label`,{[`${e}--visually-hidden`]:$,[`${e}--label--disabled`]:n.disabled,[`${e}--label--inline`]:s,[`${e}--label--inline--${f}`]:s&&!!f}),ne=o(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:n.disabled,[`${e}--form__helper-text--inline`]:s}),ae=o(`${e}--text-input__field-outer-wrapper`,{[`${e}--text-input__field-outer-wrapper--inline`]:s}),re=o(`${e}--text-input__field-wrapper`,{[`${e}--text-input__field-wrapper--warning`]:n.warn,[`${e}--text-input__field-wrapper--slug`]:h,[`${e}--text-input__field-wrapper--decorator`]:p}),ie=o({[`${e}--text-input__invalid-icon`]:n.invalid||n.warn,[`${e}--text-input__invalid-icon--warning`]:n.warn}),le=o(`${e}--label`,{[`${e}--label--disabled`]:u,[`${e}--text-input__label-counter`]:!0}),se=g&&v?a.createElement(I,{as:"div",className:le},`${L}/${v}`):null,oe=E?a.createElement(I,{as:"label",htmlFor:b,className:te},E):null,W=a.createElement("div",{className:`${e}--text-input__label-wrapper`},oe,se),O=r?a.createElement(I,{as:"div",id:n.helperId,className:ne},r):null,ce=a.createElement("input",we({sharedTextInputProps:V,invalid:n.invalid,invalidId:n.invalidId,warn:n.warn,warnId:n.warnId})),{isFluid:_}=d.useContext(fe),S=d.useRef(null),[k,de]=d.useState(""),x=ge(L,v);d.useEffect(()=>{if(x&&x!==k){const l=S.current;if(l){l.textContent="";const c=setTimeout(()=>{l&&(l.textContent=x,de(x))},1e3);return()=>{c&&clearTimeout(c)}}}},[x,k]);const q=n.icon,M=h??p,z=be(M,xe)?d.cloneElement(M,{size:"mini"}):null;return a.createElement("div",{className:ee},s?a.createElement("div",{className:`${e}--text-input__label-helper-wrapper`},W,!_&&(n.validation||O)):W,a.createElement("div",{className:ae},a.createElement("div",{className:re,"data-invalid":n.invalid||null},q&&a.createElement(q,{className:ie}),ce,h?z:p?a.createElement("div",{className:`${e}--text-input__field-inner-wrapper--decorator`},z):"",a.createElement("span",{className:`${e}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:S},x),_&&a.createElement("hr",{className:`${e}--text-input__divider`}),_&&!s&&n.validation),!_&&!s&&(n.validation||O)))});j.displayName="TextInput";j.propTypes={className:t.string,decorator:t.node,defaultValue:t.oneOfType([t.string,t.number]),disabled:t.bool,enableCounter:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node.isRequired,light:D(t.bool),maxCount:t.number,onChange:t.func,onClick:t.func,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:D(t.node),type:t.string,value:t.oneOfType([t.string,t.number]),warn:t.bool,warnText:t.node};export{j as T,ge as g,we as t};
