import{j as s,eo as L,r as m,e,B as h,aq as I}from"./iframe-Bt_4wi2_.js";import{useMDXComponents as z}from"./index-BUsdy7aT.js";import{P as q,a as S}from"./ProgressIndicator-Y_VOcxKQ.js";import{T as R,R as E}from"./TileGroup-BqQXH-UH.js";import{T as g}from"./TextInput-DudcF1-K.js";import{S as y,H as b}from"./index-C6rFndyw.js";import{T as X}from"./Tearsheet-DnsEA5bG.js";import{H as J,a as U}from"./HeaderName-Cq1I0lNv.js";import{H as V}from"./HeaderContainer-CiTUqgyL.js";import{L as K}from"./index-Dj5IO_sl.js";import{S as Q}from"./SidePanel-nm-8YrKc.js";import"./Text-CKKshe8_.js";import"./bucket-19-Cu112eOp.js";import"./bucket-9-DgQFq7lv.js";import"./index-xWfRmBau.js";import"./bucket-18-BNKdAP26.js";import"./utils-Dx5MzUE-.js";import"./bucket-14-CUPfehuY.js";import"./useNormalizedInputProps-Bd-xcf7G.js";import"./FormContext-DZ5Pn6PQ.js";import"./TearsheetShell-vb-2VaD5.js";import"./useResizeObserver-B7TK2lQu.js";import"./getNodeTextContent-C8IeKkUQ.js";import"./props-helper-uQ141h4h.js";import"./ComposedModal-47wjLjIr.js";import"./index-BEhuL1MR.js";import"./ButtonSet-CKUC8hVh.js";import"./InlineLoading-DVx1EWEO.js";import"./bucket-6-DqzXE5dN.js";import"./mergeRefs-91-mP8KM.js";import"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import"./wrapFocus-DVXZPRDf.js";import"./Wrap-DfwNoD2Z.js";import"./usePortalTarget-BMZMDMfJ.js";import"./index-BMUscg6k.js";import"./useFocus-DrsdxZqy.js";import"./usePreviousValue-D6jr6a1I.js";import"./useIsomorphicEffect-D_1zDqSu.js";import"./ActionSet-I4afg10P.js";import"./devtools-BCl7cib1.js";import"./Link-B1UIfgYk.js";import"./LayerContext-BkO66YUX.js";import"./clamp--00YEiB8.js";import"./index-DYQz9bQ1.js";import"./usePrefersReducedMotion-BzmCcU9p.js";import"./usePresence-CoAJwV67.js";import"./bucket-0-Bj1c77ki.js";function k(n){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...z(),...n.components};return s.jsxs(s.Fragment,{children:[s.jsx(t.h1,{id:"step-flows",children:"Step flows"}),`
`,s.jsx(t.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,s.jsxs(t.ul,{children:[`
`,s.jsx(t.li,{children:s.jsx(t.a,{href:"#overview",children:"Overview"})}),`
`,s.jsx(t.li,{children:s.jsx(t.a,{href:"#example-usage",children:"Example usage"})}),`
`]}),`
`,s.jsx(t.h2,{id:"overview",children:"Overview"}),`
`,s.jsxs(t.p,{children:[`The step flow utility can be used to compose stepping experiences across any
variation of components. This utility allows for stepping as commonly seen in
the `,s.jsx(t.code,{children:"CreateTearsheet"})," and ",s.jsx(t.code,{children:"CreateFullPage"}),` components, but through a more
composable and headless delivery. This allows for the flexibility to incorporate
stepped experiences within any component.`]}),`
`,s.jsx(t.p,{children:"Included assets:"}),`
`,s.jsxs(t.ul,{children:[`
`,s.jsx(t.li,{children:s.jsx(t.code,{children:"StepProvider"})}),`
`,s.jsx(t.li,{children:s.jsx(t.code,{children:"useStepContext"})}),`
`,s.jsxs(t.li,{children:[s.jsx(t.code,{children:"StepGroup"}),", handles rendering of step components so ",s.jsx(t.em,{children:"only"}),` the current step
is in the DOM`]}),`
`]}),`
`,s.jsx(t.h2,{id:"example-usage",children:"Example usage"}),`
`,s.jsxs(t.p,{children:["Wrap your stepped component in the ",s.jsx(t.code,{children:"StepProvider"}),` from the utility. Use
`,s.jsx(t.code,{children:"<StepGroup>"}),` and step components with your new step enabled tearsheet
component. Any content outside of the `,s.jsx(t.code,{children:"<StepGroup>"})," will render on every step."]}),`
`,s.jsx(t.pre,{children:s.jsx(t.code,{className:"language-tsx",children:`const Example = () => {
  return <StepProvider>
    <Tearsheet>
      <StepGroup>
        <Step1 />
        <Step2 />
        {someCondition && <ConditionalStep />}
      </StepGroup>
    <Tearsheet>
  </StepProvider>
}
`})}),`
`,s.jsxs(t.p,{children:["Any component inside of the step enabled component (",s.jsx(t.code,{children:"StepProvider"}),`) can use
`,s.jsx(t.code,{children:"useStepContext()"}),` to retrieve the step context state, giving the ability to get
and set the state.`]}),`
`,s.jsx(t.pre,{children:s.jsx(t.code,{className:"language-tsx",children:`const Step1 = () => {
  const { setFormState, formState } = useStepContext();
  const { email } = formState ?? {};
  return (
    <TextInput
      labelText="Email"
      value={email ?? ''}
      onChange={(e) => {
        setFormState?.((prev: object) => ({
          ...prev,
          email: e.target.value,
        }));
      }}
    />
  );
};
`})}),`
`,s.jsxs(t.p,{children:["Step state (returned from ",s.jsx(t.code,{children:"useStepContext"}),"):"]}),`
`,s.jsx(t.pre,{children:s.jsx(t.code,{className:"language-ts",children:`// This interface should be extended by the consumer to match
// their own unique use case given the fields within their
// own stepped experience
interface formStateType {
  [key: string]: any;
}

export interface StepState {
  formState: formStateType;
  setFormState: Dispatch<SetStateAction<formStateType>>;
  totalSteps: number | undefined;
  setTotalSteps: Dispatch<SetStateAction<number | undefined>>;
  currentStep: number;
  handleGoToStep: (a: number) => void;
  handleNext: () => void;
  handlePrevious: () => void;
}
`})}),`
`,s.jsx(L,{of:M})]})}function Y(n={}){const{wrapper:t}={...z(),...n.components};return t?s.jsx(t,{...n,children:s.jsx(k,{...n})}):k(n)}const Z=".c4p--side-panel .custom-intro-tile{block-size:120px;inline-size:200px}.step-container{inline-size:50%;min-inline-size:320px}.my-custom-action-set{display:grid;grid-auto-rows:minmax(auto,auto);grid-template-columns:repeat(6,1fr)}.step-action-button{inline-size:100%}.step-action-button__cancel{grid-column:span 4}.cds--tile-group div{display:flex;flex-wrap:wrap;gap:1rem}.custom-intro-tile{block-size:240px;inline-size:280px}.selected-intro-option{padding-block-end:1.5rem;text-transform:capitalize}.step-form-items{display:flex;container-type:size}.step-form-items #city{margin-inline-end:1.5rem}.c4p--tearsheet__content{position:relative;display:flex;flex-direction:column;padding:1.5rem 1.5rem 0}.c4p--step-actions__button-container.my-custom-action-set{position:fixed;background-color:var(--cds-background, #ffffff);border-block-start:1px solid var(--cds-border-subtle-01, #c6c6c6);inline-size:100%;inset-block-end:0;inset-inline-start:0;margin-block-start:auto;max-block-size:120px}.c4p--step-actions__button-container.my-custom-action-set button{inline-size:100%;max-inline-size:none}.c4p--tearsheet__influencer{padding:1.5rem 2rem}.c4p--tearsheet .c4p--tearsheet__influencer+.c4p--tearsheet__right .c4p--step-actions__button-container.my-custom-action-set{inset-inline-start:257px;inline-size:calc(100% - 257px)}.step-heading{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);padding-block-end:1.5rem}#root{display:flex;align-items:center;justify-content:center;min-block-size:100vh}",O=m.createContext(void 0),w=({children:n})=>{const[t,o]=m.useState(),[r,a]=m.useState(1),[l,d]=m.useState({}),f={formState:l,setFormState:d,totalSteps:t,setTotalSteps:o,currentStep:r,handleGoToStep:p=>a(p),handleNext:()=>a(p=>p+1),handlePrevious:()=>a(p=>p-1)};return e.createElement(O.Provider,{value:f},n)},u=()=>{const n=m.useContext(O);if(n===void 0)throw new Error("Context hook used outside of Step provider");return n};w.__docgenInfo={description:"",methods:[],displayName:"StepProvider",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""}}};const D=({children:n,open:t,onClose:o,influencer:r,title:a,hasCloseIcon:l,closeIconDescription:d="Close",selectorPrimaryFocus:f,...p})=>{const c=u(),i=r?.(c)||null;return e.createElement(X,{...p,influencer:i,open:t,onClose:o,title:a,hasCloseIcon:l,closeIconDescription:d,selectorPrimaryFocus:f},n)};D.__docgenInfo={description:"",methods:[],displayName:"StepTearsheet",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},influencer:{required:!1,tsType:{name:"union",raw:"((a: StepState) => ReactNode) | null",elements:[{name:"unknown"},{name:"null"}]},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"ReactNode"},description:""},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:""},closeIconDescription:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Close'",computed:!1}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:""}}};const j=({children:n})=>{const t=u(),o=n?.filter(Boolean),r=e.Children.count(o);m.useEffect(()=>{const{setTotalSteps:d}=t;d(r)});const{currentStep:a}=t;return e.Children.toArray(o)[a-1]},_=({buttonRenderer:n})=>{const t=u();return n(t)};_.displayName="StepActions";const P=!0,B=n=>{m.useEffect(()=>{document?.querySelector(n)?.focus()},[n])};function ee(){const{setFormState:n,formState:t}=u(),{email:o}=t??{};return B("#email"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 1"),e.createElement(g,{id:"email",onChange:r=>{n?.(a=>({...a,email:r.target.value}))},labelText:"Email",value:o??""}))}function te(){const{setFormState:n,formState:t}=u(),{city:o,state:r}=t||{};return B("#city"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 2"),e.createElement("div",{className:"step-form-items"},e.createElement(g,{id:"city",onChange:a=>{n(l=>({...l,city:a.target.value}))},labelText:"City",value:o??""}),e.createElement(g,{id:"state",onChange:a=>{n(l=>({...l,state:a.target.value}))},labelText:"State",value:r??""})))}function ne(){const{formState:n}=u();return e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 3"),e.createElement("div",null,"Form state",e.createElement(I,{type:"multi"},JSON.stringify(n,null,2))))}const se=({currentStep:n,handleGoToStep:t},o,r,a)=>r?null:e.createElement("div",{className:"tearsheet-stories__dummy-content-block"},e.createElement("h6",{className:"selected-intro-option"},a),e.createElement(q,{vertical:!0,onChange:l=>t(l+1)},e.createElement(S,{complete:n>1,current:n===1,label:"Step 1",secondaryLabel:"Optional label"}),e.createElement(S,{complete:n>2,current:n===2,label:"Step 2"}),e.createElement(S,{current:n===3,label:"Step 3",complete:n>3}),a==="plus"&&e.createElement(S,{current:n===4,label:"Plus only step"}))),ae=()=>e.createElement(e.Fragment,null,"This step only renders for plus flows."),G=()=>{const n=m.useRef(null),[t,o]=m.useState(!1),[r,a]=m.useState(!0),[l,d]=m.useState("standard"),f=(c,i)=>r?!1:!c?.email&&i===1||(!c?.city||!c?.state)&&i===2,p=c=>!!r;return e.createElement(w,null,e.createElement("div",{ref:n},e.createElement(h,{onClick:()=>o(!0)},t?"Close":"Open"),e.createElement(D,{influencer:r?null:c=>se(c,P,r,l),open:t,onClose:()=>o(!1),title:"Tearsheet title",hasCloseIcon:!1,selectorPrimaryFocus:"#email"},r&&e.createElement(R,{valueSelected:l,defaultSelected:"standard",legend:"Choose create flow",name:"radio tile group",onChange:c=>d(c)},e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-1",value:"standard"},"Standard"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-2",value:"premium"},"Premium"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-3",value:"plus"},"Plus")),!r&&e.createElement(j,null,e.createElement(ee,null),e.createElement(te,null),e.createElement(ne,null),l==="plus"&&e.createElement(ae,null)),e.createElement("div",{className:"c4p--step-actions__button-container my-custom-action-set"},e.createElement(_,{buttonRenderer:({currentStep:c,handleNext:i,totalSteps:x,handleGoToStep:v,setFormState:C,handlePrevious:N,formState:T})=>e.createElement(e.Fragment,null,e.createElement(h,{className:"step-action-button step-action-button__cancel",kind:"ghost",onClick:()=>{o(!1),a(!0)},size:"xl"},"Cancel"),e.createElement(h,{className:"step-action-button",kind:"secondary",onClick:()=>{if(c===1&&P){a(!0);return}N()},disabled:p(),size:"xl"},"Back"),e.createElement(h,{disabled:f(T,c),size:"xl",className:"step-action-button",onClick:()=>{if(r){a(!1);return}c===x?(o(!1),v(1),C({}),a(!0)):i()}},c===x?"Submit":"Next"))})))))};G.__docgenInfo={description:"",methods:[],displayName:"Example"};const H=({subtitle:n,children:t,open:o,onClose:r,title:a,selectorPrimaryFocus:l,...d})=>{const f=u(),p=n?.(f)||null;return e.createElement(Q,{open:o,onRequestClose:r,title:a,selectorPrimaryFocus:l,subtitle:p,...d},e.createElement(K,null,t))};H.__docgenInfo={description:"",methods:[],displayName:"StepSidePanel",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},subtitle:{required:!1,tsType:{name:"union",raw:"((a: StepState) => ReactNode) | null",elements:[{name:"unknown"},{name:"null"}]},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"ReactNode"},description:""},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:""},closeIconDescription:{required:!1,tsType:{name:"string"},description:""},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:""}}};const F=!0,$=n=>{m.useEffect(()=>{document?.querySelector(n)?.focus()},[n])};function re(){const{setFormState:n,formState:t}=u(),{email:o}=t??{};return $("#email"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 1"),e.createElement(g,{id:"email",onChange:r=>{n?.(a=>({...a,email:r.target.value}))},labelText:"Email",value:o??""}))}function oe(){const{setFormState:n,formState:t}=u(),{city:o,state:r}=t||{};return $("#city"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 2"),e.createElement("div",{className:"step-form-items"},e.createElement(g,{id:"city",onChange:a=>{n(l=>({...l,city:a.target.value}))},labelText:"City",value:o??""}),e.createElement(g,{id:"state",onChange:a=>{n(l=>({...l,state:a.target.value}))},labelText:"State",value:r??""})))}function le(){const{formState:n}=u();return e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 3"),e.createElement("div",null,"Form state",e.createElement(I,{type:"multi"},JSON.stringify(n,null,2))))}const ie=({currentStep:n,handleGoToStep:t},o,r,a)=>r?null:e.createElement("div",{className:"tearsheet-stories__dummy-content-block"},e.createElement("h6",{className:"selected-intro-option"},a),e.createElement(q,{onChange:l=>t(l+1)},e.createElement(S,{complete:n>1,current:n===1,label:"Step 1"}),e.createElement(S,{complete:n>2,current:n===2,label:"Step 2"}),e.createElement(S,{current:n===3,label:"Step 3",complete:n>3}),a==="plus"&&e.createElement(S,{current:n===4,label:"Plus only step"}))),ce=()=>e.createElement(e.Fragment,null,"This step only renders for plus flows."),A=()=>{const n=m.useRef(null),[t,o]=m.useState(!1),[r,a]=m.useState(!0),[l,d]=m.useState("standard"),f=(i,x)=>r?!1:!i?.email&&x===1||(!i?.city||!i?.state)&&x===2,p=i=>!!r,c=()=>e.createElement(V,{render:()=>e.createElement(J,{"aria-label":"IBM [Product]"},e.createElement(U,{href:"/",prefix:"IBM"},"[Product]"))});return e.createElement(e.Fragment,null,c(),e.createElement(w,null,e.createElement("div",{ref:n},e.createElement(h,{onClick:()=>o(i=>!i)},t?"Close":"Open"),e.createElement(H,{subtitle:r?null:i=>ie(i,F,r,l),open:t,onClose:()=>o(!1),title:"Side panel title",selectorPrimaryFocus:"#email"},r&&e.createElement(R,{valueSelected:l,defaultSelected:"standard create flow",legend:"Choose create flow",name:"radio tile group",onChange:i=>d(i)},e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-1",value:"standard create flow"},"Standard"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-2",value:"premium create flow"},"Premium"),e.createElement(E,{className:"custom-intro-tile",id:"radio-tile-3",value:"plus create flow"},"Plus")),!r&&e.createElement(j,null,e.createElement(re,null),e.createElement(oe,null),e.createElement(le,null),l==="plus"&&e.createElement(ce,null)),e.createElement("div",{className:"c4p--step-actions__button-container my-custom-action-set"},e.createElement(_,{buttonRenderer:({currentStep:i,handleNext:x,totalSteps:v,handleGoToStep:C,setFormState:N,handlePrevious:T,formState:W})=>e.createElement(e.Fragment,null,e.createElement(h,{className:"step-action-button step-action-button__cancel",kind:"ghost",onClick:()=>{o(!1),a(!0)},size:"xl"},"Cancel"),e.createElement(h,{className:"step-action-button",kind:"secondary",onClick:()=>{if(i===1&&F){a(!0);return}T()},disabled:p(),size:"xl"},"Back"),e.createElement(h,{disabled:f(W,i),size:"xl",className:"step-action-button",onClick:()=>{if(r){a(!1);return}i===v?(o(!1),C(1),N({}),a(!0)):x()}},i===v?"Submit":"Next"))}))))))};A.__docgenInfo={description:"",methods:[],displayName:"Example"};const at={title:"Patterns/Step flows",component:j,tags:["autodocs"],parameters:{styles:Z,docs:{page:Y}}},M=G.bind({});M.args={};const me=A.bind({});me.args={};const rt=["tearsheetWithSteps","sidePanelWithSteps"];export{rt as __namedExportsOrder,at as default,me as sidePanelWithSteps,M as tearsheetWithSteps};
