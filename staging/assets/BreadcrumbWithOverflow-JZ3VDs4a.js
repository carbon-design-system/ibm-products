import{r as u,e}from"./index-DtHxqM--.js";import{b as j,d as p,F as G,P as s}from"./index-C360Eztx.js";import{u as R}from"./useResizeObserver-CiQvgsPb.js";import{B as z,a as h}from"./BreadcrumbItem-BUxicXIT.js";import{L as J}from"./Link-C1gIcKnM.js";import{M as Q}from"./MenuItem-DY8uKk8d.js";import{O as S}from"./index-CaptJhgE.js";import{p as A,T as x}from"./settings-CFkY3W_8.js";import{u as U}from"./uuidv4-BN2rGLQG.js";import"./props-helper-CSyPWdyB.js";import{O as W}from"./bucket-12-BdSjg9jc.js";import{T as X}from"./TooltipTrigger-BBr-00xq.js";import{b as Y}from"./bucket-0-CylTshg8.js";const m=`${A.prefix}--breadcrumb-with-overflow`,F="BreadcrumbWithOverflow";let b=({breadcrumbs:a,className:M,label:T,maxVisible:g,noTrailingSlash:L,overflowAriaLabel:w,overflowTooltipAlign:D,...H})=>{const I=j(),[y,$]=u.useState(3),[q,O]=u.useState([]),v=u.useRef(null),E=u.useRef(null),_=u.useRef(U()),[N,V]=u.useState([]),K=({overflowItems:o})=>{const t=(r,i)=>{var n,d,c;(n=i==null?void 0:i.props)!=null&&n.href&&(window.location.href=i.props.href),(c=(d=i==null?void 0:i.props)==null?void 0:d.onClick)==null||c.call(d,r)};return e.createElement(h,{key:`breadcrumb-overflow-${_.current}`},e.createElement(G,{enableV12Overflowmenu:!0},e.createElement(S,{"aria-label":w,label:w,renderIcon:r=>e.createElement(W,{size:32,...r}),className:`${m}__overflow-menu`,tooltipAlignment:D},o.map((r,i)=>e.createElement(Q,{key:`breadcrumb-overflow-menu-item-${_.current}-${i}`,onClick:n=>t(n,r),label:r.props.children})))))};u.useEffect(()=>{V(e.createElement("div",{className:`${m}__breadcrumb-container ${m}__breadcrumb-container--hidden`,"aria-hidden":!0,ref:E},e.createElement(z,{"aria-label":`${T}-hidden`},e.createElement(h,{key:`${m}-hidden-overflow-${_}`},e.createElement(S,{"aria-label":w,renderIcon:o=>e.createElement(W,{size:32,...o})})),a.map(({label:o,key:t,title:r,id:i,shortTitle:n,...d})=>e.createElement(h,{key:t,...d,"data-original-id":i,title:r??o},o)))))},[a,T,w]),u.useEffect(()=>{if(a.length===0){O([]);return}const o=a.map(({className:i,key:n,label:d,shortTitle:c,title:f,...B},P)=>e.createElement(h,{key:n,className:P>0||y>1?p([i,`${m}__displayed-breadcrumb`]):i,title:P+1===a.length?f:null,...B},c||d)),t=y>1?1:0;let r=o.splice(t,a.length-y);r.length&&o.splice(t,0,e.createElement(K,{overflowItems:r,key:`displayed-breadcrumb-${_}-overflow`})),O(o)},[a,y]);const k=()=>{if(!v.current)return;const o=(t,r)=>r===0?t-1:r===1?1:t-r;if(g<=1)$(1);else{let t=0,r=v.current.offsetWidth;if(E.current){const i=E.current.querySelectorAll(`.${I}--breadcrumb-item`),n=[];for(let c of i){const f=window?window.getComputedStyle(i[0]):null,B=f?parseFloat(f.marginLeft||0,10)+parseFloat(f.marginRight||0,10):0;n.push(c.offsetWidth+B)}let d=n[0];for(let c=0;c<n.length-1;c++){const f=o(n.length,c);if(r>=n[f])r-=n[f],t+=1;else break}if(t<n.length-1)for(;t>0&&r<d;){t-=1;const c=o(n.length,t);r+=n[c]}}t<=1?$(1):$(g?Math.min(t,g):t)}};u.useEffect(()=>{k()},[N,g]);const C=()=>{k()};let l=a[a.length-1];return l.isCurrentPage&&(l=a[a.length-2]),R(E,C),R(v,C),e.createElement("div",{className:p(m,M,{[`${m}__with-items`]:q.length>1}),ref:v},e.createElement("div",{className:p([`${m}__space`])},N,e.createElement(z,{"aria-label":T,className:p(`${m}__breadcrumb-container`,{[`${m}__breadcrumb-container-with-items`]:q.length>1}),noTrailingSlash:L,...H},(l==null?void 0:l.href)&&((l==null?void 0:l.label)||(l==null?void 0:l.title))&&e.createElement(h,{className:p(`${m}__breadcrumb-back`)},e.createElement(J,{href:l.href,renderIcon:()=>e.createElement(x,{align:"right",label:l.title||l.label,className:`${m}__back__button ${I}--icon-tooltip`},e.createElement(X,null,e.createElement(Y,{size:16})))})),q)))};b=A.checkComponentEnabled(b,F);b.propTypes={breadcrumbs:s.arrayOf(s.shape({href:s.string,isCurrentPage:s.bool,key:s.string.isRequired,label:s.node,shortTitle:s.string,title:s.string.isRequired.if(({label:a})=>typeof a!="string")})),className:s.string,label:s.string,maxVisible:s.number,noTrailingSlash:s.bool,overflowAriaLabel:s.string.isRequired.if(({breadcrumbs:a})=>a.length>1),overflowTooltipAlign:x.propTypes.align};b.displayName=F;b.__docgenInfo={description:"The BreadcrumbWithOverflow is used internally by the PageHeader to wrap BreadcrumbItems.",methods:[],displayName:"BreadcrumbWithOverflow",props:{breadcrumbs:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{href:{name:"string",description:"Optional string representing the link location for the BreadcrumbItem",required:!1},isCurrentPage:{name:"bool",description:"Provide if this breadcrumb item represents the current page",required:!1},key:{name:"string",description:"Key required to render array efficiently",required:!0},label:{name:"node",description:"Pass in content that will be inside of the BreadcrumbItem",required:!1},shortTitle:{name:"string",description:"An optional title label for extra long breadcrumb",required:!1},title:{name:"string",description:"A string based alternative to the children, required only if children is not of type string",required:!0}}}},required:!1},className:{description:"className",type:{name:"string"},required:!1},label:{description:"Label for the Breadcrumb component",type:{name:"string"},required:!1},maxVisible:{description:"maxVisible: maximum visible breadcrumb-items before overflow is used (values less than 1 are treated as 1)",type:{name:"number"},required:!1},noTrailingSlash:{description:"noTrailing slash - same as for Carbon",type:{name:"bool"},required:!1},overflowAriaLabel:{description:"overflowAriaLabel label for open close button overflow used for breadcrumb items that do not fit.",type:{name:"string"},required:!0},overflowTooltipAlign:{description:"overflowTooltipAlign: align tooltip position",type:{name:"custom",raw:"Tooltip.propTypes.align"},required:!1}}};export{b as B};
