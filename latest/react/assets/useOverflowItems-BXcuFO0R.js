import{r as f}from"./iframe-Cff_uvRq.js";import{u as C}from"./useResizeObserver-BVjEDJaE.js";function V(d=[],s,w,a,x){const[n,g]=f.useState(0),r=f.useRef(0),m=f.useRef(null),R=f.useRef(0),p=f.useRef(0),I=f.useRef(0),O=()=>{if(s?.current){r.current=w?.current?.offsetWidth||0;const t=s.current.offsetWidth-r.current;g(t)}},q=t=>{if(t&&s?.current){r.current=t.offsetWidth;const e=s.current.offsetWidth-r.current;g(e)}return t};C(s,O);const l=()=>(m.current||(m.current=new Map),m.current),i=d?.slice(0,a)?.reduce((t,e)=>t+(l().get(e.id)||0),0),z=(t,e)=>{const u=l();if(e){const c=getComputedStyle?.(e),o=e.offsetWidth+parseInt(c.marginLeft)+parseInt(c.marginRight);u.set(t,o)}return()=>{u.delete(t)}},h=(()=>{if(!s)return d;const t=l();let e=!1,u=0,c=!1;return a?c=i+r?.current>i:c=i>n+r?.current,d.slice(0,a).reduce((o,y)=>{if(e)return o;const W=t.get(y.id)||0;let v=u+W<=n;return c||(v=u+W<=n+r?.current),v?(u+=W,o.push(y)):e=!0,o},[])})(),b=d.slice(h?.length);if(h?.length!==R.current||n!==p.current||i!==I.current){R.current=h?.length,p.current=n,I.current=i;const t=l()?.keys()?.next()?.value||"",e=l()?.get(t)||0;x?.({hiddenItems:b,minWidth:n,maxWidth:i+e})}return{visibleItems:h,itemRefHandler:z,hiddenItems:b,offsetRefHandler:q}}export{V as u};
