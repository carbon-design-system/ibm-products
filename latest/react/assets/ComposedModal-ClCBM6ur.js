import{e as t,u as I,c as D,_ as S,I as he,n as Ce,P as e,t as _,B as L,g as Ee,r as y,D as Ne,ef as $e,d as fe,v as me,o as ge,w as Fe,ac as Me,l as Ae}from"./iframe-6Ea7Lnhj.js";import{r as ye}from"./index-BEhuL1MR.js";import{L as ee}from"./index-B5Rz7fVC.js";import{B as Y}from"./ButtonSet-BQOUGgo1.js";import{I as we}from"./InlineLoading-DYP2wGFG.js";import{m as He}from"./mergeRefs-91-mP8KM.js";import{r as Oe}from"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import{e as Pe,w as qe,a as ze}from"./wrapFocus-8mk42Nj3.js";import{T as De}from"./Text-CVT3kS-3.js";import{A as Le}from"./index-DRv8Cx3Q.js";import{i as pe}from"./utils-DSvpuMUF.js";const Te=t.forwardRef(function({buttonOnClick:o,children:a,className:r,closeClassName:d,closeIconClassName:p,closeModal:f,iconDescription:c="Close",label:l,labelClassName:b,title:E,titleClassName:u,...T},C){const i=I();function h(R){f?.(R),o?.(R)}const $=D(`${i}--modal-header`,r),B=D(`${i}--modal-header__label ${i}--type-delta`,b),x=D(`${i}--modal-header__heading ${i}--type-beta`,u),v=D(`${i}--modal-close`,d),s=D(`${i}--modal-close__icon`,p);return t.createElement("div",S({className:$},T,{ref:C}),l&&t.createElement("h2",{className:B},l),E&&t.createElement("h2",{className:x},E),a,t.createElement("div",{className:`${i}--modal-close-button`},t.createElement(he,{className:v,label:c,onClick:h,"aria-label":c,align:"left"},t.createElement(Ce,{size:20,"aria-hidden":"true",tabIndex:"-1",className:s}))))});Te.propTypes={buttonOnClick:e.func,children:e.node,className:e.string,closeClassName:e.string,closeIconClassName:e.string,closeModal:e.func,iconDescription:e.string,label:e.node,labelClassName:e.string,title:e.node,titleClassName:e.string};function ke({secondaryButtons:n,secondaryButtonText:o,secondaryClassName:a,closeModal:r,onRequestClose:d,disabled:p}){function f(c){r(c),d(c)}return Array.isArray(n)&&n.length<=2?t.createElement(t.Fragment,null,n.map(({buttonText:c,onClick:l},b)=>t.createElement(L,{key:`${c}-${b}`,className:a,kind:"secondary",onClick:l||f},c))):o?t.createElement(L,{disabled:p,className:a,onClick:f,kind:"secondary"},o):null}ke.propTypes={closeModal:e.func,disabled:e.bool,onRequestClose:e.func,secondaryButtonText:e.string,secondaryButtons:(n,o,a)=>{if(n.secondaryButtons){if(!Array.isArray(n.secondaryButtons)||n.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const r={buttonText:e.node,onClick:e.func};n[o].forEach(d=>{e.checkPropTypes(r,d,o,a)})}return null},secondaryClassName:e.string};const Z=t.forwardRef(function({children:o,className:a,closeModal:r=_,danger:d,inputref:p,onRequestClose:f=_,onRequestSubmit:c=_,primaryButtonDisabled:l,primaryButtonText:b,primaryClassName:E,secondaryButtonText:u,secondaryButtons:T,secondaryClassName:C,loadingStatus:i="inactive",loadingDescription:h,loadingIconDescription:$,onLoadingSuccess:B=_,...x},v){const s=I(),R=D(`${s}--modal-footer`,a,Array.isArray(T)&&T.length===2?`${s}--modal-footer--three-button`:null),F=D(E,i!=="inactive"?`${s}--btn--loading`:null),M=i!=="inactive",P={closeModal:r,secondaryButtons:T,secondaryButtonText:u,secondaryClassName:C,onRequestClose:f,disabled:M};return t.createElement(Y,S({className:R},x,{ref:v,"aria-busy":M}),t.createElement(ke,P),b&&t.createElement(L,{onClick:c,className:F,disabled:M||l,kind:d?"danger":"primary",ref:p},i==="inactive"?b:t.createElement(we,{status:i,description:h,iconDescription:$,className:`${s}--inline-loading--btn`,onSuccess:B})),o)});Z.propTypes={children:e.node,className:e.string,closeModal:e.func,danger:e.bool,inputref:e.oneOfType([e.func,e.shape({current:e.any})]),loadingDescription:e.string,loadingIconDescription:e.string,loadingStatus:e.oneOf(["inactive","active","finished","error"]),onLoadingSuccess:e.func,onRequestClose:e.func,onRequestSubmit:e.func,primaryButtonDisabled:e.bool,primaryButtonText:e.string,primaryClassName:e.string,secondaryButtonText:e.string,secondaryButtons:(n,o,a)=>{if(n.secondaryButtons){if(!Array.isArray(n.secondaryButtons)||n.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const r={buttonText:e.node,onClick:e.func};n[o].forEach(d=>{e.checkPropTypes(r,d,o,a)})}return null},secondaryClassName:e.string};const be=(n,o,a)=>{n.classList.toggle(o,a)},Q=y.createContext({}),K=t.forwardRef(({children:n,className:o,focusAfterCloseRef:a,modal:r,onCancel:d=_,onClick:p=_,onClose:f=_,onRequestClose:c=_,open:l=!1,role:b,ariaLabel:E,ariaLabelledBy:u,ariaDescribedBy:T,...C},i)=>{const h=I(),$=Ee(),B=`${h}--dialog-header__heading--${$}`,x=`${h}--dialog-header__label--${$}`,v=y.useRef(null),s=i??v;function R(m){l&&r&&m.target===s.current&&c(m)}function F(m){R(m),p(m)}y.useEffect(()=>{s.current&&(l?r?s.current.showModal():s.current.show():s.current.close())},[r,l]),y.useEffect(()=>{if(!l&&a){const m=setTimeout(()=>{a.current?.focus()});return()=>{clearTimeout(m)}}},[l,a]);const M=D(`${h}--dialog-container`),P={dialogId:$,titleId:B,subtitleId:x,isOpen:l};return y.useEffect(()=>{if(s.current&&l&&!E&&!u){const m=s.current.querySelector(`.${h}--dialog-header__heading`);m&&m.id&&s.current.setAttribute("aria-labelledby",m.id)}},[l,E,u,h]),t.createElement(Q.Provider,{value:P},t.createElement("dialog",S({},C,{className:D(`${h}--dialog`,{[`${h}--dialog--modal`]:r},o),ref:s,onCancel:d,onClick:F,onClose:f,role:b,"aria-label":E,"aria-labelledby":E?void 0:u||B,"aria-describedby":T}),t.createElement("div",{className:M},n)))});K.displayName="Dialog";K.propTypes={children:e.node,className:e.string,focusAfterCloseRef:e.oneOfType([e.func,e.shape({current:e.any})]),modal:e.bool,onRequestClose:e.func,open:e.bool,role:e.oneOf(["dialog","alertdialog"]),"aria-label":e.string,"aria-labelledby":e.string,ariaDescribedBy:e.string};const te=t.forwardRef(({children:n,...o},a)=>{const r=I();return t.createElement("div",S({className:`${r}--dialog__header`,ref:a},o),n)});te.displayName="DialogHeader";te.propTypes={children:e.node};const ne=t.forwardRef(({children:n,...o},a)=>{const r=I();return t.createElement("div",S({className:`${r}--dialog__header-controls`,ref:a},o),n)});ne.displayName="DialogControls";ne.propTypes={children:e.node};const oe=t.forwardRef(({onClick:n,...o},a)=>{const r=I();return t.createElement(he,S({kind:"ghost",className:`${r}--dialog__close`,label:"Close",title:"Close","aria-label":"Close",align:"left",onClick:n,ref:a},o),t.createElement(Ce,{size:20,"aria-hidden":"true",tabIndex:-1,className:`${r}--icon__close`}))});oe.displayName="DialogCloseButton";oe.propTypes={onClick:e.func};const ae=t.forwardRef(({children:n,className:o,id:a,...r},d)=>{const p=I(),{titleId:f}=y.useContext(Q),c=a||f;return t.createElement(De,S({as:"h2",id:c,className:D(`${p}--dialog-header__heading`,o),ref:d},r),n)});ae.displayName="DialogTitle";ae.propTypes={children:e.node,className:e.string,id:e.string};const se=t.forwardRef(({children:n,className:o,id:a,...r},d)=>{const p=I(),{subtitleId:f}=y.useContext(Q),c=a||f;return t.createElement(De,S({as:"h2",id:c,className:D(`${p}--dialog-header__label`,o),ref:d},r),n)});se.displayName="DialogSubtitle";se.propTypes={children:e.node,className:e.string,id:e.string};const re=t.forwardRef(({children:n,className:o,hasScrollingContent:a,...r},d)=>{const p=I(),f=y.useRef(null),[c,l]=y.useState(!1),b=Ee(),E=`${p}--dialog-body--${b}`;Ne(()=>{f.current&&l(f.current.scrollHeight>f.current.clientHeight);function i(){f.current&&l(f.current.scrollHeight>f.current.clientHeight)}const h=$e(i,200);return window.addEventListener("resize",h),()=>{h.cancel(),window.removeEventListener("resize",h)}},[]);const u=D(`${p}--dialog-content`,{[`${p}--dialog-scroll-content`]:a||c},o),T=a||c?{tabIndex:0,role:"region"}:{},C=i=>{typeof d=="function"?d(i):d&&(d.current=i),f.current=i};return t.createElement(ee,S({ref:C,id:E,className:u},T,r),n)});re.displayName="DialogBody";re.propTypes={children:e.node,className:e.string,hasScrollingContent:e.bool};const le=t.forwardRef(({children:n,className:o,onRequestClose:a=_,onSecondarySubmit:r,onRequestSubmit:d=_,primaryButtonText:p="Save",primaryButtonDisabled:f=!1,secondaryButtonText:c="Cancel",secondaryButtons:l,loadingStatus:b="inactive",loadingDescription:E,loadingIconDescription:u,onLoadingSuccess:T=_,danger:C=!1,...i},h)=>{const $=I(),B=y.useRef(null),{isOpen:x}=y.useContext(Q),[v,s]=y.useState(null);y.useEffect(()=>{if(C&&v){const m=requestAnimationFrame(()=>{v.focus()});return()=>cancelAnimationFrame(m)}},[C,v,x]);const R=D(`${$}--dialog-footer`,o,{[`${$}--dialog-footer--three-button`]:Array.isArray(l)&&l.length===2}),F=b!=="inactive",M=D({[`${$}--btn--loading`]:b!=="inactive"}),P=r||a;return n?t.createElement(Y,S({className:R,ref:h},i),n):t.createElement(Y,S({className:R,"aria-busy":F,ref:h},i),Array.isArray(l)&&l.length<=2?l.map(({buttonText:m,onClick:W},j)=>t.createElement(L,{key:`${m}-${j}`,autoFocus:C,kind:"secondary",ref:j===0&&C?s:void 0,onClick:W},m)):c&&t.createElement(L,{ref:C?s:void 0,disabled:F,kind:"secondary",autoFocus:C,onClick:P},c),t.createElement(L,{className:M,kind:C?"danger":"primary",disabled:F||f,onClick:d,ref:B},b==="inactive"?p:t.createElement(we,{status:b,description:E,iconDescription:u,className:`${$}--inline-loading--btn`,onSuccess:T})))});le.displayName="DialogFooter";le.propTypes={children:e.node,className:e.string,onRequestClose:e.func,onSecondarySubmit:e.func,onRequestSubmit:e.func,primaryButtonText:e.node,primaryButtonDisabled:e.bool,secondaryButtonText:e.node,secondaryButtons:(n,o,a)=>{if(n.secondaryButtons){if(!Array.isArray(n.secondaryButtons)||n.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const r={buttonText:e.node,onClick:e.func};n[o].forEach(d=>{e.checkPropTypes(r,d,o,a)})}return null},danger:e.bool,loadingStatus:e.oneOf(["inactive","active","finished","error"]),loadingDescription:e.string,loadingIconDescription:e.string,onLoadingSuccess:e.func};const k=K;k.Root=K;k.Root.displayName="Dialog.Root";k.Header=te;k.Header.displayName="Dialog.Header";k.Controls=ne;k.Controls.displayName="Dialog.Controls";k.CloseButton=oe;k.CloseButton.displayName="Dialog.CloseButton";k.Title=ae;k.Title.displayName="Dialog.Title";k.Subtitle=se;k.Subtitle.displayName="Dialog.Subtitle";k.Body=re;k.Body.displayName="Dialog.Body";k.Footer=le;k.Footer.displayName="Dialog.Footer";const We=t.forwardRef(function({className:o,children:a,hasForm:r,hasScrollingContent:d,...p},f){const c=I(),l=y.useRef(null),[b,E]=y.useState(!1),u=D({[`${c}--modal-content`]:!0,[`${c}--modal-content--with-form`]:r,[`${c}--modal-scroll-content`]:d||b},o);Ne(()=>{l.current&&E(l.current.scrollHeight>l.current.clientHeight);function C(){l.current&&E(l.current.scrollHeight>l.current.clientHeight)}const i=$e(C,200);return window.addEventListener("resize",i),()=>{i.cancel(),window.removeEventListener("resize",i)}},[]);const T=d||b?{tabIndex:0,role:"region"}:{};return t.createElement(ee,S({className:u},T,p,{ref:He(l,f)}),a)});We.propTypes={"aria-label":Oe("hasScrollingContent",e.string),children:e.node,className:e.string,hasForm:e.bool,hasScrollingContent:e.bool};const je=t.forwardRef(function({["aria-labelledby"]:o,["aria-label"]:a,children:r,className:d,containerClassName:p,danger:f,decorator:c,isFullWidth:l,onClose:b,onKeyDown:E,open:u,preventCloseOnClickOutside:T,selectorPrimaryFocus:C="[data-modal-primary-focus]",selectorsFloatingMenus:i,size:h,launcherButtonRef:$,slug:B,...x},v){const s=I(),[R,F]=y.useState(!!u),[M,P]=y.useState(!!u),m=y.useRef(null),W=y.useRef(null),j=y.useRef(null),ce=y.useRef(null),ie=y.useRef(null),O=fe("enable-dialog-element"),G=fe("enable-experimental-focus-wrap-without-sentinels");y.useEffect(()=>{!O&&u!==M&&(F(!!u),P(!!u),be(document.body,`${s}--body--with-modal-open`,!!u))},[u,M,s]),y.useEffect(()=>{if(!O)return()=>{be(document.body,`${s}--body--with-modal-open`,!1)}},[]);function Be(g){O||(g.stopPropagation(),ge(g,Fe)&&V(g),G&&u&&ge(g,Me)&&m.current&&qe({containerNode:m.current,currentActiveNode:g.target,event:g})),E?.(g)}function Re(g){const w=g.target;ie.current=w}function Se(g){const{target:w}=g,N=ie.current;g.stopPropagation(),(!y.Children.toArray(X).some(z=>pe(z,Z))?T!==!1:T===!0)&&w instanceof Node&&!Pe(w,i)&&m.current&&!m.current.contains(w)&&!m.current.contains(N)&&V(g)}function Ie({target:g,relatedTarget:w}){if(!O&&!G&&u&&w&&g&&m.current){const{current:q}=m,{current:z}=j,{current:_e}=ce;ze({bodyNode:q,startTrapNode:z,endTrapNode:_e,currentActiveNode:w,oldActiveNode:g,selectorsFloatingMenus:i?.filter(Boolean)})}const N=document.querySelector(`.${s}--modal-content`);if(!N||!N.classList.contains(`${s}--modal-scroll-content`)||!w||!N.contains(w))return;const A=N.children[N.children.length-1],H=N.scrollHeight-A.offsetTop-A.clientHeight;for(let q of N.children)if(q.contains(w)){const z=N.clientHeight-q.offsetTop+N.scrollTop-q.clientHeight;z<H&&(N.scrollTop=N.scrollTop+(H-z));break}}function V(g){(!b||b(g)!==!1)&&F(!1)}const xe=D(`${s}--modal`,{"is-visible":R,[`${s}--modal--danger`]:f,[`${s}--modal--slug`]:B,[`${s}--modal--decorator`]:c},d),de=D(`${s}--modal-container`,h&&`${s}--modal-container--${h}`,l&&`${s}--modal-container--full-width`,p);let U;const X=t.Children.toArray(r).map(g=>{switch(!0){case(ye.isElement(g)&&g.type===t.createElement(Te).type):{const w=g;return U=w.props.label,t.cloneElement(w,{closeModal:V})}case(ye.isElement(g)&&g.type===t.createElement(Z).type):{const w=g;return t.cloneElement(w,{closeModal:V,inputref:W,danger:f})}default:return g}});y.useEffect(()=>{!O&&!u&&$&&setTimeout(()=>{$.current?.focus()})},[O,u,$]),y.useEffect(()=>{if(!O){const g=N=>{const A=N||m.current,H=A?A.querySelector(f?`.${s}--btn--secondary`:C):null;return H||W&&W.current};u&&R&&(N=>{const A=g(N),H=N.querySelector(`.${s}--modal-close`);A?A.focus():!A&&H&&H?.focus()})(m.current)}},[u,C,R]);const ue=B??c,J=pe(ue,Le)?y.cloneElement(ue,{size:"sm"}):null,ve=O?t.createElement(K,{open:u,focusAfterCloseRef:$,modal:!0,className:de,"aria-label":a||U,"aria-labelledby":o},t.createElement("div",{ref:m,className:`${s}--modal-container-body`},B?J:c?t.createElement("div",{className:`${s}--modal--inner__decorator`},J):"",X)):t.createElement("div",{className:de,role:"dialog","aria-modal":"true","aria-label":a||U,"aria-labelledby":o},!G&&t.createElement("button",{type:"button",ref:j,className:`${s}--visually-hidden`},"Focus sentinel"),t.createElement("div",{ref:m,className:`${s}--modal-container-body`},B?J:c?t.createElement("div",{className:`${s}--modal--inner__decorator`},J):"",X),!G&&t.createElement("button",{type:"button",ref:ce,className:`${s}--visually-hidden`},"Focus sentinel"));return t.createElement(ee,S({},x,{level:0,role:"presentation",ref:v,"aria-hidden":!u,onBlur:Ie,onClick:me([x?.onClick,Se]),onMouseDown:me([x?.onMouseDown,Re]),onKeyDown:Be,className:xe}),ve)});je.propTypes={"aria-label":e.string,"aria-labelledby":e.string,children:e.node,className:e.string,containerClassName:e.string,danger:e.bool,decorator:e.node,isFullWidth:e.bool,launcherButtonRef:e.oneOfType([e.func,e.shape({current:e.any})]),onClose:e.func,onKeyDown:e.func,open:e.bool,preventCloseOnClickOutside:e.bool,selectorPrimaryFocus:e.string,selectorsFloatingMenus:e.arrayOf(e.string.isRequired),size:e.oneOf(["xs","sm","md","lg"]),slug:Ae(e.node)};export{je as C,Te as M,We as a,Z as b,be as t,K as u};
