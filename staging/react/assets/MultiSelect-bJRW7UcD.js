import{eC as ht,P as l,r as a,e as i,u as It,k as xt,a as yt,b as St,o as E,c as N,_ as W,n as wt,d as bt,f as vt,s as _t,h as Ct,ay as Ce,t as Ee,q as Et,a1 as Ae,E as $e,g as Fe}from"./iframe-Bn5s87s4.js";import{u as Te,L as j,a as At,b as $t}from"./index-wuqyTjN_.js";import{m as Ft}from"./mergeRefs-BZpmU3mx.js";import{F as Ot}from"./FormContext-C5gYs1Iz.js";import{C as Tt}from"./Checkbox-CJXd6mx6.js";import{A as Bt}from"./index-C9jChmFj.js";import{d as Pt}from"./defaultItemToString-zSItMTD_.js";import{i as Dt}from"./utils-DQejB-zS.js";import{W as Mt,a as kt}from"./bucket-19-C9HfQtRN.js";var le,Oe;function Lt(){if(Oe)return le;Oe=1;var u=typeof Element<"u",g=typeof Map=="function",f=typeof Set=="function",v=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function h(t,s){if(t===s)return!0;if(t&&s&&typeof t=="object"&&typeof s=="object"){if(t.constructor!==s.constructor)return!1;var o,r,p;if(Array.isArray(t)){if(o=t.length,o!=s.length)return!1;for(r=o;r--!==0;)if(!h(t[r],s[r]))return!1;return!0}var d;if(g&&t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(d=t.entries();!(r=d.next()).done;)if(!s.has(r.value[0]))return!1;for(d=t.entries();!(r=d.next()).done;)if(!h(r.value[1],s.get(r.value[0])))return!1;return!0}if(f&&t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(d=t.entries();!(r=d.next()).done;)if(!s.has(r.value[0]))return!1;return!0}if(v&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if(o=t.length,o!=s.length)return!1;for(r=o;r--!==0;)if(t[r]!==s[r])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof s.valueOf=="function")return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof s.toString=="function")return t.toString()===s.toString();if(p=Object.keys(t),o=p.length,o!==Object.keys(s).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(s,p[r]))return!1;if(u&&t instanceof Element)return!1;for(r=o;r--!==0;)if(!((p[r]==="_owner"||p[r]==="__v"||p[r]==="__o")&&t.$$typeof)&&!h(t[p[r]],s[p[r]]))return!1;return!0}return t!==t&&s!==s}return le=function(s,o){try{return h(s,o)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},le}var Rt=Lt();const Be=ht(Rt),Nt={compareItems:l.func,sortItems:l.func},jt=(u,g,{locale:f})=>u.localeCompare(g,f,{numeric:!0}),zt=(u,{selectedItems:g=[],itemToString:f,compareItems:v,locale:h="en"})=>u.sort((t,s)=>{if(t.isSelectAll)return-1;if(s.isSelectAll)return 1;const o=g.includes(t),r=g.includes(s);return o&&!r?-1:r&&!o?1:v(f(t),f(s),{locale:h})}),re=({isControlled:u,isMounted:g,onChangeHandlerControlled:f,onChangeHandlerUncontrolled:v,selectedItems:h})=>{u?g&&f&&setTimeout(()=>{f({selectedItems:h})},0):v(h)},Ht=({disabled:u,onChange:g,initialSelectedItems:f=[],selectedItems:v,selectAll:h=!1,filteredItems:t=[]})=>{const s=a.useRef(!1),o=a.useRef(g),[r,p]=a.useState(f),d=!!v,y=d?v:r,V=a.useCallback(A=>{if(u)return;const z=t.filter(C=>!C?.disabled&&!C?.isSelectAll),J=t.filter(C=>C?.disabled).length;let w;if(A?.isSelectAll&&y.length>0)w=[];else if(A?.isSelectAll&&y.length===0)w=z;else{const C=y.findLastIndex(M=>Be(M,A));C===-1?(w=y.concat(A),h&&t.length-1===w.length+J&&(w=z)):(w=Kt(y,C),w=w.filter(M=>!M?.isSelectAll))}re({isControlled:d,isMounted:s.current,onChangeHandlerControlled:o.current,onChangeHandlerUncontrolled:p,selectedItems:w})},[u,y,t,h,d]),S=a.useCallback(()=>{u||re({isControlled:d,isMounted:s.current,onChangeHandlerControlled:o.current,onChangeHandlerUncontrolled:p,selectedItems:[]})},[u,d]),G=a.useCallback(A=>{re({isControlled:d,isMounted:s.current,onChangeHandlerControlled:o.current,onChangeHandlerUncontrolled:p,selectedItems:A})},[d]);return a.useEffect(()=>{o.current=g},[g]),a.useEffect(()=>{s.current&&o.current&&!d&&o.current({selectedItems:y})},[d,y]),a.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[]),{clearSelection:S,onItemChange:V,toggleAll:G,selectedItems:y}},Kt=(u,g)=>{const f=u.slice();return f.splice(g,1),f},{ItemClick:qt,ToggleButtonBlur:Ut,ToggleButtonKeyDownArrowDown:Wt,ToggleButtonKeyDownArrowUp:Vt,ToggleButtonKeyDownEnter:Gt,ToggleButtonKeyDownEscape:Jt,ToggleButtonKeyDownSpaceButton:Qt,ItemMouseMove:Xt,MenuMouseLeave:Yt,ToggleButtonClick:Zt,ToggleButtonKeyDownPageDown:es,ToggleButtonKeyDownPageUp:ts,FunctionSetHighlightedIndex:ss}=Te.stateChangeTypes,Pe=i.forwardRef(({autoAlign:u=!1,className:g,decorator:f,id:v,items:h,itemToElement:t,itemToString:s=Pt,titleText:o=!1,hideLabel:r,helperText:p,label:d,type:y="default",size:V,disabled:S=!1,initialSelectedItems:G=[],sortItems:A=zt,compareItems:z=jt,clearSelectionText:J="To clear selection, press Delete or Backspace",clearAnnouncement:w="all items have been cleared",clearSelectionDescription:C="Total items selected: ",light:M,invalid:_,invalidText:De,warn:H,warnText:Me,useTitleInItem:ke,translateWithId:oe,downshiftProps:Le,open:B=!1,selectionFeedback:ae="top-after-reopen",onChange:Re,onMenuChange:ce,direction:ie="bottom",selectedItems:Ne,readOnly:k,locale:je="en",slug:Q},ze)=>{const $=a.useMemo(()=>h.filter(e=>{if(typeof e=="object"&&e!==null){for(const m in e)if(Object.hasOwn(e,m)&&e[m]===void 0)return!1}return!0}),[h]),X=$.some(e=>e.isSelectAll),n=It(),{isFluid:Y}=a.useContext(Ot),ue=xt(),[ns,Z]=a.useState(!1),[fe,L]=a.useState(!1),[b,He]=a.useState(B||!1),[Ke,qe]=a.useState(B),[Ue,We]=a.useState([]),[Ve,de]=a.useState(!1),F=yt("enable-v12-dynamic-floating-styles")||u,{refs:P,floatingStyles:pe,middlewareData:me}=St(F?{placement:ie,strategy:"fixed",middleware:[u&&vt({crossAxis:!1}),_t({apply({rects:e,elements:m}){Object.assign(m.floating.style,{width:`${e.reference.width}px`})}}),u&&Ct()],whileElementsMounted:bt}:{});a.useLayoutEffect(()=>{if(F){const e={...pe,visibility:me.hide?.referenceHidden?"hidden":"visible"};Object.keys(e).forEach(m=>{P.floating.current&&(P.floating.current.style[m]=e[m])})}},[F,pe,P.floating,me,B]);const{selectedItems:K,onItemChange:ge,clearSelection:he}=Ht({disabled:S,initialSelectedItems:G,onChange:Re,selectedItems:Ne,selectAll:X,filteredItems:$}),ee={selectedItems:K,itemToString:s,compareItems:z,locale:je},Ge={stateReducer:at,isOpen:b,itemToString:e=>Array.isArray(e)&&e.map(m=>s(m)).join(", ")||"",selectedItem:K,items:$,isItemDisabled(e,m){return e?.disabled},...Le},{getToggleButtonProps:Je,getLabelProps:Qe,getMenuProps:Ie,getItemProps:Xe,selectedItem:Ye,highlightedIndex:Ze,setHighlightedIndex:xe}=Te(Ge),ye=Je({onFocus:()=>{L(!0)},onBlur:()=>{L(!1)},onKeyDown:e=>{S||((E(e,Ce)||E(e,Ee))&&!b&&(he(),e.stopPropagation()),!b&&E(e,Ce)&&x.length>0&&de(!0),(E(e,Et)||E(e,Ae)||E(e,$e))&&!b&&(xe(0),de(!1),q(!0)),E(e,Ae)&&x.length===0&&(L(!1),Z(!1)),E(e,Ee)&&b&&L(!0),E(e,$e)&&b&&L(!0))}}),te=a.useRef(null),et=Ft(ye.ref,ze,te),x=Ye,q=e=>{He(e),ce&&ce(e)};Ke!==B&&(q(B),qe(B));const O=y==="inline",Se=!_&&H,tt=N(`${n}--multi-select__wrapper`,`${n}--list-box__wrapper`,g,{[`${n}--multi-select__wrapper--inline`]:O,[`${n}--list-box__wrapper--inline`]:O,[`${n}--multi-select__wrapper--inline--invalid`]:O&&_,[`${n}--list-box__wrapper--inline--invalid`]:O&&_,[`${n}--list-box__wrapper--fluid--invalid`]:Y&&_,[`${n}--list-box__wrapper--slug`]:Q,[`${n}--list-box__wrapper--decorator`]:f}),st=N(`${n}--label`,{[`${n}--label--disabled`]:S,[`${n}--visually-hidden`]:r}),we=p?`multiselect-helper-text-${ue}`:void 0,nt=`multiselect-field-label-${ue}`,lt=N(`${n}--form__helper-text`,{[`${n}--form__helper-text--disabled`]:S}),rt=N(`${n}--multi-select`,{[`${n}--multi-select--invalid`]:_,[`${n}--multi-select--invalid--focused`]:_&&fe,[`${n}--multi-select--warning`]:Se,[`${n}--multi-select--inline`]:O,[`${n}--multi-select--selected`]:x&&x.length>0,[`${n}--list-box--up`]:ie==="top",[`${n}--multi-select--readonly`]:k,[`${n}--autoalign`]:F,[`${n}--multi-select--selectall`]:X}),ot=t;ae==="fixed"?ee.selectedItems=[]:ae==="top-after-reopen"&&(ee.selectedItems=Ue);function at(e,m){const{changes:c,props:D,type:T}=m,{highlightedIndex:I}=c;switch(c.isOpen&&!b&&We(K),T){case Qt:case Gt:if(c.selectedItem===void 0||Array.isArray(c.selectedItem))break;return ge(c.selectedItem),{...c,highlightedIndex:e.highlightedIndex};case Ut:case Jt:q(!1);break;case Zt:return q(c.isOpen||!1),{...c,highlightedIndex:K.length>0?0:void 0};case qt:return xe(c.selectedItem),ge(c.selectedItem),{...c,highlightedIndex:e.highlightedIndex};case Yt:return{...c,highlightedIndex:e.highlightedIndex};case ss:return b?{...c,highlightedIndex:$.indexOf(I)}:{...c,highlightedIndex:0};case Wt:case Vt:case es:case ts:if(I>-1){const ne=document.querySelectorAll(`li.${n}--list-box__menu-item[role="option"]`);D.scrollIntoView(ne[I])}return I===-1?{...c,highlightedIndex:0}:c;case Xt:return{...c,highlightedIndex:e.highlightedIndex}}return c}const ct=N(`${n}--list-box__field--wrapper`,{[`${n}--list-box__field--wrapper--input-focused`]:fe}),be=e=>{e.target.classList.contains(`${n}--tag__close-icon`)?Z(!1):Z(e.type==="focus")},it=k?{onClick:e=>{e.preventDefault(),te.current&&te.current.focus()},onKeyDown:e=>{["ArrowDown","ArrowUp"," ","Enter"].includes(e.key)&&e.preventDefault()}}:{},se=Q??f,ve=Dt(se,Bt)?a.cloneElement(se,{size:"mini"}):se,ut=x.length>0&&x.map(e=>e?.text),ft=X?x.filter(e=>!e.isSelectAll).length:x.length,dt=a.useMemo(()=>Ie({ref:F?P.setFloating:null}),[F,Ie,P.setFloating]),_e=Qe(),pt=a.isValidElement(o)?{id:_e.id}:_e,mt=a.useCallback((e,m)=>{const c=e.some(I=>!I.isSelectAll),D=e.filter(I=>!I.isSelectAll).length,T=m.filter(I=>!I.isSelectAll&&!I.disabled).length;return{hasIndividualSelections:c,nonSelectAllSelectedCount:D,totalSelectableCount:T}},[x,$]);return i.createElement("div",{className:tt},i.createElement("label",W({className:st},pt),o&&o,x.length>0&&i.createElement("span",{className:`${n}--visually-hidden`},C," ",x.length," ",ut,",",J)),i.createElement(j,{onFocus:Y?be:void 0,onBlur:Y?be:void 0,type:y,size:V,className:rt,disabled:S,light:M,invalid:_,invalidText:De,warn:H,warnText:Me,isOpen:b,id:v},_&&i.createElement(Mt,{className:`${n}--list-box__invalid-icon`}),Se&&i.createElement(kt,{className:`${n}--list-box__invalid-icon ${n}--list-box__invalid-icon--warning`}),i.createElement("div",{className:ct,ref:F?P.setReference:null},x.length>0&&i.createElement(j.Selection,{readOnly:k,clearSelection:!S&&!k?he:wt,selectionCount:ft,translateWithId:oe,disabled:S}),i.createElement("button",W({type:"button",className:`${n}--list-box__field`,disabled:S,"aria-disabled":S||k,"aria-describedby":!O&&!_&&!H&&p?we:void 0},ye,{ref:et},it),i.createElement("span",{id:nt,className:`${n}--list-box__label`},d),i.createElement(j.MenuIcon,{isOpen:b,translateWithId:oe})),Q?ve:f?i.createElement("div",{className:`${n}--list-box__inner-wrapper--decorator`},ve):""),i.createElement(j.Menu,dt,b&&A($,ee).map((e,m)=>{const{hasIndividualSelections:c,nonSelectAllSelectedCount:D,totalSelectableCount:T}=mt(x,$),I=e.isSelectAll?D===T&&T>0:x.some(gt=>Be(gt,e)),ne=e.isSelectAll&&c&&D<T,R=Xe({item:e,"aria-selected":I}),U=s(e);return i.createElement(j.MenuItem,W({key:R.id,isActive:I&&!e.isSelectAll,"aria-label":U,isHighlighted:Ze===m,title:U,disabled:R["aria-disabled"]},R),i.createElement("div",{className:`${n}--checkbox-wrapper`},i.createElement(Tt,{id:`${R.id}__checkbox`,labelText:t?i.createElement(ot,W({key:R.id},e)):U,checked:I,title:ke?U:void 0,indeterminate:ne,disabled:S})))})),Ve&&i.createElement("span",{"aria-live":"assertive","aria-label":w})),!O&&!_&&!H&&p&&i.createElement("div",{id:we,className:lt},p))});Pe.displayName="MultiSelect";Pe.propTypes={...Nt,autoAlign:l.bool,className:l.string,clearSelectionDescription:l.string,clearSelectionText:l.string,compareItems:l.func,decorator:l.node,direction:l.oneOf(["top","bottom"]),disabled:l.bool,downshiftProps:l.object,helperText:l.node,hideLabel:l.bool,id:l.string.isRequired,initialSelectedItems:l.array,invalid:l.bool,invalidText:l.node,itemToElement:l.func,itemToString:l.func,items:l.array.isRequired,label:l.node.isRequired,light:Fe(l.bool),locale:l.string,onChange:l.func,onMenuChange:l.func,open:l.bool,readOnly:l.bool,selectedItems:l.array,selectionFeedback:l.oneOf(["top","fixed","top-after-reopen"]),size:$t,slug:Fe(l.node),sortItems:l.func,titleText:l.node,translateWithId:l.func,type:At,useTitleInItem:l.bool,warn:l.bool,warnText:l.node};export{Pe as M,jt as a,zt as d,Be as i,Nt as s,Ht as u};
//# sourceMappingURL=MultiSelect-bJRW7UcD.js.map
