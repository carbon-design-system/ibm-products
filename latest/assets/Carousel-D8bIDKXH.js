import{R as i,r as l}from"./index-BwDkhjyp.js";import{P as a}from"./index-Dk74W0Oi.js";import{c as N}from"./index-CQ0F2wkl.js";import{g as O}from"./devtools-Bz70ioU6.js";import{p as B}from"./settings-xiNX1vM3.js";import{u as W}from"./useIsomorphicEffect-D7JMtAof.js";const K=`${B.prefix}--carousel__item`,D="CarouselItem",w=i.forwardRef(({children:p,className:y,...h},o)=>i.createElement("div",{...h,className:N(K,y),...O(D),ref:o},p));w.displayName=D;w.propTypes={children:a.node.isRequired,className:a.string};w.__docgenInfo={description:"TODO: A description of the component.",methods:[],displayName:"CarouselItem",props:{children:{description:"Provide the contents of the CarouselItem.",type:{name:"node"},required:!0},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1}}};const m=`${B.prefix}--carousel`,j="Carousel",I={disableArrowScroll:!1,onScroll:()=>{},onChangeIsScrollable:()=>{}},R=i.forwardRef(({children:p,className:y,disableArrowScroll:h=I.disableArrowScroll,fadedEdgeColor:o,onChangeIsScrollable:E=I.onChangeIsScrollable,onScroll:L=I.onScroll,...z},F)=>{const S=l.useRef(null),r=l.useRef(null),c=l.useRef(null),u=l.useRef(null),v=l.useRef(Array(i.Children.count(p)).fill(l.useRef(null))),k=typeof o=="object"?o==null?void 0:o.left:o,C=typeof o=="object"?o==null?void 0:o.right:o,f=l.useCallback(()=>{var b,T,A;if(!r.current)return;const e=(b=r.current)==null?void 0:b.clientWidth,t=parseInt(`${(T=r.current)==null?void 0:T.scrollLeft}`,10),n=(A=r.current)==null?void 0:A.scrollWidth,s=n-e,d=parseFloat((t/s).toFixed(2))||0;E(n>e),L(d)},[E,L]),V=l.useCallback((e,t)=>{const n=t.left>=e.left,s=t.right<=e.right;return n&&s},[]),x=l.useCallback(()=>{var n;const e=(n=r==null?void 0:r.current)==null?void 0:n.getBoundingClientRect();return v.current.filter(s=>V(e,s.getBoundingClientRect()))},[V]),g=l.useCallback(()=>{var s;const e=(s=r==null?void 0:r.current)==null?void 0:s.getBoundingClientRect(),t=x().map(d=>d.getBoundingClientRect()),n=t.reduce((d,b)=>d+b.width,0);return{containerRect:e,elementRectsInView:t,visibleWidth:n}},[x]),P=l.useCallback(()=>{if(!r.current)return;const{containerRect:e,visibleWidth:t}=g(),n=t>0?t:e==null?void 0:e.width;r.current.scrollLeft+=n},[g]),_=l.useCallback(()=>{if(!r.current)return;const{containerRect:e,elementRectsInView:t,visibleWidth:n}=g(),s=n>0?n-t[0].left:((e==null?void 0:e.width)??0)+((e==null?void 0:e.left)??0);r.current.scrollLeft-=s},[g]),$=l.useCallback(()=>{r.current&&(r.current.scrollLeft=0,f())},[f]),q=l.useCallback(e=>{v.current[e].scrollIntoView()},[]);return l.useEffect(()=>{setTimeout(()=>{f()},0)},[]),l.useEffect(()=>{const e=()=>{r.current&&(r.current.scrollLeft=0,f())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[f]),l.useEffect(()=>{const e=()=>{f()},t=r.current;return t==null||t.addEventListener("scrollend",e),()=>t==null?void 0:t.removeEventListener("scrollend",e)},[f]),l.useEffect(()=>{function e(n){n.shiftKey&&(n.stopPropagation(),n.preventDefault(),n.cancelBubble=!1)}const t=r.current;if(t)return t.addEventListener("wheel",e,{passive:!1}),()=>{t.removeEventListener("wheel",e)}},[]),l.useEffect(()=>{function e(n){const{key:s}=n;(s==="ArrowLeft"||s==="ArrowRight")&&h&&(n.stopPropagation(),n.preventDefault(),n.cancelBubble=!1)}const t=S.current;if(t)return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[h]),l.useImperativeHandle(F,()=>({scrollNext(){P()},scrollPrev(){_()},scrollReset(){$()},scrollToView(e){q(e)}}),[P,_,$,q]),W(()=>{c!=null&&c.current&&c.current.style&&(c.current.style.background=`linear-gradient(90deg, ${k}, transparent)`)},[c,k]),W(()=>{u!=null&&u.current&&u.current.style&&(u.current.style.background=`linear-gradient(270deg, ${C}, transparent)`)},[u,C]),i.createElement("div",{...z,tabIndex:-1,className:N(m,y),ref:S,...O(j)},i.createElement("div",{className:N(`${m}__elements-container`)},i.createElement("div",{className:`${m}__elements`,ref:r},i.Children.map(p,(e,t)=>i.createElement(w,{key:t,ref:n=>v.current[t]=n},e))),k&&i.createElement("div",{ref:c,className:`${m}__elements-container--scrolled`}),C&&i.createElement("div",{ref:u,className:`${m}__elements-container--scroll-max`})))});R.displayName=j;R.propTypes={children:a.node.isRequired,className:a.string,disableArrowScroll:a.bool,fadedEdgeColor:a.oneOfType([a.string,a.shape({left:a.string,right:a.string})]),onChangeIsScrollable:a.func,onScroll:a.func};R.__docgenInfo={description:`The Carousel acts as a scaffold for other Onboarding content.

This component is not intended for general use.

Expected scrolling behavior.
1. Scroll the maximum number of visible items at a time.
2. The left-most item should always be left-aligned in the viewport.

Exception.
1. After scrolling to the last (right-most) item,
     if some of its content remains hidden,
     then nudge it to the right until it is right-aligned.
2. From the right-aligned position, when scrolling left,
     the left-most item should again be left-aligned.`,methods:[{name:"scrollNext",docblock:null,modifiers:[],params:[],returns:null},{name:"scrollPrev",docblock:null,modifiers:[],params:[],returns:null},{name:"scrollReset",docblock:null,modifiers:[],params:[],returns:null},{name:"scrollToView",docblock:null,modifiers:[],params:[{name:"itemNumber",optional:!1,type:null}],returns:null}],displayName:"Carousel",props:{disableArrowScroll:{defaultValue:{value:"false",computed:!1},description:`Disables the ability of the Carousel to scroll
use a keyboard's left and right arrow keys.`,type:{name:"bool"},required:!1},onChangeIsScrollable:{defaultValue:{value:"() => {}",computed:!1},description:"An optional callback function that returns `true`\nwhen the carousel has enough content to be scrollable,\nand `false` when there is not enough content.",type:{name:"func"},required:!1},onScroll:{defaultValue:{value:"() => {}",computed:!1},description:`An optional callback function that returns the scroll position as
a value between 0 and 1.`,type:{name:"func"},required:!1},children:{description:"Provide the contents of the Carousel.",type:{name:"node"},required:!0},className:{description:"Provide an optional class to be applied to the containing node.",type:{name:"string"},required:!1},fadedEdgeColor:{description:"Enables the edges of the component to have faded styling.\n\nPass a single string (`$color`) to specify the same color for left and right.\n\nOr pass an object (`{ left: $color1, right: $color2 }`) to specify different colors.",type:{name:"union",value:[{name:"string"},{name:"shape",value:{left:{name:"string",required:!1},right:{name:"string",required:!1}}}]},required:!1}}};export{R as C};
