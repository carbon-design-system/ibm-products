import{b as z,u as D,n as lt,a as ct,e as ut,x as pt,f as ft,bN as dt,h as gt,i as G,d as R,_ as J,P as e}from"./index-CGLP8AGt.js";import{r as d,e as u}from"./index-DtHxqM--.js";const B={};function bt(o,l,c){return function(f,r,n){if(f[r]!==void 0){if(!B[n]||!B[n][r]){B[n]={...B[n],[r]:!0};const p=f[r],H=c?c(p):null;l&&!l.includes(p)&&(c?`${p}${r}${n}${H}${p}`:`${p}${r}${n}${l.join(", ")}${p}`)}for(var v=arguments.length,h=new Array(v>3?v-3:0),$=3;$<v;$++)h[$-3]=arguments[$];return o(f,r,n,...h)}}}const Et=(o,l,c)=>{const s=d.useRef(null);d.useEffect(()=>{s.current=c},[c]),d.useEffect(()=>{const f=n=>{s.current&&s.current(n)},r="current"in o?o.current:o;return r==null||r.addEventListener(l,f),()=>{r==null||r.removeEventListener(l,f)}},[o,l])},I=(o,l)=>{const c=d.useRef(null);d.useEffect(()=>{c.current=l},[l]),d.useEffect(()=>{const s=f=>{c.current&&c.current(f)};return window.addEventListener(o,s),()=>{window.removeEventListener(o,s)}},[o])};function mt(o){switch(o){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return o}}const K=u.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ht=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o],yt=u.forwardRef(function(l,c){var V;let{isTabTip:s,align:f=s?"bottom-start":"bottom",as:r="span",autoAlign:n=!1,autoAlignBoundary:v,caret:h=!s,className:$,children:p,dropShadow:H=!0,highContrast:X=!1,onRequestClose:A,open:j,alignmentAxisOffset:Y,...Z}=l;const g=z(),_=d.useRef(null),b=d.useRef(null),F=d.useRef(null),y=D("enable-v12-dynamic-floating-styles")||n;let C=mt(f);I("blur",()=>{j&&(A==null||A())}),I("click",a=>{var i;let{target:t}=a;j&&t instanceof Node&&!((i=F.current)!=null&&i.contains(t))&&(A==null||A())});const tt=u.Children.toArray(p).some(a=>{var t,i,m,E;return((i=(t=a==null?void 0:a.props)==null?void 0:t.className)==null?void 0:i.includes("slug"))||((E=(m=a==null?void 0:a.props)==null?void 0:m.className)==null?void 0:E.includes("ai-label"))})?7:6,w=d.useRef({offset:10,caretHeight:tt});lt(()=>{if(h&&F.current){const a=window.getComputedStyle(F.current,null),t=a.getPropertyValue("--cds-popover-offset"),i=a.getPropertyValue("--cds-popover-caret-height");t&&(w.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),i&&(w.current.caretHeight=i.includes("px")?Number(i.split("px",1)[0])*1:Number(i.split("rem",1)[0])*16)}});const{refs:P,floatingStyles:O,placement:S,middlewareData:T}=ct(y?{placement:C,strategy:"fixed",middleware:[pt(s?0:{alignmentAxis:Y,mainAxis:(V=w==null?void 0:w.current)==null?void 0:V.offset}),n&&ft({fallbackPlacements:C.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:v}),dt({element:b}),n&&gt()],whileElementsMounted:ut}:{}),et=d.useMemo(()=>({floating:_,setFloating:P.setFloating,caretRef:b,autoAlign:n}),[P.setFloating,n]);s&&(["bottom-start","bottom-end"].includes(C)||(C="bottom-start")),d.useEffect(()=>{var a,t;if(y){const i={...O,visibility:(a=T.hide)!=null&&a.referenceHidden?"hidden":"visible"};if(Object.keys(i).forEach(m=>{P.floating.current&&(P.floating.current.style[m]=i[m])}),h&&T&&T.arrow&&(b!=null&&b.current)){const{x:m,y:E}=T.arrow,N={top:"bottom",right:"left",bottom:"top",left:"right"}[S.split("-")[0]];b.current.style.left=m!=null?`${m}px`:"",b.current.style.top=E!=null?`${E}px`:"",b.current.style.right="",b.current.style.bottom="",N&&(b.current.style[N]=`${-((t=w==null?void 0:w.current)==null?void 0:t.caretHeight)}px`)}}},[O,P.floating,y,T,S,h]);const rt=G([c,F]),ot=n&&S!==C?S:C,nt=R({[`${g}--popover-container`]:!0,[`${g}--popover--caret`]:h,[`${g}--popover--drop-shadow`]:H,[`${g}--popover--high-contrast`]:X,[`${g}--popover--open`]:j,[`${g}--popover--auto-align ${g}--autoalign`]:y,[`${g}--popover--${ot}`]:!0,[`${g}--popover--tab-tip`]:s},$),st=u.Children.map(p,a=>{var k,q;const t=a,i=(k=t==null?void 0:t.type)==null?void 0:k.displayName,m=(t==null?void 0:t.type)==="button",E=y&&i&&["ToggletipButton"].includes(i),N=y&&!["ToggletipContent","PopoverContent"].includes(i);if(u.isValidElement(t)&&(m||E||N)){const W=(q=t==null?void 0:t.props)==null?void 0:q.className,x=(t==null?void 0:t.props).ref,it=R(`${g}--popover--tab-tip__button`,W);return u.cloneElement(t,{className:s&&(t==null?void 0:t.type)==="button"?it:W||"",ref:L=>{var M,U;(y&&((M=t==null?void 0:t.type)==null?void 0:M.displayName)!=="PopoverContent"||y&&((U=t==null?void 0:t.type)==null?void 0:U.displayName)==="ToggletipButton")&&P.setReference(L),typeof x=="function"?x(L):x!=null&&(x.current=L)}})}else return t}),at=r;return u.createElement(K.Provider,{value:et},u.createElement(at,J({},Z,{className:nt,ref:rt}),y||s?st:p))});yt.propTypes={align:bt(e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],ht),as:e.oneOfType([e.string,e.elementType]),autoAlign:e.bool,autoAlignBoundary:e.oneOfType([e.oneOf(["clippingAncestors"]),e.elementType,e.arrayOf(e.elementType),e.exact({x:e.number.isRequired,y:e.number.isRequired,width:e.number.isRequired,height:e.number.isRequired})]),caret:e.bool,children:e.node,className:e.string,dropShadow:e.bool,highContrast:e.bool,isTabTip:e.bool,onRequestClose:e.func,open:e.bool.isRequired};function vt(o,l){let{className:c,children:s,...f}=o;const r=z(),{setFloating:n,caretRef:v,autoAlign:h}=u.useContext(K),$=G([n,l]),p=D("enable-v12-dynamic-floating-styles")||h;return u.createElement("span",J({},f,{className:`${r}--popover`}),u.createElement("span",{className:R(`${r}--popover-content`,c),ref:$},s,p&&u.createElement("span",{className:R({[`${r}--popover-caret`]:!0,[`${r}--popover--auto-align`]:!0}),ref:v})),!p&&u.createElement("span",{className:R({[`${r}--popover-caret`]:!0}),ref:v}))}const Q=u.forwardRef(vt);Q.displayName="PopoverContent";Q.propTypes={children:e.node,className:e.string};export{yt as P,Q as a,Et as b,bt as d,mt as m,I as u};
