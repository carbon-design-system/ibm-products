import{e as r,r as S}from"./index-BOZkNhcz.js";import{c as x}from"./index--clQM3eT.js";import{T as A}from"./TableSelectRow-DN4YIujg.js";import{s as H,S as O,h as j}from"./_storybook-styles-BjK23sID.js";import{p as C,c as D}from"./settings-BYgtfLKl.js";const h=`${C.prefix}--datagrid`,b=`${C.prefix}--datagrid__checkbox-cell`,Q=o=>{F(o);const a=t=>{const{rows:e}=t,s=e.map(c=>({...c,isSelectable:!0}));Object.assign(t,{rows:s})};o.useInstance.push(a),o.useInstance.push(t=>{Object.assign(t,{withSelectRows:!0})}),o.visibleColumns.push(t=>{const e=[...t],s=e.findIndex(n=>n.id==="expander"),c=s>-1?e.splice(s,1):[];return[...s>-1&&c&&c.length?c:[],{id:H,Header:n=>r.createElement(O,{...n}),Cell:n=>r.createElement(B,{...n})},...e]})},F=o=>{const a=(t,{row:e})=>{const{checked:s}=e.getToggleRowSelectedProps();return[t,{className:x([`${h}__carbon-row`,{[`${D.prefix}--data-table--selected`]:s,[`${h}__active-row`]:s}])}]};o.getRowProps.push(a)},B=o=>{var m;const{isFetching:a=!1,tableId:t,row:e,cell:s,radio:c,toggleAllRowsSelected:n,onRadioSelect:d,onRowSelect:i,columns:R,withStickyColumn:E,dispatch:I,getRowId:P}=o,[$,p]=S.useState();S.useLayoutEffect(()=>{p(window.innerWidth);function l(){p(window.innerWidth)}return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const k=async l=>{var g,f;l.stopPropagation(),c&&(n(!1),d&&d(e)),_(l),i==null||i(e,l),j({dispatch:I,rowData:e,isChecked:l.target.checked,getRowId:P,selectAll:null});const W=((g=document==null?void 0:document.activeElement)==null?void 0:g.id)??"";await void 0,(f=document==null?void 0:document.getElementById(W))==null||f.focus()},y=a||e.getRowProps().disabled,{onChange:_,title:z,...L}=e.getToggleRowSelectedProps(),w=s.getCellProps(),T=((m=R[0])==null?void 0:m.sticky)==="left"&&E,u=`${t}-${e.id}-${e.index}`,{key:v,_cellProps:N}=w;return r.createElement(A,{key:v,...N,...L,radio:c,onSelect:k,id:u,name:`${u}-name`,className:x([b,w.className,{[`${b}-sticky-left`]:T&&Number($)>671}]),ariaLabel:z,disabled:y})};export{Q as u};
