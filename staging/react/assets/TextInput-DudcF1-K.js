import{e as a,u as pe,r as c,m as ue,c as o,P as t,l as D}from"./iframe-Bt_4wi2_.js";import{u as me}from"./useNormalizedInputProps-Bd-xcf7G.js";import{F as fe}from"./FormContext-DZ5Pn6PQ.js";import{A as xe}from"./index-xWfRmBau.js";import{i as be}from"./utils-Dx5MzUE-.js";import{T as h}from"./Text-CKKshe8_.js";const $e=i=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":i}),ve=i=>({"aria-describedby":i}),_e=i=>({"aria-describedby":i}),we=({sharedTextInputProps:i,invalid:u,invalidId:d,warn:p,warnId:r,hasHelper:b,helperId:x})=>({...i,...u?$e(d):{},...p?ve(r):{},...b?_e(x):{}}),ge=(i,u,d="character",p="characters")=>{if(typeof u>"u")return null;const r=u-i;return r<=10&&r>0?`${r} ${r===1?d:p} left.`:r<=0?`Maximum ${p} reached.`:null},j=a.forwardRef(function({className:u,decorator:d,disabled:p=!1,helperText:r,hideLabel:b,id:x,inline:s=!1,invalid:B=!1,invalidText:G,labelText:I,light:E,onChange:H=()=>{},onClick:J=()=>{},placeholder:N,readOnly:_,size:m,type:K="text",warn:Q=!1,warnText:U,enableCounter:w=!1,maxCount:$,slug:g,...T},X){const e=pe(),{defaultValue:C,value:y}=T,P=c.useRef(null),Y=ue([X,P]);function R(){return(C||y||P.current?.value||"").toString().length}const[A,L]=c.useState(R());c.useEffect(()=>{L(R())},[y,C,w]);const n=me({id:x,readOnly:_,disabled:p,invalid:B,invalidText:G,warn:Q,warnText:U}),Z=o(`${e}--text-input`,{[`${e}--text-input--light`]:E,[`${e}--text-input--invalid`]:n.invalid,[`${e}--text-input--warning`]:n.warn,[`${e}--text-input--${m}`]:m,[`${e}--layout--size-${m}`]:m}),F={id:x,onChange:l=>{n.disabled||(L(l.target.value?.length),H(l))},onClick:l=>{n.disabled||J(l)},placeholder:N,type:K,ref:Y,className:Z,title:N,disabled:n.disabled,readOnly:_,"aria-describedby":r&&n.helperId,...T};w&&(F.maxLength=$);const ee=o([o(`${e}--form-item`,u)],`${e}--text-input-wrapper`,{[`${e}--text-input-wrapper--readonly`]:_,[`${e}--text-input-wrapper--light`]:E,[`${e}--text-input-wrapper--inline`]:s,[`${e}--text-input-wrapper--inline--invalid`]:s&&n.invalid}),te=o(`${e}--label`,{[`${e}--visually-hidden`]:b,[`${e}--label--disabled`]:n.disabled,[`${e}--label--inline`]:s,[`${e}--label--inline--${m}`]:s&&!!m}),ne=o(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:n.disabled,[`${e}--form__helper-text--inline`]:s}),ae=o(`${e}--text-input__field-outer-wrapper`,{[`${e}--text-input__field-outer-wrapper--inline`]:s}),re=o(`${e}--text-input__field-wrapper`,{[`${e}--text-input__field-wrapper--warning`]:n.warn,[`${e}--text-input__field-wrapper--slug`]:g,[`${e}--text-input__field-wrapper--decorator`]:d}),ie=o({[`${e}--text-input__invalid-icon`]:n.invalid||n.warn,[`${e}--text-input__invalid-icon--warning`]:n.warn}),le=o(`${e}--label`,{[`${e}--label--disabled`]:p,[`${e}--text-input__label-counter`]:!0}),se=w&&$?a.createElement(h,{as:"div",className:le},`${A}/${$}`):null,oe=I?a.createElement(h,{as:"label",htmlFor:x,className:te},I):null,V=a.createElement("div",{className:`${e}--text-input__label-wrapper`},oe,se),W=r?a.createElement(h,{as:"div",id:n.helperId,className:ne},r):null,ce=a.createElement("input",we({sharedTextInputProps:F,invalid:n.invalid,invalidId:n.invalidId,warn:n.warn,warnId:n.warnId})),{isFluid:v}=c.useContext(fe),O=c.useRef(null),[S,de]=c.useState(""),f=ge(A,$);c.useEffect(()=>{if(f&&f!==S){const l=O.current;if(l){l.textContent="";const z=setTimeout(()=>{l&&(l.textContent=f,de(f))},1e3);return()=>{z&&clearTimeout(z)}}}},[f,S]);const k=n.icon,q=g??d,M=be(q,xe)?c.cloneElement(q,{size:"mini"}):null;return a.createElement("div",{className:ee},s?a.createElement("div",{className:`${e}--text-input__label-helper-wrapper`},V,!v&&(n.validation||W)):V,a.createElement("div",{className:ae},a.createElement("div",{className:re,"data-invalid":n.invalid||null},k&&a.createElement(k,{className:ie}),ce,g?M:d?a.createElement("div",{className:`${e}--text-input__field-inner-wrapper--decorator`},M):"",a.createElement("span",{className:`${e}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:O},f),v&&a.createElement("hr",{className:`${e}--text-input__divider`}),v&&!s&&n.validation),!v&&!s&&(n.validation||W)))});j.displayName="TextInput";j.propTypes={className:t.string,decorator:t.node,defaultValue:t.oneOfType([t.string,t.number]),disabled:t.bool,enableCounter:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node.isRequired,light:D(t.bool),maxCount:t.number,onChange:t.func,onClick:t.func,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:D(t.node),type:t.string,value:t.oneOfType([t.string,t.number]),warn:t.bool,warnText:t.node};export{j as T,ge as g,we as t};
