import{e as s,u as te,r as p,d as se,c,_ as le,l as ae,w as ne,P as t,i as D}from"./iframe-DKsKIeO_.js";import{F as oe}from"./FormContext-DnXssUoQ.js";import{A as re}from"./index-zH3n7d5W.js";import{i as ce}from"./utils-BNH49ZRR.js";import{T as E}from"./Text-DWkOwfBd.js";import{W as ie,a as de}from"./bucket-19-CjGrDCAa.js";const S=s.forwardRef(({className:L,decorator:u,id:f,inline:o=!1,labelText:P="Select",disabled:i=!1,children:v,noLabel:K=!1,hideLabel:O=!1,invalid:a=!1,invalidText:V="",helperText:$="",light:W=!1,readOnly:d,size:x,warn:m=!1,warnText:q,onChange:z,slug:b,...h},H)=>{const e=te(),{isFluid:n}=p.useContext(oe),[R,k]=p.useState(!1),B=se(),g=s.Children.toArray(v).filter(l=>s.isValidElement(l)),M=g.find(l=>l.props?.value===h?.defaultValue)?.props?.text||g[0]?.props?.text||"",[U,j]=p.useState(M),G=c({[`${e}--select`]:!0,[`${e}--select--inline`]:o,[`${e}--select--light`]:W,[`${e}--select--invalid`]:a,[`${e}--select--disabled`]:i,[`${e}--select--readonly`]:d,[`${e}--select--warning`]:m,[`${e}--select--fluid--invalid`]:n&&a,[`${e}--select--fluid--focus`]:n&&R,[`${e}--select--slug`]:b,[`${e}--select--decorator`]:u}),J=c(`${e}--label`,{[`${e}--visually-hidden`]:O,[`${e}--label--disabled`]:i}),Q=c({[`${e}--select-input`]:!0,[`${e}--select-input--${x}`]:x}),N=`${f}-error-msg`,X=(()=>{if(a)return V;if(m)return q})(),r=a||m?s.createElement(E,{as:"div",className:`${e}--form-requirement`,id:N},X):null,Y=c(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:i}),w=$?`select-helper-text-${B}`:void 0,y=$?s.createElement(E,{as:"div",id:w,className:Y},$):null,_={};a?_["aria-describedby"]=N:!o&&!n&&(_["aria-describedby"]=y?w:void 0);const C=l=>{k(l.type==="focus")},Z=l=>{const T=l?.target?.options[l.target.selectedIndex];j(T?.text)},ee={onMouseDown:l=>{d&&(l.preventDefault(),l.target.focus())},onKeyDown:l=>{d&&["ArrowDown","ArrowUp"," "].includes(l.key)&&l.preventDefault()}},I=b??u,F=ce(I,re)?p.cloneElement(I,{size:"mini"}):null,A=s.createElement(s.Fragment,null,s.createElement("select",le({},h,_,{id:f,className:Q,disabled:i||void 0,"aria-invalid":a||void 0,"aria-readonly":d||void 0,title:U,onChange:ae([z,Z])},ee,{ref:H}),v),s.createElement(ne,{className:`${e}--select__arrow`}),a&&s.createElement(ie,{className:`${e}--select__invalid-icon`}),!a&&m&&s.createElement(de,{className:`${e}--select__invalid-icon ${e}--select__invalid-icon--warning`}));return s.createElement("div",{className:c(`${e}--form-item`,L)},s.createElement("div",{className:G},!K&&s.createElement(E,{as:"label",htmlFor:f,className:J},P),o&&s.createElement("div",{className:`${e}--select-input--inline__wrapper`},s.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null},A),r),!o&&s.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null,onFocus:C,onBlur:C},A,b?F:u?s.createElement("div",{className:`${e}--select__inner-wrapper--decorator`},F):"",n&&s.createElement("hr",{className:`${e}--select__divider`}),n&&r?r:null),!o&&!n&&r?r:y))});S.displayName="Select";S.propTypes={children:t.node,className:t.string,decorator:t.node,defaultValue:t.any,disabled:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node,light:D(t.bool),noLabel:t.bool,onChange:t.func,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:D(t.node),warn:t.bool,warnText:t.node};export{S};
