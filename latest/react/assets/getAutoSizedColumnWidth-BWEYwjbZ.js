import{r as l,e as y,c as M,p as P,P as c}from"./iframe-BIFZhnVI.js";import{d as F,s as L}from"./useDatagrid-D5qrL6yy.js";import{C as B}from"./Checkbox-DDtP4ZQv.js";import{O as N}from"./index-B07VMW4b.js";import{O as D}from"./OverflowMenuItem-B0PP6aBA.js";import{w as _}from"./bucket-2-CqoFS1Sx.js";import{u as V}from"./useIsomorphicEffect-BtioHI2r.js";const $=n=>{const s=l.useRef(void 0),t=l.useRef(void 0),r=l.useRef(void 0),i=l.useRef(void 0),a=l.useRef(void 0),[e,o]=l.useState(),d=u=>{const{DatagridActions:f,DatagridBatchActions:w,totalColumnsWidth:T,DatagridPagination:b}=u,v=()=>{const m=s&&s.current&&s.current.parentElement;if(!m)return;const h=m.clientHeight,q=m.clientWidth,R=t&&t.current&&t.current.clientHeight,p=window.getComputedStyle(m),S=parseFloat(p.getPropertyValue("margin-bottom")),g=parseFloat(p.getPropertyValue("padding-bottom")),O=parseFloat(p.getPropertyValue("margin-top")),z=parseFloat(p.getPropertyValue("padding-top")),j=f||w?48:0,I=b?48:0,x=q<T?16:0,W=h-R-S-g-O-z-j-I-x;o(W)};Object.assign(u,{tableHeight:e||u.tableHeight,rootRef:s,headRef:t,innerListRef:r,handleResize:v,listRef:i,gridRef:a})};n.useInstance.push(d)},G=n=>{const s=t=>{const{rootRef:r,handleResize:i}=t,a=r&&r.current&&r.current.parentElement;l.useLayoutEffect(()=>{if(!a)return()=>{};if(i(),typeof ResizeObserver=="function"){let e=new ResizeObserver(()=>{i()});return e.observe(a),()=>{e.disconnect(a),e=null}}return console.error("Could not resize table, no support for ResizeObserver")},[i,a])};n.useInstanceBeforeDimensions.push(s)},re=n=>{$(n),G(n);const s=t=>{const{isFetching:r,tableHeight:i,innerListRef:a,fetchMoreData:e,tableId:o,loadMoreThreshold:d}=t;let u;typeof document<"u"&&(u=document.querySelector(`#${o}`));const f=i||u?.clientHeight,w=typeof d=="number"?d:200,T=()=>{},b=l.useCallback(F(e||T,3e3),[e]);Object.assign(t,{onScroll:({scrollDirection:m,scrollOffset:h})=>{a&&a.current&&!r&&m==="forward"&&h+f>=a.current.clientHeight-w&&e&&b()},withVirtualScroll:!0})};n.useInstance.push(s)},C=`${P.prefix}--datagrid`,E="pageRows",H="allRows",A=({tableId:n,isFetching:s,isAllRowsSelected:t,selectAllToggle:r,getToggleAllPageRowsSelectedProps:i,getToggleAllRowsSelectedProps:a,allPageRowsLabel:e="Select all on page",allRowsLabel:o="Select all",columns:d,withStickyColumn:u})=>{const{onSelectAllRows:f,labels:w}=r||{},[T,b]=l.useState(E);l.useEffect(()=>{f&&f(t&&T===H)},[t,T,f]);const[v,m]=l.useState();l.useLayoutEffect(()=>{m(window.innerWidth);function g(){m(window.innerWidth)}return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),w&&(e=w?.allPageRows||e,o=w.allRows||o);const h=T===E?i:a,{onChange:q,...R}=h(),p=s||R.disabled,S=d?.[0]?.sticky==="left"&&u;return y.createElement("th",{scope:"col",className:M(`${C}__select-all-toggle-on`,{[`${C}__select-all-sticky-left`]:S&&(v??0)>671})},y.createElement("span",null,y.createElement(B,{...R,name:`${n}-select-all-checkbox-name`,onClick:g=>{q?.(g)},disabled:p,id:`${n}-select-all-checkbox-id`,labelText:o,hideLabel:!0})),y.createElement(N,{renderIcon:g=>y.createElement(_,{size:16,...g}),size:"sm","aria-label":o,menuOptionsClass:`${C}__select-all-toggle-overflow`},y.createElement(D,{itemText:e,requireTitle:!0,disabled:p,onClick:()=>{b(E),a?.()?.onChange({target:{checked:!1}}),i().onChange({target:{checked:!0}})}}),y.createElement(D,{itemText:o,requireTitle:!0,disabled:p,onClick:()=>{b(H),a().onChange({target:{checked:!0}})}})))};A.propTypes={allPageRowsLabel:c.string,allRowsLabel:c.string,columns:c.arrayOf(c.object),getToggleAllPageRowsSelectedProps:c.func.isRequired,getToggleAllRowsSelectedProps:c.func.isRequired,isAllRowsSelected:c.bool.isRequired,isFetching:c.bool,selectAllToggle:c.object,tableId:c.string.isRequired,withStickyColumn:c.bool};A.__docgenInfo={description:"",methods:[],displayName:"SelectAllWithToggle",props:{withVirtualScroll:{required:!1,tsType:{name:"boolean"},description:""},DatagridPagination:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},isFetching:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},tableId:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},filterProps:{required:!1,tsType:{name:"FilterFlyoutProps"},description:""},state:{required:!0,tsType:{name:"DataGridTableState"},description:""},getFilterFlyoutProps:{required:!1,tsType:{name:"signature",type:"function",raw:"() => FilterFlyoutProps",signature:{arguments:[],return:{name:"FilterFlyoutProps"}}},description:""},DatagridActions:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},CustomizeColumnsTearsheet:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},fullHeightDatagrid:{required:!1,tsType:{name:"boolean"},description:""},variableRowHeight:{required:!1,tsType:{name:"boolean"},description:""},useDenseHeader:{required:!1,tsType:{name:"boolean"},description:""},withInlineEdit:{required:!1,tsType:{name:"boolean"},description:""},verticalAlign:{required:!1,tsType:{name:"string"},description:""},gridTitle:{required:!1,tsType:{name:"ReactNode"},description:""},gridDescription:{required:!1,tsType:{name:"ReactNode"},description:""},gridRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},description:""},DatagridBatchActions:{required:!1,tsType:{name:"signature",type:"function",raw:"(args) => ReactNode",signature:{arguments:[{name:"args"}],return:{name:"ReactNode"}}},description:""},batchActions:{required:!1,tsType:{name:"boolean"},description:""},row:{required:!0,tsType:{name:"DatagridRow"},description:""},rows:{required:!0,tsType:{name:"Array",elements:[{name:"DatagridRow",elements:[{name:"any"}],raw:"DatagridRow<any>"}],raw:"Array<DatagridRow<any>>"},description:""},rowActions:{required:!1,tsType:{name:"Array",elements:[{name:"RowAction"}],raw:"RowAction[]"},description:""},columns:{required:!1,tsType:{name:"Array",elements:[{name:"DatagridColumn"}],raw:"Array<DatagridColumn>"},description:"",type:{name:"arrayOf",value:{name:"object"}}},key:{required:!1,tsType:{name:"any"},description:""},rowSize:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:""},headers:{required:!1,tsType:{name:"Array",elements:[{name:"DataGridHeader",elements:[{name:"T"}],raw:"DataGridHeader<T>"}],raw:"Array<DataGridHeader<T>>"},description:""},headRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},description:""},HeaderRow:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  state?: object,
  ref?: MutableRefObject<HTMLDivElement>,
  group?: HeaderGroup<any>
) => ReactNode`,signature:{arguments:[{type:{name:"object"},name:"state"},{type:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},name:"ref"},{type:{name:"HeaderGroup",elements:[{name:"any"}],raw:"HeaderGroup<any>"},name:"group"}],return:{name:"ReactNode"}}},description:""},withStickyColumn:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},emptyStateTitle:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},emptyStateDescription:{required:!1,tsType:{name:"string"},description:""},emptyStateSize:{required:!1,tsType:{name:"union",raw:"'lg' | 'sm'",elements:[{name:"literal",value:"'lg'"},{name:"literal",value:"'sm'"}]},description:""},emptyStateType:{required:!1,tsType:{name:"string"},description:""},illustrationTheme:{required:!1,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:""},emptyStateAction:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  kind?: 'primary' | 'secondary' | 'tertiary';
  renderIcon?: CarbonIconType;
  onClick?: ButtonProps<React.ElementType>['onClick'];
  text?: string;
}`,signature:{properties:[{key:"kind",value:{name:"union",raw:"'primary' | 'secondary' | 'tertiary'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'tertiary'"}],required:!1}},{key:"renderIcon",value:{name:"CarbonIconType",required:!1}},{key:"onClick",value:{name:"ButtonProps['onClick']",raw:"ButtonProps<React.ElementType>['onClick']",required:!1}},{key:"text",value:{name:"string",required:!1}}]}},description:""},emptyStateLink:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  text?: string | ReactNode;
  href?: string;
}`,signature:{properties:[{key:"text",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!1}},{key:"href",value:{name:"string",required:!1}}]}},description:""},isTableSortable:{required:!1,tsType:{name:"boolean"},description:""},resizerAriaLabel:{required:!1,tsType:{name:"string"},description:""},onColResizeEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},withNestedRows:{required:!1,tsType:{name:"boolean"},description:""},withExpandedRows:{required:!1,tsType:{name:"boolean"},description:""},withMouseHover:{required:!1,tsType:{name:"boolean"},description:""},setMouseOverRowIndex:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg: any) => void",signature:{arguments:[{type:{name:"any"},name:"arg"}],return:{name:"void"}}},description:""},hideSelectAll:{required:!1,tsType:{name:"boolean"},description:""},radio:{required:!1,tsType:{name:"boolean"},description:""},onAllRowSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(rows: DatagridRow[], evt: any) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"DatagridRow"}],raw:"DatagridRow[]"},name:"rows"},{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},selectAllToggle:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  onSelectAllRows?: (args) => void;
  labels?: Labels;
}`,signature:{properties:[{key:"onSelectAllRows",value:{name:"signature",type:"function",raw:"(args) => void",signature:{arguments:[{name:"args"}],return:{name:"void"}},required:!1}},{key:"labels",value:{name:"Labels",required:!1}}]}},description:"",type:{name:"object"}},allPageRowsLabel:{required:!1,tsType:{name:"union",raw:"string | object",elements:[{name:"string"},{name:"object"}]},description:"",defaultValue:{value:"'Select all on page'",computed:!1},type:{name:"string"}},allRowsLabel:{required:!1,tsType:{name:"union",raw:"string | object",elements:[{name:"string"},{name:"object"}]},description:"",defaultValue:{value:"'Select all'",computed:!1},type:{name:"string"}},onSelectAllRows:{required:!1,tsType:{name:"signature",type:"function",raw:"(val?: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"val"}],return:{name:"void"}}},description:""},toolbarBatchActions:{required:!1,tsType:{name:"Array",elements:[{name:"ButtonProps",elements:[{name:"ReactElementType",raw:"React.ElementType"}],raw:"ButtonProps<React.ElementType>"}],raw:"ButtonProps<React.ElementType>[]"},description:""},setGlobalFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(filterValue: FilterValue) => void",signature:{arguments:[{type:{name:"FilterValue"},name:"filterValue"}],return:{name:"void"}}},description:""},batchActionMenuButtonLabel:{required:!1,tsType:{name:"string"},description:""},translateWithIdBatchActions:{required:!1,tsType:{name:"TableBatchActionsProps['translateWithId']",raw:"TableBatchActionsProps['translateWithId']"},description:""},toolbarBatchActionsDisplayMin:{required:!1,tsType:{name:"number"},description:""},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt?: any) => void",signature:{arguments:[{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},innerListRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},description:""},tableHeight:{required:!1,tsType:{name:"number"},description:""},virtualHeight:{required:!1,tsType:{name:"number"},description:""},listRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"any"}],raw:"MutableRefObject<any>"},description:""},handleResize:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onVirtualScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt?: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"evt"}],return:{name:"void"}}},description:""},fetchMoreData:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loadMoreThreshold:{required:!1,tsType:{name:"number"},description:""},expandedRowIds:{required:!1,tsType:{name:"object"},description:""},onRowClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(row, event) => void",signature:{arguments:[{name:"row"},{name:"event"}],return:{name:"void"}}},description:""},onSort:{required:!1,tsType:{name:"boolean"},description:""},customizeColumnsProps:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  onSaveColumnPrefs?: (args) => void;
  labels?: ColumnLabels;
  isTearsheetOpen?: boolean;
  setIsTearsheetOpen?: (args: boolean) => void;
}`,signature:{properties:[{key:"onSaveColumnPrefs",value:{name:"signature",type:"function",raw:"(args) => void",signature:{arguments:[{name:"args"}],return:{name:"void"}},required:!1}},{key:"labels",value:{name:"ColumnLabels",required:!1}},{key:"isTearsheetOpen",value:{name:"boolean",required:!1}},{key:"setIsTearsheetOpen",value:{name:"signature",type:"function",raw:"(args: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"args"}],return:{name:"void"}},required:!1}}]}},description:""},CustomizeColumnsButton:{required:!1,tsType:{name:"signature",type:"function",raw:"(args: any) => ReactNode",signature:{arguments:[{type:{name:"any"},name:"args"}],return:{name:"ReactNode"}}},description:""},column:{required:!1,tsType:{name:"DatagridColumn"},description:""},expandedContentHeight:{required:!1,tsType:{name:"number"},description:""},onRowExpand:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  row: DatagridRow,
  event: React.MouseEvent<HTMLElement>
) => void`,signature:{arguments:[{type:{name:"DatagridRow"},name:"row"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLElement>",elements:[{name:"HTMLElement"}]},name:"event"}],return:{name:"void"}}},description:""},ExpandedRowContentComponent:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},getAsyncSubRows:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: DatagridRow) => void",signature:{arguments:[{type:{name:"DatagridRow"},name:"row"}],return:{name:"void"}}},description:""},enableSpacerColumn:{required:!1,tsType:{name:"boolean"},description:""},getToggleAllPageRowsSelectedProps:{description:"",type:{name:"func"},required:!0},getToggleAllRowsSelectedProps:{description:"",type:{name:"func"},required:!0},isAllRowsSelected:{description:"",type:{name:"bool"},required:!0}},composes:["TableCommonProps","Partial","Omit","UseRowSelectInstanceProps"]};const k=`${P.prefix}--datagrid__select-all`,se=n=>{J(n),X(n)},J=n=>{const s=t=>{const{headers:r,DatagridPagination:i}=t,a=r?.map(e=>(e.id===L&&i&&Object.assign(e,{Header:U}),e));Object.assign(t,{headers:a})};n.useInstance.push(s)},X=n=>{const[s,t]=l.useState(0);V(()=>{t(window.innerWidth);function r(){t(window.innerWidth)}return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),n.getCellProps.push((r,i)=>{const{column:a}=i.cell,{DatagridPagination:e,columns:o,withStickyColumn:d}=i.instance,u=o[0]?.sticky==="left"&&d;return a.id===L&&e?[r,{className:M(`${k}-toggle-on`,{[`${k}-sticky-left`]:u&&s>671})}]:[r]})},U=n=>{const{tableId:s,isFetching:t,selectAllToggle:r,getToggleAllPageRowsSelectedProps:i,getToggleAllRowsSelectedProps:a,isAllRowsSelected:e,withStickyColumn:o,columns:d}=n,u={tableId:s,isFetching:t,selectAllToggle:r,getToggleAllPageRowsSelectedProps:i,getToggleAllRowsSelectedProps:a,isAllRowsSelected:e,withStickyColumn:o,columns:d};return y.createElement(A,{...u})},ie=(n,s,t)=>{const e=Math.max(...n.map(o=>(`${o[s]}`||"").length),t.length);return e<=3?58:Math.min(400,e*10+16)};export{se as a,ie as g,re as u};
