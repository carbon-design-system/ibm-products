import{r as d,c as h,p as $}from"./iframe-BbTYfv9-.js";import{d as x}from"./useDatagrid-CAIaMFvY.js";import{u as b}from"./useIsomorphicEffect-omIe2Oju.js";const u=`${$.prefix}--datagrid`,L=`${u}__right-sticky-column`,g=`${u}__left-sticky-column`,p=`${L}-offset-scroll`,E=e=>{const s=d.useRef(void 0),r=d.useRef(void 0),[f,a]=d.useState(void 0);d.useEffect(()=>{a(window?.innerWidth)},[]),b(()=>{function i(){a(window.innerWidth)}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e.getCellProps.push(y.bind(null,"cell",null,f)),e.getHeaderProps.push(y.bind(null,"header",r,f)),e.getTableBodyProps.push(k.bind(null,s)),e.getHeaderGroupProps.push(i=>[i,{style:{...i.style,minWidth:"unset"}}]);const m=i=>{d.useEffect(()=>{const n=s.current,t=r?.current;_(n)&&t&&t?.classList?.add(p);const c=x(S.bind(null,n,t),250);return typeof window<"u"&&window.addEventListener("resize",c),()=>{typeof window<"u"&&window.removeEventListener("resize",c)}},[i.rows,i.isFetching]),d.useEffect(()=>{const n=s.current,t=r.current,c=o=>{w(o.target,t)};return w(n,t),n&&n?.addEventListener("scroll",c),()=>{n&&n.removeEventListener("scroll",c)}},[i.rows,i.isFetching])},v=i=>{const n=s.current,t=r.current;d.useEffect(()=>{S(n,t)},[i.rows,t,n])};e.useInstance.push(m),e.useInstance.push(v),e.useInstance.push(i=>{Object.assign(i,{withStickyColumn:!0})}),e.useInstance.push(i=>{const n=i.visibleColumns;let t=n.findIndex(l=>l.id==="spacer"),c=n.findIndex(l=>l.sticky==="right");if(t>=0&&c>=0&&c<t){const l=n[t];n[t]=n[c],n[c]=l}const o=i.headers;if(t=o.findIndex(l=>l.id==="spacer"),c=o.findIndex(l=>l.sticky==="right"),t>=0&&c>=0&&c<t){const l=o[t];o[t]=o[c],o[t].canResize=!1,o[t].disableResizing=!0,delete o[t].getResizerProps,o[c]=l}})},k=(e,s)=>[s,{ref:e}],y=(e,s,r,f,a)=>{const m=a.column||a.cell?.column;return m?.sticky==="right"?[f,{className:h({[`${L}-${e}`]:!0,[`${u}__resizableColumn`]:!1,[`${u}__sortableColumn`]:!1}),...s&&{ref:s}}]:m?.sticky==="left"?[f,{className:h({[`${g}-${e}`]:r&&r>671,[`${g}-${e}--with-extra-select-column`]:a?.instance?.withSelectRows&&r&&r>671}),...s&&{ref:s}}]:[f]},S=(e,s)=>{s&&(_(e)?s.classList.add(p):s.classList.remove(p),w(e,s))},w=(e,s)=>{e&&s&&(e.scrollLeft+e.clientWidth===e.scrollWidth?(s.classList.add(`${u}__sticky-noShadow`),e.classList.add(`${u}__sticky-column-noShadow`)):(s.classList.remove(`${u}__sticky-noShadow`),e.classList.remove(`${u}__sticky-column-noShadow`)))},_=e=>{if(!e)return!1;const{scrollHeight:s,clientHeight:r}=e;return s>r};export{E as u};
//# sourceMappingURL=useStickyColumn-DgcB2PcX.js.map
