import{b as O,c as w,n as M,_,P as t,d as Z}from"./index-Cd8snwnz.js";import{r as S,e as l}from"./index-BOZkNhcz.js";import{u as P}from"./index-CN8ymWyE.js";import{f as j}from"./settings-DqneCnpo.js";import{w as F}from"./wrapComponent-BmELSzk6.js";import{d as U,f as G}from"./bucket-0-BxsXdw_5.js";const y={NONE:"NONE",DESC:"DESC",ASC:"ASC"},J=S.createContext({titleId:void 0,descriptionId:void 0}),K=(s,e)=>{var m,$,h,d;if(s.children.length>0)return!1;const n=window.getComputedStyle(s);e.font=n.font?n.font:`${n.fontSize}" "${n.fontFamily}`;let i=(e==null?void 0:e.measureText(s.textContent??"")).width??0;const f=(m=n.letterSpacing)==null?void 0:m.split("px");f&&f.length&&!isNaN(Number(f[0]))&&(i+=Number(f[0])*((($=s.textContent)==null?void 0:$.length)??0));const b=(h=n.paddingLeft)==null?void 0:h.split("px");b&&b.length&&!isNaN(Number(b[0]))&&(i+=Number(b[0]));const p=(d=n.paddingLeft)==null?void 0:d.split("px");return p&&p.length&&!isNaN(Number(p[0]))&&(i+=Number(p[0])),i>s.getBoundingClientRect().width},Q=s=>{var k;let{className:e,children:n,useZebraStyles:u,size:i="lg",isSortable:f=!1,useStaticWidth:b,stickyHeader:p,overflowMenuOnHover:m=!0,experimentalAutoAlign:$=!1,tabIndex:h,...d}=s;const{titleId:T,descriptionId:x}=S.useContext(J),a=O(),[H,r]=S.useState(!1),o=S.useRef(null),v=w(`${a}--data-table`,e,{[`${a}--data-table--${i}`]:i,[`${a}--data-table--sort`]:f,[`${a}--data-table--zebra`]:u,[`${a}--data-table--static`]:b,[`${a}--data-table--sticky-header`]:p,[`${a}--data-table--visible-overflow-menu`]:!m}),E=S.useCallback(function(){var c,g;(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?(c=o.current)==null||c.classList.add(`${a}--data-table--top-aligned-body`):(g=o.current)==null||g.classList.remove(`${a}--data-table--top-aligned-body`)},[a]),N=S.useCallback(function(){var c,g;(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?(c=o.current)==null||c.classList.add(`${a}--data-table--top-aligned-header`):(g=o.current)==null||g.classList.remove(`${a}--data-table--top-aligned-header`)},[a]),A=S.useCallback(()=>{if($){const c=document.createElement("canvas").getContext("2d");if(o.current&&c){const g=Array.from(o.current.querySelectorAll("td")).some(R=>K(R,c)),D=Array.from(o.current.querySelectorAll("th")).some(R=>{const B=R.querySelector(`.${a}--table-header-label`);return B&&K(B,c)});E(g),N(D)}}else E(!1),N(!1)},[$,E,N,a]),z=j(A,100);P("resize",z);const I=S.useCallback(()=>{var g,D;const C=(g=o==null?void 0:o.current)==null?void 0:g.parentNode,c=(D=o==null?void 0:o.current)==null?void 0:D.firstChild;(c==null?void 0:c.scrollWidth)>(C==null?void 0:C.clientWidth)?r(!0):r(!1)},[]),W=j(I,100);P("resize",W),M(()=>{I()},[I]),typeof document<"u"&&((k=document==null?void 0:document.fonts)!=null&&k.status)&&document.fonts.status!=="loaded"&&document.fonts.ready.then(()=>{A()}),M(()=>{A()},[A,i]);const L=l.createElement("div",{className:`${a}--data-table-content`,tabIndex:h??(H?0:void 0)},l.createElement("table",_({"aria-labelledby":T,"aria-describedby":x},d,{className:v,ref:o}),n));return p?l.createElement("section",{className:`${a}--data-table_inner-container`},L):L};Q.propTypes={children:t.node,className:t.string,experimentalAutoAlign:t.bool,isSortable:t.bool,overflowMenuOnHover:t.bool,size:t.oneOf(["xs","sm","md","lg","xl"]),stickyHeader:t.bool,useStaticWidth:t.bool,useZebraStyles:t.bool,tabIndex:t.number};const X=s=>{let{children:e,className:n,...u}=s;return l.createElement("tbody",_({"aria-live":"polite",className:n},u),e)};X.propTypes={"aria-live":t.oneOf(["polite","assertive","off"]),children:t.node,className:t.string};const Y=l.forwardRef((s,e)=>{let{children:n,className:u,hasAILabelHeader:i,colSpan:f,...b}=s;const p=O(),m=w(u,{[`${p}--table-cell--column-slug`]:i});return l.createElement("td",_({className:m||void 0,ref:e,colSpan:f},b),n)});Y.displayName="TableCell";const de=F({name:"TableHead",type:"thead"}),ee="col",V={buttonDescription:"carbon.table.header.icon.description"},te=(s,e)=>e&&s===V.buttonDescription?e.isSortHeader&&y?e.sortDirection===y.NONE?`Click to sort rows by ${e.header} header in ascending order`:e.sortDirection===y.ASC?`Click to sort rows by ${e.header} header in descending order`:`Click to unsort rows by ${e.header} header`:`Click to sort rows by ${e.header} header in ascending order`:"",ae={[y.NONE]:"none",[y.ASC]:"ascending",[y.DESC]:"descending"},q=l.forwardRef(function(e,n){var C;let{className:u,children:i,colSpan:f,decorator:b,isSortable:p=!1,isSortHeader:m,onClick:$,scope:h=ee,sortDirection:d,translateWithId:T=te,slug:x,id:a,...H}=e;const r=O(),o=Z("table-sort"),v=S.useRef(null);let E,N=l.isValidElement(x??b)?x??b:null;N&&((C=N.type)==null?void 0:C.displayName)==="AILabel"&&(E=!0,N=l.cloneElement(N,{size:"mini",ref:v}));const A=w({[`${r}--table-header-label`]:!0,[`${r}--table-header-label--slug ${r}--table-header-label--ai-label`]:E,[`${r}--table-header-label--decorator`]:b});if(!p)return l.createElement("th",_({},H,{id:a,className:u,scope:h,colSpan:f,ref:n}),i?l.createElement("div",{className:A},i,l.createElement("div",{className:`${r}--table-header-label--decorator-inner`},N)):null);const z=w(u,{[`${r}--table-sort`]:!0,[`${r}--table-sort--active`]:m&&d!==y.NONE,[`${r}--table-sort--descending`]:m&&d===y.DESC}),I=!m||!d?"none":ae[d],W=T&&T("carbon.table.header.icon.description",{header:i,sortDirection:d,isSortHeader:m,sortStates:y}),L=w(u,`${r}--table-sort__header`,{[`${r}--table-sort__header--ai-label`]:E,[`${r}--table-sort__header--decorator`]:b}),k=c=>{if(!(E&&v.current&&v.current.contains(c.target))&&$)return $(c)};return l.createElement("th",{id:a,"aria-sort":I,className:L,colSpan:f,ref:n,scope:h},l.createElement("div",{className:`${r}--table-sort__description`,id:o},W),l.createElement("button",_({type:"button","aria-describedby":o,className:z,onClick:k},H),l.createElement("span",{className:`${r}--table-sort__flex`},l.createElement("div",{className:`${r}--table-header-label`},i),l.createElement(U,{size:20,className:`${r}--table-sort__icon`}),l.createElement(G,{size:20,className:`${r}--table-sort__icon-unsorted`}),l.createElement("div",{className:`${r}--table-header-label--decorator-inner`},N))))});q.propTypes={children:t.node,className:t.string,colSpan:t.number,id:t.string,isSortHeader:t.bool,isSortable:t.bool,onClick:t.func,scope:t.string,sortDirection:t.oneOf(Object.values(y)),translateWithId:t.func};q.translationKeys=Object.values(V);q.displayName="TableHeader";const se=s=>{const e=O();let n;s!=null&&s.children&&l.Children.toArray(s.children).map(d=>{var T,x,a;(((T=d.type)==null?void 0:T.displayName)==="TableSlugRow"||((x=d.type)==null?void 0:x.displayName)==="TableDecoratorRow")&&(d.props.slug||((a=d.props.decorator)==null?void 0:a.type.displayName)==="AILabel")&&(n=!0)});const u=w(s.className,{[`${e}--data-table--selected`]:s.isSelected,[`${e}--data-table--slug-row ${e}--data-table--ai-label-row`]:n}),{ariaLabel:i,"aria-label":f,"aria-controls":b,onExpand:p,isExpanded:m,isSelected:$,...h}=s;return u&&(h.className=u),l.createElement("tr",h)};se.propTypes={className:t.string,isSelected:t.bool};export{Q as T,de as a,se as b,q as c,X as d,Y as e,J as f,y as s};
