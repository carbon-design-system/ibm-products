import{b as P,n as ne,d as ae,c as v,_ as te,C as se,j as b,x as re,S as oe,P as e,i as ce,E as le}from"./index--clQM3eT.js";import{e as s,r as u}from"./index-BOZkNhcz.js";import{c as N}from"./events-OVwOsPzJ.js";import{F as ie}from"./FormContext-qEw5DNxz.js";import{S as ue}from"./bucket-14-CgdCrYMN.js";function de(i){const r=i.current||i;r&&r.focus&&document.activeElement!==r&&r.focus()}var w;const D=s.forwardRef(function(r,d){let{autoComplete:R="off",className:O,closeButtonLabelText:x="Clear search input",defaultValue:C,disabled:m,isExpanded:c=!0,id:V,labelText:j,light:B,onChange:E=()=>{},onClear:F=()=>{},onKeyDown:_,onExpand:n,placeholder:y="Search",renderIcon:k,role:q="searchbox",size:h="md",type:z="text",value:o,...H}=r;const L=!!(o||C),a=P(),{isFluid:M}=u.useContext(ie),l=u.useRef(null),A=ne([d,l]),$=u.useRef(null),G=ae("search-input"),f=V||G,T=`${f}-search`,[J,g]=u.useState(L||!1),[Q,U]=u.useState(o),W=v({[`${a}--search`]:!0,[`${a}--search--sm`]:h==="sm",[`${a}--search--md`]:h==="md",[`${a}--search--lg`]:h==="lg",[`${a}--search--light`]:B,[`${a}--search--disabled`]:m,[`${a}--search--fluid`]:M},O),X=v({[`${a}--search-close`]:!0,[`${a}--search-close--hidden`]:!J||!c});o!==Q&&(g(!!o),U(o));function S(){!o&&l.current&&(l.current.value="");const p={target:Object.assign({},l.current,{value:""}),type:"change"};E(p),F(),g(!1),de(l)}function Y(t){g(t.target.value!=="")}function Z(t){var p,I;b(t,le)&&(t.stopPropagation(),(p=l.current)!=null&&p.value?S():n&&c&&((I=$.current)==null||I.focus()))}function ee(t){(b(t,re)||b(t,oe))&&(t.stopPropagation(),n&&n(t))}return s.createElement("div",{role:"search","aria-label":y,className:W},s.createElement("div",{"aria-label":n?"button":void 0,"aria-labelledby":n?T:void 0,role:n?"button":void 0,className:`${a}--search-magnifier`,onClick:n,onKeyDown:ee,tabIndex:n&&!c?0:-1,ref:$,"aria-expanded":n&&c?!0:n&&!c?!1:void 0,"aria-controls":n?f:void 0},s.createElement(K,{icon:k})),s.createElement("label",{id:T,htmlFor:f,className:`${a}--label`},j),s.createElement("input",te({autoComplete:R,className:`${a}--search-input`,defaultValue:C,disabled:m,role:q,ref:A,id:f,onChange:N([E,Y]),onKeyDown:N([_,Z]),placeholder:y,type:z,value:o,tabIndex:n&&!c?-1:void 0},H)),s.createElement("button",{"aria-label":x,className:X,disabled:m,onClick:S,title:x,type:"button"},w||(w=s.createElement(se,null))))});D.displayName="Search";D.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:ce(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function K(i){let{icon:r}=i;const d=P();return r?s.createElement(r,{className:`${d}--search-magnifier-icon`}):s.createElement(ue,{className:`${d}--search-magnifier-icon`})}K.propTypes={icon:e.oneOfType([e.func,e.object])};export{D as S};
