import{e as r,u as I,r as l,m as ee,g as te,c as T,_ as ae,n as se,o as g,E as re,q as ne,t as d,v as N,P as e,l as ce,w as oe}from"./iframe-BlQ-LkYW.js";import{F as le}from"./FormContext-DkhQXZ0G.js";import{S as ie}from"./bucket-15-CM_J5Vvb.js";var w;const D=r.forwardRef(function({autoComplete:i="off",className:O,closeButtonLabelText:b="Clear search input",defaultValue:y,disabled:m,isExpanded:o=!0,id:E,labelText:F,light:K,onChange:C=()=>{},onClear:x=()=>{},onKeyDown:j,onExpand:a,placeholder:$="Search",renderIcon:q,role:V="searchbox",size:h="md",type:_="text",value:c,...k},B){const H=!!(c||y),t=I(),{isFluid:M}=l.useContext(le),n=l.useRef(null),A=ee([B,n]),v=l.useRef(null),G=te("search-input"),u=E||G,S=`${u}-search`,[J,p]=l.useState(H||!1),[L,Q]=l.useState(c),U=T({[`${t}--search`]:!0,[`${t}--search--sm`]:h==="sm",[`${t}--search--md`]:h==="md",[`${t}--search--lg`]:h==="lg",[`${t}--search--light`]:K,[`${t}--search--disabled`]:m,[`${t}--search--fluid`]:M},O),W=T({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!J||!o});c!==L&&(p(!!c),Q(c));function P(){if(!c&&n.current&&(n.current.value=""),n.current){const s=Object.assign({},n.current,{value:""}),z={bubbles:!1,cancelable:!1,currentTarget:n.current,defaultPrevented:!1,eventPhase:0,isDefaultPrevented:()=>!1,isPropagationStopped:()=>!1,isTrusted:!1,nativeEvent:new Event("change"),persist:d,preventDefault:d,stopPropagation:d,target:s,timeStamp:0,type:"change"};C(z)}x(),p(!1),n.current?.focus()}function X(s){p(s.target.value!=="")}function Y(s){g(s,oe)&&(s.stopPropagation(),n.current?.value?P():a&&o&&v.current?.focus())}function Z(s){(g(s,re)||g(s,ne))&&(s.stopPropagation(),a&&a(s))}return r.createElement("div",{role:"search","aria-label":$,className:U},r.createElement("div",{"aria-labelledby":a?S:void 0,role:a?"button":void 0,className:`${t}--search-magnifier`,onClick:a,onKeyDown:Z,tabIndex:a&&!o?0:-1,ref:v,"aria-expanded":a&&o?!0:a&&!o?!1:void 0,"aria-controls":a?u:void 0},r.createElement(R,{icon:q})),r.createElement("label",{id:S,htmlFor:u,className:`${t}--label`},F),r.createElement("input",ae({autoComplete:i,className:`${t}--search-input`,defaultValue:y,disabled:m,role:V,ref:A,id:u,onChange:N([C,X]),onKeyDown:N([j,Y]),placeholder:$,type:_,value:c,tabIndex:a&&!o?-1:void 0},k)),r.createElement("button",{"aria-label":b,className:W,disabled:m,onClick:P,title:b,type:"button"},w||(w=r.createElement(se,null))))});D.displayName="Search";D.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:ce(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function R({icon:f}){const i=I();return f?r.createElement(f,{className:`${i}--search-magnifier-icon`}):r.createElement(ie,{className:`${i}--search-magnifier-icon`})}R.propTypes={icon:e.oneOfType([e.func,e.object])};export{D as S};
