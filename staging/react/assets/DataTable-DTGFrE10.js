import{u as V,c as D,e as B,_ as K,aI as ie,P as t,i as Ne,r as O,eO as He,q as L}from"./iframe-DoONWhft.js";import{i as q}from"./MultiSelect-B6eEuFZb.js";import{s as C,g as j,h as W,e as U,T as Oe,d as $e,a as ve,c as Pe,b as De}from"./TableRow-BBB8tZBX.js";import{A as ce}from"./index-Bnfmk4E7.js";import{c as _e,b as Ke,a as Le,T as Ve,d as ke,e as qe}from"./TableToolbar-DZj6CrC6.js";import{r as M}from"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import{i as z}from"./utils-eIueeELw.js";import{T as Me}from"./TableSelectRow-D1Woscq_.js";import{O as ze}from"./OverflowMenuItem-yfxGa1i6.js";import{T as Fe,a as je}from"./TableToolbarSearch-0rg_LMTI.js";import{O as We}from"./index-BCCfYvph.js";import{ai as Ge}from"./bucket-15-Bej-6NQ9.js";const _=(a,s)=>`${a}:${s}`,G=(a,s,i="en")=>{if(a===null&&(a=""),s===null&&(s=""),typeof a=="number"&&typeof s=="number")return a-s;if(typeof a=="string"&&typeof s=="string")return F(a,s,i);const l=a?.props?.children,c=s?.props?.children;return typeof l=="string"&&typeof c=="string"?F(l,c,i):F(String(a),String(s),i)},F=(a,s,i="en")=>{const l=!isNaN(parseFloat(a))&&!isNaN(parseFloat(s));return a.localeCompare(s,i,{numeric:l})},Ue=({rowIds:a,cellsById:s,sortDirection:i,key:l,locale:c="en",sortRow:r=Ze})=>a.slice().sort((p,d)=>{const T=s[_(p,l)],y=s[_(d,l)];return r(T?.value,y?.value,{key:l,sortDirection:i,sortStates:C,locale:c,compare:G,rowIds:[p,d]})}),Ze=(a,s,{sortDirection:i,sortStates:l,locale:c})=>i===l.ASC?G(a,s,c):G(s,a,c),Je=C.NONE,Qe=(a,s,i)=>{if(a===s)switch(i){case C.NONE:return C.ASC;case C.ASC:return C.DESC;case C.DESC:return C.NONE}return C.ASC},ne=(a,s,{key:i})=>{const{sortDirection:l,sortHeaderKey:c}=s,r=Qe(i,c??"",l);return de(a,s,i,r)},de=({locale:a,sortRow:s},{rowIds:i,cellsById:l,initialRowOrder:c},r,p)=>{const d=p!==C.NONE?Ue({rowIds:i,cellsById:l,sortDirection:p,key:r,locale:a,sortRow:s}):c;return{sortHeaderKey:r,sortDirection:p,rowIds:d}},Xe=(a,s,i={})=>{const{rowsById:l}=i,c=new Array(a.length),r={},p={};return a.forEach((d,T)=>{c[T]=d.id;const{id:y,isSelected:H=!1,isExpanded:$=!1,disabled:h=!1}=d;r[y]={id:y,isSelected:H,isExpanded:$,disabled:h,cells:new Array(s.length)},l&&l[d.id]!==void 0&&(r[d.id].isSelected=l[d.id].isSelected,r[d.id].isExpanded=l[d.id].isExpanded),s.forEach(({key:R,slug:N,decorator:v},u)=>{const I=_(d.id,R);p[I]={id:I,value:d[R],isEditable:!1,isEditing:!1,isValid:!0,errors:null,hasAILabelHeader:!!(N||v?.type===ce),info:{header:R}},r[d.id].cells[u]=I})}),{rowIds:c,rowsById:r,cellsById:p}},le=(a,s)=>{const{rowIds:i,rowsById:l,cellsById:c}=Xe(a.rows,a.headers,s),r={rowIds:i,rowsById:l,cellsById:c,sortDirection:s.sortDirection||Je,sortHeaderKey:s.sortHeaderKey||null,initialRowOrder:i.slice(),filterInputValue:s.filterInputValue||null,shouldShowBatchActions:s.shouldShowBatchActions||!1,isExpandedAll:!1};if(s.sortDirection&&s.sortHeaderKey){const{rowIds:p}=de(a,r,s.sortHeaderKey,s.sortDirection);r.rowIds=p}return r.isExpandedAll=r.rowIds.every(p=>r.rowsById[p].isExpanded===!0),r},re=(a,s,i)=>a.map(l=>({...s[l],cells:s[l].cells.map(c=>i[c])})),Ye=({rowIds:a,headers:s,cellsById:i,inputValue:l,getCellId:c})=>{const r=l.trim().toLowerCase();return r?a.filter(p=>s.some(({key:d})=>{const T=c(p,d),y=i[T];return typeof y.value=="boolean"?!1:String(y.value).toLowerCase().includes(r)})):a},ue=({["aria-controls"]:a,["aria-label"]:s,ariaLabel:i,className:l,enableExpando:c,enableToggle:r,id:p="expand",isExpanded:d,onExpand:T,expandIconDescription:y,children:H,...$})=>{const h=V(),R=D(`${h}--table-expand`,l),N=d?"collapsed":void 0;return B.createElement("th",K({scope:"col",className:R,"data-previous-value":N,id:p},$),c||r?B.createElement("button",{type:"button",className:`${h}--table-expand__button`,onClick:T,title:y,"aria-label":i||s,"aria-expanded":d,"aria-controls":a},B.createElement(ie,{className:`${h}--table-expand__svg`,"aria-label":y})):null,H)};ue.propTypes={"aria-controls":t.string,"aria-label":t.string,ariaLabel:t.string,children:t.node,className:t.string,enableExpando:Ne(t.bool),enableToggle:t.bool,expandIconDescription:t.string,id:t.string,isExpanded:M("enableToggle",t.bool),onExpand:t.oneOfType([M("enableExpando",t.func),M("enableToggle",t.func)])};const Z=B.forwardRef(({["aria-controls"]:a,["aria-label"]:s,ariaLabel:i,className:l,children:c,isExpanded:r,onExpand:p,expandIconDescription:d,isSelected:T,expandHeader:y="expand",...H},$)=>{const h=V();let R;const N=O.Children.toArray(c).map(A=>{if(z(A,j))return A.props.slug&&(R=!0),A;if(z(A,W))return z(A.props.decorator,ce)&&(R=!0),A}),v=O.Children.toArray(c).map(A=>{if(O.isValidElement(A)&&A.type!==j&&A.type!==W)return A}),u=D({[`${h}--parent-row`]:!0,[`${h}--expandable-row`]:r,[`${h}--data-table--selected`]:T,[`${h}--data-table--slug-row ${h}--data-table--ai-label-row`]:R},l),I=r?"collapsed":void 0;return B.createElement("tr",K({},H,{ref:$,className:u,"data-parent-row":!0}),N,B.createElement(U,{className:`${h}--table-expand`,"data-previous-value":I,headers:y},B.createElement("button",{type:"button",className:`${h}--table-expand__button`,onClick:p,title:d,"aria-label":i||s,"aria-expanded":r,"aria-controls":a},B.createElement(ie,{className:`${h}--table-expand__svg`,"aria-label":d}))),v)});Z.propTypes={"aria-controls":t.string,"aria-label":t.string,ariaLabel:t.string,children:t.node,className:t.string,expandHeader:t.string,expandIconDescription:t.string,isExpanded:t.bool,isSelected:t.bool,onExpand:t.func.isRequired};Z.displayName="TableExpandRow";const pe=({className:a,children:s,colSpan:i,...l})=>{const c=O.useRef(null),r=V(),p=D(`${r}--expandable-row`,a),d=T=>{if(c&&c.current&&c.current.previousElementSibling){const y=c.current.previousElementSibling;T==="enter"?y.classList.add(`${r}--expandable-row--hover`):y.classList.remove(`${r}--expandable-row--hover`)}};return B.createElement("tr",K({ref:c,onMouseEnter:()=>d("enter"),onMouseLeave:()=>d("leave")},l,{className:p,"data-child-row":!0}),B.createElement(U,{colSpan:i},B.createElement("div",{className:`${r}--child-row-inner-container`},s)))};pe.propTypes={children:t.node,className:t.string,colSpan:t.number.isRequired};const et=O.forwardRef,J=et((a,s)=>{const{children:i,...l}=a;return B.createElement(ze,K({ref:s,itemText:i},l))});J.displayName="TableToolbarAction";J.propTypes={children:t.node,className:t.string,onClick:t.func.isRequired};const tt="Settings",be=({className:a,renderIcon:s=Ge,iconDescription:i=tt,children:l,menuOptionsClass:c,...r})=>{const p=V(),d=D(a,`${p}--toolbar-action ${p}--overflow-menu`),T=D(c,`${p}--toolbar-action__menu`);return B.createElement(We,K({renderIcon:s,className:d,title:i,iconDescription:i,menuOptionsClass:T,flipped:!0},r),l)};be.propTypes={children:t.node.isRequired,className:t.string,iconDescription:t.string,menuOptionsClass:t.string,renderIcon:t.oneOfType([t.func,t.object])};const st=He(),x={expandRow:"carbon.table.row.expand",collapseRow:"carbon.table.row.collapse",expandAll:"carbon.table.all.expand",collapseAll:"carbon.table.all.collapse",selectAll:"carbon.table.all.select",unselectAll:"carbon.table.all.unselect",selectRow:"carbon.table.row.select",unselectRow:"carbon.table.row.unselect"},ot={[x.expandAll]:"Expand all rows",[x.collapseAll]:"Collapse all rows",[x.expandRow]:"Expand current row",[x.collapseRow]:"Collapse current row",[x.selectAll]:"Select all rows",[x.unselectAll]:"Unselect all rows",[x.selectRow]:"Select row",[x.unselectRow]:"Unselect row"},at=a=>ot[a],f=a=>{const{children:s,filterRows:i=Ye,headers:l,render:c,translateWithId:r=at,size:p,isSortable:d,useZebraStyles:T,useStaticWidth:y,stickyHeader:H,overflowMenuOnHover:$,experimentalAutoAlign:h,radio:R,rows:N}=a,v=O.useMemo(()=>st(),[]),[u,I]=O.useState(()=>({...le(a,{}),isExpandedAll:!1}));O.useEffect(()=>{const e=N.map(w=>w.id),o=l.map(w=>w.key),n=!q(e,u.rowIds),b=Object.keys(u.cellsById).reduce((w,S)=>{const P=S.split(":")[1];return P&&!w.includes(P)&&w.push(P),w},[]),m=!q(o,b),E=u.rowIds.map(w=>{const S=u.rowsById[w];return{id:S.id,disabled:S.disabled,isExpanded:S.isExpanded,isSelected:S.isSelected}}),g=!q(N,E);(n||m||g)&&I(w=>le(a,w))},[l,N]);const A=({header:e,onClick:o,isSortable:n=d,...b})=>{const{sortDirection:m,sortHeaderKey:E}=u;return{...b,key:e.key,sortDirection:m,isSortable:n,isSortHeader:E===e.key,slug:e.slug,decorator:e.decorator,onClick:g=>{const w=ne(a,u,{key:e.key});I(S=>({...S,...w})),o&&fe(o,{sortHeaderKey:e.key,sortDirection:w.sortDirection})(g)}}},we=({onClick:e,onExpand:o,...n}={})=>{const{isExpandedAll:b,rowIds:m,rowsById:E}=u,g=b||m.every(S=>E[S].isExpanded),w=g?x.collapseAll:x.expandAll;return{...n,"aria-label":r(w),"aria-controls":m.map(S=>`expanded-row-${S}`).join(" "),isExpanded:g,onExpand:L([oe,o,e&&me(e,{isExpanded:g})])}},fe=(e,o)=>n=>e(n,o),me=(e,o)=>n=>e(n,o),ye=({row:e,onClick:o,...n})=>{const b=e.isExpanded?x.collapseRow:x.expandRow;return{...n,key:e.id,onClick:o,onExpand:L([se(e.id),o]),isExpanded:e.isExpanded,"aria-label":r(b),"aria-controls":`expanded-row-${e.id}`,isSelected:e.isSelected,disabled:e.disabled}},ge=({row:e,...o})=>({...o,id:`expanded-row-${e.id}`}),xe=({onClick:e,row:o,...n}={})=>{if(o){const S=o.isSelected?x.unselectRow:x.selectRow;return{...n,checked:o.isSelected,onSelect:L([te(o.id),e]),id:`${X()}__select-row-${o.id}`,name:`select-row-${v}`,"aria-label":r(S),disabled:o.disabled,radio:R}}const b=u.rowIds.length,m=k().length,E=b>0&&m===b,g=b>0&&m>0&&m!==b,w=E||g?x.unselectAll:x.selectAll;return{...n,"aria-label":r(w),checked:E,id:`${X()}__select-all`,indeterminate:g,name:`select-all-${v}`,onSelect:L([ee,e])}},he=e=>({...e,size:p==="xs"||p==="sm"?"sm":void 0}),Ie=e=>{const{shouldShowBatchActions:o}=u,n=k().length;return{onSelectAll:void 0,totalCount:u.rowIds.length||0,...e,shouldShowBatchActions:o&&n>0,totalSelected:n,onCancel:Re}},Se=()=>({useZebraStyles:T,size:p??"lg",isSortable:d,useStaticWidth:y,stickyHeader:H,overflowMenuOnHover:$??!1,experimentalAutoAlign:h}),Te=()=>({stickyHeader:H,useStaticWidth:y}),Ee=({cell:{hasAILabelHeader:e,hasDecoratorHeader:o},...n})=>({...n,hasAILabelHeader:e,hasDecoratorHeader:o}),k=()=>u.rowIds.filter(e=>{const o=u.rowsById[e];return o.isSelected&&!o.disabled}),Q=()=>{const e=typeof u.filterInputValue=="string"?i({rowIds:u.rowIds,headers:l,cellsById:u.cellsById,inputValue:u.filterInputValue,getCellId:_}):u.rowIds;return e.length==0?[]:e},X=()=>`data-table-${v}`,Y=(e,o,n)=>{const{rowIds:b}=e,m=b.length!=n.length;return{rowsById:b.reduce((E,g)=>{const w={...e.rowsById[g]};return!w.disabled&&(!m||n.includes(g))&&(w.isSelected=o),E[g]=w,E},{})}},Re=()=>{I(e=>({...e,shouldShowBatchActions:!1,...Y(e,!1,Q())}))},ee=()=>{I(e=>{const o=Q(),{rowsById:n}=e,b=!(Object.values(n).filter(m=>m.isSelected&&!m.disabled).length>0);return{...e,shouldShowBatchActions:b,...Y(e,b,o)}})},te=e=>()=>{I(o=>{const n=o.rowsById[e];if(R){const E=Object.entries(o.rowsById).reduce((g,w)=>{const[S,P]=w;return P.isSelected=!1,g[S]=P,g},{});return{...o,shouldShowBatchActions:!1,rowsById:{...E,[e]:{...n,isSelected:!n.isSelected}}}}const b=o.rowIds.filter(E=>o.rowsById[E].isSelected).length,m=n.isSelected?b-1:b+1;return{...o,shouldShowBatchActions:!n.isSelected||m>0,rowsById:{...o.rowsById,[e]:{...n,isSelected:!n.isSelected}}}})},se=e=>()=>{I(o=>{const n=o.rowsById[e],{isExpandedAll:b}=o;return{...o,isExpandedAll:n.isExpanded?!1:b,rowsById:{...o.rowsById,[e]:{...n,isExpanded:!n.isExpanded}}}})},oe=()=>{I(e=>{const{rowIds:o,isExpandedAll:n}=e;return{...e,isExpandedAll:!n,rowsById:o.reduce((b,m)=>({...b,[m]:{...e.rowsById[m],isExpanded:!n}}),{})}})},Ae=e=>()=>{I(o=>{const n=ne(a,o,{key:e});return{...o,...n}})},Be=(e,o)=>{e.target&&I(n=>({...n,filterInputValue:e.target.value})),o&&I(n=>({...n,filterInputValue:o}))},Ce=typeof u.filterInputValue=="string"?i({rowIds:u.rowIds,headers:l,cellsById:u.cellsById,inputValue:u.filterInputValue,getCellId:_}):u.rowIds,ae={rows:re(Ce,u.rowsById,u.cellsById),headers:l,selectedRows:re(k(),u.rowsById,u.cellsById),getHeaderProps:A,getExpandHeaderProps:we,getRowProps:ye,getExpandedRowProps:ge,getSelectionProps:xe,getToolbarProps:he,getBatchActionProps:Ie,getTableProps:Se,getTableContainerProps:Te,getCellProps:Ee,onInputChange:Be,sortBy:e=>Ae(e)(),selectAll:ee,selectRow:e=>te(e)(),expandRow:e=>se(e)(),expandAll:oe,radio:R};return typeof c<"u"?c(ae):typeof s<"u"?s(ae):null};f.translationKeys=Object.values(x);f.Table=Oe;f.TableActionList=_e;f.TableBatchAction=Ke;f.TableBatchActions=Le;f.TableBody=$e;f.TableCell=U;f.TableContainer=Ve;f.TableDecoratorRow=W;f.TableExpandHeader=ue;f.TableExpandRow=Z;f.TableExpandedRow=pe;f.TableHead=ve;f.TableHeader=Pe;f.TableRow=De;f.TableSelectAll=ke;f.TableSelectRow=Me;f.TableSlugRow=j;f.TableToolbar=qe;f.TableToolbarAction=J;f.TableToolbarContent=Fe;f.TableToolbarSearch=je;f.TableToolbarMenu=be;f.propTypes={experimentalAutoAlign:t.bool,filterRows:t.func,headers:t.arrayOf(t.shape({key:t.string.isRequired,header:t.node.isRequired})).isRequired,isSortable:t.bool,locale:t.string,overflowMenuOnHover:t.bool,radio:t.bool,rows:t.arrayOf(t.shape({id:t.string.isRequired,disabled:t.bool,isSelected:t.bool,isExpanded:t.bool})).isRequired,size:t.oneOf(["xs","sm","md","lg","xl"]),sortRow:t.func,stickyHeader:t.bool,translateWithId:t.func,useStaticWidth:t.bool,useZebraStyles:t.bool};export{f as D,ue as T,Z as a,pe as b,J as c,be as d};
