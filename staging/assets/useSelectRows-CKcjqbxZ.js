import{p as h,j as a,c as T}from"./settings-BiUEFdm2.js";import{r as m}from"./index-BwDkhjyp.js";import{c as x}from"./deprecate-D9ms-jbM.js";import{T as N}from"./TableSelectRow-ByX8qw9B.js";import{s as W,S as A,h as H}from"./_storybook-styles-DrT-5E9g.js";const S=`${h.prefix}--datagrid`,f=`${h.prefix}--datagrid__checkbox-cell`,J=o=>{O(o);const r=t=>{const{rows:e}=t,s=e.map(c=>({...c,isSelectable:!0}));Object.assign(t,{rows:s})};o.useInstance.push(r),o.useInstance.push(t=>{Object.assign(t,{withSelectRows:!0})}),o.visibleColumns.push(t=>{const e=[...t],s=e.findIndex(l=>l.id==="expander"),c=s>-1?e.splice(s,1):[];return[...s>-1&&c&&c.length?c:[],{id:W,Header:l=>a.jsx(A,{...l}),Cell:l=>a.jsx(v,{...l})},...e]})},O=o=>{const r=(t,{row:e})=>{const{checked:s}=e.getToggleRowSelectedProps();return[t,{className:x([`${S}__carbon-row`,{[`${T.prefix}--data-table--selected`]:s,[`${S}__active-row`]:s}])}]};o.getRowProps.push(r)},v=o=>{var g;const{isFetching:r=!1,tableId:t,row:e,cell:s,radio:c,toggleAllRowsSelected:l,onRadioSelect:d,onRowSelect:i,columns:b,withStickyColumn:C,dispatch:R,getRowId:P}=o,[$,p]=m.useState();m.useLayoutEffect(()=>{p(window.innerWidth);function n(){p(window.innerWidth)}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const k=n=>{n.stopPropagation(),c&&(l(!1),d&&d(e)),j(n),i==null||i(e,n),H({dispatch:R,rowData:e,isChecked:n.target.checked,getRowId:P,selectAll:null})},I=r||e.getRowProps().disabled,{onChange:j,title:_,...y}=e.getToggleRowSelectedProps(),w=s.getCellProps(),z=((g=b[0])==null?void 0:g.sticky)==="left"&&C,u=`${t}-${e.id}-${e.index}`,{key:E,_cellProps:L}=w;return a.jsx(N,{...L,...y,radio:c,onSelect:k,id:u,name:`${u}-name`,className:x([f,w.className,{[`${f}-sticky-left`]:z&&Number($)>671}]),ariaLabel:_,disabled:I},E)};export{J as u};
