import{r as s,p as N,u as ee,e,Z as te,c as ne,U as ae,B as R,P as t}from"./iframe-6Ea7Lnhj.js";import{C as re,M as se,a as ie,b as oe}from"./ComposedModal-ClCBM6ur.js";import{F as le}from"./FormGroup-CjTSc011.js";import{L as pe}from"./InlineLoading-DYP2wGFG.js";import{P as de}from"./codePreviewer-CLnGuJDf.js";import{R as ue}from"./RadioButton-Qd_nE-nY.js";import{R as me}from"./RadioButtonGroup-noIwC_Jp.js";import{T as ce}from"./TextInput-DVdHi0mW.js";import{g as fe}from"./devtools-t5hVrn0E.js";import{u as ye}from"./usePortalTarget-RdbJmDu1.js";import{u as ge}from"./uuidv4-BN2rGLQG.js";import{b as be}from"./bucket-6-BuyWAmS2.js";const f="ExportModal",M={preformattedExtensions:Object.freeze([]),validExtensions:Object.freeze([])};let o=s.forwardRef(({body:y,className:_,error:g,errorMessage:k,filename:p,hidePasswordLabel:B,inputLabel:$,inputType:P="text",invalidInputText:C,loading:d,loadingMessage:O,onClose:u,onRequestSubmit:S,open:b,portalTarget:L,preformattedExtensions:r=M.preformattedExtensions,preformattedExtensionsLabel:F,primaryButtonText:I,secondaryButtonText:z,showPasswordLabel:j,successMessage:D,successful:l,title:h,triggerButtonRef:H,validExtensions:m=M.validExtensions,...V},G)=>{const a=`${N.prefix}--export-modal`,[i,x]=s.useState(""),[U,W]=s.useState(!1),[c,v]=s.useState(""),A=ye(L),T=ee();s.useEffect(()=>{x(p),r&&r.length>0&&r[0]?.extension&&v(r?.[0]?.extension)},[p,r,b]),s.useEffect(()=>{l&&document.querySelector(`.${a} .${T}--modal-close-button button`)?.focus()},[l,a,T]);const Z=n=>{x(n.target.value)},J=n=>{v(n)},K=()=>{W(!0)},Q=()=>{const n=c?`${p}.${c.toLocaleLowerCase()}`:i;S?.(n)},E=()=>{if(!U||!m||!m.length)return!1;if(!i.includes("."))return!0;const n=i.split(".").pop();return!m.includes(n)},X=s.useRef(ge()),Y=d||!i||E(),q=d||g||l,w={id:`text-input--${X.current}`,value:i,onChange:Z,labelText:$,invalid:E(),invalidText:C,onBlur:K,"data-modal-primary-focus":!0};return A(e.createElement(te,{enableExperimentalFocusWrapWithoutSentinels:!0},e.createElement(re,{...V,className:ne(a,_),"aria-label":h,size:"sm",preventCloseOnClickOutside:!0,launcherButtonRef:H,open:b,ref:G,onClose:u,...fe(f)},e.createElement(se,{className:`${a}__header`,closeModal:u,title:h}),e.createElement(ie,{className:`${a}__body-container`},!q&&e.createElement(e.Fragment,null,y&&e.createElement("p",{className:`${a}__body`},y),r.length?e.createElement(le,{legendText:F},e.createElement(me,{orientation:"vertical",onChange:J,valueSelected:c,name:"extensions","aria-label":"extensions"},r.map(n=>e.createElement(ue,{key:n.extension,id:n.extension,value:n.extension,labelText:`${n.extension} (${n.description})`,"data-modal-primary-focus":!0})))):e.createElement("div",{className:`${a}__input-container`},P==="text"?e.createElement(ce,{...w}):e.createElement(de,{...w,showPasswordLabel:j,hidePasswordLabel:B,tooltipPosition:"left"}))),e.createElement("div",{"aria-live":"polite",className:`${a}__messaging`},d&&e.createElement(e.Fragment,null,e.createElement(pe,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,O)),l&&e.createElement(e.Fragment,null,e.createElement(ae,{size:16,className:`${a}__checkmark-icon`}),e.createElement("p",null,D)),g&&e.createElement(e.Fragment,null,e.createElement(be,{size:16,className:`${a}__error-icon`}),e.createElement("p",null,k)))),!q&&e.createElement(oe,{className:`${a}__footer`},e.createElement(R,{type:"button",kind:"secondary",onClick:u},z),e.createElement(R,{type:"submit",kind:"primary",onClick:Q,disabled:Y},I)))))});o=N.checkComponentEnabled(o,f);o.propTypes={body:t.string,className:t.string,error:t.bool,errorMessage:t.string,filename:t.string.isRequired,hidePasswordLabel:t.string,inputLabel:t.string,inputType:t.oneOf(["text","password"]),invalidInputText:t.string,loading:t.bool,loadingMessage:t.string,onClose:t.func,onRequestSubmit:t.func,open:t.bool,portalTarget:t.node,preformattedExtensions:t.arrayOf(t.shape({extension:t.string,description:t.string})),preformattedExtensionsLabel:t.string,primaryButtonText:t.string.isRequired,secondaryButtonText:t.string.isRequired,showPasswordLabel:t.string,successMessage:t.string,successful:t.bool,title:t.string.isRequired,triggerButtonRef:t.any,validExtensions:t.array};o.displayName=f;o.__docgenInfo={description:"Modal dialog version of the export pattern",methods:[],displayName:"ExportModal",props:{body:{required:!1,tsType:{name:"string"},description:"Body content for the modal",type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"Optional class name",type:{name:"string"}},error:{required:!1,tsType:{name:"boolean"},description:"specify if an error occurred",type:{name:"bool"}},errorMessage:{required:!1,tsType:{name:"string"},description:"messaging to display in the event of an error",type:{name:"string"}},filename:{required:!0,tsType:{name:"string"},description:"name of the file being exported",type:{name:"string"}},hidePasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to hide key",type:{name:"string"}},inputLabel:{required:!1,tsType:{name:"string"},description:"label for the text input",type:{name:"string"}},inputType:{required:!1,tsType:{name:"union",raw:"'text' | 'password'",elements:[{name:"literal",value:"'text'"},{name:"literal",value:"'password'"}]},description:"specify the type of text input",defaultValue:{value:"'text'",computed:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'password'",computed:!1}]}},invalidInputText:{required:!1,tsType:{name:"string"},description:"text for an invalid input",type:{name:"string"}},loading:{required:!1,tsType:{name:"boolean"},description:"specify if the modal is in a loading state",type:{name:"bool"}},loadingMessage:{required:!1,tsType:{name:"string"},description:"message to display during the loading state",type:{name:"string"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Specify a handler for closing modal",type:{name:"func"}},onRequestSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:'Specify a handler for "submitting" modal. Returns the file name',type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specify whether the Modal is currently open",type:{name:"bool"}},portalTarget:{required:!1,tsType:{name:"ReactNode"},description:"The DOM node the tearsheet should be rendered within. Defaults to document.body.",type:{name:"node"}},preformattedExtensions:{required:!1,tsType:{name:"unknown"},description:"Array of extensions to display as radio buttons",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"arrayOf",value:{name:"shape",value:{extension:{name:"string",required:!1},description:{name:"string",required:!1}}}}},preformattedExtensionsLabel:{required:!1,tsType:{name:"string"},description:"Label for the preformatted label form group",type:{name:"string"}},primaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the primary button",type:{name:"string"}},secondaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the secondary button",type:{name:"string"}},showPasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to show key",type:{name:"string"}},successMessage:{required:!1,tsType:{name:"string"},description:"messaging to display if the export was successful",type:{name:"string"}},successful:{required:!1,tsType:{name:"boolean"},description:"specify if the export was successful",type:{name:"bool"}},title:{required:!0,tsType:{name:"string"},description:"The text displayed at the top of the modal",type:{name:"string"}},triggerButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Reference to trigger button",type:{name:"any"}},validExtensions:{required:!1,tsType:{name:"unknown"},description:"array of valid extensions the file can have",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"array"}}}};export{o as E};
