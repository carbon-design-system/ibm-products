{"version":3,"file":"useOverflowItems.stories-Bik6LIqV.js","sources":["../../src/global/js/hooks/useOverflowItems/useOverflowItems.mdx","../../src/global/js/hooks/useOverflowItems/useOverflowItems.stories.jsx"],"sourcesContent":["import { Story, Canvas } from '@storybook/addon-docs/blocks';\nimport * as UseOverflowItemsStories from './useOverflowItems.stories';\nimport { useOverflowItems } from '.';\n\n# useOverflowItems\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Hook API](#hook-api)\n- [Example usage](#example-usage)\n- [Example implementation](#example-implementation)\n\n## Overview\n\nThe `useOverflowItems` hook can be used for handling overflow behavior of\nmultiple DOM elements inside of a given area.\n\nFor example, if you need to display a certain number of `Tag` elements in a\ncontainer and render additional values in a popover, you could use this hook to\ndo just that.\n\n## Hook API\n\n```jsx\n// Hook arguments\nitems: T[] = [], // A generic array of items\ncontainerRef: RefObject<HTMLElement | null>, // The parent container that the items are confined to\noffsetRef?: RefObject<HTMLElement | null>, // An optional ref to an element that you want to exclude from the calculation\nmaxItems?: number, // An optional argument for a maximum amount of items to return\nonChange?: (value: {\n  hiddenItems?: T[];\n  minWidth?: number;\n  maxWidth?: number;\n}) => void // An event handler that's called whenever the number of number of visible items changes\n\n// Hook returns\n{\n  visibleItems: T[]; // An array of items that fit in the containerRef\n  itemRefHandler: (id: string, node: HTMLElement | null) => void; // A handler for passing the ref of the node to the hook\n  hiddenItems: T[]; // An array of items that don't fit in the containerRef\n  offsetRefHandler: (node: HTMLElement | null) => HTMLElement; // A handler for passing the ref of the offset element to the hook\n}\n```\n\n## Example usage\n\n```jsx\nconst { visibleItems, hiddenItems, itemRefHandler, offsetRefHandler } =\n  useOverflowItems(items, containerRef, offsetRef, maxVisible, onChange);\n```\n\n<Canvas>\n  <Story of={UseOverflowItemsStories.Default} />\n</Canvas>\n\n## Example implementation\n\n`useOverflowItems` is used in several components within the Carbon for IBM\nproducts library.\n\n- ActionBar\n  - [Storybook](?path=/docs/utils-components-actionbar--docs&globals=viewport:basic)\n  - [Source](https://github.com/carbon-design-system/ibm-products/blob/4fea32f2b62cf45c6ea92a3034e9fe5fc294af62/packages/ibm-products/src/components/ActionBar/ActionBar.tsx#L129)\n- TagOverflow\n  - [Storybook](?path=/docs/utils-components-tagoverflow--docs&globals=viewport:basic)\n  - [Source](https://github.com/carbon-design-system/ibm-products/blob/4fea32f2b62cf45c6ea92a3034e9fe5fc294af62/packages/ibm-products/src/components/TagOverflow/TagOverflow.tsx#L130)\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useRef, useState } from 'react';\nimport { useOverflowItems } from './useOverflowItems';\nimport { Tag, Slider } from '@carbon/react';\nimport { Annotation } from '../../../../../.storybook/Annotation';\nimport { FitToWidth } from '@carbon/react/icons';\nimport './_storybook-styles.scss';\nimport mdx from './useOverflowItems.mdx';\n\nexport default {\n  title: 'Utilities/useOverflowItems',\n  parameters: {\n    layout: 'padded',\n    docs: {\n      page: mdx,\n    },\n  },\n  tags: ['autodocs'],\n};\n\nconst Template = () => {\n  const [width, setWidth] = useState(500);\n  const [numberOfTags, setNumberOfTags] = useState(10);\n  const containerRef = useRef(null);\n\n  const makeTags = (n) => {\n    return Array(n)\n      .fill(null)\n      .map((_, idx) => ({\n        id: idx,\n        label: `Tag ${idx + 1}`,\n      }));\n  };\n\n  const tags = makeTags(numberOfTags);\n\n  const { visibleItems, hiddenItems, itemRefHandler } = useOverflowItems(\n    tags,\n    containerRef\n  );\n\n  const widthHandler = (n) => {\n    setWidth(n);\n  };\n\n  return (\n    <div>\n      <Slider\n        className=\"slider\"\n        max={1000}\n        min={200}\n        value={width}\n        onChange={({ value }) => widthHandler(value)}\n        hideTextInput\n        labelText=\"Parent container width\"\n      />\n      <Slider\n        className=\"slider\"\n        max={50}\n        min={1}\n        value={numberOfTags}\n        onChange={({ value }) => setNumberOfTags(value)}\n        hideTextInput\n        labelText=\"Number of total tags\"\n      />\n      <div\n        className=\"parent\"\n        style={{\n          width: `${width}px`,\n        }}\n      >\n        <Annotation text=\"Parent container\" type=\"layer\" icon={FitToWidth}>\n          <div className=\"child\" ref={containerRef}>\n            <p>Visible items:</p>\n            {visibleItems.map((tag) => (\n              <Tag\n                type=\"blue\"\n                key={tag.id}\n                ref={(node) => {\n                  itemRefHandler(tag.id, node);\n                }}\n              >\n                {tag.label}\n              </Tag>\n            ))}\n          </div>\n          <div className=\"child\">\n            <p>Hidden items:</p>\n            {hiddenItems.map((tag) => (\n              <Tag key={tag.id} type=\"blue\">\n                {tag.label}\n              </Tag>\n            ))}\n          </div>\n        </Annotation>\n      </div>\n    </div>\n  );\n};\n\nexport const Default = Template.bind({});\nDefault.args = {};\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Canvas","Story","UseOverflowItemsStories.Default","MDXContent","MDXLayout","useOverflowItems_stories","title","parameters","layout","docs","page","mdx","tags","Template","width","setWidth","useState","numberOfTags","setNumberOfTags","containerRef","useRef","n","Array","fill","map","_","idx","id","label","visibleItems","hiddenItems","itemRefHandler","useOverflowItems","widthHandler","React","Slider","value","Annotation","FitToWidth","tag","Tag","node","Default","bind","args","source","originalSource"],"mappings":"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"}