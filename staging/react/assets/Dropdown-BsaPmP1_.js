import{e as i,a as Ae,b as Re,r as a,u as Ke,c as v,_ as x,C as je,d as Be,s as ze,f as Oe,h as qe,P as n,g as L}from"./iframe-BbTYfv9-.js";import{u as ce,L as I,a as He,b as Se}from"./index-Bo8gO87W.js";import{m as Ue}from"./mergeRefs-BZpmU3mx.js";import{F as We}from"./FormContext-DY8rSwJV.js";import{u as Ve}from"./useNormalizedInputProps-DZ8P3UsW.js";import{A as Ge}from"./index-DxihRps1.js";import{d as re}from"./defaultItemToString-zSItMTD_.js";import{i as Je}from"./utils-C-ow7gcy.js";import{W as Qe,a as Xe}from"./bucket-19-DKyp3qQO.js";const{ItemMouseMove:Ye,MenuMouseLeave:Ze,ToggleButtonBlur:es,FunctionCloseMenu:ss}=ce.stateChangeTypes;function de(l,$){const{changes:d,type:E}=$;switch(E){case Ye:case Ze:return d.highlightedIndex===l.highlightedIndex?l:d;case es:case ss:return{...d,selectedItem:l.selectedItem};default:return d}}const pe=i.forwardRef(({autoAlign:l=!1,className:$,decorator:d,disabled:E=!1,direction:A="bottom",items:R,label:K,["aria-label"]:ue,ariaLabel:me,itemToString:p=re,itemToElement:j=null,renderSelectedItem:B,type:fe="default",size:k,onChange:C,id:z,titleText:F="",hideLabel:be,helperText:O="",translateWithId:we,light:q,invalid:ge,invalidText:H,warn:ye,warnText:S,initialSelectedItem:U,selectedItem:W,downshiftProps:V,readOnly:b,slug:T,...he},_e)=>{const w=Ae("enable-v12-dynamic-floating-styles"),{refs:u,floatingStyles:G,middlewareData:ve}=Re(w||l?{placement:A,strategy:"fixed",middleware:[ze({apply({rects:s,elements:o}){Object.assign(o.floating.style,{width:`${s.reference.width}px`})}}),l&&Oe(),l&&qe()],whileElementsMounted:Be}:{});a.useEffect(()=>{if(w||l){const s={...G,visibility:ve.hide?.referenceHidden?"hidden":"visible"};Object.keys(s).forEach(o=>{u.floating.current&&(u.floating.current.style[o]=s[o])})}},[G,l,u.floating]);const e=Ke(),{isFluid:m}=a.useContext(We),J=a.useCallback(({selectedItem:s})=>{C&&C({selectedItem:s??null})},[C]),Q=a.useCallback((s,o)=>s!==null&&typeof s=="object"&&"disabled"in s&&s.disabled===!0,[]),X=a.useCallback(s=>{const{highlightedIndex:o}=s;if(o!==void 0&&o>-1&&typeof window!==void 0){const _=document.querySelectorAll(`li.${e}--list-box__menu-item[role="option"]`)[o];_&&_.scrollIntoView({behavior:"smooth",block:"nearest"})}},[e]),D=a.useMemo(()=>R,[R]),Y=a.useMemo(()=>({items:D,itemToString:p,initialSelectedItem:U,onSelectedItemChange:J,stateReducer:de,isItemDisabled:Q,onHighlightedIndexChange:X,...V}),[D,p,U,J,de,Q,X,V]);W!==void 0&&(Y.selectedItem=W);const{isOpen:f,getToggleButtonProps:xe,getLabelProps:Ie,getMenuProps:Z,getItemProps:$e,selectedItem:r,highlightedIndex:Ee}=ce(Y),c=fe==="inline",t=Ve({id:z,readOnly:b,disabled:E??!1,invalid:ge??!1,invalidText:H,warn:ye??!1,warnText:S}),[ke,P]=a.useState(!1),Ce=v(`${e}--dropdown`,{[`${e}--dropdown--invalid`]:t.invalid,[`${e}--dropdown--warning`]:t.warn,[`${e}--dropdown--open`]:f,[`${e}--dropdown--focus`]:ke,[`${e}--dropdown--inline`]:c,[`${e}--dropdown--disabled`]:t.disabled,[`${e}--dropdown--light`]:q,[`${e}--dropdown--readonly`]:b,[`${e}--dropdown--${k}`]:k,[`${e}--list-box--up`]:A==="top",[`${e}--autoalign`]:l}),Fe=v(`${e}--label`,{[`${e}--label--disabled`]:t.disabled,[`${e}--visually-hidden`]:be}),Te=v(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:t.disabled}),De=v(`${e}--dropdown__wrapper`,`${e}--list-box__wrapper`,$,{[`${e}--dropdown__wrapper--inline`]:c,[`${e}--list-box__wrapper--inline`]:c,[`${e}--dropdown__wrapper--inline--invalid`]:c&&t.invalid,[`${e}--list-box__wrapper--inline--invalid`]:c&&t.invalid,[`${e}--list-box__wrapper--fluid--invalid`]:m&&t.invalid,[`${e}--list-box__wrapper--slug`]:T,[`${e}--list-box__wrapper--decorator`]:d}),g=xe({"aria-label":ue||me}),ee=O&&!m?i.createElement("div",{id:t.helperId,className:Te},O):null,se=s=>{P(s.type==="focus"&&!r)},ne=a.useRef(null),Pe=Ue(g.ref,_e,ne),[y,te]=a.useState(),[ae,M]=a.useState(!1),oe=a.useCallback(s=>{["ArrowDown","ArrowUp"," ","Enter"].includes(s.key)?ae&&s.key===" "&&(y&&clearTimeout(y),te(setTimeout(()=>{M(!1)},3e3))):(M(!0),y&&clearTimeout(y),te(setTimeout(()=>{M(!1)},3e3))),["ArrowDown"].includes(s.key)&&P(!1),["Enter"].includes(s.key)&&!r&&!f&&P(!0),g.onKeyDown&&(s.key!=="ArrowUp"||f&&s.key==="ArrowUp")&&g.onKeyDown(s)},[ae,y,g]),Me=a.useMemo(()=>b?{onClick:s=>{s.preventDefault(),ne.current?.focus()},onKeyDown:s=>{["ArrowDown","ArrowUp"," ","Enter"].includes(s.key)&&s.preventDefault()}}:{onKeyDown:oe},[b,oe]),Ne=a.useMemo(()=>Z({ref:w||l?u.setFloating:null}),[l,Z,u.setFloating,w]),N=T??d,ie=Je(N,Ge)?a.cloneElement(N,{size:"mini"}):N,le=Ie(),Le=a.isValidElement(F)?{id:le.id}:le;return i.createElement("div",x({className:De},he),F&&i.createElement("label",x({className:Fe},Le),F),i.createElement(I,{onFocus:se,onBlur:se,size:k,className:Ce,invalid:t.invalid,invalidText:m?H:void 0,invalidTextId:t.invalidId,warn:t.warn,warnText:m?S:void 0,warnTextId:t.warnId,light:q,isOpen:f,ref:w||l?u.setReference:null,id:z},t.invalid&&i.createElement(Qe,{className:`${e}--list-box__invalid-icon`}),t.warn&&i.createElement(Xe,{className:`${e}--list-box__invalid-icon ${e}--list-box__invalid-icon--warning`}),i.createElement("button",x({type:"button",className:`${e}--list-box__field`,disabled:t.disabled,"aria-disabled":b?!0:void 0,"aria-describedby":!c&&!t.invalid&&!t.warn&&ee?t.helperId:t.invalid?t.invalidId:t.warn?t.warnId:void 0,title:r&&p!==void 0?p(r):re(K)},g,Me,{ref:Pe}),i.createElement("span",{className:`${e}--list-box__label`},r?B?B(r):p(r):K),i.createElement(I.MenuIcon,{isOpen:f,translateWithId:we})),T?ie:d?i.createElement("div",{className:`${e}--list-box__inner-wrapper--decorator`},ie):"",i.createElement(I.Menu,Ne,f&&D.map((s,o)=>{const h=$e({item:s,index:o}),_=p(s);return i.createElement(I.MenuItem,x({key:h.id,isActive:r===s,isHighlighted:Ee===o,title:_,disabled:h["aria-disabled"]},h),j?j(s):p(s),r===s&&i.createElement(je,{className:`${e}--list-box__menu-item__selected-icon`}))}))),!c&&!m&&!t.validation&&ee,!c&&!m&&t.validation)});pe.displayName="Dropdown";pe.propTypes={"aria-label":n.string,ariaLabel:L(n.string),autoAlign:n.bool,className:n.string,decorator:n.node,direction:n.oneOf(["top","bottom"]),disabled:n.bool,downshiftProps:n.object,helperText:n.node,hideLabel:n.bool,id:n.string.isRequired,initialSelectedItem:n.oneOfType([n.object,n.string,n.number]),invalid:n.bool,invalidText:n.node,itemToElement:n.func,itemToString:n.func,items:n.array.isRequired,label:n.node.isRequired,light:L(n.bool),onChange:n.func,readOnly:n.bool,renderSelectedItem:n.func,selectedItem:n.oneOfType([n.object,n.string,n.number]),size:Se,slug:L(n.node),titleText:n.node.isRequired,translateWithId:n.func,type:He,warn:n.bool,warnText:n.node};export{pe as D};
//# sourceMappingURL=Dropdown-BsaPmP1_.js.map
