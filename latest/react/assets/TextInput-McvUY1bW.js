import{r as o,u as de,i as pe,c,e as a,P as t,g as z}from"./iframe-BBf3bqTv.js";import{u as ue}from"./useNormalizedInputProps-BgZ5uQfL.js";import{F as me}from"./FormContext-CW3fTVyM.js";import{T as h}from"./Text-CaNb5F2n.js";import{A as fe}from"./index-DOwP6x5e.js";import{i as xe}from"./utils-BgfmaY2S.js";const be=r=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":r}),$e=r=>({"aria-describedby":r}),ve=r=>({"aria-describedby":r}),_e=({sharedTextInputProps:r,invalid:d,invalidId:u,warn:p,warnId:s,hasHelper:m,helperId:i})=>({...r,...d?be(u):{},...p?$e(s):{},...m?ve(i):{}}),ge=(r,d,u="character",p="characters")=>{if(typeof d>"u")return null;const s=d-r;return s<=10&&s>0?`${s} ${s===1?u:p} left.`:s<=0?`Maximum ${p} reached.`:null},D=o.forwardRef(({className:r,decorator:d,disabled:u=!1,helperText:p,hideLabel:s,id:m,inline:i=!1,invalid:j=!1,invalidText:B,labelText:I,light:E,onChange:G=()=>{},onClick:H=()=>{},placeholder:N,readOnly:v,size:f,type:J="text",warn:K=!1,warnText:Q,enableCounter:_=!1,maxCount:b,slug:g,...T},U)=>{const e=de(),{defaultValue:C,value:y}=T,P=o.useRef(null),X=pe([U,P]);function R(){return(C||y||P.current?.value||"").toString().length}const[A,L]=o.useState(R());o.useEffect(()=>{L(R())},[y,C,_]);const n=ue({id:m,readOnly:v,disabled:u,invalid:j,invalidText:B,warn:K,warnText:Q}),Y=c(`${e}--text-input`,{[`${e}--text-input--light`]:E,[`${e}--text-input--invalid`]:n.invalid,[`${e}--text-input--warning`]:n.warn,[`${e}--text-input--${f}`]:f,[`${e}--layout--size-${f}`]:f}),F={id:m,onChange:l=>{n.disabled||(L(l.target.value?.length),G(l))},onClick:l=>{n.disabled||H(l)},placeholder:N,type:J,ref:X,className:Y,title:N,disabled:n.disabled,readOnly:v,"aria-describedby":p&&n.helperId,...T};_&&(F.maxLength=b);const Z=c([c(`${e}--form-item`,r)],`${e}--text-input-wrapper`,{[`${e}--text-input-wrapper--readonly`]:v,[`${e}--text-input-wrapper--light`]:E,[`${e}--text-input-wrapper--inline`]:i,[`${e}--text-input-wrapper--inline--invalid`]:i&&n.invalid}),ee=c(`${e}--label`,{[`${e}--visually-hidden`]:s,[`${e}--label--disabled`]:n.disabled,[`${e}--label--inline`]:i,[`${e}--label--inline--${f}`]:i&&!!f}),te=c(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:n.disabled,[`${e}--form__helper-text--inline`]:i}),ne=c(`${e}--text-input__field-outer-wrapper`,{[`${e}--text-input__field-outer-wrapper--inline`]:i}),ae=c(`${e}--text-input__field-wrapper`,{[`${e}--text-input__field-wrapper--warning`]:n.warn,[`${e}--text-input__field-wrapper--slug`]:g,[`${e}--text-input__field-wrapper--decorator`]:d}),re=c({[`${e}--text-input__invalid-icon`]:n.invalid||n.warn,[`${e}--text-input__invalid-icon--warning`]:n.warn}),ie=c(`${e}--label`,{[`${e}--label--disabled`]:u,[`${e}--text-input__label-counter`]:!0}),le=_&&b?a.createElement(h,{as:"div",className:ie},`${A}/${b}`):null,se=I?a.createElement(h,{as:"label",htmlFor:m,className:ee},I):null,V=a.createElement("div",{className:`${e}--text-input__label-wrapper`},se,le),W=p?a.createElement(h,{as:"div",id:n.helperId,className:te},p):null,oe=a.createElement("input",_e({sharedTextInputProps:F,invalid:n.invalid,invalidId:n.invalidId,warn:n.warn,warnId:n.warnId})),{isFluid:$}=o.useContext(me),O=o.useRef(null),[S,ce]=o.useState(""),x=ge(A,b);o.useEffect(()=>{if(x&&x!==S){const l=O.current;if(l){l.textContent="";const M=setTimeout(()=>{l&&(l.textContent=x,ce(x))},1e3);return()=>{M&&clearTimeout(M)}}}},[x,S]);const k=n.icon,w=g??d,q=xe(w,fe)?o.cloneElement(w,{size:"mini"}):w;return a.createElement("div",{className:Z},i?a.createElement("div",{className:`${e}--text-input__label-helper-wrapper`},V,!$&&(n.validation||W)):V,a.createElement("div",{className:ne},a.createElement("div",{className:ae,"data-invalid":n.invalid||null},k&&a.createElement(k,{className:re}),oe,g?q:d?a.createElement("div",{className:`${e}--text-input__field-inner-wrapper--decorator`},q):"",a.createElement("span",{className:`${e}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:O},x),$&&a.createElement("hr",{className:`${e}--text-input__divider`}),$&&!i&&n.validation),!$&&!i&&(n.validation||W)))});D.displayName="TextInput";D.propTypes={className:t.string,decorator:t.node,defaultValue:t.oneOfType([t.string,t.number]),disabled:t.bool,enableCounter:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node.isRequired,light:z(t.bool),maxCount:t.number,onChange:t.func,onClick:t.func,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:z(t.node),type:t.string,value:t.oneOfType([t.string,t.number]),warn:t.bool,warnText:t.node};export{D as T,_e as a,ge as g};
//# sourceMappingURL=TextInput-McvUY1bW.js.map
