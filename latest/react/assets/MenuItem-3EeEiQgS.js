import{r as a,f as Z,$ as ee,a0 as te,a1 as ne,u as v,l as ae,c as M,e as t,a2 as se,_ as S,C as re,a3 as oe,h as le,n as w,a4 as ce,E as ie,o as ue,P as e}from"./iframe-DMSo7fNu.js";import{u as U}from"./useControllableState-CChOc1hs.js";import{M as T,u as me,a as fe}from"./useAttachedMenu-DL7ROuXb.js";import{T as de}from"./Text-Dh2QBwQf.js";import{C as pe,a as ge}from"./bucket-2-aw6a38Ug.js";var A,G,L;const D=a.forwardRef(function({children:l,className:u,disabled:s,kind:m="default",label:r,onClick:d,renderIcon:c,shortcut:I,...o},y){const[i,b]=a.useState(!1),[x,k]=a.useState(!1),{refs:p,floatingStyles:f,context:R}=Z({open:i,onOpenChange:b,placement:x?"left-start":"right-start",whileElementsMounted:le,middleware:[oe({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:F,getFloatingProps:j}=ee([te(R,{delay:100,enabled:!0,handleClose:ne({requireIntent:!1})})]),g=v(),C=a.useContext(T),N=a.useRef(null),B=ae([y,N,p.setReference]),h=!!l,_=s&&!h,V=m==="danger"&&!h;function H(){C.dispatch({type:"registerItem",payload:{ref:N,disabled:!!s}})}function q(){N.current&&b(!0)}function z(){b(!1)}function K(n){_||(h?q():(C.state.requestCloseRoot(n),d&&d(n)))}const $=a.useRef(!1),P=n=>w(n,ie)||w(n,ue);function J(n){h&&w(n,ce)&&(q(),requestAnimationFrame(()=>{p.floating.current?.focus()}),n.stopPropagation(),n.preventDefault()),$.current=P(n),o.onKeyDown&&o.onKeyDown(n)}function Q(n){$.current&&P(n)&&K(n),$.current=!1}const W=M(u,`${g}--menu-item`,{[`${g}--menu-item--disabled`]:_,[`${g}--menu-item--danger`]:V}),[X,Y]=a.useState(!1);a.useEffect(()=>{H();const n=C.state.items;!s&&N.current&&n.length===0&&Y(!0)},[]);const{direction:O}=me();return a.useEffect(()=>{document?.dir==="rtl"||O==="rtl"?k(!0):k(!1)},[O]),a.useEffect(()=>{c&&!C.state.hasIcons&&C.dispatch({type:"enableIcons"})},[c,C.state.hasIcons,C]),a.useEffect(()=>{Object.keys(f).forEach(n=>{p.floating.current&&n!=="position"&&(p.floating.current.style[n]=f[n])})},[f,p.floating]),t.createElement(se,{context:R,order:["reference","floating"],modal:!1},t.createElement("li",S({role:"menuitem"},o,{ref:B,className:W,tabIndex:X?0:-1,"aria-disabled":_??void 0,"aria-haspopup":h??void 0,"aria-expanded":h?i:void 0,onClick:K,onKeyDown:J,onKeyUp:Q},F()),t.createElement("div",{className:`${g}--menu-item__selection-icon`},o["aria-checked"]&&(A||(A=t.createElement(re,null)))),t.createElement("div",{className:`${g}--menu-item__icon`},c&&t.createElement(c,null)),t.createElement(de,{as:"div",className:`${g}--menu-item__label`,title:r},r),I&&!h&&t.createElement("div",{className:`${g}--menu-item__shortcut`},I),h&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${g}--menu-item__shortcut`},x?G||(G=t.createElement(pe,null)):L||(L=t.createElement(ge,null))),t.createElement(fe,S({label:r,open:i,onClose:()=>{z(),N.current?.focus()},ref:p.setFloating},j()),l))))});D.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const he=a.forwardRef(function({className:l,defaultSelected:u,label:s,onChange:m,selected:r,...d},c){const I=v(),o=a.useContext(T),[y,i]=U({value:r,onChange:m,defaultValue:u??!1});function b(k){i(!y)}a.useEffect(()=>{o.state.hasSelectableItems||o.dispatch({type:"enableSelectableItems"})},[o.state.hasSelectableItems,o]);const x=M(l,`${I}--menu-item-selectable--selected`);return t.createElement(D,S({},d,{ref:c,label:s,className:x,role:"menuitemcheckbox","aria-checked":y,onClick:b}))});he.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const be=a.forwardRef(function({children:l,className:u,label:s,...m},r){const d=v(),c=M(u,`${d}--menu-item-group`);return t.createElement("li",{className:c,role:"none",ref:r},t.createElement("ul",S({},m,{role:"group","aria-label":s}),l))});be.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const Ce=E=>E.toString(),Ee=a.forwardRef(function({className:l,defaultSelectedItem:u,items:s,itemToString:m=Ce,label:r,onChange:d,selectedItem:c,...I},o){const y=v(),i=a.useContext(T),[b,x]=U({value:c,onChange:d,defaultValue:u??{}});function k(f,R){x(f)}a.useEffect(()=>{i.state.hasSelectableItems||i.dispatch({type:"enableSelectableItems"})},[i.state.hasSelectableItems,i]);const p=M(l,`${y}--menu-item-radio-group`);return t.createElement("li",{className:p,role:"none",ref:o},t.createElement("ul",S({},I,{role:"group","aria-label":r}),s.map((f,R)=>t.createElement(D,{key:R,label:m(f),role:"menuitemradio","aria-checked":f===b,onClick:F=>{k(f)}}))))});Ee.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Ie=a.forwardRef(function({className:l,...u},s){const m=v(),r=M(l,`${m}--menu-item-divider`);return t.createElement("li",S({},u,{className:r,role:"separator",ref:s}))});Ie.propTypes={className:e.string};export{D as M,Ie as a,be as b,Ee as c,he as d};
