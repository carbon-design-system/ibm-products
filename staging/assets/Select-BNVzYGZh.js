import{b as re,c as oe,d,_ as ce,n as ie,P as t,g as L}from"./index-C360Eztx.js";import{e as s,r as N}from"./index-DtHxqM--.js";import{F as de}from"./FormContext-C4Nuixum.js";import{c as me}from"./events-CdfZZS3f.js";import{T as v}from"./Text-DKfZ87L_.js";import{W as pe,a as ue}from"./bucket-19-D7HYZr93.js";const W=s.forwardRef(function({className:q,decorator:m,id:b,inline:c=!1,labelText:z="Select",disabled:p=!1,children:y,noLabel:H=!1,hideLabel:R=!1,invalid:a=!1,invalidText:k="",helperText:E="",light:B=!1,readOnly:u,size:h,warn:f=!1,warnText:M,onChange:U,slug:$,..._},j){var D,S,P,V;const e=re(),{isFluid:r}=N.useContext(de),[G,J]=N.useState(!1),Q=oe(),w=s.Children.toArray(y).filter(l=>s.isValidElement(l)),x=w.find(l=>{var n;return((n=l.props)==null?void 0:n.value)===(_==null?void 0:_.defaultValue)}),X=((D=x==null?void 0:x.props)==null?void 0:D.text)||((P=(S=w[0])==null?void 0:S.props)==null?void 0:P.text)||"",[Y,Z]=N.useState(X),O=d({[`${e}--select`]:!0,[`${e}--select--inline`]:c,[`${e}--select--light`]:B,[`${e}--select--invalid`]:a,[`${e}--select--disabled`]:p,[`${e}--select--readonly`]:u,[`${e}--select--warning`]:f,[`${e}--select--fluid--invalid`]:r&&a,[`${e}--select--fluid--focus`]:r&&G,[`${e}--select--slug`]:$,[`${e}--select--decorator`]:m}),ee=d(`${e}--label`,{[`${e}--visually-hidden`]:R,[`${e}--label--disabled`]:p}),se=d({[`${e}--select-input`]:!0,[`${e}--select-input--${h}`]:h}),C=`${b}-error-msg`,te=(()=>{if(a)return k;if(f)return M})(),i=a||f?s.createElement(v,{as:"div",className:`${e}--form-requirement`,id:C},te):null,le=d(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:p}),F=E?`select-helper-text-${Q}`:void 0,T=E?s.createElement(v,{as:"div",id:F,className:le},E):null,g={};a?g["aria-describedby"]=C:!c&&!r&&(g["aria-describedby"]=T?F:void 0);const I=l=>{J(l.type==="focus")},ae=l=>{var K;const n=(K=l==null?void 0:l.target)==null?void 0:K.options[l.target.selectedIndex];Z(n==null?void 0:n.text)},ne={onMouseDown:l=>{u&&(l.preventDefault(),l.target.focus())},onKeyDown:l=>{u&&["ArrowDown","ArrowUp"," "].includes(l.key)&&l.preventDefault()}};let o=s.isValidElement($??m)?$??m:null;o&&((V=o.type)==null?void 0:V.displayName)==="AILabel"&&(o=s.cloneElement(o,{size:"mini"}));const A=s.createElement(s.Fragment,null,s.createElement("select",ce({},_,g,{id:b,className:se,disabled:p||void 0,"aria-invalid":a||void 0,"aria-readonly":u||void 0,title:Y,onChange:me([U,ae])},ne,{ref:j}),y),s.createElement(ie,{className:`${e}--select__arrow`}),a&&s.createElement(pe,{className:`${e}--select__invalid-icon`}),!a&&f&&s.createElement(ue,{className:`${e}--select__invalid-icon ${e}--select__invalid-icon--warning`}));return s.createElement("div",{className:d(`${e}--form-item`,q)},s.createElement("div",{className:O},!H&&s.createElement(v,{as:"label",htmlFor:b,className:ee},z),c&&s.createElement("div",{className:`${e}--select-input--inline__wrapper`},s.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null},A),i),!c&&s.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null,onFocus:I,onBlur:I},A,$?o:m?s.createElement("div",{className:`${e}--select__inner-wrapper--decorator`},o):"",r&&s.createElement("hr",{className:`${e}--select__divider`}),r&&i?i:null),!c&&!r&&i?i:T))});W.displayName="Select";W.propTypes={children:t.node,className:t.string,decorator:t.node,defaultValue:t.any,disabled:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node,light:L(t.bool),noLabel:t.bool,onChange:t.func,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:L(t.node),warn:t.bool,warnText:t.node};export{W as S};
