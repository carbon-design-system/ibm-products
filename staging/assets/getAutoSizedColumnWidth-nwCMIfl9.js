import{r as u,e as w}from"./index-DtHxqM--.js";import{d as F}from"./FilterSummary-B1czKANS.js";import{d as P,P as m}from"./index-CMVdkQrl.js";import{s as L}from"./useDatagrid-D8D-dUe2.js";import{C as B}from"./Checkbox-CVg4b6-b.js";import{O as N}from"./index-CrpWSFad.js";import{O as H}from"./OverflowMenuItem-CqnmCkEJ.js";import{p as O}from"./settings-C3kz8lqM.js";import{s as _}from"./bucket-2-D0m0gcwr.js";import{u as V}from"./useIsomorphicEffect-DztsuiUB.js";const $=r=>{const i=u.useRef(void 0),n=u.useRef(void 0),a=u.useRef(void 0),s=u.useRef(void 0),t=u.useRef(void 0),[e,o]=u.useState(),c=l=>{const{DatagridActions:p,DatagridBatchActions:g,totalColumnsWidth:T,DatagridPagination:b}=l,q=()=>{const y=i&&i.current&&i.current.parentElement;if(!y)return;const h=y.clientHeight,v=y.clientWidth,R=n&&n.current&&n.current.clientHeight,f=window.getComputedStyle(y),C=parseFloat(f.getPropertyValue("margin-bottom")),S=parseFloat(f.getPropertyValue("padding-bottom")),d=parseFloat(f.getPropertyValue("margin-top")),z=parseFloat(f.getPropertyValue("padding-top")),j=p||g?48:0,I=b?48:0,x=v<T?16:0,W=h-R-C-S-d-z-j-I-x;o(W)};Object.assign(l,{tableHeight:e||l.tableHeight,rootRef:i,headRef:n,innerListRef:a,handleResize:q,listRef:s,gridRef:t})};r.useInstance.push(c)},G=r=>{const i=n=>{const{rootRef:a,handleResize:s}=n,t=a&&a.current&&a.current.parentElement;u.useLayoutEffect(()=>{if(!t)return()=>{};if(s(),typeof ResizeObserver=="function"){let e=new ResizeObserver(()=>{s()});return e.observe(t),()=>{e.disconnect(t),e=null}}return console.error("Could not resize table, no support for ResizeObserver")},[s,t])};r.useInstanceBeforeDimensions.push(i)},oe=r=>{$(r),G(r);const i=n=>{const{isFetching:a,tableHeight:s,innerListRef:t,fetchMoreData:e,tableId:o,loadMoreThreshold:c}=n;let l;typeof document<"u"&&(l=document.querySelector(`#${o}`));const p=s||(l==null?void 0:l.clientHeight),g=typeof c=="number"?c:200,T=()=>{},b=u.useCallback(F(e||T,3e3),[e]);Object.assign(n,{onScroll:({scrollDirection:y,scrollOffset:h})=>{t&&t.current&&!a&&y==="forward"&&h+p>=t.current.clientHeight-g&&e&&b()},withVirtualScroll:!0})};r.useInstance.push(i)},E=`${O.prefix}--datagrid`,A="pageRows",k="allRows",D=({tableId:r,isFetching:i,isAllRowsSelected:n,selectAllToggle:a,getToggleAllPageRowsSelectedProps:s,getToggleAllRowsSelectedProps:t,allPageRowsLabel:e="Select all on page",allRowsLabel:o="Select all",columns:c,withStickyColumn:l})=>{var S;const{onSelectAllRows:p,labels:g}=a||{},[T,b]=u.useState(A);u.useEffect(()=>{p&&p(n&&T===k)},[n,T,p]);const[q,y]=u.useState();u.useLayoutEffect(()=>{y(window.innerWidth);function d(){y(window.innerWidth)}return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),g&&(e=(g==null?void 0:g.allPageRows)||e,o=g.allRows||o);const h=T===A?s:t,{onChange:v,...R}=h(),f=i||R.disabled,C=((S=c==null?void 0:c[0])==null?void 0:S.sticky)==="left"&&l;return w.createElement("th",{scope:"col",className:P(`${E}__select-all-toggle-on`,{[`${E}__select-all-sticky-left`]:C&&(q??0)>671})},w.createElement("span",null,w.createElement(B,{...R,name:`${r}-select-all-checkbox-name`,onClick:d=>{v==null||v(d)},disabled:f,id:`${r}-select-all-checkbox-id`,labelText:o,hideLabel:!0})),w.createElement(N,{renderIcon:d=>w.createElement(_,{size:16,...d}),size:"sm","aria-label":o,menuOptionsClass:`${E}__select-all-toggle-overflow`},w.createElement(H,{itemText:e,requireTitle:!0,disabled:f,onClick:()=>{var d;b(A),(d=t==null?void 0:t())==null||d.onChange({target:{checked:!1}}),s().onChange({target:{checked:!0}})}}),w.createElement(H,{itemText:o,requireTitle:!0,disabled:f,onClick:()=>{b(k),t().onChange({target:{checked:!0}})}})))};D.propTypes={allPageRowsLabel:m.string,allRowsLabel:m.string,columns:m.arrayOf(m.object),getToggleAllPageRowsSelectedProps:m.func.isRequired,getToggleAllRowsSelectedProps:m.func.isRequired,isAllRowsSelected:m.bool.isRequired,isFetching:m.bool,selectAllToggle:m.object,tableId:m.string.isRequired,withStickyColumn:m.bool};D.__docgenInfo={description:"",methods:[],displayName:"SelectAllWithToggle",props:{withVirtualScroll:{required:!1,tsType:{name:"boolean"},description:""},DatagridPagination:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},isFetching:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},tableId:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},filterProps:{required:!1,tsType:{name:"FilterFlyoutProps"},description:""},state:{required:!0,tsType:{name:"DataGridTableState"},description:""},getFilterFlyoutProps:{required:!1,tsType:{name:"signature",type:"function",raw:"() => FilterFlyoutProps",signature:{arguments:[],return:{name:"FilterFlyoutProps"}}},description:""},DatagridActions:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},CustomizeColumnsTearsheet:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},fullHeightDatagrid:{required:!1,tsType:{name:"boolean"},description:""},variableRowHeight:{required:!1,tsType:{name:"boolean"},description:""},useDenseHeader:{required:!1,tsType:{name:"boolean"},description:""},withInlineEdit:{required:!1,tsType:{name:"boolean"},description:""},verticalAlign:{required:!1,tsType:{name:"string"},description:""},gridTitle:{required:!1,tsType:{name:"ReactNode"},description:""},gridDescription:{required:!1,tsType:{name:"ReactNode"},description:""},gridRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},description:""},DatagridBatchActions:{required:!1,tsType:{name:"signature",type:"function",raw:"(args) => ReactNode",signature:{arguments:[{name:"args"}],return:{name:"ReactNode"}}},description:""},batchActions:{required:!1,tsType:{name:"boolean"},description:""},row:{required:!0,tsType:{name:"DatagridRow"},description:""},rows:{required:!0,tsType:{name:"Array",elements:[{name:"DatagridRow",elements:[{name:"any"}],raw:"DatagridRow<any>"}],raw:"Array<DatagridRow<any>>"},description:""},rowActions:{required:!1,tsType:{name:"Array",elements:[{name:"RowAction"}],raw:"RowAction[]"},description:""},columns:{required:!1,tsType:{name:"Array",elements:[{name:"DatagridColumn"}],raw:"Array<DatagridColumn>"},description:"",type:{name:"arrayOf",value:{name:"object"}}},key:{required:!1,tsType:{name:"any"},description:""},rowSize:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:""},headers:{required:!1,tsType:{name:"Array",elements:[{name:"DataGridHeader",elements:[{name:"T"}],raw:"DataGridHeader<T>"}],raw:"Array<DataGridHeader<T>>"},description:""},headRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},description:""},HeaderRow:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  state?: object,
  ref?: MutableRefObject<HTMLDivElement>,
  group?: HeaderGroup<any>
) => ReactNode`,signature:{arguments:[{type:{name:"object"},name:"state"},{type:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},name:"ref"},{type:{name:"HeaderGroup",elements:[{name:"any"}],raw:"HeaderGroup<any>"},name:"group"}],return:{name:"ReactNode"}}},description:""},withStickyColumn:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},emptyStateTitle:{required:!1,tsType:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}]},description:""},emptyStateDescription:{required:!1,tsType:{name:"string"},description:""},emptyStateSize:{required:!1,tsType:{name:"union",raw:"'lg' | 'sm'",elements:[{name:"literal",value:"'lg'"},{name:"literal",value:"'sm'"}]},description:""},emptyStateType:{required:!1,tsType:{name:"string"},description:""},illustrationTheme:{required:!1,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:""},emptyStateAction:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  kind?: 'primary' | 'secondary' | 'tertiary';
  renderIcon?: CarbonIconType;
  onClick?: ButtonProps<React.ElementType>['onClick'];
  text?: string;
}`,signature:{properties:[{key:"kind",value:{name:"union",raw:"'primary' | 'secondary' | 'tertiary'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'tertiary'"}],required:!1}},{key:"renderIcon",value:{name:"CarbonIconType",required:!1}},{key:"onClick",value:{name:"ButtonProps['onClick']",raw:"ButtonProps<React.ElementType>['onClick']",required:!1}},{key:"text",value:{name:"string",required:!1}}]}},description:""},emptyStateLink:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  text?: string | ReactNode;
  href?: string;
}`,signature:{properties:[{key:"text",value:{name:"union",raw:"string | ReactNode",elements:[{name:"string"},{name:"ReactNode"}],required:!1}},{key:"href",value:{name:"string",required:!1}}]}},description:""},isTableSortable:{required:!1,tsType:{name:"boolean"},description:""},resizerAriaLabel:{required:!1,tsType:{name:"string"},description:""},onColResizeEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},withNestedRows:{required:!1,tsType:{name:"boolean"},description:""},withExpandedRows:{required:!1,tsType:{name:"boolean"},description:""},withMouseHover:{required:!1,tsType:{name:"boolean"},description:""},setMouseOverRowIndex:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg: any) => void",signature:{arguments:[{type:{name:"any"},name:"arg"}],return:{name:"void"}}},description:""},hideSelectAll:{required:!1,tsType:{name:"boolean"},description:""},radio:{required:!1,tsType:{name:"boolean"},description:""},onAllRowSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(rows: DatagridRow[], evt: any) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"DatagridRow"}],raw:"DatagridRow[]"},name:"rows"},{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},selectAllToggle:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  onSelectAllRows?: (args) => void;
  labels?: Labels;
}`,signature:{properties:[{key:"onSelectAllRows",value:{name:"signature",type:"function",raw:"(args) => void",signature:{arguments:[{name:"args"}],return:{name:"void"}},required:!1}},{key:"labels",value:{name:"Labels",required:!1}}]}},description:"",type:{name:"object"}},allPageRowsLabel:{required:!1,tsType:{name:"union",raw:"string | object",elements:[{name:"string"},{name:"object"}]},description:"",defaultValue:{value:"'Select all on page'",computed:!1},type:{name:"string"}},allRowsLabel:{required:!1,tsType:{name:"union",raw:"string | object",elements:[{name:"string"},{name:"object"}]},description:"",defaultValue:{value:"'Select all'",computed:!1},type:{name:"string"}},onSelectAllRows:{required:!1,tsType:{name:"signature",type:"function",raw:"(val?: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"val"}],return:{name:"void"}}},description:""},toolbarBatchActions:{required:!1,tsType:{name:"Array",elements:[{name:"ButtonProps",elements:[{name:"ReactElementType",raw:"React.ElementType"}],raw:"ButtonProps<React.ElementType>"}],raw:"ButtonProps<React.ElementType>[]"},description:""},setGlobalFilter:{required:!1,tsType:{name:"signature",type:"function",raw:"(filterValue: FilterValue) => void",signature:{arguments:[{type:{name:"FilterValue"},name:"filterValue"}],return:{name:"void"}}},description:""},batchActionMenuButtonLabel:{required:!1,tsType:{name:"string"},description:""},translateWithIdBatchActions:{required:!1,tsType:{name:"TableBatchActionsProps['translateWithId']",raw:"TableBatchActionsProps['translateWithId']"},description:""},toolbarBatchActionsDisplayMin:{required:!1,tsType:{name:"number"},description:""},onScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt?: any) => void",signature:{arguments:[{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},innerListRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"HTMLDivElement"}],raw:"MutableRefObject<HTMLDivElement>"},description:""},tableHeight:{required:!1,tsType:{name:"number"},description:""},virtualHeight:{required:!1,tsType:{name:"number"},description:""},listRef:{required:!1,tsType:{name:"MutableRefObject",elements:[{name:"any"}],raw:"MutableRefObject<any>"},description:""},handleResize:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onVirtualScroll:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt?: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"evt"}],return:{name:"void"}}},description:""},fetchMoreData:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loadMoreThreshold:{required:!1,tsType:{name:"number"},description:""},expandedRowIds:{required:!1,tsType:{name:"object"},description:""},onRowClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(row, event) => void",signature:{arguments:[{name:"row"},{name:"event"}],return:{name:"void"}}},description:""},onSort:{required:!1,tsType:{name:"boolean"},description:""},customizeColumnsProps:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  onSaveColumnPrefs?: (args) => void;
  labels?: ColumnLabels;
  isTearsheetOpen?: boolean;
  setIsTearsheetOpen?: (args: boolean) => void;
}`,signature:{properties:[{key:"onSaveColumnPrefs",value:{name:"signature",type:"function",raw:"(args) => void",signature:{arguments:[{name:"args"}],return:{name:"void"}},required:!1}},{key:"labels",value:{name:"ColumnLabels",required:!1}},{key:"isTearsheetOpen",value:{name:"boolean",required:!1}},{key:"setIsTearsheetOpen",value:{name:"signature",type:"function",raw:"(args: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"args"}],return:{name:"void"}},required:!1}}]}},description:""},CustomizeColumnsButton:{required:!1,tsType:{name:"signature",type:"function",raw:"(args: any) => ReactNode",signature:{arguments:[{type:{name:"any"},name:"args"}],return:{name:"ReactNode"}}},description:""},column:{required:!1,tsType:{name:"DatagridColumn"},description:""},expandedContentHeight:{required:!1,tsType:{name:"number"},description:""},onRowExpand:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  row: DatagridRow,
  event: React.MouseEvent<HTMLElement>
) => void`,signature:{arguments:[{type:{name:"DatagridRow"},name:"row"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLElement>",elements:[{name:"HTMLElement"}]},name:"event"}],return:{name:"void"}}},description:""},ExpandedRowContentComponent:{required:!1,tsType:{name:"JSXElementConstructor",elements:[{name:"any"}],raw:"JSXElementConstructor<any>"},description:""},getAsyncSubRows:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: DatagridRow) => void",signature:{arguments:[{type:{name:"DatagridRow"},name:"row"}],return:{name:"void"}}},description:""},enableSpacerColumn:{required:!1,tsType:{name:"boolean"},description:""},getToggleAllPageRowsSelectedProps:{description:"",type:{name:"func"},required:!0},getToggleAllRowsSelectedProps:{description:"",type:{name:"func"},required:!0},isAllRowsSelected:{description:"",type:{name:"bool"},required:!0}},composes:["TableCommonProps","Partial","Omit","UseRowSelectInstanceProps"]};const M=`${O.prefix}--datagrid__select-all`,le=r=>{J(r),X(r)},J=r=>{const i=n=>{const{headers:a,DatagridPagination:s}=n,t=a==null?void 0:a.map(e=>(e.id===L&&s&&Object.assign(e,{Header:U}),e));Object.assign(n,{headers:t})};r.useInstance.push(i)},X=r=>{const[i,n]=u.useState(0);V(()=>{n(window.innerWidth);function a(){n(window.innerWidth)}return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),r.getCellProps.push((a,s)=>{var p;const{column:t}=s.cell,{DatagridPagination:e,columns:o,withStickyColumn:c}=s.instance,l=((p=o[0])==null?void 0:p.sticky)==="left"&&c;return t.id===L&&e?[a,{className:P(`${M}-toggle-on`,{[`${M}-sticky-left`]:l&&i>671})}]:[a]})},U=r=>{const{tableId:i,isFetching:n,selectAllToggle:a,getToggleAllPageRowsSelectedProps:s,getToggleAllRowsSelectedProps:t,isAllRowsSelected:e,withStickyColumn:o,columns:c}=r,l={tableId:i,isFetching:n,selectAllToggle:a,getToggleAllPageRowsSelectedProps:s,getToggleAllRowsSelectedProps:t,isAllRowsSelected:e,withStickyColumn:o,columns:c};return w.createElement(D,{...l})},ue=(r,i,n)=>{const e=Math.max(...r.map(o=>(`${o[i]}`||"").length),n.length);return e<=3?58:Math.min(400,e*10+16)};export{le as a,ue as g,oe as u};
