import{b as R,d as S,P as r,_ as B,X as Z,g as te,bP as d,bR as se}from"./index-CMVdkQrl.js";import{e as w,r as X}from"./index-DtHxqM--.js";import{i as $}from"./MultiSelect-gOpyhhlY.js";import{s as x,e as V,T as ae,d as oe,a as le,c as re,b as ne}from"./TableRow-gs6AMBoA.js";import{c as H}from"./events-OVwOsPzJ.js";import{c as ie,b as de,a as ce,T as pe,d as ue,e as he}from"./TableToolbar-DkHjwC8W.js";import{r as D}from"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import{T as be}from"./TableSelectRow-DUl1grNX.js";import{O as we}from"./OverflowMenuItem-CqnmCkEJ.js";import{T as ge,a as me}from"./TableToolbarSearch-DLtbHnCD.js";import{O as fe}from"./index-CrpWSFad.js";import{a as Te}from"./bucket-15-DPFZzV9q.js";const N=(n,a)=>`${n}:${a}`,_=function(n,a){var t,e;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en";return n===null&&(n=""),a===null&&(a=""),typeof n=="number"&&typeof a=="number"?n-a:typeof n=="string"&&typeof a=="string"?k(n,a,o):typeof n=="object"&&typeof a=="object"&&typeof((t=n.props)==null?void 0:t.children)=="string"&&typeof((e=a.props)==null?void 0:e.children)=="string"?k(n.props.children,a.props.children,o):k(""+n,""+a,o)},k=function(n,a){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en";return!isNaN(n)&&!isNaN(parseFloat(n))&&!isNaN(a)&&!isNaN(parseFloat(a))?n.localeCompare(a,o,{numeric:!0}):n.localeCompare(a,o)},ye=n=>{let{rowIds:a,cellsById:o,sortDirection:t,key:e,locale:s="en",sortRow:l=xe}=n;return a.slice().sort((i,p)=>{const u=o[N(i,e)],h=o[N(p,e)];return l(u&&u.value,h&&h.value,{key:e,sortDirection:t,locale:s,sortStates:x,compare:_,rowIds:[i,p]})})},xe=(n,a,o)=>{let{sortDirection:t,sortStates:e,locale:s}=o;return t===e.ASC?_(n,a,s):_(a,n,s)},Se=x.NONE,Ie=(n,a,o)=>n===a?o==="NONE"?x.ASC:o==="ASC"?x.DESC:x.NONE:x.ASC,W=(n,a,o)=>{let{key:t}=o;const{sortDirection:e,sortHeaderKey:s}=a,l=Ie(t,s,e);return J(n,a,t,l)},J=(n,a,o,t)=>{const{rowIds:e,cellsById:s,initialRowOrder:l}=a,{locale:i,sortRow:p}=n,u=t!==x.NONE?ye({rowIds:e,cellsById:s,sortDirection:t,key:o,locale:i,sortRow:p}):l;return{sortHeaderKey:o,sortDirection:t,rowIds:u}},Re=function(n,a){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{rowsById:t}=o,e=new Array(n.length),s={},l={};return n.forEach((i,p)=>{e[p]=i.id;const{id:u,isSelected:h=!1,isExpanded:b=!1,disabled:m=!1}=i;s[u]={id:u,isSelected:h,isExpanded:b,disabled:m,cells:new Array(a.length)},t&&t[i.id]!==void 0&&(s[i.id].isSelected=t[i.id].isSelected,s[i.id].isExpanded=t[i.id].isExpanded),a.forEach((f,I)=>{var T;let{key:y,slug:P,decorator:E}=f;const A=N(i.id,y);l[A]={id:A,value:i[y],isEditable:!1,isEditing:!1,isValid:!0,errors:null,hasAILabelHeader:!!(P||((T=E==null?void 0:E.type)==null?void 0:T.displayName)==="AILabel"),info:{header:y}},s[i.id].cells[I]=A})}),{rowIds:e,rowsById:s,cellsById:l}};var Ee=Re;const Ae=(n,a)=>{const{rowIds:o,rowsById:t,cellsById:e}=Ee(n.rows,n.headers,a),s={rowIds:o,rowsById:t,cellsById:e,sortDirection:a.sortDirection||Se,sortHeaderKey:a.sortHeaderKey||null,initialRowOrder:o.slice(),filterInputValue:a.filterInputValue||null,shouldShowBatchActions:a.shouldShowBatchActions||!1};if(a.sortDirection&&a.sortHeaderKey){const{rowIds:l}=J(n,s,a.sortHeaderKey,a.sortDirection);s.rowIds=l}return s.isExpandedAll=s.rowIds.every(l=>s.rowsById[l].isExpanded===!0),s};var O=Ae;const ve=(n,a,o)=>n.map(t=>({...a[t],cells:a[t].cells.map(e=>o[e])}));var j=ve;const U=n=>{let{rowIds:a,headers:o,cellsById:t,inputValue:e,getCellId:s}=n;const l=e.trim().toLowerCase();return l?a.filter(i=>o.some(p=>{let{key:u}=p;const h=s(i,u),b=t[h];return typeof b.value=="boolean"?!1:String(b.value).toLowerCase().includes(l)})):a},z=n=>{var l;let{className:a,decorator:o}=n;const t=R(),e=S({...a&&{[a]:!0},[`${t}--table-column-decorator`]:!0,[`${t}--table-column-decorator--active`]:o});let s=w.isValidElement(o)?o:null;return s&&((l=s.type)==null?void 0:l.displayName)==="AILabel"&&(s=w.cloneElement(s,{size:"mini"})),w.createElement("td",{className:e},s)};z.displayName="TableDecoratorRow";z.propTypes={className:r.string,decorator:r.node};const Q=n=>{let{["aria-controls"]:a,["aria-label"]:o,ariaLabel:t,className:e,enableExpando:s,enableToggle:l,id:i="expand",isExpanded:p,onExpand:u,expandIconDescription:h,children:b,...m}=n;const f=R(),I=S(`${f}--table-expand`,e),y=p?"collapsed":void 0;return w.createElement("th",B({scope:"col",className:I,"data-previous-value":y,id:i},m),s||l?w.createElement("button",{type:"button",className:`${f}--table-expand__button`,onClick:u,title:h,"aria-label":t||o,"aria-expanded":p,"aria-controls":a},w.createElement(Z,{className:`${f}--table-expand__svg`,"aria-label":h})):null,b)};Q.propTypes={"aria-controls":r.string,"aria-label":r.string,ariaLabel:r.string,children:r.node,className:r.string,enableExpando:te(r.bool),enableToggle:r.bool,expandIconDescription:r.string,id:r.string,isExpanded:D("enableToggle",r.bool),onExpand:r.oneOfType([D("enableExpando",r.func),D("enableToggle",r.func)])};const K=w.forwardRef((n,a)=>{let{["aria-controls"]:o,["aria-label"]:t,ariaLabel:e,className:s,children:l,isExpanded:i,onExpand:p,expandIconDescription:u,isSelected:h,expandHeader:b="expand",...m}=n;const f=R();let I;const y=w.Children.toArray(l).map(T=>{var v,C,M;if(((v=T.type)==null?void 0:v.displayName)==="TableSlugRow"||((C=T.type)==null?void 0:C.displayName)==="TableDecoratorRow")return(T.props.slug||((M=T.props.decorator)==null?void 0:M.type.displayName)==="AILabel")&&(I=!0),T}),P=w.Children.toArray(l).map(T=>{var v,C;if(((v=T.type)==null?void 0:v.displayName)!=="TableSlugRow"&&((C=T.type)==null?void 0:C.displayName)!=="TableDecoratorRow")return T}),E=S({[`${f}--parent-row`]:!0,[`${f}--expandable-row`]:i,[`${f}--data-table--selected`]:h,[`${f}--data-table--slug-row ${f}--data-table--ai-label-row`]:I},s),A=i?"collapsed":void 0;return w.createElement("tr",B({},m,{ref:a,className:E,"data-parent-row":!0}),y,w.createElement(V,{className:`${f}--table-expand`,"data-previous-value":A,headers:b},w.createElement("button",{type:"button",className:`${f}--table-expand__button`,onClick:p,title:u,"aria-label":e||t,"aria-expanded":i,"aria-controls":o},w.createElement(Z,{className:`${f}--table-expand__svg`,"aria-label":u}))),P)});K.propTypes={"aria-controls":r.string,"aria-label":r.string,ariaLabel:r.string,children:r.node,className:r.string,expandHeader:r.string,expandIconDescription:r.string,isExpanded:r.bool,isSelected:r.bool,onExpand:r.func.isRequired};K.displayName="TableExpandRow";const Y=n=>{let{className:a,children:o,colSpan:t,...e}=n;const s=X.useRef(null),l=R(),i=S(`${l}--expandable-row`,a),p=u=>{if(s&&s.current&&s.current.previousElementSibling){const h=s.current.previousElementSibling;u==="enter"?h.classList.add(`${l}--expandable-row--hover`):h.classList.remove(`${l}--expandable-row--hover`)}};return w.createElement("tr",B({ref:s,onMouseEnter:()=>p("enter"),onMouseLeave:()=>p("leave")},e,{className:i,"data-child-row":!0}),w.createElement(V,{colSpan:t},w.createElement("div",{className:`${l}--child-row-inner-container`},o)))};Y.propTypes={children:r.node,className:r.string,colSpan:r.number.isRequired};const G={};function Ce(n,a){return G[n]||(G[n]=!0),n}const q=n=>{let{className:a,slug:o}=n;X.useEffect(()=>{Ce("TableSlugRow")},[]);const t=R(),e=S({...a&&{[a]:!0},[`${t}--table-column-slug`]:!0,[`${t}--table-column-slug--active`]:o});let s;return o&&(s=w.cloneElement(o,{size:"mini"})),w.createElement("td",{className:e},s)};q.displayName="TableSlugRow";q.propTypes={className:r.string,slug:r.node};const F=w.forwardRef((n,a)=>{let{children:o,...t}=n;return w.createElement(we,B({ref:a,itemText:o},t))});F.displayName="TableToolbarAction";F.propTypes={children:r.node,className:r.string,onClick:r.func.isRequired};const Ne="Settings",ee=n=>{let{className:a,renderIcon:o=Te,iconDescription:t=Ne,children:e,menuOptionsClass:s,...l}=n;const i=R(),p=S(a,`${i}--toolbar-action ${i}--overflow-menu`),u=S(s,`${i}--toolbar-action__menu`);return w.createElement(fe,B({"aria-label":t,renderIcon:o,className:p,title:t,iconDescription:t,menuOptionsClass:u,flipped:!0},l),e)};ee.propTypes={children:r.node.isRequired,className:r.string,iconDescription:r.string,menuOptionsClass:r.string,renderIcon:r.oneOfType([r.func,r.object])};const Be=se(),g={expandRow:"carbon.table.row.expand",collapseRow:"carbon.table.row.collapse",expandAll:"carbon.table.all.expand",collapseAll:"carbon.table.all.collapse",selectAll:"carbon.table.all.select",unselectAll:"carbon.table.all.unselect",selectRow:"carbon.table.row.select",unselectRow:"carbon.table.row.unselect"},He={[g.expandAll]:"Expand all rows",[g.collapseAll]:"Collapse all rows",[g.expandRow]:"Expand current row",[g.collapseRow]:"Collapse current row",[g.selectAll]:"Select all rows",[g.unselectAll]:"Unselect all rows",[g.selectRow]:"Select row",[g.unselectRow]:"Unselect row"},L=n=>He[n];class c extends w.Component{constructor(a){var o;super(a),o=this,d(this,"instanceId",void 0),d(this,"getHeaderProps",t=>{let{header:e,onClick:s,isSortable:l=this.props.isSortable,...i}=t;const{sortDirection:p,sortHeaderKey:u}=this.state;return{...i,key:e.key,sortDirection:p,isSortable:l,isSortHeader:u===e.key,slug:e.slug,decorator:e.decorator,onClick:h=>{const b=W(this.props,this.state,{key:e.key});this.setState(b,()=>{s&&this.handleOnHeaderClick(s,{sortHeaderKey:e.key,sortDirection:b.sortDirection})(h)})}}}),d(this,"getExpandHeaderProps",function(){let{onClick:t,onExpand:e,...s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{translateWithId:l=L}=o.props,{isExpandedAll:i,rowIds:p,rowsById:u}=o.state,h=i||p.every(m=>u[m].isExpanded),b=h?g.collapseAll:g.expandAll;return{...s,"aria-label":l(b),"aria-controls":p.map(m=>`expanded-row-${m}`).join(" "),isExpanded:h,onExpand:H([o.handleOnExpandAll,e,t&&o.handleOnExpandHeaderClick(t,{isExpanded:h})])}}),d(this,"handleOnHeaderClick",(t,e)=>s=>t(s,e)),d(this,"handleOnExpandHeaderClick",(t,e)=>s=>t(s,e)),d(this,"getRowProps",t=>{let{row:e,onClick:s,...l}=t;const{translateWithId:i=L}=this.props,p=e.isExpanded?g.collapseRow:g.expandRow;return{...l,key:e.id,onExpand:H([this.handleOnExpandRow(e.id),s]),isExpanded:e.isExpanded,"aria-label":i(p),"aria-controls":`expanded-row-${e.id}`,isSelected:e.isSelected,disabled:e.disabled}}),d(this,"getExpandedRowProps",t=>{let{row:e,...s}=t;return{...s,id:`expanded-row-${e.id}`}}),d(this,"getSelectionProps",function(){let{onClick:t,row:e,...s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{translateWithId:l=L}=o.props;if(e){const m=e.isSelected?g.unselectRow:g.selectRow;return{...s,checked:e.isSelected,onSelect:H([o.handleOnSelectRow(e.id),t]),id:`${o.getTablePrefix()}__select-row-${e.id}`,name:`select-row-${o.instanceId}`,"aria-label":l(m),disabled:e.disabled,radio:o.props.radio}}const i=o.state.rowIds.length,p=o.getSelectedRows().length,u=i>0&&p===i,h=i>0&&p>0&&p!==i,b=u||h?g.unselectAll:g.selectAll;return{...s,"aria-label":l(b),checked:u,id:`${o.getTablePrefix()}__select-all`,indeterminate:h,name:`select-all-${o.instanceId}`,onSelect:H([o.handleSelectAll,t])}}),d(this,"getToolbarProps",function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{size:e}=o.props;return{...t,size:e==="xs"||e==="sm"?"sm":void 0}}),d(this,"getBatchActionProps",function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{shouldShowBatchActions:e}=o.state,s=o.getSelectedRows().length;return{onSelectAll:void 0,totalCount:o.state.rowIds.length||0,...t,shouldShowBatchActions:e&&s>0,totalSelected:s,onCancel:o.handleOnCancel}}),d(this,"getTableProps",()=>{const{useZebraStyles:t,size:e="lg",isSortable:s,useStaticWidth:l,stickyHeader:i,overflowMenuOnHover:p=!1,experimentalAutoAlign:u}=this.props;return{useZebraStyles:t,size:e,isSortable:s,useStaticWidth:l,stickyHeader:i,overflowMenuOnHover:p,experimentalAutoAlign:u}}),d(this,"getTableContainerProps",()=>{const{stickyHeader:t,useStaticWidth:e}=this.props;return{stickyHeader:t,useStaticWidth:e}}),d(this,"getCellProps",t=>{let{cell:e,...s}=t;return{...s,hasAILabelHeader:e.hasAILabelHeader,hasDecoratorHeader:e.hasDecoratorHeader}}),d(this,"getSelectedRows",()=>this.state.rowIds.filter(t=>{const e=this.state.rowsById[t];return e.isSelected&&!e.disabled})),d(this,"getFilteredRowIds",()=>{const{filterRows:t=U}=this.props,e=typeof this.state.filterInputValue=="string"?t({rowIds:this.state.rowIds,headers:this.props.headers,cellsById:this.state.cellsById,inputValue:this.state.filterInputValue,getCellId:N}):this.state.rowIds;return e.length==0?[]:e}),d(this,"getTablePrefix",()=>`data-table-${this.instanceId}`),d(this,"setAllSelectedState",(t,e,s)=>{const{rowIds:l}=t,i=l.length!=s.length;return{rowsById:l.reduce((p,u)=>{const h={...t.rowsById[u]};return!h.disabled&&(!i||s.includes(u))&&(h.isSelected=e),p[u]=h,p},{})}}),d(this,"handleOnCancel",()=>{this.setState(t=>({shouldShowBatchActions:!1,...this.setAllSelectedState(t,!1,this.getFilteredRowIds())}))}),d(this,"handleSelectAll",()=>{this.setState(t=>{const e=this.getFilteredRowIds(),{rowsById:s}=t,l=!(Object.values(s).filter(i=>i.isSelected&&!i.disabled).length>0);return{shouldShowBatchActions:l,...this.setAllSelectedState(t,l,e)}})}),d(this,"handleOnSelectRow",t=>()=>{this.setState(e=>{const s=e.rowsById[t];if(this.props.radio)return{shouldShowBatchActions:!1,rowsById:{...Object.entries(e.rowsById).reduce((u,h)=>{const[b,m]=h;return m.isSelected=!1,u[b]=m,u},{}),[t]:{...s,isSelected:!s.isSelected}}};const l=e.rowIds.filter(p=>e.rowsById[p].isSelected).length,i=s.isSelected?l-1:l+1;return{shouldShowBatchActions:!s.isSelected||i>0,rowsById:{...e.rowsById,[t]:{...s,isSelected:!s.isSelected}}}})}),d(this,"handleOnExpandRow",t=>()=>{this.setState(e=>{const s=e.rowsById[t],{isExpandedAll:l}=e;return{isExpandedAll:s.isExpanded?!1:l,rowsById:{...e.rowsById,[t]:{...s,isExpanded:!s.isExpanded}}}})}),d(this,"handleOnExpandAll",()=>{this.setState(t=>{const{rowIds:e,isExpandedAll:s}=t;return{isExpandedAll:!s,rowsById:e.reduce((l,i)=>({...l,[i]:{...t.rowsById[i],isExpanded:!s}}),{})}})}),d(this,"handleSortBy",t=>()=>{this.setState(e=>W(this.props,e,{key:t}))}),d(this,"handleOnInputValueChange",(t,e)=>{t.target&&this.setState({filterInputValue:t.target.value}),e&&this.setState({filterInputValue:e})}),this.state={...O(a,{}),isExpandedAll:!1},this.instanceId=Be()}shouldComponentUpdate(a){if(this.props!==a){const o=a.rows.map(l=>l.id),t=this.props.rows.map(l=>l.id);if(!$(o,t))return this.setState(l=>O(this.props,l)),!1;const e=a.headers.map(l=>l.key),s=this.props.headers.map(l=>l.key);if(!$(e,s))return this.setState(l=>O(this.props,l)),!1;if(!$(a.rows,this.props.rows))return this.setState(l=>O(this.props,l)),!1}return!0}render(){const{children:a,filterRows:o=U,headers:t,render:e}=this.props,{filterInputValue:s,rowIds:l,rowsById:i,cellsById:p}=this.state,u=typeof s=="string"?o({rowIds:l,headers:t,cellsById:p,inputValue:s,getCellId:N}):l,h={rows:j(u,i,p),headers:this.props.headers,selectedRows:j(this.getSelectedRows(),i,p),getHeaderProps:this.getHeaderProps,getExpandHeaderProps:this.getExpandHeaderProps,getRowProps:this.getRowProps,getExpandedRowProps:this.getExpandedRowProps,getSelectionProps:this.getSelectionProps,getToolbarProps:this.getToolbarProps,getBatchActionProps:this.getBatchActionProps,getTableProps:this.getTableProps,getTableContainerProps:this.getTableContainerProps,getCellProps:this.getCellProps,onInputChange:this.handleOnInputValueChange,sortBy:b=>this.handleSortBy(b)(),selectAll:this.handleSelectAll,selectRow:b=>this.handleOnSelectRow(b)(),expandRow:b=>this.handleOnExpandRow(b)(),expandAll:this.handleOnExpandAll,radio:this.props.radio};return e!==void 0?e(h):a!==void 0?a(h):null}}d(c,"propTypes",{experimentalAutoAlign:r.bool,filterRows:r.func,headers:r.arrayOf(r.shape({key:r.string.isRequired,header:r.node.isRequired})).isRequired,isSortable:r.bool,locale:r.string,overflowMenuOnHover:r.bool,radio:r.bool,rows:r.arrayOf(r.shape({id:r.string.isRequired,disabled:r.bool,isSelected:r.bool,isExpanded:r.bool})).isRequired,size:r.oneOf(["xs","sm","md","lg","xl"]),sortRow:r.func,stickyHeader:r.bool,translateWithId:r.func,useStaticWidth:r.bool,useZebraStyles:r.bool});d(c,"translationKeys",Object.values(g));d(c,"Table",void 0);d(c,"TableActionList",void 0);d(c,"TableBatchAction",void 0);d(c,"TableBatchActions",void 0);d(c,"TableBody",void 0);d(c,"TableCell",void 0);d(c,"TableContainer",void 0);d(c,"TableDecoratorRow",void 0);d(c,"TableExpandHeader",void 0);d(c,"TableExpandRow",void 0);d(c,"TableExpandedRow",void 0);d(c,"TableHead",void 0);d(c,"TableHeader",void 0);d(c,"TableRow",void 0);d(c,"TableSelectAll",void 0);d(c,"TableSelectRow",void 0);d(c,"TableSlugRow",void 0);d(c,"TableToolbar",void 0);d(c,"TableToolbarAction",void 0);d(c,"TableToolbarContent",void 0);d(c,"TableToolbarSearch",void 0);d(c,"TableToolbarMenu",void 0);c.Table=ae;c.TableActionList=ie;c.TableBatchAction=de;c.TableBatchActions=ce;c.TableBody=oe;c.TableCell=V;c.TableContainer=pe;c.TableDecoratorRow=z;c.TableExpandHeader=Q;c.TableExpandRow=K;c.TableExpandedRow=Y;c.TableHead=le;c.TableHeader=re;c.TableRow=ne;c.TableSelectAll=ue;c.TableSelectRow=be;c.TableSlugRow=q;c.TableToolbar=he;c.TableToolbarAction=F;c.TableToolbarContent=ge;c.TableToolbarSearch=me;c.TableToolbarMenu=ee;export{c as D,z as T,Q as a,K as b,Y as c,q as d,F as e,ee as f};
