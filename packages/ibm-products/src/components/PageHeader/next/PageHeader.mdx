import { Story, ArgTypes, Canvas, Meta } from '@storybook/addon-docs/blocks';
import * as PageHeaderStories from './PageHeader.stories';
import { stackblitzPrefillConfig } from '../../../../previewer/codePreviewer';

<Meta isTemplate />

# PageHeader

## Table of Contents

- [Overview](#overview)
- [PageHeader.BreadcrumbBar](#pageheaderbreadcrumbbar)
- [PageHeader.Content](#pageheadercontent)
  - [PageHeader.Content with hero image](#pageheadercontent-with-hero-image)
- [PageHeader.TabsBar](#pageheadertabsbar)
  - [PageHeader.TabsBar with Tags](#pageheadertabsbar-with-tags)

## Overview

The `PageHeader` is a large family of components, composed of three zones; the
Breadcrumb, Content, and Tabs.

export const customFunctionArr = [
  `const BreadcrumbBeeIcon = () => <Bee size={16} />;`,
  `const pageActionButtonItems = [
  {
    // props used for both collapse menu item and non-collapsed action form
    id: 'action1',
    onClick: () => console.log('Action 1'),
    // component to render when non-collapsed
    body: (
      <Button
        renderIcon={AiGenerate}
        iconDescription="Icon Description 1"
        hasIconOnly
        size="md"
        kind="ghost"
      />
    ),
    // props to pass to the corresponding collapsed menu item
    menuItem: {
      label: 'action 1',
    },
  },
  {
    id: 'action2',
    onClick: () => console.log('Action 2'),
    body: (
      <Button
        renderIcon={Activity}
        iconDescription="Icon Description 2"
        hasIconOnly
        size="md"
        kind="ghost"
      />
    ),
    menuItem: {
      label: 'action 2',
    },
  },
  {
    id: 'action3',
    onClick: () => console.log('Action 3'),
    body: (
      <Button
        renderIcon={Activity}
        iconDescription="Icon Description 3"
        hasIconOnly
        size="md"
        kind="ghost"
      />
    ),
    menuItem: {
      label: 'action 3',
    },
  },
  {
    id: 'action4',
    onClick: () => console.log('Action 4'),
    body: (
      <Button
        renderIcon={Activity}
        iconDescription="Icon Description 4"
        hasIconOnly
        size="md"
        kind="ghost"
      />
    ),
    menuItem: {
      label: 'action 4',
    },
  },
  {
    id: 'primary-action',
    onClick: () => console.log('Primary action'),
    body: (
      <Button kind="primary" renderIcon={Add} size="md">
        Primary action
      </Button>
    ),
    menuItem: {
      label: 'Primary action',
    },
  },
];`,
  `const breadcrumbPageActions = (
    <>
      <Button
        renderIcon={Activity}
        iconDescription="Icon Description 1"
        hasIconOnly
        size="md"
        kind="ghost"
      />
      <Button
        renderIcon={AiGenerate}
        iconDescription="Icon Description 2"
        hasIconOnly
        size="md"
        kind="ghost"
      />
      <Button
        renderIcon={CloudFoundry_1}
        iconDescription="Icon Description 3"
        hasIconOnly
        size="md"
        kind="ghost"
      />
    </>
  );`,
];

<Canvas
  className="page-header--docs-demo" 
  of={PageHeaderStories.Default}
  additionalActions={[
    {
      title: 'Open in Stackblitz',
      onClick: () =>
        stackblitzPrefillConfig({
          story: PageHeaderStories.Default,
          status: {
            preview: ['PageHeader']
          },
          customFunctionDefs: customFunctionArr,
          customImports: [
            `import { Add, Bee, CloudFoundry_1 } from '@carbon/react/icons';`,
          ],
          styles: PageHeaderStories.default.parameters.styles,
        }),
    },
  ]}

/>

## PageHeader.BreadcrumbBar

The `PageHeader.BreadcrumbBar` component is used to render the breadcrumb
navigation area within the `PageHeader`. It accepts `Breadcrumb`,
`BreadcrumbItem`, and `PageHeader.TitleBreadcrumb` components as children to
define the breadcrumb trail. Additionally, it accepts `contentActions`
and` pageActions` props, allowing for actions, such as `Button` or `IconButton`
â€” alongside the breadcrumb content.

```jsx
import { Bee, Activity } from '@carbon/icons-react';

const BeeIcon = () => <Bee size={16} />;

const pageActions = (
  <Button
    renderIcon={Activity}
    iconDescription="Icon Description 1"
    hasIconOnly
    size="md"
    kind="ghost"
  />
);

const contentActions = <Button size="md">Button</Button>;

return (
  <PageHeader.Root>
    <PageHeader.BreadcrumbBar
      renderIcon={BeeIcon}
      contentActions={contentActions}
      pageActions={pageActions}
    >
      <Breadcrumb>
        <BreadcrumbItem href="/#">Breadcrumb 1</BreadcrumbItem>
        <BreadcrumbItem href="#">Breadcrumb 2</BreadcrumbItem>
        <PageHeader.TitleBreadcrumb>Title</PageHeader.TitleBreadcrumb>
      </Breadcrumb>
    </PageHeader.BreadcrumbBar>
    ...
  </PageHeader.Root>
);
```

## PageHeader.Content

<Canvas
  className="page-header--docs-demo"
  of={PageHeaderStories.ContentWithContextualActionsAndPageActions}
  additionalActions={[
    {
      title: 'Open in Stackblitz',
      onClick: () =>
        stackblitzPrefillConfig({
          story: PageHeaderStories.ContentWithContextualActionsAndPageActions,
          status: {
            preview: ['PageHeader'],
          },
          customFunctionDefs: customFunctionArr,
          customImports: [
            `import { Add, AiGenerate, Activity, Bee, CloudFoundry_1 } from '@carbon/react/icons';`,
            `import { Button } from '@carbon/react';`,
          ],
          styles: PageHeaderStories.default.parameters.styles,
        }),
    },
  ]}
/>

The `PageHeader.Content` component defines the primary content area of the
`PageHeader`, including the title, subtitle, and any supporting text or
contextual actions. It accepts a `title` prop to display the main heading and
can optionally include a `renderIcon` prop to show an icon adjacent to the
title. Child components such as `PageHeader.ContentText` can be used to provide
additional descriptive text. To support use cases such as tags,
`contextualActions` can be passed as a prop to render components beside the
content. `pageActions` allows integration of action buttons aligned with the
content section.

The `PageHeader.ContentPageActions` component provides responsive behavior by
collapsing actions into a `MenuButton` when the viewport width is reduced. To
enable this functionality, it expects an array of action objects with a specific
API shape, as demonstrated below:

```jsx

const actionItems = [
  {
    // props used for both collapse menu item and non-collapsed action form
    id: 'action1',
    onClick: () => console.log(`Action 1`),
    // component to render when non-collapsed
    body: (
      <Button
        renderIcon={AiGenerate}
        iconDescription="Icon Description 1"
        hasIconOnly
        size="md"
        kind="ghost"
      />
    ),
    // props to pass to the corresponding collapsed menu item
    menuItem: {
      label: 'action 1',
    },
  },
  ...
];

return (
  <PageHeader.Root>
   ...
    <PageHeader.Content
      title="Title text"
      contextualActions={
        <>
          <Tag className="tag" type="blue" size="lg">
            Tag
          </Tag>
        </>
      }
      pageActions={
        <PageHeader.ContentPageActions
          menuButtonLabel="Actions"
          actions={actionItems}></PageHeader.ContentPageActions>
      }>
      <PageHeader.ContentText subtitle="Subtitle">
        Built for modern teams, our technology platform simplifies complexity
        with powerful APIs, real-time collaboration tools, and seamless
        integration. From deployment to monitoring, we help you ship faster,
        scale efficiently, and stay in control every step of the way.
      </PageHeader.ContentText>
    </PageHeader.Content>
  </PageHeader.Root>
)
```

### PageHeader.Content With Hero Image

<Canvas
  className="page-header--docs-demo"
  of={PageHeaderStories.ContentWithHeroImage}
  additionalActions={[
    {
      title: 'Open in Stackblitz',
      onClick: () =>
        stackblitzPrefillConfig({
          story: PageHeaderStories.ContentWithHeroImage,
          status: {
            preview: ['PageHeader'],
          },
          customFunctionDefs: [
            `const BreadcrumbBeeIcon = () => <Bee size={16} />;`,
            `const image1 = 'https://placehold.co/600x400';`,
            `const image2 = 'https://placehold.co/600x400';`,
          ],
          customImports: [
            `import { Button } from '@carbon/react';`,
            `import { breakpoints } from '@carbon/layout';`,
            `import { Bee } from '@carbon/react/icons';`,
          ],
          styles: PageHeaderStories.default.parameters.styles,
        }),
    },
  ]}
/>

When including a hero image within the `PageHeader`, the `Grid` and `Column`
components will need to be utilized in order to define the layout correctly.

```jsx
import { Grid, Column } from '@carbon/react';

return (
  <PageHeader.Root>
    <Grid>
      <Column lg={8} md={4} sm={4}>
        <PageHeader.BreadcrumbBar ... />
        <PageHeader.Content ... />
      </Column>
      <Column lg={8} md={4} sm={0}>
        <PageHeader.HeroImage>
          <picture>
            <source
              srcset={image1}
              media={`(min-width: ${breakpoints.lg.width})`}
            />
            <source
              srcset={image2}
              media={`(max-width: ${breakpoints.lg.width})`}
            />
            <img
              src={image1}
              alt="a default image"
              style={{ maxWidth: '100%', height: 'auto' }}
            />
          </picture>
        </PageHeader.HeroImage>
      </Column>
    </Grid>
  </PageHeader.Root>
)

```

## PageHeader.TabBar

To render the Tabs zone, utilize the `PageHeader.TabBar` component, passing in
the `TabList` and `Tab` components as its children. Then set up the `TabPanels`
and `TabPanel` components outside of the `PageHeader`, making sure to wrap all
components within the `Tabs` component to ensures proper linkage of tab and its
associated panel.

```jsx
<Tabs>
  <PageHeader.Root>
    ...
    <PageHeader.TabBar>
      <TabList>
        <Tab>Dashboard</Tab>
        <Tab>Monitoring</Tab>
        <Tab>Activity</Tab>
        <Tab>Settings</Tab>
      </TabList>
    </PageHeader.TabBar>
  </PageHeader.Root>
  <TabPanels>
    <TabPanel>Dashboard Tab Panel</TabPanel>
    <TabPanel>Monitoring Tab Panel</TabPanel>
    <TabPanel>Activity Tab Panel</TabPanel>
    <TabPanel>Settings Tab Panel</TabPanel>
  </TabPanels>
</Tabs>
```

### PageHeader.TabBar With Tags

<Canvas
  className="page-header--docs-demo"
  of={PageHeaderStories.TabBarWithTabsAndTags}
  additionalActions={[
    {
      title: 'Open in Stackblitz',
      onClick: () =>
        stackblitzPrefillConfig({
          story: PageHeaderStories.TabBarWithTabsAndTags,
          status: {
            preview: ['PageHeader'],
          },
          customFunctionDefs: [
            ...customFunctionArr,
            `const tabBarTags = [
              <Tag type="blue" id="example-tag-1" key="example-tag-1">
                Tag 1
              </Tag>,
              <Tag type="purple" id="example-tag-2" key="example-tag-2">
                Tag 2
              </Tag>,
              <Tag type="red" id="example-tag-3" key="example-tag-3">
                Tag 3
              </Tag>,
              <OperationalTag
                type="blue"
                id="example-tag-4"
                key="example-tag-4"
                text="Tag 4"
              />,
              <Tag type="purple" id="example-tag-5" key="example-tag-5">
                Tag 5
              </Tag>,
              <Tag type="red" id="example-tag-6" key="example-tag-6">
                Tag 6
              </Tag>,
            ];`,
          ],
          customImports: [
            `import { Button, Tag } from '@carbon/react';`,
            `import { Add, AiGenerate, Activity, Bee, CloudFoundry_1 } from '@carbon/react/icons';`,
          ],
          styles: PageHeaderStories.default.parameters.styles,
        }),
    },
  ]}
/>

The `PageHeader.TabsBar` component accepts a `tags` prop expecting a react node.
If you wish to handle overflowing logic on your own, you can pass any node to
this prop. You can also use the tag overflow sub component
(`PageHeader.TagOverflow`), which will handle the overflowing logic for you, yet
still remains unopinionated and composable enough to allow you to take rendering
responsibility for the overflow/operational tag and the contents within the
popover via two render props, `renderOverflowTag` and `renderPopoverContent`.

```jsx
const tags = [
  <Tag type="blue" id="example-tag-1">
    Tag 1
  </Tag>,
  <Tag type="purple" id="example-tag-2">
    Tag 2
  </Tag>,
  <Tag type="red" id="example-tag-3">
    Tag 3
  </Tag>,
  <OperationalTag type="blue" id="example-tag-4" text="Tag 4" />,
  <Tag type="purple" id="example-tag-5">
    Tag 5
  </Tag>,
  <Tag type="red" id="example-tag-6">
    Tag 6
  </Tag>,
];

return (
  <Tabs>
    <PageHeader.Root>
      <PageHeader.TabBar
        tags={
          <PageHeader.TagOverflow
            renderOverflowTag={(
              hiddenItems,
              handleOverflowClick,
              openPopover
            ) => (
              <OperationalTag
                onClick={handleOverflowClick}
                aria-expanded={openPopover}
                text={`+${hiddenItems.length}`}
              />
            )}
            renderPopoverContent={(hiddenItems) => {
              return hiddenItems.map((i, index) => {
                const foundJSXTag = tabBarTags.find((c) => c.props.id === i.id);
                return cloneElement(foundJSXTag, {
                  id: `cloned-tag-node-id-${index}`,
                  key: `cloned-tag-key-${index}`,
                });
              });
            }}
          >
            {tags}
          </PageHeader.TagOverflow>
        }
      >
        <TabList>
          <Tab>Tab 1</Tab>
          ...
        </TabList>
      </PageHeader.TabBar>
    </PageHeader.Root>
    <TabPanels>
      <TabPanel>Tab Panel 1</TabPanel>
      ...
    </TabPanels>
  </Tabs>
);
```

### PageHeader.TabBar With scroller button

To include the scroller button to expand and collapse the header, pass
`PageHeader.ScrollButton` to the `scroller` prop of the tab bar.

```jsx
<Tabs>
  <PageHeader.Root>
    <PageHeader.TabBar tags={tags} scroller={<PageHeader.ScrollButton />}>
      <TabList>
        <Tab>Tab 1</Tab>
        ...
      </TabList>
    </PageHeader.TabBar>
  </PageHeader.Root>
  <TabPanels>
    <TabPanel>Tab Panel 1</TabPanel>
    ...
  </TabPanels>
</Tabs>
```

## Component API

<ArgTypes />

## Feedback

Help us improve this component by providing feedback, asking questions on Slack,
or updating this file on
[GitHub](https://github.com/carbon-design-system/carbon/edit/main/packages/react/src/components/PageHeader/PageHeader.mdx).
