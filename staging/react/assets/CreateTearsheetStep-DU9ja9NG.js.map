{"version":3,"file":"CreateTearsheetStep-DU9ja9NG.js","sources":["../../src/global/js/hooks/useResetCreateComponent.js","../../src/components/CreateTearsheet/CreateTearsheet.tsx","../../src/components/CreateTearsheet/CreateTearsheetStep.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2021, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect } from 'react';\nimport { getNumberOfHiddenSteps } from '../utils/getNumberOfHiddenSteps';\n\n/**\n * Resets the current step of the create component if it has been closed.\n * @param {object} useResetCreateComponent - Create component that uses this custom hook\n * @param {object} useResetCreateComponent.firstIncludedStep\n * @param {object} useResetCreateComponent.previousState\n * @param {boolean} useResetCreateComponent.open\n * @param {Function} useResetCreateComponent.setCurrentStep\n * @param {object} useResetCreateComponent.stepData\n * @param {number} useResetCreateComponent.initialStep\n * @param {number} useResetCreateComponent.totalSteps\n * @param {string} useResetCreateComponent.componentName\n */\nexport const useResetCreateComponent = ({\n  firstIncludedStep,\n  previousState,\n  open,\n  setCurrentStep,\n  stepData,\n  initialStep,\n  totalSteps,\n  componentName,\n}) => {\n  useEffect(() => {\n    if (!previousState?.open && open) {\n      if (\n        initialStep &&\n        totalSteps &&\n        Number(initialStep) <= Number(totalSteps) &&\n        Number(initialStep) > 0\n      ) {\n        const numberOfHiddenSteps = getNumberOfHiddenSteps(\n          stepData,\n          initialStep\n        );\n        setCurrentStep(Number(initialStep + numberOfHiddenSteps));\n      } else {\n        // default should be fist includedStep instead of just 1\n        setCurrentStep(firstIncludedStep);\n      }\n\n      // An invalid initialStep value was provided, we'll default to rendering the first step in this scenario\n      if (\n        (initialStep &&\n          totalSteps &&\n          Number(initialStep) > Number(totalSteps)) ||\n        Number(initialStep) <= 0\n      ) {\n        console.warn(\n          `${componentName}: An invalid \\`initialStep\\` prop was supplied. The \\`initialStep\\` prop should be a number that is greater than 0 or less than or equal to the number of steps your ${componentName} has.`\n        );\n      }\n    }\n  }, [\n    firstIncludedStep,\n    open,\n    previousState,\n    setCurrentStep,\n    stepData,\n    initialStep,\n    totalSteps,\n    componentName,\n  ]);\n};\n","/**\n * Copyright IBM Corp. 2021, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  Dispatch,\n  ForwardedRef,\n  PropsWithChildren,\n  ReactNode,\n  SetStateAction,\n  createContext,\n  forwardRef,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  useCreateComponentFocus,\n  useCreateComponentStepChange,\n  usePreviousValue,\n  useResetCreateComponent,\n  useValidCreateStepCount,\n} from '../../global/js/hooks';\nimport { deprecateProp } from '../../global/js/utils/props-helper';\n\nimport { CreateInfluencer } from '../CreateInfluencer';\nimport { Form } from '@carbon/react';\nimport PropTypes from 'prop-types';\nimport { TearsheetShell } from '../Tearsheet/TearsheetShell';\nimport cx from 'classnames';\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\nimport { getNumberOfHiddenSteps } from '../../global/js/utils/getNumberOfHiddenSteps';\nimport { lastIndexInArray } from '../../global/js/utils/lastIndexInArray';\nimport { pkg } from '../../settings';\nimport { ExperimentalSecondarySubmit } from './CreateTearsheetStep';\n\nconst componentName = 'CreateTearsheet';\nconst blockClass = `${pkg.prefix}--tearsheet-create`;\n\n// This is a general context for the steps container\n// containing information about the state of the container\n// and providing some callback methods for steps to use\n\nexport interface StepsContextType {\n  currentStep: number;\n  setExperimentalSecondarySubmit: Dispatch<\n    SetStateAction<ExperimentalSecondarySubmit | undefined>\n  >;\n  setIsDisabled: Dispatch<SetStateAction<boolean>>;\n  setOnPrevious: (fn: any) => void;\n  setOnNext: (fn: any) => void;\n  setOnMount: (fn: any) => void;\n  setStepData: Dispatch<SetStateAction<Step[]>>;\n  stepData: Step[];\n}\nexport const StepsContext = createContext<StepsContextType | null>(null);\n\n// This is a context supplied separately to each step in the container\n// to let it know what number it is in the sequence of steps\nexport const StepNumberContext = createContext(-1);\n\nexport interface CreateTearsheetProps extends PropsWithChildren {\n  /**\n   * The back button text\n   */\n  backButtonText: string;\n\n  /**\n   * The cancel button text\n   */\n  cancelButtonText: string;\n\n  /**\n   * The main content of the tearsheet\n   */\n  // children?: ReactNode;\n\n  /**\n   * An optional class or classes to be added to the outermost element.\n   */\n  className?: string;\n\n  /**\n   * The experimentalSecondary submit button text\n   */\n  experimentalSecondarySubmitText?: string;\n\n  /**\n   * Optional prop that allows you to pass any component.\n   */\n  decorator?: ReactNode;\n\n  /**\n   * Specifies elements to focus on first on render.\n   */\n  firstFocusElement?: string;\n\n  /**\n   * A description of the flow, displayed in the header area of the tearsheet.\n   */\n  description?: ReactNode;\n\n  /**\n   * Specify a CSS selector that matches the DOM element that should be\n   * focused when the Modal opens.\n   */\n  selectorPrimaryFocus?: string;\n\n  /**\n   * To indicate an error occurred in the Tearsheet step\n   * Used to pass this value to TearsheetShell\n   */\n  hasError?: boolean;\n\n  /**\n   * Used to set the size of the influencer\n   */\n  influencerWidth?: 'narrow' | 'wide';\n\n  /**\n   * This can be used to open the component to a step other than the first step.\n   * For example, a create flow was previously in progress, data was saved, and\n   * is now being completed.\n   */\n  initialStep?: number;\n\n  /**\n   * A label for the tearsheet, displayed in the header area of the tearsheet\n   * to maintain context for the tearsheet (e.g. as the title changes from page\n   * to page of a multi-page task).\n   */\n  label?: ReactNode;\n\n  /**\n   * The next button text\n   */\n  nextButtonText: string;\n\n  /**\n   * An optional handler that is called when the user closes the tearsheet (by\n   * clicking the close button, if enabled, or clicking outside, if enabled).\n   * Returning `false` here prevents the modal from closing.\n   */\n  onClose?: () => void;\n\n  /**\n   * Specify a handler for submitting the multi step tearsheet (final step).\n   * This function can _optionally_ return a promise that is either resolved or rejected and the CreateTearsheet will handle the submitting state of the create button.\n   */\n  onRequestSubmit: () => void;\n\n  /**\n   * Specifies whether the tearsheet is currently open.\n   */\n  open?: boolean;\n\n  /**\n   * The submit button text\n   */\n  submitButtonText: string;\n\n  /**\n   * The main title of the tearsheet, displayed in the header area.\n   */\n  title?: ReactNode;\n\n  /**\n   * The position of the top of tearsheet in the viewport. The 'normal'\n   * position (the default) is a short distance down from the top of the\n   * viewport, leaving room at the top for a global header bar to show through\n   * from below. The 'lower' position provides a little extra room at the top\n   * to allow an action bar navigation or breadcrumbs to also show through.\n   */\n  verticalPosition?: 'normal' | 'lower';\n\n  // Deprecated props\n  /**\n   * @deprecated Property replaced by `decorator`\n   */\n  slug?: ReactNode;\n}\n\ninterface Step {\n  introStep?: boolean;\n  secondaryLabel?: string;\n  shouldIncludeStep?: boolean;\n  title?: string;\n}\n\nexport const CreateTearsheet = forwardRef(\n  (\n    {\n      // The component props, in alphabetical order (for consistency).\n\n      backButtonText,\n      cancelButtonText,\n      children,\n      className,\n      experimentalSecondarySubmitText,\n      firstFocusElement,\n      description,\n      hasError,\n      influencerWidth = 'narrow',\n      initialStep,\n      label,\n      nextButtonText,\n      onClose,\n      onRequestSubmit,\n      open,\n      selectorPrimaryFocus,\n      slug: deprecated_slug,\n      decorator,\n      submitButtonText,\n      title,\n      verticalPosition = 'normal',\n\n      // Collect any other property values passed in.\n      ...rest\n    }: CreateTearsheetProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const [createTearsheetActions, setCreateTearsheetActions] = useState([]);\n    const [shouldViewAll, setShouldViewAll] = useState(false);\n    const [currentStep, setCurrentStep] = useState(0);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [isDisabled, setIsDisabled] = useState(false);\n    const [loadingPrevious, setLoadingPrevious] = useState<boolean>(false);\n    const [onPrevious, setOnPrevious] = useState();\n    const [onNext, setOnNext] = useState();\n    const [onMount, setOnMount] = useState();\n    const [stepData, setStepData] = useState<Step[]>([]);\n    const [firstIncludedStep, setFirstIncludedStep] = useState(1);\n    const [lastIncludedStep, setLastIncludedStep] = useState<number>();\n    const [experimentalSecondarySubmit, setExperimentalSecondarySubmit] =\n      useState<ExperimentalSecondarySubmit>();\n    const previousState = usePreviousValue({ currentStep, open });\n    const contentRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n      const firstItem =\n        stepData.findIndex((item) => item?.shouldIncludeStep) + 1;\n      const lastItem = lastIndexInArray(stepData, 'shouldIncludeStep', true);\n      if (firstItem !== firstIncludedStep) {\n        setCurrentStep(firstItem);\n        setFirstIncludedStep(firstItem);\n      }\n      if (lastItem !== lastIncludedStep) {\n        setLastIncludedStep(lastItem);\n      }\n      if (open && initialStep) {\n        const numberOfHiddenSteps = getNumberOfHiddenSteps(\n          stepData,\n          initialStep\n        );\n        setCurrentStep(Number(initialStep + numberOfHiddenSteps));\n      }\n    }, [firstIncludedStep, initialStep, lastIncludedStep, open, stepData]);\n\n    useCreateComponentFocus({\n      previousState,\n      currentStep,\n      blockClass: `.${blockClass} .${pkg.prefix}--tearsheet-create__step`,\n      onMount,\n      firstFocusElement: firstFocusElement || selectorPrimaryFocus,\n    });\n    useValidCreateStepCount(stepData.length, componentName);\n    useResetCreateComponent({\n      firstIncludedStep,\n      previousState,\n      /**@ts-ignore */\n      open,\n      setCurrentStep,\n      stepData,\n      /**@ts-ignore */\n      initialStep,\n      totalSteps: stepData?.length,\n      componentName,\n    });\n    useCreateComponentStepChange({\n      firstIncludedStep,\n      lastIncludedStep,\n      stepData,\n      onPrevious,\n      onNext,\n      isSubmitDisabled: isDisabled,\n      setCurrentStep,\n      setIsSubmitting,\n      setShouldViewAll,\n      /**@ts-ignore */\n      setLoadingPrevious,\n      loadingPrevious,\n      onClose,\n      onRequestSubmit,\n      componentName,\n      currentStep,\n      shouldViewAll,\n      backButtonText,\n      cancelButtonText,\n      submitButtonText,\n      nextButtonText,\n      isSubmitting,\n      componentBlockClass: blockClass,\n      experimentalSecondarySubmit,\n      experimentalSecondarySubmitText: experimentalSecondarySubmit?.labelText\n        ? experimentalSecondarySubmit.labelText\n        : experimentalSecondarySubmitText,\n      setCreateComponentActions: setCreateTearsheetActions,\n    });\n\n    return (\n      <TearsheetShell\n        {...getDevtoolsProps(componentName)}\n        {...rest}\n        {...{\n          ref,\n          actions: createTearsheetActions,\n          className: cx(blockClass, className),\n          description,\n          influencer: (\n            <CreateInfluencer currentStep={currentStep} stepData={stepData} />\n          ),\n          influencerWidth,\n          label,\n          onClose,\n          open,\n          size: 'wide',\n          decorator: decorator || deprecated_slug,\n          title,\n          verticalPosition,\n          closeIconDescription: '',\n        }}\n        currentStep={currentStep}\n        hasError={hasError}\n        selectorPrimaryFocus={selectorPrimaryFocus}\n      >\n        <div className={`${blockClass}__content`} ref={contentRef}>\n          <Form\n            aria-label={title}\n            onSubmit={(e: React.FormEvent<HTMLFormElement>) =>\n              e.preventDefault()\n            }\n          >\n            <StepsContext.Provider\n              value={{\n                currentStep,\n                setExperimentalSecondarySubmit,\n                setIsDisabled,\n                setOnPrevious: (fn) => setOnPrevious(() => fn),\n                setOnNext: (fn) => setOnNext(() => fn),\n                setOnMount: (fn) => setOnMount(() => fn),\n                setStepData,\n                stepData,\n              }}\n            >\n              {React.Children.toArray(children)\n                .filter(Boolean)\n                .map((child, index) => (\n                  <StepNumberContext.Provider value={index + 1} key={index}>\n                    {child}\n                  </StepNumberContext.Provider>\n                ))}\n            </StepsContext.Provider>\n          </Form>\n        </div>\n      </TearsheetShell>\n    );\n  }\n);\n\n// Return a placeholder if not released and not enabled by feature flag\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nCreateTearsheet.displayName = componentName;\n\nconst deprecatedProps = {\n  /**\n   *  @deprecated Property replaced by `decorator`\n   */\n  slug: deprecateProp(PropTypes.node, 'Property replaced by `decorator`'),\n};\n// Note that the descriptions here should be kept in sync with those for the\n// corresponding props for TearsheetNarrow and TearsheetShell components.\nCreateTearsheet.propTypes = {\n  /**\n   * The back button text\n   */\n  backButtonText: PropTypes.string.isRequired,\n\n  /**\n   * The cancel button text\n   */\n  cancelButtonText: PropTypes.string.isRequired,\n\n  /**\n   * The main content of the tearsheet\n   */\n  children: PropTypes.node,\n\n  /**\n   * An optional class or classes to be added to the outermost element.\n   */\n  className: PropTypes.string,\n\n  /**\n   *  Optional prop that allows you to pass any component.\n   */\n  decorator: PropTypes.node,\n\n  /**\n   * A description of the flow, displayed in the header area of the tearsheet.\n   */\n  description: PropTypes.node,\n\n  /**\n   * The experimentalSecondary submit button text\n   */\n  experimentalSecondarySubmitText: PropTypes.string,\n\n  /**\n   * Specifies elements to focus on first on render.\n   */\n  firstFocusElement: PropTypes.string,\n\n  /**\n   * To indicate an error occurred in the Tearsheet step\n   * Used to pass this value to TearsheetShell\n   */\n  hasError: PropTypes.bool,\n\n  /**\n   * Used to set the size of the influencer\n   */\n  influencerWidth: PropTypes.oneOf(['narrow', 'wide']),\n\n  /**\n   * This can be used to open the component to a step other than the first step.\n   * For example, a create flow was previously in progress, data was saved, and\n   * is now being completed.\n   */\n  initialStep: PropTypes.number,\n\n  /**\n   * A label for the tearsheet, displayed in the header area of the tearsheet\n   * to maintain context for the tearsheet (e.g. as the title changes from page\n   * to page of a multi-page task).\n   */\n  label: PropTypes.node,\n\n  /**\n   * The next button text\n   */\n  nextButtonText: PropTypes.string.isRequired,\n\n  /**\n   * An optional handler that is called when the user closes the tearsheet (by\n   * clicking the close button, if enabled, or clicking outside, if enabled).\n   * Returning `false` here prevents the modal from closing.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specify a handler for submitting the multi step tearsheet (final step).\n   * This function can _optionally_ return a promise that is either resolved or rejected and the CreateTearsheet will handle the submitting state of the create button.\n   */\n  onRequestSubmit: PropTypes.func.isRequired,\n\n  /**\n   * Specifies whether the tearsheet is currently open.\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Specify a CSS selector that matches the DOM element that should be\n   * focused when the Modal opens.\n   */\n  selectorPrimaryFocus: PropTypes.string,\n\n  /**\n   * The submit button text\n   */\n  submitButtonText: PropTypes.string.isRequired,\n\n  /**\n   * The main title of the tearsheet, displayed in the header area.\n   */\n  title: PropTypes.node,\n\n  /**\n   * The position of the top of tearsheet in the viewport. The 'normal'\n   * position (the default) is a short distance down from the top of the\n   * viewport, leaving room at the top for a global header bar to show through\n   * from below. The 'lower' position provides a little extra room at the top\n   * to allow an action bar navigation or breadcrumbs to also show through.\n   */\n  verticalPosition: PropTypes.oneOf(['normal', 'lower']),\n  ...deprecatedProps,\n};\n","/**\n * Copyright IBM Corp. 2021, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  forwardRef,\n  useContext,\n  useEffect,\n  useState,\n  isValidElement,\n  PropsWithChildren,\n  useRef,\n  RefObject,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { Column, FormGroup, Grid } from '@carbon/react';\nimport { StepsContext, StepNumberContext } from './CreateTearsheet';\nimport { pkg } from '../../settings';\nimport pconsole from '../../global/js/utils/pconsole';\nimport { usePreviousValue, useRetrieveStepData } from '../../global/js/hooks';\n\nconst componentName = 'CreateTearsheetStep';\nconst blockClass = `${pkg.prefix}--tearsheet-create__step`;\n\n// Default values for props\nconst defaults = {\n  hasFieldset: true,\n  includeStep: true,\n};\n\ntype fieldsetLegendTextProps =\n  | {\n      /**\n       * This optional prop will render your form content inside of a fieldset html element\n       * and is defaulted to true.\n       * You can set this prop to `false` if you have multiple fieldset elements or want to control the children of your Full Page's step content.\n       */\n      hasFieldset: false;\n      /**\n       * This is the required legend text that appears above a fieldset html element for accessibility purposes.\n       * You can set the `hasFieldset` prop to false if you have multiple fieldset elements or want to control the children of your Full Page's step content.\n       * Otherwise, use CSS to hide/remove this label text.\n       */\n      fieldsetLegendText?: string;\n      /**\n       * This is the required legend id that appears as the aria-labelledby of fieldset for accessibility purposes.\n       */\n      fieldsetLegendId?: React.ReactNode;\n    }\n  | {\n      /**\n       * This optional prop will render your form content inside of a fieldset html element\n       * and is defaulted to true.\n       * You can set this prop to `false` if you have multiple fieldset elements or want to control the children of your Full Page's step content.\n       */\n      hasFieldset?: true;\n      /**\n       * This is the required legend text that appears above a fieldset html element for accessibility purposes.\n       * You can set the `hasFieldset` prop to false if you have multiple fieldset elements or want to control the children of your Full Page's step content.\n       * Otherwise, use CSS to hide/remove this label text.\n       */\n      fieldsetLegendText: string;\n      /**\n       * This is the required legend id that appears as the aria-labelledby of fieldset for accessibility purposes.\n       */\n      fieldsetLegendId: React.ReactNode;\n    };\n\ninterface CreateTearsheetStepBaseProps extends PropsWithChildren {\n  /**\n   * Content that shows in the tearsheet step\n   */\n  children?: React.ReactNode;\n\n  /**\n   * Sets an optional className to be added to the tearsheet step\n   */\n  className?: string;\n\n  /**\n   * Sets an optional description on the step component\n   */\n  description?: React.ReactNode;\n\n  /**\n   * This will conditionally disable the submit button in the multi step Tearsheet\n   */\n  disableSubmit?: boolean;\n\n  /**\n   * Configuration options for customizing the behavior of the experimentalSecondary submit button.\n   */\n  experimentalSecondarySubmit?: ExperimentalSecondarySubmit;\n\n  /**\n   * This prop is used to help track dynamic steps. If this value is `false` then the step is not included in the visible steps or the ProgressIndicator\n   * steps. If this value is `true` then the step will be included in the list of visible steps, as well as being included in the ProgressIndicator step list\n   */\n  includeStep?: boolean;\n\n  /**\n   * This prop can be used on the first step to mark it as an intro step, which will not render the progress indicator steps\n   */\n  introStep?: boolean;\n\n  /**\n   * This optional prop will indicate an error icon on the progress indicator step item\n   */\n  invalid?: boolean;\n\n  /**\n   * Optional function to be called on initial mount of a step.\n   * For example, this can be used to fetch data that is required on a particular step.\n   */\n  onMount?: () => void;\n\n  /**\n   * Optional function to be called when you move to the next step.\n   * For example, this can be used to validate input fields before proceeding to the next step.\n   * This function can _optionally_ return a promise that is either resolved or rejected and the CreateTearsheet will handle the submitting state of the next button.\n   */\n  onNext?: () => Promise<void>;\n\n  /**\n   * Optional function to be called when you move to the previous step.\n   */\n  onPrevious?: () => void;\n\n  /**\n   * Sets the optional secondary label on the progress step component\n   */\n  secondaryLabel?: string;\n\n  /**\n   * Sets an optional subtitle on the step component\n   */\n  subtitle?: string;\n\n  /**\n   * Sets the title text for a tearsheet step\n   */\n  title: React.ReactNode;\n}\ninterface PreviousStateProps {\n  currentStep: number | undefined;\n}\ntype CreateTearsheetStepProps = CreateTearsheetStepBaseProps &\n  fieldsetLegendTextProps;\n\n/**\n * Configuration options for customizing the behavior of the experimentalSecondary submit button.\n *\n * @property {string} [labelText] - Optional text to replace the default button text.\n * @property {boolean} [disabled] - If true, the button will be disabled and not clickable.\n * @property {boolean} [hideSecondarySubmit] - If true, the button will be hidden from view.\n * @property {() => void} [onClick] - Optional click handler function to be executed when the button is clicked.\n */\nexport type ExperimentalSecondarySubmit = {\n  labelText?: string;\n  disabled?: boolean;\n  hideSecondarySubmit?: boolean;\n  onClick?: () => void;\n};\n\nexport const CreateTearsheetStep = forwardRef(\n  (\n    {\n      // The component props, in alphabetical order (for consistency).\n\n      children,\n      className,\n      description,\n      disableSubmit,\n      experimentalSecondarySubmit,\n      fieldsetLegendText,\n      fieldsetLegendId,\n      hasFieldset = defaults.hasFieldset,\n      includeStep = defaults.includeStep,\n      introStep,\n      invalid,\n      onMount,\n      onNext,\n      onPrevious,\n      secondaryLabel,\n      subtitle,\n      title,\n\n      // Collect any other property values passed in.\n      ...rest\n    }: CreateTearsheetStepProps,\n    ref\n  ) => {\n    const localRef = useRef<HTMLDivElement>(null);\n    const stepRef = ref || localRef;\n    const stepRefValue = (stepRef as RefObject<HTMLDivElement>).current;\n    const stepsContext = useContext(StepsContext);\n    const stepNumber = useContext(StepNumberContext);\n    const [shouldIncludeStep, setShouldIncludeStep] =\n      useState<boolean>(includeStep);\n    const previousState = usePreviousValue({\n      currentStep: stepsContext?.currentStep,\n    }) as PreviousStateProps | undefined;\n\n    useRetrieveStepData({\n      stepsContext,\n      stepNumber,\n      introStep: !!introStep,\n      shouldIncludeStep,\n      secondaryLabel: secondaryLabel || '',\n      title,\n      invalid: !!invalid,\n    });\n\n    // This useEffect reports back the onMount value so that they can be used\n    // in the appropriate custom hooks.\n    useEffect(() => {\n      if (\n        stepNumber === stepsContext?.currentStep &&\n        previousState?.currentStep !== stepsContext?.currentStep\n      ) {\n        stepsContext?.setOnMount(onMount);\n        stepsContext?.setExperimentalSecondarySubmit(\n          experimentalSecondarySubmit\n        );\n      }\n    }, [\n      onMount,\n      experimentalSecondarySubmit,\n      stepsContext,\n      stepNumber,\n      previousState?.currentStep,\n    ]);\n\n    // Used to take the `includeStep` prop and use it as a local state value\n    useEffect(() => {\n      setShouldIncludeStep(includeStep);\n    }, [includeStep, stepsContext, title]);\n\n    // Whenever we are the current step, supply our disableSubmit and onNext values to the\n    // steps container context so that it can manage the 'Next' button appropriately.\n    useEffect(() => {\n      if (stepNumber === stepsContext?.currentStep) {\n        stepsContext.setIsDisabled(!!disableSubmit);\n        stepsContext?.setOnNext(onNext); // needs to be updated here otherwise there could be stale state values from only initially setting onNext\n        stepsContext?.setOnPrevious(onPrevious);\n\n        //Handle props for experimentalSecondarySubmit button, depending on state change\n        stepsContext?.setExperimentalSecondarySubmit(\n          experimentalSecondarySubmit\n        );\n      }\n    }, [\n      stepsContext,\n      stepNumber,\n      disableSubmit,\n      onNext,\n      onPrevious,\n      stepRef,\n      stepRefValue,\n      experimentalSecondarySubmit,\n    ]);\n\n    const renderDescription = () => {\n      if (description) {\n        if (typeof description === 'string') {\n          return <p className={`${blockClass}--description`}>{description}</p>;\n        }\n        if (isValidElement(description)) {\n          return (\n            <div className={`${blockClass}--description`}>{description}</div>\n          );\n        }\n      }\n      return null;\n    };\n\n    return stepsContext ? (\n      <div\n        ref={stepRef as RefObject<HTMLDivElement>}\n        inert={stepNumber !== stepsContext?.currentStep}\n      >\n        <Grid\n          {\n            // Pass through any other property values as HTML attributes.\n            ...rest\n          }\n          className={cx(blockClass, className, {\n            [`${blockClass}__step--hidden-step`]:\n              stepNumber !== stepsContext?.currentStep,\n            [`${blockClass}__step--visible-step`]:\n              stepNumber === stepsContext?.currentStep,\n          })}\n        >\n          <Column xlg={12} lg={12} md={8} sm={4}>\n            <h4 className={`${blockClass}--title`}>{title}</h4>\n\n            {subtitle && (\n              <h5 className={`${blockClass}--subtitle`}>{subtitle}</h5>\n            )}\n\n            {renderDescription()}\n          </Column>\n\n          <Column span={100}>\n            {hasFieldset ? (\n              <FormGroup\n                legendText={fieldsetLegendText}\n                className={`${blockClass}--fieldset`}\n                legendId={fieldsetLegendId}\n              >\n                {children}\n              </FormGroup>\n            ) : (\n              children\n            )}\n          </Column>\n        </Grid>\n      </div>\n    ) : (\n      pconsole.warn(\n        `You have tried using a ${componentName} component outside of a CreateTearsheet. This is not allowed. ${componentName}s should always be children of the CreateTearsheet`\n      )\n    );\n  }\n);\n\nCreateTearsheetStep.propTypes = {\n  /**\n   * Content that shows in the tearsheet step\n   */\n  children: PropTypes.node,\n\n  /**\n   * Sets an optional className to be added to the tearsheet step\n   */\n  className: PropTypes.string,\n\n  /**\n   * Sets an optional description on the step component\n   */\n  description: PropTypes.node,\n\n  /**\n   * This will conditionally disable the submit button in the multi step Tearsheet\n   */\n  disableSubmit: PropTypes.bool,\n\n  /**\n   * Configuration options for customizing the behavior of the experimentalSecondary submit button.\n   *\n   * @property {string} [labelText] - Optional text to replace the default button text.\n   * @property {boolean} [disabled] - If true, the button will be disabled and not clickable.\n   * @property {boolean} [hideSecondarySubmit] - If true, the button will be hidden from view.\n   * @property {() => void} [onClick] - Optional click handler function to be executed when the button is clicked.\n   */\n  /**@ts-ignore*/\n  experimentalSecondarySubmit: PropTypes.shape({\n    labelText: PropTypes.string,\n    disabled: PropTypes.bool,\n    hideSecondarySubmit: PropTypes.bool,\n    onClick: PropTypes.func,\n  }),\n\n  /**\n   * This is the required legend id that appears as the aria-labelledby of fieldset for accessibility purposes.\n   */\n  /**@ts-ignore*/\n  fieldsetLegendId: PropTypes.node,\n\n  /**\n   * This is the required legend text that appears above a fieldset html element for accessibility purposes.\n   * You can set the `hasFieldset` prop to false if you have multiple fieldset elements or want to control the children of your Full Page's step content.\n   * Otherwise, use CSS to hide/remove this label text.\n   */\n  /**@ts-ignore*/\n  fieldsetLegendText: PropTypes.string,\n\n  /**\n   * This optional prop will render your form content inside of a fieldset html element\n   * and is defaulted to true.\n   * You can set this prop to `false` if you have multiple fieldset elements or want to control the children of your Full Page's step content.\n   */\n  /**@ts-ignore*/\n  hasFieldset: PropTypes.bool,\n\n  /**\n   * This prop is used to help track dynamic steps. If this value is `false` then the step is not included in the visible steps or the ProgressIndicator\n   * steps. If this value is `true` then the step will be included in the list of visible steps, as well as being included in the ProgressIndicator step list\n   */\n  includeStep: PropTypes.bool,\n\n  /**\n   * This prop can be used on the first step to mark it as an intro step, which will not render the progress indicator steps\n   */\n  introStep: PropTypes.bool,\n\n  /**\n   * This optional prop will indicate an error icon on the progress indicator step item\n   */\n  invalid: PropTypes.bool,\n\n  /**\n   * Optional function to be called on initial mount of a step.\n   * For example, this can be used to fetch data that is required on a particular step.\n   */\n  onMount: PropTypes.func,\n\n  /**\n   * Optional function to be called when you move to the next step.\n   * For example, this can be used to validate input fields before proceeding to the next step.\n   * This function can _optionally_ return a promise that is either resolved or rejected and the CreateTearsheet will handle the submitting state of the next button.\n   */\n  onNext: PropTypes.func,\n\n  /**\n   * Optional function to be called when you move to the previous step.\n   */\n  onPrevious: PropTypes.func,\n\n  /**\n   * Sets the optional secondary label on the progress step component\n   */\n  secondaryLabel: PropTypes.string,\n\n  /**\n   * Sets an optional subtitle on the step component\n   */\n  subtitle: PropTypes.string,\n\n  /**\n   * Sets the title text for a tearsheet step\n   */\n  title: PropTypes.node.isRequired,\n};\n"],"names":["useResetCreateComponent","firstIncludedStep","previousState","open","setCurrentStep","stepData","initialStep","totalSteps","componentName","useEffect","numberOfHiddenSteps","getNumberOfHiddenSteps","blockClass","pkg","StepsContext","createContext","StepNumberContext","CreateTearsheet","forwardRef","backButtonText","cancelButtonText","children","className","experimentalSecondarySubmitText","firstFocusElement","description","hasError","influencerWidth","label","nextButtonText","onClose","onRequestSubmit","selectorPrimaryFocus","deprecated_slug","decorator","submitButtonText","title","verticalPosition","rest","ref","createTearsheetActions","setCreateTearsheetActions","useState","shouldViewAll","setShouldViewAll","currentStep","isSubmitting","setIsSubmitting","isDisabled","setIsDisabled","loadingPrevious","setLoadingPrevious","onPrevious","setOnPrevious","onNext","setOnNext","onMount","setOnMount","setStepData","setFirstIncludedStep","lastIncludedStep","setLastIncludedStep","experimentalSecondarySubmit","setExperimentalSecondarySubmit","usePreviousValue","contentRef","useRef","firstItem","item","lastItem","lastIndexInArray","useCreateComponentFocus","useValidCreateStepCount","useCreateComponentStepChange","React","TearsheetShell","getDevtoolsProps","cx","CreateInfluencer","Form","e","fn","child","index","deprecatedProps","deprecateProp","PropTypes","defaults","CreateTearsheetStep","disableSubmit","fieldsetLegendText","fieldsetLegendId","hasFieldset","includeStep","introStep","invalid","secondaryLabel","subtitle","localRef","stepRef","stepRefValue","stepsContext","useContext","stepNumber","shouldIncludeStep","setShouldIncludeStep","useRetrieveStepData","renderDescription","isValidElement","Grid","Column","FormGroup","pconsole"],"mappings":"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"}