import{b as P,i as ae,c as te,d as I,_ as ne,j as se,k as b,E as re,S as oe,l as ce,P as e,g as le}from"./index-CMVdkQrl.js";import{e as s,r as i}from"./index-DtHxqM--.js";import{c as N}from"./events-OVwOsPzJ.js";import{F as ie}from"./FormContext-C4Nuixum.js";import{S as ue}from"./bucket-15-DPFZzV9q.js";var w;const R=s.forwardRef(function(u,d){let{autoComplete:K="off",className:O,closeButtonLabelText:C="Clear search input",defaultValue:E,disabled:m,isExpanded:o=!0,id:V,labelText:j,light:B,onChange:y=()=>{},onClear:F=()=>{},onKeyDown:k,onExpand:a,placeholder:$="Search",renderIcon:_,role:q="searchbox",size:h="md",type:z="text",value:r,...H}=u;const L=!!(r||E),t=P(),{isFluid:M}=i.useContext(ie),c=i.useRef(null),A=ae([d,c]),v=i.useRef(null),G=te("search-input"),f=V||G,T=`${f}-search`,[J,g]=i.useState(L||!1),[Q,U]=i.useState(r),W=I({[`${t}--search`]:!0,[`${t}--search--sm`]:h==="sm",[`${t}--search--md`]:h==="md",[`${t}--search--lg`]:h==="lg",[`${t}--search--light`]:B,[`${t}--search--disabled`]:m,[`${t}--search--fluid`]:M},O),X=I({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!J||!o});r!==Q&&(g(!!r),U(r));function S(){var l;!r&&c.current&&(c.current.value="");const p={target:Object.assign({},c.current,{value:""}),type:"change"};y(p),F(),g(!1),(l=c.current)==null||l.focus()}function Y(n){g(n.target.value!=="")}function Z(n){var p,l;b(n,ce)&&(n.stopPropagation(),(p=c.current)!=null&&p.value?S():a&&o&&((l=v.current)==null||l.focus()))}function ee(n){(b(n,re)||b(n,oe))&&(n.stopPropagation(),a&&a(n))}return s.createElement("div",{role:"search","aria-label":$,className:W},s.createElement("div",{"aria-label":a?"button":void 0,"aria-labelledby":a?T:void 0,role:a?"button":void 0,className:`${t}--search-magnifier`,onClick:a,onKeyDown:ee,tabIndex:a&&!o?0:-1,ref:v,"aria-expanded":a&&o?!0:a&&!o?!1:void 0,"aria-controls":a?f:void 0},s.createElement(D,{icon:_})),s.createElement("label",{id:T,htmlFor:f,className:`${t}--label`},j),s.createElement("input",ne({autoComplete:K,className:`${t}--search-input`,defaultValue:E,disabled:m,role:q,ref:A,id:f,onChange:N([y,Y]),onKeyDown:N([k,Z]),placeholder:$,type:z,value:r,tabIndex:a&&!o?-1:void 0},H)),s.createElement("button",{"aria-label":C,className:X,disabled:m,onClick:S,title:C,type:"button"},w||(w=s.createElement(se,null))))});R.displayName="Search";R.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:le(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function D(x){let{icon:u}=x;const d=P();return u?s.createElement(u,{className:`${d}--search-magnifier-icon`}):s.createElement(ue,{className:`${d}--search-magnifier-icon`})}D.propTypes={icon:e.oneOfType([e.func,e.object])};export{R as S};
