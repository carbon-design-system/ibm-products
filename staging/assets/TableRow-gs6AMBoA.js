import{b as O,d as w,n as M,_ as I,P as e,c as Z}from"./index-CMVdkQrl.js";import{r as N,e as r}from"./index-DtHxqM--.js";import{u as P}from"./index-BLvAv8yb.js";import{bi as j}from"./settings-C3kz8lqM.js";import{w as U}from"./wrapComponent-BiCAEuiH.js";import{aE as G}from"./bucket-0-CHtg8bFp.js";import{A as J}from"./bucket-1-wrgsOOV0.js";const y={NONE:"NONE",DESC:"DESC",ASC:"ASC"},Q=N.createContext({titleId:void 0,descriptionId:void 0}),F=(s,t)=>{var u,S,E,m;if(s.children.length>0)return!1;const l=window.getComputedStyle(s);t.font=l.font?l.font:`${l.fontSize}" "${l.fontFamily}`;let o=(t==null?void 0:t.measureText(s.textContent??"")).width??0;const f=(u=l.letterSpacing)==null?void 0:u.split("px");f&&f.length&&!isNaN(Number(f[0]))&&(o+=Number(f[0])*(((S=s.textContent)==null?void 0:S.length)??0));const b=(E=l.paddingLeft)==null?void 0:E.split("px");b&&b.length&&!isNaN(Number(b[0]))&&(o+=Number(b[0]));const p=(m=l.paddingLeft)==null?void 0:m.split("px");return p&&p.length&&!isNaN(Number(p[0]))&&(o+=Number(p[0])),o>s.getBoundingClientRect().width},X=s=>{var k;let{className:t,children:l,useZebraStyles:d,size:o="lg",isSortable:f=!1,useStaticWidth:b,stickyHeader:p,overflowMenuOnHover:u=!0,experimentalAutoAlign:S=!1,tabIndex:E,...m}=s;const{titleId:C,descriptionId:v}=N.useContext(Q),a=O(),[x,n]=N.useState(!1),i=N.useRef(null),H=w(`${a}--data-table`,t,{[`${a}--data-table--${o}`]:o,[`${a}--data-table--sort`]:f,[`${a}--data-table--zebra`]:d,[`${a}--data-table--static`]:b,[`${a}--data-table--sticky-header`]:p,[`${a}--data-table--visible-overflow-menu`]:!u}),T=N.useCallback(function(){var c,g;(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?(c=i.current)==null||c.classList.add(`${a}--data-table--top-aligned-body`):(g=i.current)==null||g.classList.remove(`${a}--data-table--top-aligned-body`)},[a]),h=N.useCallback(function(){var c,g;(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?(c=i.current)==null||c.classList.add(`${a}--data-table--top-aligned-header`):(g=i.current)==null||g.classList.remove(`${a}--data-table--top-aligned-header`)},[a]),A=N.useCallback(()=>{if(S){const c=document.createElement("canvas").getContext("2d");if(i.current&&c){const g=Array.from(i.current.querySelectorAll("td")).some(R=>F(R,c)),D=Array.from(i.current.querySelectorAll("th")).some(R=>{const B=R.querySelector(`.${a}--table-header-label`);return B&&F(B,c)});T(g),h(D)}}else T(!1),h(!1)},[S,T,h,a]),z=j(A,100);P("resize",z);const L=N.useCallback(()=>{var g,D;const $=(g=i==null?void 0:i.current)==null?void 0:g.parentNode,c=(D=i==null?void 0:i.current)==null?void 0:D.firstChild;(c==null?void 0:c.scrollWidth)>($==null?void 0:$.clientWidth)?n(!0):n(!1)},[]),W=j(L,100);P("resize",W),M(()=>{L()},[L]),typeof document<"u"&&((k=document==null?void 0:document.fonts)!=null&&k.status)&&document.fonts.status!=="loaded"&&document.fonts.ready.then(()=>{A()}),M(()=>{A()},[A,o]);const _=r.createElement("div",{className:`${a}--data-table-content`,tabIndex:E??(x?0:void 0)},r.createElement("table",I({"aria-labelledby":C,"aria-describedby":v},m,{className:H,ref:i}),l));return p?r.createElement("section",{className:`${a}--data-table_inner-container`},_):_};X.propTypes={children:e.node,className:e.string,experimentalAutoAlign:e.bool,isSortable:e.bool,overflowMenuOnHover:e.bool,size:e.oneOf(["xs","sm","md","lg","xl"]),stickyHeader:e.bool,useStaticWidth:e.bool,useZebraStyles:e.bool,tabIndex:e.number};const Y=s=>{let{children:t,className:l,...d}=s;return r.createElement("tbody",I({"aria-live":d["aria-live"]??"polite",className:l},d),t)};Y.propTypes={"aria-live":e.oneOf(["polite","assertive","off"]),children:e.node,className:e.string};const ee=N.forwardRef,K=ee((s,t)=>{const{children:l,className:d,hasAILabelHeader:o,colSpan:f,...b}=s,p=O(),u=w(d,{[`${p}--table-cell--column-slug`]:o});return r.createElement("td",I({className:u||void 0,ref:t,colSpan:f},b),l)});K.displayName="TableCell";K.propTypes={children:e.node,className:e.string,colSpan:e.number,hasAILabelHeader:e.bool,headers:e.string};const ue=U({name:"TableHead",type:"thead"}),te="col",V={buttonDescription:"carbon.table.header.icon.description"},ae=(s,t)=>t&&s===V.buttonDescription?t.isSortHeader&&y?t.sortDirection===y.NONE?`Click to sort rows by ${t.header} header in ascending order`:t.sortDirection===y.ASC?`Click to sort rows by ${t.header} header in descending order`:`Click to unsort rows by ${t.header} header`:`Click to sort rows by ${t.header} header in ascending order`:"",se={[y.NONE]:"none",[y.ASC]:"ascending",[y.DESC]:"descending"},q=r.forwardRef(function(t,l){var $;let{className:d,children:o,colSpan:f,decorator:b,isSortable:p=!1,isSortHeader:u,onClick:S,scope:E=te,sortDirection:m,translateWithId:C=ae,slug:v,id:a,...x}=t;const n=O(),i=Z("table-sort"),H=N.useRef(null);let T,h=r.isValidElement(v??b)?v??b:null;h&&(($=h.type)==null?void 0:$.displayName)==="AILabel"&&(T=!0,h=r.cloneElement(h,{size:"mini",ref:H}));const A=w({[`${n}--table-header-label`]:!0,[`${n}--table-header-label--slug ${n}--table-header-label--ai-label`]:T,[`${n}--table-header-label--decorator`]:b});if(!p)return r.createElement("th",I({},x,{id:a,className:d,scope:E,colSpan:f,ref:l}),o?r.createElement("div",{className:A},o,r.createElement("div",{className:`${n}--table-header-label--decorator-inner`},h)):null);const z=w(d,{[`${n}--table-sort`]:!0,[`${n}--table-sort--active`]:u&&m!==y.NONE,[`${n}--table-sort--descending`]:u&&m===y.DESC}),L=!u||!m?"none":se[m],W=C&&C("carbon.table.header.icon.description",{header:o,sortDirection:m,isSortHeader:u,sortStates:y}),_=w(d,`${n}--table-sort__header`,{[`${n}--table-sort__header--ai-label`]:T,[`${n}--table-sort__header--decorator`]:b}),k=c=>{if(!(T&&H.current&&H.current.contains(c.target))&&S)return S(c)};return r.createElement("th",{id:a,"aria-sort":L,className:_,colSpan:f,ref:l,scope:E},r.createElement("div",{className:`${n}--table-sort__description`,id:i},W),r.createElement("button",I({type:"button","aria-describedby":i,className:z,onClick:k},x),r.createElement("span",{className:`${n}--table-sort__flex`},r.createElement("div",{className:`${n}--table-header-label`},o),r.createElement(G,{size:20,className:`${n}--table-sort__icon`}),r.createElement(J,{size:20,className:`${n}--table-sort__icon-unsorted`}),r.createElement("div",{className:`${n}--table-header-label--decorator-inner`},h))))});q.propTypes={children:e.node,className:e.string,colSpan:e.number,id:e.string,isSortHeader:e.bool,isSortable:e.bool,onClick:e.func,scope:e.string,sortDirection:e.oneOf(Object.values(y)),translateWithId:e.func};q.translationKeys=Object.values(V);q.displayName="TableHeader";const re=r.forwardRef((s,t)=>{const l=O();let d;s!=null&&s.children&&r.Children.toArray(s.children).map(C=>{var v,a,x;(((v=C.type)==null?void 0:v.displayName)==="TableSlugRow"||((a=C.type)==null?void 0:a.displayName)==="TableDecoratorRow")&&(C.props.slug||((x=C.props.decorator)==null?void 0:x.type.displayName)==="AILabel")&&(d=!0)});const o=w(s.className,{[`${l}--data-table--selected`]:s.isSelected,[`${l}--data-table--slug-row ${l}--data-table--ai-label-row`]:d}),{ariaLabel:f,"aria-label":b,"aria-controls":p,onExpand:u,isExpanded:S,isSelected:E,...m}=s;return o&&(m.className=o),r.createElement("tr",I({ref:t},m))});re.propTypes={className:e.string,isSelected:e.bool};export{X as T,ue as a,re as b,q as c,Y as d,K as e,Q as f,y as s};
