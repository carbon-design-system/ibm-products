import{u as B,c as R,e as g,_ as A,aK as j,P as r,l as X,r as x,eH as d,eS as Y,v}from"./iframe-BlQ-LkYW.js";import{i as P}from"./MultiSelect-B_rQyAfc.js";import{s as m,g as k,h as K,e as V,T as ee,d as te,a as se,c as ae,b as oe}from"./TableRow-BYIk4P8t.js";import{A as U}from"./index-CgaasdUn.js";import{c as le,b as re,a as ne,T as ie,d as de,e as ce}from"./TableToolbar-BKBISmpj.js";import{r as N}from"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import{i as $}from"./utils-BevHIbez.js";import{T as pe}from"./TableSelectRow-JZBhanNh.js";import{O as ue}from"./OverflowMenuItem-ByvfIQCP.js";import{T as he,a as be}from"./TableToolbarSearch-DhPhQlSt.js";import{O as we}from"./index-VNwEaoKl.js";import{U as fe}from"./bucket-15-CM_J5Vvb.js";const E=(n,a)=>`${n}:${a}`,L=(n,a,e="en")=>{if(n===null&&(n=""),a===null&&(a=""),typeof n=="number"&&typeof a=="number")return n-a;if(typeof n=="string"&&typeof a=="string")return D(n,a,e);const t=n?.props?.children,s=a?.props?.children;return typeof t=="string"&&typeof s=="string"?D(t,s,e):D(String(n),String(a),e)},D=(n,a,e="en")=>{const t=!isNaN(parseFloat(n))&&!isNaN(parseFloat(a));return n.localeCompare(a,e,{numeric:t})},ge=({rowIds:n,cellsById:a,sortDirection:e,key:t,locale:s="en",sortRow:o=Te})=>n.slice().sort((l,i)=>{const p=a[E(l,t)],u=a[E(i,t)];return o(p?.value,u?.value,{key:t,sortDirection:e,sortStates:m,locale:s,compare:L,rowIds:[l,i]})}),Te=(n,a,{sortDirection:e,sortStates:t,locale:s})=>e===t.ASC?L(n,a,s):L(a,n,s),Se=m.NONE,me=(n,a,e)=>n===a?e==="NONE"?m.ASC:e==="ASC"?m.DESC:m.NONE:m.ASC,F=(n,a,{key:e})=>{const{sortDirection:t,sortHeaderKey:s}=a,o=me(e,s,t);return G(n,a,e,o)},G=(n,a,e,t)=>{const{rowIds:s,cellsById:o,initialRowOrder:l}=a,{locale:i,sortRow:p}=n,u=t!==m.NONE?ge({rowIds:s,cellsById:o,sortDirection:t,key:e,locale:i,sortRow:p}):l;return{sortHeaderKey:e,sortDirection:t,rowIds:u}},xe=(n,a,e={})=>{const{rowsById:t}=e,s=new Array(n.length),o={},l={};return n.forEach((i,p)=>{s[p]=i.id;const{id:u,isSelected:w=!1,isExpanded:h=!1,disabled:f=!1}=i;o[u]={id:u,isSelected:w,isExpanded:h,disabled:f,cells:new Array(a.length)},t&&t[i.id]!==void 0&&(o[i.id].isSelected=t[i.id].isSelected,o[i.id].isExpanded=t[i.id].isExpanded),a.forEach(({key:S,slug:y,decorator:H},O)=>{const I=E(i.id,S);l[I]={id:I,value:i[S],isEditable:!1,isEditing:!1,isValid:!0,errors:null,hasAILabelHeader:!!(y||H?.type===U),info:{header:S}},o[i.id].cells[O]=I})}),{rowIds:s,rowsById:o,cellsById:l}};var ye=xe;const Ie=(n,a)=>{const{rowIds:e,rowsById:t,cellsById:s}=ye(n.rows,n.headers,a),o={rowIds:e,rowsById:t,cellsById:s,sortDirection:a.sortDirection||Se,sortHeaderKey:a.sortHeaderKey||null,initialRowOrder:e.slice(),filterInputValue:a.filterInputValue||null,shouldShowBatchActions:a.shouldShowBatchActions||!1};if(a.sortDirection&&a.sortHeaderKey){const{rowIds:l}=G(n,o,a.sortHeaderKey,a.sortDirection);o.rowIds=l}return o.isExpandedAll=o.rowIds.every(l=>o.rowsById[l].isExpanded===!0),o};var C=Ie;const Re=(n,a,e)=>n.map(t=>({...a[t],cells:a[t].cells.map(s=>e[s])}));var M=Re;const W=({rowIds:n,headers:a,cellsById:e,inputValue:t,getCellId:s})=>{const o=t.trim().toLowerCase();return o?n.filter(l=>a.some(({key:i})=>{const p=s(l,i),u=e[p];return typeof u.value=="boolean"?!1:String(u.value).toLowerCase().includes(o)})):n},Z=({["aria-controls"]:n,["aria-label"]:a,ariaLabel:e,className:t,enableExpando:s,enableToggle:o,id:l="expand",isExpanded:i,onExpand:p,expandIconDescription:u,children:w,...h})=>{const f=B(),S=R(`${f}--table-expand`,t),y=i?"collapsed":void 0;return g.createElement("th",A({scope:"col",className:S,"data-previous-value":y,id:l},h),s||o?g.createElement("button",{type:"button",className:`${f}--table-expand__button`,onClick:p,title:u,"aria-label":e||a,"aria-expanded":i,"aria-controls":n},g.createElement(j,{className:`${f}--table-expand__svg`,"aria-label":u})):null,w)};Z.propTypes={"aria-controls":r.string,"aria-label":r.string,ariaLabel:r.string,children:r.node,className:r.string,enableExpando:X(r.bool),enableToggle:r.bool,expandIconDescription:r.string,id:r.string,isExpanded:N("enableToggle",r.bool),onExpand:r.oneOfType([N("enableExpando",r.func),N("enableToggle",r.func)])};const q=g.forwardRef(({["aria-controls"]:n,["aria-label"]:a,ariaLabel:e,className:t,children:s,isExpanded:o,onExpand:l,expandIconDescription:i,isSelected:p,expandHeader:u="expand",...w},h)=>{const f=B();let S;const y=x.Children.toArray(s).map(T=>{if($(T,k))return T.props.slug&&(S=!0),T;if($(T,K))return $(T.props.decorator,U)&&(S=!0),T}),H=x.Children.toArray(s).map(T=>{if(x.isValidElement(T)&&T.type!==k&&T.type!==K)return T}),O=R({[`${f}--parent-row`]:!0,[`${f}--expandable-row`]:o,[`${f}--data-table--selected`]:p,[`${f}--data-table--slug-row ${f}--data-table--ai-label-row`]:S},t),I=o?"collapsed":void 0;return g.createElement("tr",A({},w,{ref:h,className:O,"data-parent-row":!0}),y,g.createElement(V,{className:`${f}--table-expand`,"data-previous-value":I,headers:u},g.createElement("button",{type:"button",className:`${f}--table-expand__button`,onClick:l,title:i,"aria-label":e||a,"aria-expanded":o,"aria-controls":n},g.createElement(j,{className:`${f}--table-expand__svg`,"aria-label":i}))),H)});q.propTypes={"aria-controls":r.string,"aria-label":r.string,ariaLabel:r.string,children:r.node,className:r.string,expandHeader:r.string,expandIconDescription:r.string,isExpanded:r.bool,isSelected:r.bool,onExpand:r.func.isRequired};q.displayName="TableExpandRow";const J=({className:n,children:a,colSpan:e,...t})=>{const s=x.useRef(null),o=B(),l=R(`${o}--expandable-row`,n),i=p=>{if(s&&s.current&&s.current.previousElementSibling){const u=s.current.previousElementSibling;p==="enter"?u.classList.add(`${o}--expandable-row--hover`):u.classList.remove(`${o}--expandable-row--hover`)}};return g.createElement("tr",A({ref:s,onMouseEnter:()=>i("enter"),onMouseLeave:()=>i("leave")},t,{className:l,"data-child-row":!0}),g.createElement(V,{colSpan:e},g.createElement("div",{className:`${o}--child-row-inner-container`},a)))};J.propTypes={children:r.node,className:r.string,colSpan:r.number.isRequired};const Ee=x.forwardRef,z=Ee((n,a)=>{const{children:e,...t}=n;return g.createElement(ue,A({ref:a,itemText:e},t))});z.displayName="TableToolbarAction";z.propTypes={children:r.node,className:r.string,onClick:r.func.isRequired};const Ae="Settings",Q=({className:n,renderIcon:a=fe,iconDescription:e=Ae,children:t,menuOptionsClass:s,...o})=>{const l=B(),i=R(n,`${l}--toolbar-action ${l}--overflow-menu`),p=R(s,`${l}--toolbar-action__menu`);return g.createElement(we,A({"aria-label":e,renderIcon:a,className:i,title:e,iconDescription:e,menuOptionsClass:p,flipped:!0},o),t)};Q.propTypes={children:r.node.isRequired,className:r.string,iconDescription:r.string,menuOptionsClass:r.string,renderIcon:r.oneOfType([r.func,r.object])};const ve=Y(),b={expandRow:"carbon.table.row.expand",collapseRow:"carbon.table.row.collapse",expandAll:"carbon.table.all.expand",collapseAll:"carbon.table.all.collapse",selectAll:"carbon.table.all.select",unselectAll:"carbon.table.all.unselect",selectRow:"carbon.table.row.select",unselectRow:"carbon.table.row.unselect"},Ce={[b.expandAll]:"Expand all rows",[b.collapseAll]:"Collapse all rows",[b.expandRow]:"Expand current row",[b.collapseRow]:"Collapse current row",[b.selectAll]:"Select all rows",[b.unselectAll]:"Unselect all rows",[b.selectRow]:"Select row",[b.unselectRow]:"Unselect row"},_=n=>Ce[n];class c extends x.Component{constructor(a){super(a),d(this,"instanceId",void 0),d(this,"rp",void 0),d(this,"getHeaderProps",({header:e,onClick:t,isSortable:s=this.props.isSortable,...o})=>{const{sortDirection:l,sortHeaderKey:i}=this.state;return{...o,key:e.key,sortDirection:l,isSortable:s,isSortHeader:i===e.key,slug:e.slug,decorator:e.decorator,onClick:p=>{const u=F(this.props,this.state,{key:e.key});this.setState(u,()=>{t&&this.handleOnHeaderClick(t,{sortHeaderKey:e.key,sortDirection:u.sortDirection})(p)})}}}),d(this,"getExpandHeaderProps",({onClick:e,onExpand:t,...s}={})=>{const{translateWithId:o=_}=this.props,{isExpandedAll:l,rowIds:i,rowsById:p}=this.state,u=l||i.every(h=>p[h].isExpanded),w=u?b.collapseAll:b.expandAll;return{...s,"aria-label":o(w),"aria-controls":i.map(h=>`expanded-row-${h}`).join(" "),isExpanded:u,onExpand:v([this.handleOnExpandAll,t,e&&this.handleOnExpandHeaderClick(e,{isExpanded:u})])}}),d(this,"handleOnHeaderClick",(e,t)=>s=>e(s,t)),d(this,"handleOnExpandHeaderClick",(e,t)=>s=>e(s,t)),d(this,"getRowProps",({row:e,onClick:t,...s})=>{const{translateWithId:o=_}=this.props,l=e.isExpanded?b.collapseRow:b.expandRow;return{...s,key:e.id,onClick:t,onExpand:v([this.handleOnExpandRow(e.id),t]),isExpanded:e.isExpanded,"aria-label":o(l),"aria-controls":`expanded-row-${e.id}`,isSelected:e.isSelected,disabled:e.disabled}}),d(this,"getExpandedRowProps",({row:e,...t})=>({...t,id:`expanded-row-${e.id}`})),d(this,"getSelectionProps",({onClick:e,row:t,...s}={})=>{const{translateWithId:o=_}=this.props;if(t){const h=t.isSelected?b.unselectRow:b.selectRow;return{...s,checked:t.isSelected,onSelect:v([this.handleOnSelectRow(t.id),e]),id:`${this.getTablePrefix()}__select-row-${t.id}`,name:`select-row-${this.instanceId}`,"aria-label":o(h),disabled:t.disabled,radio:this.props.radio}}const l=this.state.rowIds.length,i=this.getSelectedRows().length,p=l>0&&i===l,u=l>0&&i>0&&i!==l,w=p||u?b.unselectAll:b.selectAll;return{...s,"aria-label":o(w),checked:p,id:`${this.getTablePrefix()}__select-all`,indeterminate:u,name:`select-all-${this.instanceId}`,onSelect:v([this.handleSelectAll,e])}}),d(this,"getToolbarProps",e=>{const{size:t}=this.props;return{...e,size:t==="xs"||t==="sm"?"sm":void 0}}),d(this,"getBatchActionProps",e=>{const{shouldShowBatchActions:t}=this.state,s=this.getSelectedRows().length;return{onSelectAll:void 0,totalCount:this.state.rowIds.length||0,...e,shouldShowBatchActions:t&&s>0,totalSelected:s,onCancel:this.handleOnCancel}}),d(this,"getTableProps",()=>{const{useZebraStyles:e,size:t="lg",isSortable:s,useStaticWidth:o,stickyHeader:l,overflowMenuOnHover:i=!1,experimentalAutoAlign:p}=this.props;return{useZebraStyles:e,size:t,isSortable:s,useStaticWidth:o,stickyHeader:l,overflowMenuOnHover:i,experimentalAutoAlign:p}}),d(this,"getTableContainerProps",()=>{const{stickyHeader:e,useStaticWidth:t}=this.props;return{stickyHeader:e,useStaticWidth:t}}),d(this,"getCellProps",({cell:{hasAILabelHeader:e,hasDecoratorHeader:t},...s})=>({...s,hasAILabelHeader:e,hasDecoratorHeader:t})),d(this,"getSelectedRows",()=>this.state.rowIds.filter(e=>{const t=this.state.rowsById[e];return t.isSelected&&!t.disabled})),d(this,"getFilteredRowIds",()=>{const{filterRows:e=W}=this.props,t=typeof this.state.filterInputValue=="string"?e({rowIds:this.state.rowIds,headers:this.props.headers,cellsById:this.state.cellsById,inputValue:this.state.filterInputValue,getCellId:E}):this.state.rowIds;return t.length==0?[]:t}),d(this,"getTablePrefix",()=>`data-table-${this.instanceId}`),d(this,"setAllSelectedState",(e,t,s)=>{const{rowIds:o}=e,l=o.length!=s.length;return{rowsById:o.reduce((i,p)=>{const u={...e.rowsById[p]};return!u.disabled&&(!l||s.includes(p))&&(u.isSelected=t),i[p]=u,i},{})}}),d(this,"handleOnCancel",()=>{this.setState(e=>({shouldShowBatchActions:!1,...this.setAllSelectedState(e,!1,this.getFilteredRowIds())}))}),d(this,"handleSelectAll",()=>{this.setState(e=>{const t=this.getFilteredRowIds(),{rowsById:s}=e,o=!(Object.values(s).filter(l=>l.isSelected&&!l.disabled).length>0);return{shouldShowBatchActions:o,...this.setAllSelectedState(e,o,t)}})}),d(this,"handleOnSelectRow",e=>()=>{this.setState(t=>{const s=t.rowsById[e];if(this.props.radio)return{shouldShowBatchActions:!1,rowsById:{...Object.entries(t.rowsById).reduce((p,u)=>{const[w,h]=u;return h.isSelected=!1,p[w]=h,p},{}),[e]:{...s,isSelected:!s.isSelected}}};const o=t.rowIds.filter(i=>t.rowsById[i].isSelected).length,l=s.isSelected?o-1:o+1;return{shouldShowBatchActions:!s.isSelected||l>0,rowsById:{...t.rowsById,[e]:{...s,isSelected:!s.isSelected}}}})}),d(this,"handleOnExpandRow",e=>()=>{this.setState(t=>{const s=t.rowsById[e],{isExpandedAll:o}=t;return{isExpandedAll:s.isExpanded?!1:o,rowsById:{...t.rowsById,[e]:{...s,isExpanded:!s.isExpanded}}}})}),d(this,"handleOnExpandAll",()=>{this.setState(e=>{const{rowIds:t,isExpandedAll:s}=e;return{isExpandedAll:!s,rowsById:t.reduce((o,l)=>({...o,[l]:{...e.rowsById[l],isExpanded:!s}}),{})}})}),d(this,"handleSortBy",e=>()=>{this.setState(t=>F(this.props,t,{key:e}))}),d(this,"handleOnInputValueChange",(e,t)=>{e.target&&this.setState({filterInputValue:e.target.value}),t&&this.setState({filterInputValue:t})}),this.state={...C(a,{}),isExpandedAll:!1},this.instanceId=ve()}shouldComponentUpdate(a){if(this.props!==a){const e=a.rows.map(l=>l.id),t=this.props.rows.map(l=>l.id);if(!P(e,t))return this.setState(l=>C(this.props,l)),!1;const s=a.headers.map(l=>l.key),o=this.props.headers.map(l=>l.key);if(!P(s,o))return this.setState(l=>C(this.props,l)),!1;if(!P(a.rows,this.props.rows))return this.setState(l=>C(this.props,l)),!1}return!0}render(){const{children:a,filterRows:e=W,headers:t,render:s}=this.props,{filterInputValue:o,rowIds:l,rowsById:i,cellsById:p}=this.state,u=typeof o=="string"?e({rowIds:l,headers:t,cellsById:p,inputValue:o,getCellId:E}):l,w={rows:M(u,i,p),headers:this.props.headers,selectedRows:M(this.getSelectedRows(),i,p),getHeaderProps:this.getHeaderProps,getExpandHeaderProps:this.getExpandHeaderProps,getRowProps:this.getRowProps,getExpandedRowProps:this.getExpandedRowProps,getSelectionProps:this.getSelectionProps,getToolbarProps:this.getToolbarProps,getBatchActionProps:this.getBatchActionProps,getTableProps:this.getTableProps,getTableContainerProps:this.getTableContainerProps,getCellProps:this.getCellProps,onInputChange:this.handleOnInputValueChange,sortBy:h=>this.handleSortBy(h)(),selectAll:this.handleSelectAll,selectRow:h=>this.handleOnSelectRow(h)(),expandRow:h=>this.handleOnExpandRow(h)(),expandAll:this.handleOnExpandAll,radio:this.props.radio};return typeof s<"u"?s(w):typeof a<"u"?a(w):null}}d(c,"translationKeys",Object.values(b));d(c,"Table",void 0);d(c,"TableActionList",void 0);d(c,"TableBatchAction",void 0);d(c,"TableBatchActions",void 0);d(c,"TableBody",void 0);d(c,"TableCell",void 0);d(c,"TableContainer",void 0);d(c,"TableDecoratorRow",void 0);d(c,"TableExpandHeader",void 0);d(c,"TableExpandRow",void 0);d(c,"TableExpandedRow",void 0);d(c,"TableHead",void 0);d(c,"TableHeader",void 0);d(c,"TableRow",void 0);d(c,"TableSelectAll",void 0);d(c,"TableSelectRow",void 0);d(c,"TableSlugRow",void 0);d(c,"TableToolbar",void 0);d(c,"TableToolbarAction",void 0);d(c,"TableToolbarContent",void 0);d(c,"TableToolbarSearch",void 0);d(c,"TableToolbarMenu",void 0);c.Table=ee;c.TableActionList=le;c.TableBatchAction=re;c.TableBatchActions=ne;c.TableBody=te;c.TableCell=V;c.TableContainer=ie;c.TableDecoratorRow=K;c.TableExpandHeader=Z;c.TableExpandRow=q;c.TableExpandedRow=J;c.TableHead=se;c.TableHeader=ae;c.TableRow=oe;c.TableSelectAll=de;c.TableSelectRow=pe;c.TableSlugRow=k;c.TableToolbar=ce;c.TableToolbarAction=z;c.TableToolbarContent=he;c.TableToolbarSearch=be;c.TableToolbarMenu=Q;c.propTypes={experimentalAutoAlign:r.bool,filterRows:r.func,headers:r.arrayOf(r.shape({key:r.string.isRequired,header:r.node.isRequired})).isRequired,isSortable:r.bool,locale:r.string,overflowMenuOnHover:r.bool,radio:r.bool,rows:r.arrayOf(r.shape({id:r.string.isRequired,disabled:r.bool,isSelected:r.bool,isExpanded:r.bool})).isRequired,size:r.oneOf(["xs","sm","md","lg","xl"]),sortRow:r.func,stickyHeader:r.bool,translateWithId:r.func,useStaticWidth:r.bool,useZebraStyles:r.bool};export{c as D,Z as T,q as a,J as b,z as c,Q as d};
