{"version":3,"file":"ExportModal.stories-Cnl78O76.js","sources":["../../src/components/ExportModal/ExportModal.mdx","../../src/components/ExportModal/ExportModal.stories.jsx"],"sourcesContent":["import { Story, Controls, Source, Canvas } from '@storybook/addon-docs/blocks';\nimport { CodesandboxLink } from '../../global/js/utils/story-helper';\nimport { ExportModal } from '.';\nimport * as stories from './ExportModal.stories';\nimport { stackblitzPrefillConfig } from '../../../previewer/codePreviewer';\nimport wait from '../../global/js/utils/wait';\n\nexport const customFunctionArr = [wait];\n\n# Export Modal\n\n[Usage guidelines](https://pages.github.ibm.com/carbon/ibm-products/patterns/export/usage/)\n|\n[Carbon modal usage guidelines](https://www.carbondesignsystem.com/components/modal/usage)\n|\n[Carbon modal documentation](https://react.carbondesignsystem.com/?path=/docs/components-modal)\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Example usage](#example-usage)\n  - [Standard](#standard)\n  - [With Extension Validation](#with-extension-validation)\n  - [With Preformatted Extensions](#with-preformatted-extensions)\n- [Component API](#component-api)\n\n## Overview\n\nModal dialog version of the export pattern.\n\n### Standard\n\n<Canvas\n  of={stories.Standard}\n  additionalActions={[\n    {\n      title: 'Open in Stackblitz',\n      onClick: () =>\n        stackblitzPrefillConfig({\n          story: stories.Standard,\n          customFunctionDefs: customFunctionArr,\n          styles: stories.default.parameters.styles,\n        }),\n    },\n  ]}\n></Canvas>\n\n### With Extension Validation\n\n<Canvas\n  of={stories.WithExtensionValidation}\n  additionalActions={[\n    {\n      title: 'Open in Stackblitz',\n      onClick: () =>\n        stackblitzPrefillConfig({\n          story: stories.WithExtensionValidation,\n          customFunctionDefs: customFunctionArr,\n          styles: stories.default.parameters.styles,\n        }),\n    },\n  ]}\n></Canvas>\n\n### With Preformatted Extensions\n\n<Canvas\n  of={stories.WithPreformattedExtensions}\n  additionalActions={[\n    {\n      title: 'Open in Stackblitz',\n      onClick: () =>\n        stackblitzPrefillConfig({\n          story: stories.WithPreformattedExtensions,\n          customFunctionDefs: customFunctionArr,\n          styles: stories.default.parameters.styles,\n        }),\n    },\n  ]}\n></Canvas>\n\n## Component API\n\n<Controls />\n","/**\n * Copyright IBM Corp. 2020, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useState, useRef } from 'react';\nimport { Button } from '@carbon/react';\nimport { ExportModal } from '.';\nimport wait from '../../global/js/utils/wait';\nimport mdx from './ExportModal.mdx';\n\nexport default {\n  title: 'Patterns/Prebuilt patterns/ExportModal',\n  component: ExportModal,\n  tags: ['autodocs'],\n  parameters: {\n    docs: {\n      page: mdx,\n    },\n  },\n  argTypes: {\n    validExtensions: {\n      control: {\n        type: 'select',\n        labels: {\n          0: 'no extension validation',\n          1: 'pdf extension validation',\n        },\n      },\n      options: [0, 1],\n    },\n    preformattedExtensions: {\n      control: {\n        type: 'select',\n        labels: {\n          0: 'no preformatted extensions',\n          1: 'preformatted extensions',\n        },\n      },\n      options: [0, 1],\n    },\n  },\n};\n\nconst defaultProps = {\n  filename: 'Sample02.pdf',\n  inputLabel: 'File name',\n  onClose: () => {},\n  onRequestSubmit: () => {},\n  open: true,\n  primaryButtonText: 'Export',\n  secondaryButtonText: 'Cancel',\n  title: 'Export',\n  inputType: 'text',\n  successful: true,\n};\n\nconst Template = ({ storyInitiallyOpen, ...args }, context) => {\n  const { preformattedExtensions, validExtensions } = args;\n  const getPreformattedExtensions = (value) => {\n    if (value === 1) {\n      return [\n        {\n          extension: 'YAML',\n          description: 'best for IBM managed cloud',\n        },\n        {\n          extension: 'BAR',\n          description: 'best for integration server',\n        },\n      ];\n    }\n    return [];\n  };\n\n  const getValidations = (value) => {\n    if (value === 1) {\n      return ['pdf'];\n    }\n    return [];\n  };\n\n  const [open, setOpen] = useState(\n    context.viewMode !== 'docs' && storyInitiallyOpen\n  );\n  const triggerButtonRef = useRef(null);\n  const [loading, setLoading] = useState(false);\n  const [successful, setSuccessful] = useState(false);\n  const [error, setError] = useState(false);\n\n  const onSubmitHandler = async () => {\n    setLoading(true);\n    await wait(1000);\n    if (args.successful) {\n      setSuccessful(true);\n    } else {\n      setError(true);\n    }\n    setLoading(false);\n  };\n\n  const onCloseHandler = () => {\n    setOpen(false);\n    setSuccessful(false);\n    setError(false);\n  };\n  function RenderButton(triggerButtonRef) {\n    return (\n      <Button ref={triggerButtonRef} onClick={() => setOpen(true)}>\n        Launch modal\n      </Button>\n    );\n  }\n  return (\n    <main>\n      {RenderButton(triggerButtonRef)}\n      <ExportModal\n        {...args}\n        validExtensions={getValidations(validExtensions)}\n        preformattedExtensions={getPreformattedExtensions(\n          preformattedExtensions\n        )}\n        open={open}\n        onClose={onCloseHandler}\n        onRequestSubmit={onSubmitHandler}\n        loading={loading}\n        successful={successful}\n        loadingMessage=\"Exporting file...\"\n        successMessage=\"The file has been exported.\"\n        error={error}\n        errorMessage=\"Server error 500\"\n        triggerButtonRef={triggerButtonRef}\n      />\n    </main>\n  );\n};\n\nexport const Standard = Template.bind({});\nStandard.args = {\n  ...defaultProps,\n  validExtensions: 0,\n  preformattedExtensions: 0,\n  invalidInputText: 'File must have valid extension .pdf',\n  body: '',\n  preformattedExtensionsLabel: 'Choose an export format',\n  storyInitiallyOpen: true,\n};\n\nexport const WithExtensionValidation = Template.bind({});\nWithExtensionValidation.args = {\n  ...defaultProps,\n  validExtensions: 1,\n  preformattedExtensions: 0,\n  filename: '',\n  invalidInputText: 'File must have valid extension .pdf',\n  body: 'File must be exported in a PDF format.',\n  preformattedExtensionsLabel: 'Choose an export format',\n  storyInitiallyOpen: true,\n};\n\nexport const WithPreformattedExtensions = Template.bind({});\nWithPreformattedExtensions.args = {\n  ...defaultProps,\n  filename: 'test',\n  validExtensions: 0,\n  preformattedExtensions: 1,\n  invalidInputText: 'File must have valid extension .pdf',\n  body: '',\n  preformattedExtensionsLabel: 'Choose an export format',\n  storyInitiallyOpen: true,\n};\n"],"names":["customFunctionArr","wait","_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Canvas","stories.Standard","stackblitzPrefillConfig","stories.default","stories.WithExtensionValidation","stories.WithPreformattedExtensions","Controls","MDXContent","MDXLayout","ExportModal_stories","title","component","ExportModal","tags","parameters","docs","page","mdx","argTypes","validExtensions","control","type","labels","options","preformattedExtensions","defaultProps","filename","inputLabel","onClose","onRequestSubmit","open","primaryButtonText","secondaryButtonText","inputType","successful","Template","storyInitiallyOpen","args","context","getPreformattedExtensions","value","extension","description","getValidations","setOpen","useState","viewMode","triggerButtonRef","useRef","loading","setLoading","setSuccessful","error","setError","onSubmitHandler","onCloseHandler","RenderButton","React","Button","Standard","bind","invalidInputText","body","preformattedExtensionsLabel","WithExtensionValidation","WithPreformattedExtensions","source","originalSource"],"mappings":"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"}