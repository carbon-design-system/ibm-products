import{r as p,e as o}from"./index-DzvNrmz8.js";import{L as d,P as k}from"./index-5As4T26e.js";import{e as g}from"./iframe-DJDim8wj.js";import{F as L}from"./index-BXVusgOK.js";import{A as T}from"./index-DaecxxNR.js";const{STORY_CHANGED:b,SELECT_STORY:F}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:C,addons:h}=__STORYBOOK_MODULE_PREVIEW_API__,{global:v}=__STORYBOOK_MODULE_GLOBAL__;var D="links",{document:m,HTMLElement:R}=v;function K(e){let t={},n=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let a=0;a<n.length;a++){let r=n[a].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}var u=e=>h.getChannel().emit(F,e),A=(e,t)=>new Promise(n=>{let{location:a}=m,r=K(a.search).id,s=e||r.split("--",2)[0],i=`/story/${g(s,t)}`,c=a.pathname.replace(/iframe\.html$/,""),O=`${a.origin+c}?${Object.entries({path:i}).map(f=>`${f[0]}=${f[1]}`).join("&")}`;n(O)}),_=e=>{let{target:t}=e;if(!(t instanceof R))return;let n=t,{sbKind:a,sbStory:r}=n.dataset;(a||r)&&(e.preventDefault(),u({kind:a,story:r}))},l=!1,P=()=>{l||(l=!0,m.addEventListener("click",_))},S=()=>{l&&(l=!1,m.removeEventListener("click",_))};C({name:"withLinks",parameterName:D,wrapper:(e,t)=>(P(),h.getChannel().once(b,S),e(t))});var U=0,$=e=>e.button===U&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,j=(e,t=n=>{})=>{$(e)&&(e.preventDefault(),t(e))},E=class extends p.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:e,title:t=e,story:n,name:a=n}=this.props;if(t&&a){let r=await A(t,a);this.setState({href:r})}},this.handleClick=()=>{let{kind:e,title:t=e,story:n,name:a=n}=this.props;t&&a&&u({title:t,name:a})}}componentDidMount(){this.updateHref()}componentDidUpdate(e){let{kind:t,title:n,story:a,name:r}=this.props;(e.kind!==t||e.story!==a||e.title!==n||e.name!==r)&&this.updateHref()}render(){let{kind:e,title:t=e,story:n,name:a=n,children:r,...s}=this.props,{href:i}=this.state;return o.createElement("a",{href:i,onClick:c=>j(c,this.handleClick),...s},r)}};E.defaultProps={children:void 0};var B=E;const y=({flags:e,children:t})=>{const[n,a]=p.useState(),r=Object.fromEntries(Array.from(d.flags.keys()).map(s=>[s,!0]));return p.useEffect(()=>{if(e||a(r),e){for(const[s,i]of Object.entries(e))d.flags.set(s,i);a(d.flags)}},[e]),o.createElement(L,{flags:n??r},o.createElement(T,{type:"feature-flags",text:o.createElement("span",null,"This story is rendered with"," ",o.createElement(B,{title:"IBM Products/Components/FeatureFlags",name:"Docs"},e?Object.keys(e).map((s,i)=>Object.keys(e).length>1?i===Object.keys(e).length-1?s:`${s}, `:s):"all available feature flags")," ","enabled")},t))};y.propTypes={children:k.node};y.__docgenInfo={description:"",methods:[],displayName:"WithFeatureFlags",props:{children:{description:"",type:{name:"node"},required:!1}}};export{y as W};
