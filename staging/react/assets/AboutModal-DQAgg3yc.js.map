{"version":3,"file":"AboutModal-DQAgg3yc.js","sources":["../../src/components/AboutModal/AboutModal.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Carbon and package components we use.\nimport {\n  ComposedModal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  Theme,\n  unstable_FeatureFlags as FeatureFlags,\n} from '@carbon/react';\n// Import portions of React that are needed.\nimport React, { MutableRefObject, ReactNode, useEffect, useRef } from 'react';\n\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\nimport { useFocus } from '../../global/js/hooks/useFocus';\nimport { pkg } from '../../settings';\nimport { usePortalTarget } from '../../global/js/hooks/usePortalTarget';\nimport uuidv4 from '../../global/js/utils/uuidv4';\n\n// The block part of our conventional BEM class names (blockClass__E--M).\nconst blockClass = `${pkg.prefix}--about-modal`;\nconst componentName = 'AboutModal';\n\nexport interface AboutModalProps {\n  /**\n   * Provide additional detail for the modal footer, such as logos of\n   * technologies used in the product, legally required for some products\n   */\n  additionalInfo?: ReactNode;\n\n  /**\n   * Specify an optional className to be applied to the modal root node\n   */\n  className?: string;\n\n  /**\n   * Provide an accessible name for the close icon\n   */\n  closeIconDescription: string;\n\n  /**\n   * Provide any relevant product disclaimers or legal information\n   */\n  content?: ReactNode;\n\n  /**\n   * Specify the first year of product release to the current year\n   */\n  copyrightText: string;\n\n  /**\n   * Provide an array of Carbon `Link`s for additional detail about the\n   * product\n   */\n  links?: ReactNode[];\n\n  /**\n   * Provide a visual representation of the product\n   */\n  logo: ReactNode;\n\n  /**\n   * Specify an aria-label for the modal\n   */\n  modalAriaLabel?: string;\n\n  /**\n   * Specify an optional handler for closing modal. Returning `false`\n   * prevents the modal from closing\n   */\n  onClose?: () => void | boolean;\n\n  /**\n   * Specify whether the modal is currently open\n   */\n  open?: boolean;\n\n  /**\n   * Provide the DOM node where the modal should be rendered.\n   * Defaults to `document.body`\n   */\n  portalTarget?: ReactNode;\n\n  /**\n   * Provide the product name for the modal header\n   */\n  title: ReactNode;\n\n  /**\n   * Provide the product’s version number\n   */\n  version: string;\n}\n\n// NOTE: the component SCSS is not imported here: it is rolled up separately.\n\n/**\n * The `AboutModal` component provides a way to communicate product information\n * to users. It is triggered by a user’s action, appears on top of the main\n * page content, and is persistent until dismissed. The purpose of this modal\n * should be immediately apparent to the user, with a clear and obvious path\n * to completion.\n */\nexport const AboutModal = React.forwardRef(\n  (\n    {\n      additionalInfo,\n      className,\n      closeIconDescription,\n      copyrightText,\n      content,\n      links,\n      logo,\n      modalAriaLabel,\n      onClose,\n      open,\n      portalTarget: portalTargetIn,\n      title,\n      version,\n      // Collect any other property values passed in.\n      ...rest\n    }: AboutModalProps,\n    ref: React.Ref<HTMLDivElement>\n  ) => {\n    const bodyRef = useRef<HTMLElement | null | undefined>(null);\n    const localRef = useRef(undefined);\n    const modalRef = (ref || localRef) as MutableRefObject<HTMLDivElement>;\n    const contentRef = useRef<HTMLDivElement>(null);\n    const contentId = uuidv4();\n    const renderPortalUse = usePortalTarget(portalTargetIn);\n    const { claimFocus } = useFocus(modalRef);\n\n    // We can't add a ref directly to the ModalBody, so track it in a ref\n    // as the parent of the current bodyRef element\n    useEffect(() => {\n      bodyRef.current = contentRef.current?.parentElement;\n    }, [bodyRef]);\n\n    useEffect(() => {\n      if (open) {\n        claimFocus();\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [modalRef, open]);\n\n    return renderPortalUse(\n      <FeatureFlags enableExperimentalFocusWrapWithoutSentinels>\n        <ComposedModal\n          {\n            // Pass through any other property values as HTML attributes.\n            ...rest\n          }\n          className={cx(\n            blockClass, // Apply the block class to the main HTML element\n            className // Apply any supplied class names to the main HTML element.\n          )}\n          aria-label={modalAriaLabel}\n          ref={modalRef}\n          {...{ onClose, open, ...getDevtoolsProps(componentName) }}\n        >\n          <div className={`${blockClass}__logo`}>{logo}</div>\n          <ModalHeader\n            className={`${blockClass}__header`}\n            closeModal={onClose}\n            iconDescription={closeIconDescription}\n            label={title}\n            labelClassName={`${blockClass}__title`}\n          />\n          <ModalBody className={`${blockClass}__body`}>\n            <div\n              className={`${blockClass}__body-content`}\n              ref={contentRef}\n              id={contentId}\n            >\n              <div className={`${blockClass}__version`}>{version}</div>\n              {links && links.length > 0 && (\n                <div className={`${blockClass}__links-container`}>\n                  {links.map((link, i) => (\n                    <React.Fragment key={i}>{link}</React.Fragment>\n                  ))}\n                </div>\n              )}\n              {content && <p className={`${blockClass}__content`}>{content}</p>}\n              {copyrightText && (\n                <p className={`${blockClass}__copyright-text`}>\n                  {copyrightText}\n                </p>\n              )}\n            </div>\n          </ModalBody>\n          {additionalInfo && (\n            <Theme theme=\"g100\">\n              <ModalFooter className={`${blockClass}__footer`}>\n                {additionalInfo}\n              </ModalFooter>\n            </Theme>\n          )}\n        </ComposedModal>\n      </FeatureFlags>\n    );\n  }\n);\n\n// Return a placeholder if not released and not enabled by feature flag\nAboutModal.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nAboutModal.propTypes = {\n  /**\n   * Provide additional detail for the modal footer, such as logos of\n   * technologies used in the product, legally required for some products\n   */\n  additionalInfo: PropTypes.node,\n\n  /**\n   * Specify an optional className to be applied to the modal root node\n   */\n  className: PropTypes.string,\n\n  /**\n   * Provide an accessible name for the close icon\n   */\n  closeIconDescription: PropTypes.string.isRequired,\n\n  /**\n   * Provide any relevant product disclaimers or legal information\n   */\n  content: PropTypes.node,\n\n  /**\n   * Specify the first year of product release to the current year\n   */\n  copyrightText: PropTypes.string.isRequired,\n\n  /**\n   * Provide an array of Carbon `Link`s for additional detail about the\n   * product\n   */\n  links: PropTypes.arrayOf(PropTypes.element),\n\n  /**\n   * Provide a visual representation of the product\n   */\n  logo: PropTypes.node.isRequired,\n\n  /**\n   * Specify an aria-label for the modal\n   */\n  modalAriaLabel: PropTypes.string,\n\n  /**\n   * Specify an optional handler for closing modal. Returning `false`\n   * prevents the modal from closing\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specify whether the modal is currently open\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Provide the DOM node where the modal should be rendered.\n   * Defaults to `document.body`\n   */\n  portalTarget: PropTypes.node,\n\n  /**\n   * Provide the product name for the modal header\n   */\n  title: PropTypes.node.isRequired,\n\n  /**\n   * Provide the product’s version number\n   */\n  version: PropTypes.string.isRequired,\n};\n"],"names":["blockClass","pkg","componentName","AboutModal","React","additionalInfo","className","closeIconDescription","copyrightText","content","links","logo","modalAriaLabel","onClose","open","portalTargetIn","title","version","rest","ref","bodyRef","useRef","localRef","modalRef","contentRef","contentId","uuidv4","renderPortalUse","usePortalTarget","claimFocus","useFocus","useEffect","FeatureFlags","ComposedModal","cx","getDevtoolsProps","ModalHeader","ModalBody","link","i","Theme","ModalFooter","PropTypes"],"mappings":"gWA6BA,MAAMA,EAAa,GAAGC,EAAI,MAAM,gBAC1BC,EAAgB,aAkFTC,EAAaC,EAAM,WAC9B,CACE,CACE,eAAAC,EACA,UAAAC,EACA,qBAAAC,EACA,cAAAC,EACA,QAAAC,EACA,MAAAC,EACA,KAAAC,EACA,eAAAC,EACA,QAAAC,EACA,KAAAC,EACA,aAAcC,EACd,MAAAC,EACA,QAAAC,EAEA,GAAGC,CAAA,EAELC,IACG,CACH,MAAMC,EAAUC,EAAAA,OAAuC,IAAI,EACrDC,EAAWD,EAAAA,OAAO,MAAS,EAC3BE,EAAYJ,GAAOG,EACnBE,EAAaH,EAAAA,OAAuB,IAAI,EACxCI,EAAYC,EAAA,EACZC,EAAkBC,EAAgBb,CAAc,EAChD,CAAE,WAAAc,CAAA,EAAeC,EAASP,CAAQ,EAIxCQ,OAAAA,EAAAA,UAAU,IAAM,CACdX,EAAQ,QAAUI,EAAW,SAAS,aACxC,EAAG,CAACJ,CAAO,CAAC,EAEZW,EAAAA,UAAU,IAAM,CACVjB,GACFe,EAAA,CAGJ,EAAG,CAACN,EAAUT,CAAI,CAAC,EAEZa,EACLvB,EAAA,cAAC4B,EAAA,CAAa,4CAA2C,EAAA,EACvD5B,EAAA,cAAC6B,EAAA,CAGG,GAAGf,EAEL,UAAWgB,EACTlC,EACAM,CAAA,EAEF,aAAYM,EACZ,IAAKW,EACC,QAAAV,EAAS,KAAAC,EAAM,GAAGqB,EAAiBjC,CAAa,CAAE,kBAEvD,MAAA,CAAI,UAAW,GAAGF,CAAU,UAAWW,CAAK,EAC7CP,EAAA,cAACgC,EAAA,CACC,UAAW,GAAGpC,CAAU,WACxB,WAAYa,EACZ,gBAAiBN,EACjB,MAAOS,EACP,eAAgB,GAAGhB,CAAU,SAAA,CAAA,EAE/BI,EAAA,cAACiC,EAAA,CAAU,UAAW,GAAGrC,CAAU,UACjCI,EAAA,cAAC,MAAA,CACC,UAAW,GAAGJ,CAAU,iBACxB,IAAKwB,EACL,GAAIC,CAAA,kBAEH,MAAA,CAAI,UAAW,GAAGzB,CAAU,aAAciB,CAAQ,EAClDP,GAASA,EAAM,OAAS,mBACtB,MAAA,CAAI,UAAW,GAAGV,CAAU,mBAAA,EAC1BU,EAAM,IAAI,CAAC4B,EAAMC,IAChBnC,EAAA,cAACA,EAAM,SAAN,CAAe,IAAKmC,GAAID,CAAK,CAC/B,CACH,EAED7B,GAAWL,EAAA,cAAC,IAAA,CAAE,UAAW,GAAGJ,CAAU,aAAcS,CAAQ,EAC5DD,GACCJ,EAAA,cAAC,IAAA,CAAE,UAAW,GAAGJ,CAAU,oBACxBQ,CACH,CAAA,CAGN,EACCH,GACCD,EAAA,cAACoC,EAAA,CAAM,MAAM,MAAA,EACXpC,EAAA,cAACqC,EAAA,CAAY,UAAW,GAAGzC,CAAU,UAAA,EAClCK,CACH,CACF,CAAA,CAGN,CAAA,CAEJ,CACF,EAGAF,EAAW,YAAcD,EAKzBC,EAAW,UAAY,CAKrB,eAAgBuC,EAAU,KAK1B,UAAWA,EAAU,OAKrB,qBAAsBA,EAAU,OAAO,WAKvC,QAASA,EAAU,KAKnB,cAAeA,EAAU,OAAO,WAMhC,MAAOA,EAAU,QAAQA,EAAU,OAAO,EAK1C,KAAMA,EAAU,KAAK,WAKrB,eAAgBA,EAAU,OAM1B,QAASA,EAAU,KAKnB,KAAMA,EAAU,KAMhB,aAAcA,EAAU,KAKxB,MAAOA,EAAU,KAAK,WAKtB,QAASA,EAAU,OAAO,UAC5B;;;;;"}