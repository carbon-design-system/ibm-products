{"version":3,"file":"Select-BxCSYl3R.js","sources":["../../../../node_modules/@carbon/react/es/components/Select/Select.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2016, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { extends as _extends } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport PropTypes from 'prop-types';\nimport React, { forwardRef, useContext, useState, cloneElement } from 'react';\nimport cx from 'classnames';\nimport { ChevronDown, WarningFilled, WarningAltFilled } from '@carbon/icons-react';\nimport { deprecate } from '../../prop-types/deprecate.js';\nimport { usePrefix } from '../../internal/usePrefix.js';\nimport '../FluidForm/FluidForm.js';\nimport { FormContext } from '../FluidForm/FormContext.js';\nimport { composeEventHandlers } from '../../tools/events.js';\nimport { Text } from '../Text/Text.js';\nimport '../Text/TextDirection.js';\nimport { AILabel } from '../AILabel/index.js';\nimport { isComponentElement } from '../../internal/utils.js';\nimport { useNormalizedInputProps } from '../../internal/useNormalizedInputProps.js';\n\nconst Select = /*#__PURE__*/forwardRef(({\n  className,\n  decorator,\n  id,\n  inline = false,\n  labelText = 'Select',\n  disabled = false,\n  children,\n  // reserved for use with Pagination component\n  noLabel = false,\n  hideLabel = false,\n  invalid = false,\n  invalidText = '',\n  helperText = '',\n  light = false,\n  readOnly,\n  size,\n  warn = false,\n  warnText,\n  onChange,\n  slug,\n  ...other\n}, ref) => {\n  const prefix = usePrefix();\n  const {\n    isFluid\n  } = useContext(FormContext);\n  const [isFocused, setIsFocused] = useState(false);\n  // Convert children to an array of valid elements once using type narrowing\n  const validChildren = React.Children.toArray(children).filter(child => /*#__PURE__*/React.isValidElement(child));\n\n  // Find the default option based on the specified defaultValue or value\n  const selectedValue = other?.value || other?.defaultValue;\n  const selectedOption = validChildren.find(child => child.props?.value === selectedValue);\n\n  // Use the provided title prop, or the selected option's text if available;\n  // otherwise, fallback to the first option's text\n  const initialTitle = other?.title || selectedOption?.props?.text || validChildren[0]?.props?.text || '';\n  const [title, setTitle] = useState(initialTitle);\n  const normalizedProps = useNormalizedInputProps({\n    id,\n    disabled,\n    readOnly,\n    invalid,\n    invalidText,\n    warn,\n    warnText\n  });\n  const selectClasses = cx({\n    [`${prefix}--select`]: true,\n    [`${prefix}--select--inline`]: inline,\n    [`${prefix}--select--light`]: light,\n    [`${prefix}--select--invalid`]: normalizedProps.invalid,\n    [`${prefix}--select--disabled`]: normalizedProps.disabled,\n    [`${prefix}--select--readonly`]: readOnly,\n    [`${prefix}--select--warning`]: normalizedProps.warn,\n    [`${prefix}--select--fluid--invalid`]: isFluid && normalizedProps.invalid,\n    [`${prefix}--select--fluid--focus`]: isFluid && isFocused,\n    [`${prefix}--select--slug`]: slug,\n    [`${prefix}--select--decorator`]: decorator\n  });\n  const labelClasses = cx(`${prefix}--label`, {\n    [`${prefix}--visually-hidden`]: hideLabel,\n    [`${prefix}--label--disabled`]: normalizedProps.disabled\n  });\n  const inputClasses = cx({\n    [`${prefix}--select-input`]: true,\n    [`${prefix}--select-input--${size}`]: size\n  });\n  const error = normalizedProps.validation;\n  const helperTextClasses = cx(`${prefix}--form__helper-text`, {\n    [`${prefix}--form__helper-text--disabled`]: normalizedProps.disabled\n  });\n  const helper = helperText ? /*#__PURE__*/React.createElement(Text, {\n    as: \"div\",\n    id: normalizedProps.helperId,\n    className: helperTextClasses\n  }, helperText) : null;\n  const ariaProps = {};\n  if (normalizedProps.invalid) {\n    ariaProps['aria-describedby'] = normalizedProps.invalidId;\n  } else if (!inline && !isFluid) {\n    ariaProps['aria-describedby'] = helper ? normalizedProps.helperId : undefined;\n  }\n  const handleFocus = evt => {\n    setIsFocused(evt.type === 'focus' ? true : false);\n  };\n  const handleChange = evt => {\n    const selectedOption = evt?.target?.options[evt.target.selectedIndex];\n    setTitle(selectedOption?.text);\n  };\n  const readOnlyEventHandlers = {\n    onMouseDown: evt => {\n      // NOTE: does not prevent click\n      if (readOnly) {\n        evt.preventDefault();\n        // focus on the element as per readonly input behavior\n        evt.target.focus();\n      }\n    },\n    onKeyDown: evt => {\n      const selectAccessKeys = ['ArrowDown', 'ArrowUp', ' '];\n      // This prevents the select from opening for the above keys\n      if (readOnly && selectAccessKeys.includes(evt.key)) {\n        evt.preventDefault();\n      }\n    }\n  };\n\n  // AILabel always size `mini`\n  const candidate = slug ?? decorator;\n  const candidateIsAILabel = isComponentElement(candidate, AILabel);\n  const normalizedDecorator = candidateIsAILabel ? /*#__PURE__*/cloneElement(candidate, {\n    size: 'mini'\n  }) : candidate;\n  const input = (() => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"select\", _extends({}, other, ariaProps, {\n      id: id,\n      className: inputClasses,\n      disabled: normalizedProps.disabled || undefined,\n      \"aria-invalid\": normalizedProps.invalid || undefined,\n      \"aria-readonly\": readOnly || undefined,\n      title: title,\n      onChange: composeEventHandlers([onChange, handleChange])\n    }, readOnlyEventHandlers, {\n      ref: ref\n    }), children), /*#__PURE__*/React.createElement(ChevronDown, {\n      className: `${prefix}--select__arrow`\n    }), normalizedProps.invalid && /*#__PURE__*/React.createElement(WarningFilled, {\n      className: `${prefix}--select__invalid-icon`\n    }), !normalizedProps.invalid && normalizedProps.warn && /*#__PURE__*/React.createElement(WarningAltFilled, {\n      className: `${prefix}--select__invalid-icon ${prefix}--select__invalid-icon--warning`\n    }));\n  })();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(`${prefix}--form-item`, className)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: selectClasses\n  }, !noLabel && /*#__PURE__*/React.createElement(Text, {\n    as: \"label\",\n    htmlFor: id,\n    className: labelClasses\n  }, labelText), inline && /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefix}--select-input--inline__wrapper`\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefix}--select-input__wrapper`,\n    \"data-invalid\": normalizedProps.invalid || null\n  }, input), error), !inline && /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefix}--select-input__wrapper`,\n    \"data-invalid\": normalizedProps.invalid || null,\n    onFocus: handleFocus,\n    onBlur: handleFocus\n  }, input, slug ? normalizedDecorator : decorator ? /*#__PURE__*/React.createElement(\"div\", {\n    className: `${prefix}--select__inner-wrapper--decorator`\n  }, normalizedDecorator) : '', isFluid && /*#__PURE__*/React.createElement(\"hr\", {\n    className: `${prefix}--select__divider`\n  }), isFluid && error ? error : null), !inline && !isFluid && error ? error : helper));\n});\nSelect.displayName = 'Select';\nSelect.propTypes = {\n  /**\n   * Provide the contents of your Select\n   */\n  children: PropTypes.node,\n  /**\n   * Specify an optional className to be applied to the node containing the label and the select box\n   */\n  className: PropTypes.string,\n  /**\n   * **Experimental**: Provide a decorator component to be rendered inside the `Select` component\n   */\n  decorator: PropTypes.node,\n  /**\n   * Optionally provide the default value of the `<select>`\n   */\n  defaultValue: PropTypes.any,\n  /**\n   * Specify whether the control is disabled\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Provide text that is used alongside the control label for additional help\n   */\n  helperText: PropTypes.node,\n  /**\n   * Specify whether the label should be hidden, or not\n   */\n  hideLabel: PropTypes.bool,\n  /**\n   * Specify a custom `id` for the `<select>`\n   */\n  id: PropTypes.string.isRequired,\n  /**\n   * Specify whether you want the inline version of this control\n   */\n  inline: PropTypes.bool,\n  /**\n   * Specify if the currently value is invalid.\n   */\n  invalid: PropTypes.bool,\n  /**\n   * Message which is displayed if the value is invalid.\n   */\n  invalidText: PropTypes.node,\n  /**\n   * Provide label text to be read by screen readers when interacting with the\n   * control\n   */\n  labelText: PropTypes.node,\n  /**\n   * `true` to use the light version. For use on $ui-01 backgrounds only.\n   * Don't use this to make tile background color same as container background color.\n   */\n  light: deprecate(PropTypes.bool, 'The `light` prop for `Select` is no longer needed and has ' + 'been deprecated in v11 in favor of the new `Layer` component. It will be moved in the next major release.'),\n  /**\n   * Reserved for use with Pagination component. Will not render a label for the\n   * select since Pagination renders one for us.\n   */\n  noLabel: PropTypes.bool,\n  /**\n   * Provide an optional `onChange` hook that is called each time the value of\n   * the underlying `<input>` changes\n   */\n  onChange: PropTypes.func,\n  /**\n   * Whether the select should be read-only\n   */\n  readOnly: PropTypes.bool,\n  /**\n   * Specify the size of the Select Input.\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n  slug: deprecate(PropTypes.node, 'The `slug` prop has been deprecated and will be removed in the next major version. Use the decorator prop instead.'),\n  /**\n   * Specify whether the control is currently in warning state\n   */\n  warn: PropTypes.bool,\n  /**\n   * Provide the text that is displayed when the control is in warning state\n   */\n  warnText: PropTypes.node\n};\n\nexport { Select as default };\n"],"names":["Select","className","decorator","id","inline","labelText","disabled","children","noLabel","hideLabel","invalid","invalidText","helperText","light","readOnly","size","warn","warnText","onChange","slug","other","ref","prefix","usePrefix","isFluid","useContext","FormContext","isFocused","setIsFocused","useState","validChildren","React","child","selectedValue","selectedOption","initialTitle","title","setTitle","normalizedProps","useNormalizedInputProps","selectClasses","cx","labelClasses","inputClasses","error","helperTextClasses","helper","Text","ariaProps","handleFocus","evt","handleChange","readOnlyEventHandlers","candidate","normalizedDecorator","isComponentElement","AILabel","cloneElement","input","_extends","composeEventHandlers","ChevronDown","WarningFilled","WarningAltFilled","PropTypes","deprecate"],"mappings":"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","x_google_ignoreList":[0]}