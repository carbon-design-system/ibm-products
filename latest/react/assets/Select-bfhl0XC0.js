import{b as oe,c as re,d as i,_ as ce,w as ie,P as s,g as V}from"./index-4poXP75K.js";import{e as t,r as f}from"./index-DtHxqM--.js";import{F as de}from"./FormContext-C4Nuixum.js";import{c as me}from"./events-CdfZZS3f.js";import{A as pe}from"./index-CVEmjZFv.js";import{i as ue}from"./utils--12iVJsW.js";import{T as v}from"./Text-Cjos7Soh.js";import{W as fe,a as $e}from"./bucket-19-D8xKEiK4.js";const W=t.forwardRef(function({className:q,decorator:$,id:b,inline:r=!1,labelText:z="Select",disabled:d=!1,children:N,noLabel:H=!1,hideLabel:R=!1,invalid:a=!1,invalidText:k="",helperText:_="",light:B=!1,readOnly:m,size:h,warn:p=!1,warnText:M,onChange:U,slug:E,...u},j){var S,L,P;const e=oe(),{isFluid:o}=f.useContext(de),[G,J]=f.useState(!1),Q=re(),w=t.Children.toArray(N).filter(l=>t.isValidElement(l)),x=w.find(l=>{var n;return((n=l.props)==null?void 0:n.value)===(u==null?void 0:u.defaultValue)}),X=((S=x==null?void 0:x.props)==null?void 0:S.text)||((P=(L=w[0])==null?void 0:L.props)==null?void 0:P.text)||"",[Y,Z]=f.useState(X),O=i({[`${e}--select`]:!0,[`${e}--select--inline`]:r,[`${e}--select--light`]:B,[`${e}--select--invalid`]:a,[`${e}--select--disabled`]:d,[`${e}--select--readonly`]:m,[`${e}--select--warning`]:p,[`${e}--select--fluid--invalid`]:o&&a,[`${e}--select--fluid--focus`]:o&&G,[`${e}--select--slug`]:E,[`${e}--select--decorator`]:$}),ee=i(`${e}--label`,{[`${e}--visually-hidden`]:R,[`${e}--label--disabled`]:d}),se=i({[`${e}--select-input`]:!0,[`${e}--select-input--${h}`]:h}),y=`${b}-error-msg`,te=(()=>{if(a)return k;if(p)return M})(),c=a||p?t.createElement(v,{as:"div",className:`${e}--form-requirement`,id:y},te):null,le=i(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:d}),C=_?`select-helper-text-${Q}`:void 0,I=_?t.createElement(v,{as:"div",id:C,className:le},_):null,g={};a?g["aria-describedby"]=y:!r&&!o&&(g["aria-describedby"]=I?C:void 0);const F=l=>{J(l.type==="focus")},ae=l=>{var K;const n=(K=l==null?void 0:l.target)==null?void 0:K.options[l.target.selectedIndex];Z(n==null?void 0:n.text)},ne={onMouseDown:l=>{m&&(l.preventDefault(),l.target.focus())},onKeyDown:l=>{m&&["ArrowDown","ArrowUp"," "].includes(l.key)&&l.preventDefault()}},A=E??$,T=ue(A,pe)?f.cloneElement(A,{size:"mini"}):null,D=t.createElement(t.Fragment,null,t.createElement("select",ce({},u,g,{id:b,className:se,disabled:d||void 0,"aria-invalid":a||void 0,"aria-readonly":m||void 0,title:Y,onChange:me([U,ae])},ne,{ref:j}),N),t.createElement(ie,{className:`${e}--select__arrow`}),a&&t.createElement(fe,{className:`${e}--select__invalid-icon`}),!a&&p&&t.createElement($e,{className:`${e}--select__invalid-icon ${e}--select__invalid-icon--warning`}));return t.createElement("div",{className:i(`${e}--form-item`,q)},t.createElement("div",{className:O},!H&&t.createElement(v,{as:"label",htmlFor:b,className:ee},z),r&&t.createElement("div",{className:`${e}--select-input--inline__wrapper`},t.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null},D),c),!r&&t.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null,onFocus:F,onBlur:F},D,E?T:$?t.createElement("div",{className:`${e}--select__inner-wrapper--decorator`},T):"",o&&t.createElement("hr",{className:`${e}--select__divider`}),o&&c?c:null),!r&&!o&&c?c:I))});W.displayName="Select";W.propTypes={children:s.node,className:s.string,decorator:s.node,defaultValue:s.any,disabled:s.bool,helperText:s.node,hideLabel:s.bool,id:s.string.isRequired,inline:s.bool,invalid:s.bool,invalidText:s.node,labelText:s.node,light:V(s.bool),noLabel:s.bool,onChange:s.func,readOnly:s.bool,size:s.oneOf(["sm","md","lg"]),slug:V(s.node),warn:s.bool,warnText:s.node};export{W as S};
