import{r as a,b as J,Q as Y,R as Z,U as ee,u as R,i as te,c as S,e as t,V as ne,_ as I,C as ae,W as se,d as re,o as $,X as oe,E as le,q as ce,P as e}from"./iframe-BBf3bqTv.js";import{u as L}from"./useControllableState-DY2q8Reb.js";import{M as T,u as ie,a as ue}from"./useAttachedMenu-tCJ9pwqm.js";import{T as me}from"./Text-CaNb5F2n.js";import{d as fe}from"./defaultItemToString-zSItMTD_.js";import{C as de,a as pe}from"./bucket-2-4NArCtKQ.js";var A,G,U;const D=a.forwardRef(function({children:l,className:u,disabled:s,kind:m="default",label:r,onClick:d,renderIcon:c,shortcut:C,...o},y){const[i,b]=a.useState(!1),[E,v]=a.useState(!1),{refs:p,floatingStyles:f,context:k}=J({open:i,onOpenChange:b,placement:E?"left-start":"right-start",whileElementsMounted:re,middleware:[se({mainAxis:-6,crossAxis:-6})],strategy:"fixed"}),{getReferenceProps:q,getFloatingProps:V}=Y([Z(k,{delay:100,enabled:!0,handleClose:ee({requireIntent:!1})})]),g=R(),x=a.useContext(T),M=a.useRef(null),j=te([y,M,p.setReference]),h=!!l,_=s&&!h,B=m==="danger"&&!h;function H(){x.dispatch({type:"registerItem",payload:{ref:M,disabled:!!s}})}function F(){M.current&&b(!0)}function Q(){b(!1)}function K(n){_||(h?F():(x.state.requestCloseRoot(n),d&&d(n)))}const w=a.useRef(!1),P=n=>$(n,le)||$(n,ce);function W(n){h&&$(n,oe)&&(F(),requestAnimationFrame(()=>{p.floating.current?.focus()}),n.stopPropagation(),n.preventDefault()),w.current=P(n),o.onKeyDown&&o.onKeyDown(n)}function X(n){w.current&&P(n)&&K(n),w.current=!1}const z=S(u,`${g}--menu-item`,{[`${g}--menu-item--disabled`]:_,[`${g}--menu-item--danger`]:B});a.useEffect(()=>{H()},[]);const{direction:O}=ie();return a.useEffect(()=>{document?.dir==="rtl"||O==="rtl"?v(!0):v(!1)},[O]),a.useEffect(()=>{c&&!x.state.hasIcons&&x.dispatch({type:"enableIcons"})},[c,x.state.hasIcons,x]),a.useEffect(()=>{Object.keys(f).forEach(n=>{p.floating.current&&n!=="position"&&(p.floating.current.style[n]=f[n])})},[f,p.floating]),t.createElement(ne,{context:k,order:["reference","floating"],modal:!1},t.createElement("li",I({role:"menuitem"},o,{ref:j,className:z,tabIndex:s?-1:0,"aria-disabled":_??void 0,"aria-haspopup":h??void 0,"aria-expanded":h?i:void 0,onClick:K,onKeyDown:W,onKeyUp:X,title:r},q()),t.createElement("div",{className:`${g}--menu-item__selection-icon`},o["aria-checked"]&&(A||(A=t.createElement(ae,null)))),t.createElement("div",{className:`${g}--menu-item__icon`},c&&t.createElement(c,null)),t.createElement(me,{as:"div",className:`${g}--menu-item__label`},r),C&&!h&&t.createElement("div",{className:`${g}--menu-item__shortcut`},C),h&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${g}--menu-item__shortcut`},E?G||(G=t.createElement(de,null)):U||(U=t.createElement(pe,null))),t.createElement(ue,I({label:r,open:i,onClose:()=>{Q(),M.current?.focus()},ref:p.setFloating},V()),l))))});D.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const ge=a.forwardRef(function({className:l,defaultSelected:u,label:s,onChange:m,selected:r,...d},c){const C=R(),o=a.useContext(T),[y,i]=L({value:r,onChange:m,defaultValue:u??!1});function b(){i(!y)}a.useEffect(()=>{o.state.hasSelectableItems||o.dispatch({type:"enableSelectableItems"})},[o.state.hasSelectableItems,o]);const E=S(l,`${C}--menu-item-selectable--selected`);return t.createElement(D,I({},d,{ref:c,label:s,className:E,role:"menuitemcheckbox","aria-checked":y,onClick:b}))});ge.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const he=a.forwardRef(function({children:l,className:u,label:s,...m},r){const d=R(),c=S(u,`${d}--menu-item-group`);return t.createElement("li",{className:c,role:"none",ref:r},t.createElement("ul",I({},m,{role:"group","aria-label":s}),l))});he.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const be=a.forwardRef(function({className:l,defaultSelectedItem:u,items:s,itemToString:m=fe,label:r,onChange:d,selectedItem:c,...C},o){const y=R(),i=a.useContext(T),[b,E]=L({value:c,onChange:d,defaultValue:u??{}});function v(f,k){E(f)}a.useEffect(()=>{i.state.hasSelectableItems||i.dispatch({type:"enableSelectableItems"})},[i.state.hasSelectableItems,i]);const p=S(l,`${y}--menu-item-radio-group`);return t.createElement("li",{className:p,role:"none",ref:o},t.createElement("ul",I({},C,{role:"group","aria-label":r}),s.map((f,k)=>t.createElement(D,{key:k,label:m(f),role:"menuitemradio","aria-checked":f===b,onClick:q=>{v(f)}}))))});be.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Ce=a.forwardRef(function({className:l,...u},s){const m=R(),r=S(l,`${m}--menu-item-divider`);return t.createElement("li",I({},u,{className:r,role:"separator",ref:s}))});Ce.propTypes={className:e.string};export{D as M,Ce as a,he as b,be as c,ge as d};
//# sourceMappingURL=MenuItem-CtjsENDt.js.map
