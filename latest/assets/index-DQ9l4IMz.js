import{b as G,u as J,l as at,a as it,A as lt,f as ct,V as ut,h as pt,g as ft,j as K,c as F,_ as O}from"./index-CO-HQMMN.js";import{P as i}from"./index-Dk74W0Oi.js";import{r as d,R as p}from"./index-BwDkhjyp.js";const j={};function dt(o,a,l){return function(f,e,r){if(f[e]!==void 0){if(!j[r]||!j[r][e]){j[r]={...j[r],[e]:!0};const g=f[e],H=l?l(g):null;a&&!a.includes(g)&&(l?`${g}${e}${r}${H}${g}`:`${g}${e}${r}${a.join(", ")}${g}`)}for(var s=arguments.length,E=new Array(s>3?s-3:0),h=3;h<s;h++)E[h-3]=arguments[h];return o(f,e,r,...E)}}}function Et(o,a,l){const n=d.useRef(null);d.useEffect(()=>{n.current=l},[l]),d.useEffect(()=>{var r;const f=s=>{n.current&&n.current(s)},e="current"in o?o.current:o;return(r=e==null?void 0:e.addEventListener)==null||r.call(e,a,f),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,a,f)}},[o,a])}function D(o,a){const l=d.useRef(null);d.useEffect(()=>{l.current=a},[a]),d.useEffect(()=>{function n(f){l.current&&l.current(f)}return window.addEventListener(o,n),()=>{window.removeEventListener(o,n)}},[o])}function gt(o){switch(o){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return o}}const Q=p.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ht=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o],bt=p.forwardRef(function(a,l){var W;let{isTabTip:n,align:f=n?"bottom-start":"bottom",as:e="span",autoAlign:r=!1,caret:s=!n,className:E,children:h,dropShadow:g=!0,highContrast:H=!1,onRequestClose:w,open:V,...Y}=a;const b=G(),Z=d.useRef(null),m=d.useRef(null),C=d.useRef(null),v=J("enable-v12-dynamic-floating-styles")||r;let x=gt(f);D("blur",()=>{V&&(w==null||w())}),D("click",c=>{var t;V&&!((t=C==null?void 0:C.current)!=null&&t.contains(c.target))&&(w==null||w())});const q=p.Children.toArray(h).some(c=>{var t,u;return(u=(t=c==null?void 0:c.props)==null?void 0:t.className)==null?void 0:u.includes("slug")})?7:6,y=d.useRef({offset:10,caretHeight:q});at(()=>{if(s&&C.current){const c=window.getComputedStyle(C.current,null),t=c.getPropertyValue("--cds-popover-offset"),u=c.getPropertyValue("--cds-popover-caret-height");t&&(y.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),u&&(y.current.caretHeight=u.includes("px")?Number(u.split("px",1)[0])*1:Number(u.split("rem",1)[0])*16)}});const{refs:P,floatingStyles:L,placement:R,middlewareData:A}=it(v?{placement:x,strategy:"fixed",middleware:[lt(n?0:(W=y==null?void 0:y.current)==null?void 0:W.offset),r&&ct({fallbackAxisSideDirection:"start"}),ut({element:m}),r&&pt()],whileElementsMounted:ft}:{}),_=d.useMemo(()=>({floating:Z,setFloating:P.setFloating,caretRef:m,autoAlign:r}),[P.setFloating,r]);n&&(["bottom-start","bottom-end"].includes(x)||(x="bottom-start")),d.useEffect(()=>{var c,t;if(v){const u={...L,visibility:(c=A.hide)!=null&&c.referenceHidden?"hidden":"visible"};if(Object.keys(u).forEach($=>{P.floating.current&&(P.floating.current.style[$]=u[$])}),s&&A&&A.arrow&&(m!=null&&m.current)){const{x:$,y:S}=A.arrow,N={top:"bottom",right:"left",bottom:"top",left:"right"}[R.split("-")[0]];m.current.style.left=$!=null?`${$}px`:"",m.current.style.top=S!=null?`${S}px`:"",m.current.style.right="",m.current.style.bottom="",N&&(m.current.style[N]=`${-((t=y==null?void 0:y.current)==null?void 0:t.caretHeight)}px`)}}},[L,P.floating,v,A,R,s]);const tt=K([l,C]),et=r&&R!==x?R:x,rt=F({[`${b}--popover-container`]:!0,[`${b}--popover--caret`]:s,[`${b}--popover--drop-shadow`]:g,[`${b}--popover--high-contrast`]:H,[`${b}--popover--open`]:V,[`${b}--popover--auto-align ${b}--autoalign`]:v,[`${b}--popover--${et}`]:!0,[`${b}--popover--tab-tip`]:n},E),ot=p.Children.map(h,c=>{var M,U;const t=c,u=(M=t==null?void 0:t.type)==null?void 0:M.displayName,$=(t==null?void 0:t.type)==="button",S=v&&u&&["ToggletipButton"].includes(u),N=v&&!["ToggletipContent","PopoverContent"].includes(u);if(p.isValidElement(t)&&($||S||N)){const k=(U=t==null?void 0:t.props)==null?void 0:U.className,T=(t==null?void 0:t.props).ref,st=F(`${b}--popover--tab-tip__button`,k);return p.cloneElement(t,{className:n&&(t==null?void 0:t.type)==="button"?st:k||"",ref:B=>{var I,z;(v&&((I=t==null?void 0:t.type)==null?void 0:I.displayName)!=="PopoverContent"||v&&((z=t==null?void 0:t.type)==null?void 0:z.displayName)==="ToggletipButton")&&P.setReference(B),typeof T=="function"?T(B):T!=null&&(T.current=B)}})}else return t}),nt=e;return p.createElement(Q.Provider,{value:_},p.createElement(nt,O({},Y,{className:rt,ref:tt}),v||n?ot:h))});bt.propTypes={align:dt(i.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],ht),as:i.oneOfType([i.string,i.elementType]),autoAlign:i.bool,caret:i.bool,children:i.node,className:i.string,dropShadow:i.bool,highContrast:i.bool,isTabTip:i.bool,onRequestClose:i.func,open:i.bool.isRequired};function mt(o,a){let{className:l,children:n,...f}=o;const e=G(),{setFloating:r,caretRef:s,autoAlign:E}=p.useContext(Q),h=K([r,a]),g=J("enable-v12-dynamic-floating-styles")||E;return p.createElement("span",O({},f,{className:`${e}--popover`}),p.createElement("span",{className:F(`${e}--popover-content`,l),ref:h},n,g&&p.createElement("span",{className:F({[`${e}--popover-caret`]:!0,[`${e}--popover--auto-align`]:!0}),ref:s})),!g&&p.createElement("span",{className:F({[`${e}--popover-caret`]:!0}),ref:s}))}const X=p.forwardRef(mt);X.displayName="PopoverContent";X.propTypes={children:i.node,className:i.string};export{bt as P,X as a,Et as b,dt as d,gt as m,D as u};
