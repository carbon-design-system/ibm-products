import{b as D,j as Ne,c as _,_ as xe,P as e,e as Y}from"./index-B_euquWE.js";import{e as r,r as h}from"./index-DxDX2vOa.js";import{u as Ie}from"./useNormalizedInputProps-BaY27oQV.js";import{F as Ce}from"./FormContext-Dj7olUH1.js";import{T as re}from"./Text-9AedOkae.js";import{S as Te}from"./bucket-16-BwEHvyin.js";import{A as Ve}from"./bucket-0-DEgqxqZV.js";var Z,ee;const ne={"increment.number":"increment.number","decrement.number":"decrement.number"},Fe={[ne["increment.number"]]:"Increment number",[ne["decrement.number"]]:"Decrement number"},Le=r.forwardRef(function(m,d){var J,Q;const{allowEmpty:l=!1,className:s,decorator:i,disabled:c=!1,disableWheel:O=!1,defaultValue:$=0,helperText:R="",hideLabel:W=!1,hideSteppers:k,iconDescription:N,id:L,label:ie,invalid:se=!1,invalidText:oe,light:ue,max:x,min:I,onChange:C,onClick:S,onKeyUp:de,readOnly:b,size:B="md",slug:p,step:T=1,translateWithId:M=t=>Fe[t],warn:ce=!1,warnText:me="",value:f,...g}=m,n=D(),{isFluid:v}=h.useContext(Ce),[be,K]=h.useState(!1),[A,V]=h.useState(()=>f!==void 0?f:$!==void 0?$:l?"":0),[pe,fe]=h.useState(f),y=h.useRef(null),ve=Ne([d,y]),he=_({[`${n}--number`]:!0,[`${n}--number--helpertext`]:!0,[`${n}--number--readonly`]:b,[`${n}--number--light`]:ue,[`${n}--number--nolabel`]:W,[`${n}--number--nosteppers`]:k,[`${n}--number--${B}`]:B}),_e=Se({allowEmpty:l,invalid:se,value:A,max:x,min:I}),a=Ie({id:L,readOnly:b,disabled:c,invalid:!_e,invalidText:oe,warn:ce,warnText:me}),[U,j]=[M("increment.number"),M("decrement.number")],$e=_(`${n}--number__input-wrapper`,{[`${n}--number__input-wrapper--warning`]:a.warn,[`${n}--number__input-wrapper--slug`]:p,[`${n}--number__input-wrapper--decorator`]:i}),ge=_({[`${n}--number__invalid`]:a.invalid||a.warn,[`${n}--number__invalid--warning`]:a.warn});f!==pe&&(V(f),fe(f));let F;a.invalid&&(F=a.invalidId),a.warn&&(F=a.warnId),a.validation||(F=R?a.helperId:void 0);function ye(t){if(c)return;const w={value:l&&t.target.value===""?"":Number(t.target.value),direction:A<t.target.value?"up":"down"};V(w.value),C&&C(t,w)}const q=t=>{"type"in t.target&&t.target.type==="button"?K(!1):K(t.type==="focus")},we=_(`${n}--form-item`,{[s]:!!s,[`${n}--number-input--fluid--invalid`]:v&&a.invalid,[`${n}--number-input--fluid--focus`]:v&&be,[`${n}--number-input--fluid--disabled`]:v&&c}),H=a.icon;function G(t,w){if(y.current){const X=Number(y.current.value);let E=w==="up"?X+T:X-T;I!==void 0&&(E=Math.max(E,I)),x!==void 0&&(E=Math.min(E,x));const Ee=y.current?y.current.value:"",z={value:l&&Ee===""&&T===0?"":E,direction:w};V(z.value),C&&C(t,z),S&&S(t,z)}}let o=r.isValidElement(p??i)?p??i:null;o&&((J=o.type)==null?void 0:J.displayName)==="AILabel"&&(o=r.cloneElement(o,{size:"mini"}));let P;return o&&((Q=o.type)==null?void 0:Q.displayName)==="AILabel"&&(P=o.props.revertActive),h.useEffect(()=>{!P&&p&&$&&V($)},[$,P,p]),r.createElement("div",{className:we,onFocus:v?q:void 0,onBlur:v?q:void 0},r.createElement("div",{className:he,"data-invalid":a.invalid?!0:void 0},r.createElement(ae,{disabled:a.disabled,hideLabel:W,id:L,label:ie}),r.createElement("div",{className:$e},r.createElement("input",xe({},g,{"data-invalid":a.invalid?!0:void 0,"aria-invalid":a.invalid,"aria-describedby":F,"aria-readonly":b,disabled:a.disabled,ref:ve,id:L,max:x,min:I,onClick:S,onChange:ye,onKeyUp:de,onFocus:t=>{O&&t.target.addEventListener("wheel",te),g.onFocus&&g.onFocus(t)},onBlur:t=>{O&&t.target.removeEventListener("wheel",te),g.onBlur&&g.onBlur(t)},pattern:"[0-9]*",readOnly:b,step:T,type:"number",value:A})),p?o:i?r.createElement("div",{className:`${n}--number__input-inner-wrapper--decorator`},o):"",H?r.createElement(H,{className:ge}):null,!k&&r.createElement("div",{className:`${n}--number__controls`},r.createElement("button",{"aria-label":j||N,className:`${n}--number__control-btn down-icon`,disabled:c||b,onClick:t=>G(t,"down"),tabIndex:-1,title:j||N,type:"button"},Z||(Z=r.createElement(Te,{className:"down-icon"}))),r.createElement("div",{className:`${n}--number__rule-divider`}),r.createElement("button",{"aria-label":U||N,className:`${n}--number__control-btn up-icon`,disabled:c||b,onClick:t=>G(t,"up"),tabIndex:-1,title:U||N,type:"button"},ee||(ee=r.createElement(Ve,{className:"up-icon"}))),r.createElement("div",{className:`${n}--number__rule-divider`}))),v&&r.createElement("hr",{className:`${n}--number-input__divider`}),a.validation?a.validation:r.createElement(le,{id:a.helperId,disabled:c,description:R})))});Le.propTypes={allowEmpty:e.bool,className:e.string,decorator:e.node,defaultValue:e.oneOfType([e.number,e.string]),disableWheel:e.bool,disabled:e.bool,helperText:e.node,hideLabel:e.bool,hideSteppers:e.bool,iconDescription:e.string,id:e.string.isRequired,invalid:e.bool,invalidText:e.node,label:e.node,light:Y(e.bool),max:e.number,min:e.number,onChange:e.func,onClick:e.func,onKeyUp:e.func,readOnly:e.bool,size:e.oneOf(["sm","md","lg"]),slug:Y(e.node),step:e.number,translateWithId:e.func,value:e.oneOfType([e.number,e.string]),warn:e.bool,warnText:e.node};const ae=u=>{let{disabled:m,id:d,hideLabel:l,label:s}=u;const i=D(),c=_({[`${i}--label`]:!0,[`${i}--label--disabled`]:m,[`${i}--visually-hidden`]:l});return s?r.createElement(re,{as:"label",htmlFor:d,className:c},s):null};ae.propTypes={disabled:e.bool,hideLabel:e.bool,id:e.string,label:e.node};function le(u){let{disabled:m,description:d,id:l}=u;const s=D(),i=_(`${s}--form__helper-text`,{[`${s}--form__helper-text--disabled`]:m});return d?r.createElement(re,{as:"div",id:l,className:i},d):null}le.propTypes={description:e.node,disabled:e.bool,id:e.string};function Se(u){let{allowEmpty:m,invalid:d,value:l,max:s,min:i}=u;return d?!1:l===""?m:!(l>s||l<i)}function te(u){u.preventDefault()}export{Le as N};
