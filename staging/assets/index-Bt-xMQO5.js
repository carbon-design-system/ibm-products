import{r as p,R as o}from"./index-BwDkhjyp.js";import{P as k}from"./index-Dk74W0Oi.js";import{F as d}from"./index-DshjxXYm.js";import{N as g}from"./index-C2eUe6cH.js";import{F as T}from"./index-BO2nGe7b.js";import{A as F}from"./index-kGg6iCZo.js";const{global:L}=__STORYBOOK_MODULE_GLOBAL__,{makeDecorator:b,addons:f}=__STORYBOOK_MODULE_PREVIEW_API__,{STORY_CHANGED:C,SELECT_STORY:R}=__STORYBOOK_MODULE_CORE_EVENTS__;var v="links",{document:m,HTMLElement:D}=L;function K(e){let t={},a=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let r=0;r<a.length;r++){let n=a[r].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t}var u=e=>f.getChannel().emit(R,e),A=(e,t)=>new Promise(a=>{let{location:r}=m,n=K(r.search).id,s=e||n.split("--",2)[0],i=`/story/${g(s,t)}`,c=r.pathname.replace(/iframe\.html$/,""),O=`${r.origin+c}?${Object.entries({path:i}).map(h=>`${h[0]}=${h[1]}`).join("&")}`;a(O)}),_=e=>{let{target:t}=e;if(!(t instanceof D))return;let a=t,{sbKind:r,sbStory:n}=a.dataset;(r||n)&&(e.preventDefault(),u({kind:r,story:n}))},l=!1,P=()=>{l||(l=!0,m.addEventListener("click",_))},S=()=>{l&&(l=!1,m.removeEventListener("click",_))};b({name:"withLinks",parameterName:v,wrapper:(e,t)=>(P(),f.getChannel().once(C,S),e(t))});var U=0,$=e=>e.button===U&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,j=(e,t=a=>{})=>{$(e)&&(e.preventDefault(),t(e))},E=class extends p.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:e,title:t=e,story:a,name:r=a}=this.props;if(t&&r){let n=await A(t,r);this.setState({href:n})}},this.handleClick=()=>{let{kind:e,title:t=e,story:a,name:r=a}=this.props;t&&r&&u({title:t,name:r})}}componentDidMount(){this.updateHref()}componentDidUpdate(e){let{kind:t,title:a,story:r,name:n}=this.props;(e.kind!==t||e.story!==r||e.title!==a||e.name!==n)&&this.updateHref()}render(){let{kind:e,title:t=e,story:a,name:r=a,children:n,...s}=this.props,{href:i}=this.state;return o.createElement("a",{href:i,onClick:c=>j(c,this.handleClick),...s},n)}};E.defaultProps={children:void 0};var B=E;const y=({flags:e,children:t})=>{const[a,r]=p.useState(),n=Object.fromEntries(Array.from(d.flags.keys()).map(s=>[s,!0]));return p.useEffect(()=>{if(e||r(n),e){for(const[s,i]of Object.entries(e))d.flags.set(s,i);r(d.flags)}},[e]),o.createElement(T,{flags:e?a:n},o.createElement(F,{type:"feature-flags",text:o.createElement("span",null,"This story is rendered with"," ",o.createElement(B,{title:"IBM Products/Components/FeatureFlags",name:"Docs"},e?Object.keys(e).map((s,i)=>Object.keys(e).length>1?i===Object.keys(e).length-1?s:`${s}, `:s):"all available feature flags")," ","enabled")},t))};y.propTypes={children:k.node};y.__docgenInfo={description:"",methods:[],displayName:"WithFeatureFlags",props:{children:{description:"",type:{name:"node"},required:!1}}};export{y as W};
