import{b as U,u as I,l as it,a as ct,e as pt,x as ut,f as ft,bK as dt,h as gt,i as K,d as F,_ as z,P as e}from"./index-C360Eztx.js";import{r as f,e as p}from"./index-DtHxqM--.js";const k={};function bt(l,o,i){return function(r,n,a,...x){if(r[n]!==void 0){if(!k[a]||!k[a][n]){k[a]={...k[a],[n]:!0};const u=r[n],E=i?i(u):null;o&&!o.includes(u)&&(i?`${u}${n}${a}${E}${u}`:`${u}${n}${a}${o.join(", ")}${u}`)}return l(r,n,a,...x)}}}const Et=(l,o,i)=>{const d=f.useRef(null);f.useEffect(()=>{d.current=i},[i]),f.useEffect(()=>{const r=a=>{d.current&&d.current(a)},n="current"in l?l.current:l;return n==null||n.addEventListener(o,r),()=>{n==null||n.removeEventListener(o,r)}},[l,o])},M=(l,o)=>{const i=f.useRef(null);f.useEffect(()=>{i.current=o},[o]),f.useEffect(()=>{const d=r=>{i.current&&i.current(r)};return window.addEventListener(l,d),()=>{window.removeEventListener(l,d)}},[l])},mt={"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"},D=l=>mt[l]??l,G=p.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ht=p.forwardRef(function({isTabTip:o,align:i=o?"bottom-start":"bottom",as:d="span",autoAlign:r=!1,autoAlignBoundary:n,caret:a=!o,className:x,children:u,dropShadow:E=!0,highContrast:Q=!1,onRequestClose:w,open:H,alignmentAxisOffset:X,...Y},Z){var B;const g=U(),q=f.useRef(null),b=f.useRef(null),S=f.useRef(null),h=I("enable-v12-dynamic-floating-styles")||r;let v=D(i);M("blur",()=>{H&&(w==null||w())}),M("click",({target:s})=>{var t;H&&s instanceof Node&&!((t=S.current)!=null&&t.contains(s))&&(w==null||w())});const tt=p.Children.toArray(u).some(s=>{var t,c,m,$;return((c=(t=s==null?void 0:s.props)==null?void 0:t.className)==null?void 0:c.includes("slug"))||(($=(m=s==null?void 0:s.props)==null?void 0:m.className)==null?void 0:$.includes("ai-label"))})?7:6,y=f.useRef({offset:10,caretHeight:tt});it(()=>{if(a&&S.current){const s=window.getComputedStyle(S.current,null),t=s.getPropertyValue("--cds-popover-offset"),c=s.getPropertyValue("--cds-popover-caret-height");t&&(y.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),c&&(y.current.caretHeight=c.includes("px")?Number(c.split("px",1)[0])*1:Number(c.split("rem",1)[0])*16)}});const{refs:P,floatingStyles:j,placement:N,middlewareData:A}=ct(h?{placement:v,strategy:"fixed",middleware:[ut(o?0:{alignmentAxis:X,mainAxis:(B=y==null?void 0:y.current)==null?void 0:B.offset}),r&&ft({fallbackPlacements:o?v.includes("bottom")?["bottom-start","bottom-end","top-start","top-end"]:["top-start","top-end","bottom-start","bottom-end"]:v.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:n}),dt({element:b}),r&&gt()],whileElementsMounted:pt}:{}),et=f.useMemo(()=>({floating:q,setFloating:P.setFloating,caretRef:b,autoAlign:r}),[P.setFloating,r]);o&&(["bottom-start","bottom-end"].includes(v)||(v="bottom-start")),f.useEffect(()=>{var s,t;if(h){const c={...j,visibility:(s=A.hide)!=null&&s.referenceHidden?"hidden":"visible"};if(Object.keys(c).forEach(m=>{P.floating.current&&(P.floating.current.style[m]=c[m])}),a&&A&&A.arrow&&(b!=null&&b.current)){const{x:m,y:$}=A.arrow,R={top:"bottom",right:"left",bottom:"top",left:"right"}[N.split("-")[0]];b.current.style.left=m!=null?`${m}px`:"",b.current.style.top=$!=null?`${$}px`:"",b.current.style.right="",b.current.style.bottom="",R&&(b.current.style[R]=`${-((t=y==null?void 0:y.current)==null?void 0:t.caretHeight)}px`)}}},[j,P.floating,h,A,N,a]);const ot=K([Z,S]),rt=r&&N!==v?N:v,nt=F({[`${g}--popover-container`]:!0,[`${g}--popover--caret`]:a,[`${g}--popover--drop-shadow`]:E,[`${g}--popover--high-contrast`]:Q,[`${g}--popover--open`]:H,[`${g}--popover--auto-align ${g}--autoalign`]:h,[`${g}--popover--${rt}`]:!0,[`${g}--popover--tab-tip`]:o},x),st=p.Children.map(u,s=>{var L,V;const t=s,c=(L=t==null?void 0:t.type)==null?void 0:L.displayName,m=(t==null?void 0:t.type)==="button",$=h&&c&&["ToggletipButton"].includes(c),R=h&&!["ToggletipContent","PopoverContent"].includes(c);if(p.isValidElement(t)&&(m||$||R)){const _=(V=t==null?void 0:t.props)==null?void 0:V.className,C=(t==null?void 0:t.props).ref,lt=F(`${g}--popover--tab-tip__button`,_);return p.cloneElement(t,{className:o&&(t==null?void 0:t.type)==="button"?lt:_||"",ref:T=>{var O,W;(h&&((O=t==null?void 0:t.type)==null?void 0:O.displayName)!=="PopoverContent"||h&&((W=t==null?void 0:t.type)==null?void 0:W.displayName)==="ToggletipButton")&&P.setReference(T),typeof C=="function"?C(T):C!=null&&(C.current=T)}})}else return t}),at=d;return p.createElement(G.Provider,{value:et},p.createElement(at,z({},Y,{className:nt,ref:ot}),h||o?st:u))});ht.propTypes={align:bt(e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],D),as:e.oneOfType([e.string,e.elementType]),autoAlign:e.bool,autoAlignBoundary:e.oneOfType([e.oneOf(["clippingAncestors"]),e.elementType,e.arrayOf(e.elementType),e.exact({x:e.number.isRequired,y:e.number.isRequired,width:e.number.isRequired,height:e.number.isRequired})]),caret:e.bool,children:e.node,className:e.string,dropShadow:e.bool,highContrast:e.bool,isTabTip:e.bool,onRequestClose:e.func,open:e.bool.isRequired};function yt({className:l,children:o,...i},d){const r=U(),{setFloating:n,caretRef:a,autoAlign:x}=p.useContext(G),u=K([n,d]),E=I("enable-v12-dynamic-floating-styles")||x;return p.createElement("span",z({},i,{className:`${r}--popover`}),p.createElement("span",{className:F(`${r}--popover-content`,l),ref:u},o,E&&p.createElement("span",{className:F({[`${r}--popover-caret`]:!0,[`${r}--popover--auto-align`]:!0}),ref:a})),!E&&p.createElement("span",{className:F({[`${r}--popover-caret`]:!0}),ref:a}))}const J=p.forwardRef(yt);J.displayName="PopoverContent";J.propTypes={children:e.node,className:e.string};export{ht as P,J as a,Et as b,bt as d,D as m,M as u};
