import{P as i,e as p,u as le,r as h,m as it,c as T,_ as rt,o as De,aa as nt,a9 as st,l as Fe}from"./iframe-D7eStwkL.js";import{u as at}from"./useNormalizedInputProps-OBtWfA41.js";import{F as lt}from"./FormContext-DZrds_Pd.js";import{c as ot}from"./clamp--00YEiB8.js";import{u as ut}from"./useControllableState-Nc8tGw_d.js";import"./documentLang-E105Y72C.js";import{A as Pe}from"./index-DtlUN_qQ.js";import{i as mt}from"./utils-DEi-HpEF.js";import{T as Me}from"./Text-CX3SBrnk.js";import{a3 as ct}from"./bucket-16-B9n8vlra.js";import{A as dt}from"./bucket-0-L01MYrbT.js";let re=new Map,se=!1;try{se=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let G=!1;try{G=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ae={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class ae{format(t){let e="";if(!se&&this.options.signDisplay!=null?e=ft(this.numberFormatter,this.options.signDisplay,t):e=this.numberFormatter.format(t),this.options.style==="unit"&&!G){var r;let{unit:a,unitDisplay:l="short",locale:o}=this.resolvedOptions();if(!a)return e;let m=(r=Ae[a])===null||r===void 0?void 0:r[l];e+=m[o]||m.default}return e}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,e){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,e);if(e<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(e)}`}formatRangeToParts(t,e){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,e);if(e<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),a=this.numberFormatter.formatToParts(e);return[...r.map(l=>({...l,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...a.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!se&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!G&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,e={}){this.numberFormatter=pt(t,e),this.options=e}}function pt(n,t={}){let{numberingSystem:e}=t;if(e&&n.includes("-nu-")&&(n.includes("-u-")||(n+="-u-"),n+=`-nu-${e}`),t.style==="unit"&&!G){var r;let{unit:o,unitDisplay:m="short"}=t;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Ae[o])===null||r===void 0)&&r[m]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${m}`);t={...t,style:"decimal"}}let a=n+(t?Object.entries(t).sort((o,m)=>o[0]<m[0]?-1:1).join():"");if(re.has(a))return re.get(a);let l=new Intl.NumberFormat(n,t);return re.set(a,l),l}function ft(n,t,e){if(t==="auto")return n.format(e);if(t==="never")return n.format(Math.abs(e));{let r=!1;if(t==="always"?r=e>0||Object.is(e,0):t==="exceptZero"&&(Object.is(e,-0)||Object.is(e,0)?e=Math.abs(e):r=e>0),r){let a=n.format(-e),l=n.format(e),o=a.replace(l,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),a.replace(l,"!!!").replace(o,"+").replace("!!!",l)}else return n.format(e)}}const bt=new RegExp("^.*\\(.*\\).*$"),gt=["latn","arab","hanidec","deva","beng"];class Le{parse(t){return ne(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,r){return ne(this.locale,this.options,t).isValidPartialNumber(t,e,r)}getNumberingSystem(t){return ne(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const Ee=new Map;function ne(n,t,e){let r=Ie(n,t);if(!n.includes("-nu-")&&!r.isValidPartialNumber(e)){for(let a of gt)if(a!==r.options.numberingSystem){let l=Ie(n+(n.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(l.isValidPartialNumber(e))return l}}return r}function Ie(n,t){let e=n+(t?Object.entries(t).sort((a,l)=>a[0]<l[0]?-1:1).join():""),r=Ee.get(e);return r||(r=new ht(n,t),Ee.set(e,r)),r}class ht{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=L(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let o=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let m=e.indexOf(".");m===-1&&(m=e.length),e=e.replace(".",""),m-2===0?e=`0.${e}`:m-2===-1?e=`0.0${e}`:m-2===-2?e="0.00":e=`${e.slice(0,m-2)}.${e.slice(m-2)}`,o>-1&&(e=`-${e}`)}let r=e?+e:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var a,l;let o={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((l=this.options.maximumFractionDigits)!==null&&l!==void 0?l:0)+2,20)};return new Le(this.locale,o).parse(new ae(this.locale,o).format(r))}return this.options.currencySign==="accounting"&&bt.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=L(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&this.symbols.group&&(t=L(t," ",this.symbols.group),t=L(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=L(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=$t(t,this.formatter,this.options,e);var r,a;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const _e=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),yt=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $t(n,t,e,r){var a,l,o,m;let g=new Intl.NumberFormat(n,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),$=g.formatToParts(-10000.111),W=g.formatToParts(10000.111),j=yt.map(c=>g.formatToParts(c));var E;let I=(E=(a=$.find(c=>c.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&E!==void 0?E:"-",S=(l=W.find(c=>c.type==="plusSign"))===null||l===void 0?void 0:l.value;!S&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(S="+");let Y=(o=new Intl.NumberFormat(n,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(c=>c.type==="decimal"))===null||o===void 0?void 0:o.value,q=(m=$.find(c=>c.type==="group"))===null||m===void 0?void 0:m.value,H=$.filter(c=>!_e.has(c.type)).map(c=>Ce(c.value)),J=j.flatMap(c=>c.filter(b=>!_e.has(b.type)).map(b=>Ce(b.value))),w=[...new Set([...H,...J])].sort((c,b)=>b.length-c.length),V=w.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${w.join("|")}|[\\p{White_Space}]`,"gu"),_=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),x=new Map(_.map((c,b)=>[c,b])),R=new RegExp(`[${_.join("")}]`,"g");return{minusSign:I,plusSign:S,decimal:Y,group:q,literals:V,numeral:R,index:c=>String(x.get(c))}}function L(n,t,e){return n.replaceAll?n.replaceAll(t,e):n.split(t).join(e)}function Ce(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const vt=i.shape({localeMatcher:i.oneOf(["best fit","lookup"]),style:i.oneOf(["decimal","currency","percent","unit"]),currency:i.string,currencyDisplay:i.oneOf(["symbol","narrowSymbol","code","name"]),currencySign:i.oneOf(["standard","accounting"]),unit:i.string,unitDisplay:i.oneOf(["short","narrow","long"]),notation:i.oneOf(["standard","scientific","engineering","compact"]),compactDisplay:i.oneOf(["short","long"]),signDisplay:i.oneOf(["auto","never","always","exceptZero"]),minimumIntegerDigits:i.number,minimumFractionDigits:i.number,maximumFractionDigits:i.number,minimumSignificantDigits:i.number,maximumSignificantDigits:i.number,useGrouping:i.oneOfType([i.bool,i.oneOf(["always","auto","min2"])]),numberingSystem:i.string,roundingIncrement:i.number,roundingMode:i.oneOf(["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"]),trailingZeroDisplay:i.oneOf(["auto","stripIfInteger"])});var Oe,Te;const Ve={"increment.number":"increment.number","decrement.number":"decrement.number"},wt={[Ve["increment.number"]]:"Increment number",[Ve["decrement.number"]]:"Decrement number"},xt=p.forwardRef(function(t,e){const{allowEmpty:r=!1,className:a,decorator:l,disabled:o=!1,disableWheel:m=!1,defaultValue:g=0,formatOptions:$,helperText:W="",hideLabel:j=!1,hideSteppers:E,iconDescription:I,id:S,inputMode:oe,invalid:Y=!1,invalidText:q,label:H,light:J,locale:w="en-US",max:V,min:_,onChange:x,onClick:R,onKeyUp:ue,pattern:c="[0-9]*",readOnly:b,size:me="md",slug:M,step:C=1,translateWithId:ce=s=>wt[s],type:y="number",warn:ze=!1,warnText:ke="",value:v,...D}=t,u=le(),{isFluid:O}=h.useContext(lt),[Ke,de]=h.useState(!1),[z,k]=h.useState(()=>v!==void 0?v:g!==void 0?g:r?"":0),[Be,Ue]=h.useState(v),F=h.useMemo(()=>new Le(w,$),[w,$]),[K,pe,Ze]=ut({name:"NumberInput",defaultValue:typeof g=="string"?F.parse(g):g,value:typeof v=="string"?F.parse(v):v}),[B,X]=p.useState(()=>isNaN(K)?"":new ae(w,$).format(K)),fe=h.useMemo(()=>F.getNumberingSystem(B),[F,B]),be=h.useMemo(()=>new ae(w,{...$,numberingSystem:fe}),[w,$,fe]),ge=h.useCallback(s=>isNaN(s)||s===null?"":be.format(s),[be]),P=h.useRef(null),Ge=it([e,P]),Ye=T({[`${u}--number`]:!0,[`${u}--number--helpertext`]:!0,[`${u}--number--readonly`]:b,[`${u}--number--light`]:J,[`${u}--number--nolabel`]:j,[`${u}--number--nosteppers`]:E,[`${u}--number--${me}`]:me}),qe=Nt({allowEmpty:r,invalid:Y,value:y==="number"?z:K,max:V,min:_}),d=at({id:S,readOnly:b,disabled:o,invalid:!qe,invalidText:q,warn:ze,warnText:ke}),[he,ye]=[ce("increment.number"),ce("decrement.number")],He=T(`${u}--number__input-wrapper`,{[`${u}--number__input-wrapper--warning`]:d.warn,[`${u}--number__input-wrapper--slug`]:M,[`${u}--number__input-wrapper--decorator`]:l}),Je=T({[`${u}--number__invalid`]:d.invalid||d.warn,[`${u}--number__invalid--warning`]:d.warn});v!==Be&&(k(v),Ue(v));let U;d.invalid&&(U=d.invalidId),d.warn&&(U=d.warnId),d.validation||(U=W?d.helperId:void 0);function Xe(s){if(!o){if(y==="number"){const f={value:r&&s.target.value===""?"":Number(s.target.value),direction:z<s.target.value?"up":"down"};k(f.value),x&&x(s,f);return}if(y==="text"){const f=r&&s.target.value===""?"":s.target.value;pe(F.parse(f)),X(f)}}}const $e=s=>{"type"in s.target&&s.target.type==="button"?de(!1):de(s.type==="focus")},Qe=T(`${u}--form-item`,{[a]:!!a,[`${u}--number-input--fluid--invalid`]:O&&d.invalid,[`${u}--number-input--fluid--focus`]:O&&Ke,[`${u}--number-input--fluid--disabled`]:O&&o}),ve=d.icon,we=s=>{const f=s.toString().split(".");return f[1]?f[1].length:0},Q=(s,f)=>{if(P.current){const N=y==="number"?Number(P.current.value):F.parse(P.current.value),te=f==="up"?N+C:N-C,et=Math.max(we(N),we(C)),tt=parseFloat(te.toFixed(et)),ie=ot(tt,_??-1/0,V??1/0);let A;if(y==="number"&&(A={value:r&&P.current.value===""&&C===0?"":ie,direction:f},k(A.value)),y==="text"){const Se=ge(ie);A={value:r&&P.current.value===""&&C===0?"":Se,direction:f},pe(ie),X(Se)}return x&&x(s,A),A}},xe=(s,f)=>{if(P.current){const{state:N}=Q(s,f);R&&R(s,N)}},Ne=M??l,Z=mt(Ne,Pe)?h.cloneElement(Ne,{size:"mini"}):null;let ee;return Z?.type===Pe&&(ee=Z.props.revertActive),h.useEffect(()=>{!ee&&M&&g&&k(g)},[g,ee,M]),p.createElement("div",{className:Qe,onFocus:O?$e:void 0,onBlur:O?$e:void 0},p.createElement("div",{className:Ye,"data-invalid":d.invalid?!0:void 0},p.createElement(We,{disabled:d.disabled,hideLabel:j,id:S,label:H}),p.createElement("div",{className:He},p.createElement("input",rt({},D,{"data-invalid":d.invalid?!0:void 0,"aria-invalid":d.invalid,"aria-describedby":U,"aria-readonly":b,disabled:d.disabled,ref:Ge,id:S,max:V,min:_,onClick:R,onChange:Xe,onKeyUp:ue,onKeyDown:s=>{y==="text"&&(De(s,nt)&&Q(s,"up"),De(s,st)&&Q(s,"down")),D?.onKeyDown&&D?.onKeyDown(s)},onFocus:s=>{m&&s.target.addEventListener("wheel",Re),D.onFocus&&D.onFocus(s)},onBlur:s=>{if(m&&s.target.removeEventListener("wheel",Re),y==="text"){const f=Ze?F.parse(B):K,N=isNaN(f)?"":ge(f);if(X(N),x){const te={value:N,direction:z<s.target.value?"up":"down"};x(s,te)}}D.onBlur&&D.onBlur(s)},pattern:c,inputMode:oe,readOnly:b,step:C,type:y,value:y==="number"?z:B})),M?Z:l?p.createElement("div",{className:`${u}--number__input-inner-wrapper--decorator`},Z):"",ve?p.createElement(ve,{className:Je}):null,!E&&p.createElement("div",{className:`${u}--number__controls`},p.createElement("button",{"aria-label":ye||I,className:`${u}--number__control-btn down-icon`,disabled:o||b,onClick:s=>xe(s,"down"),tabIndex:-1,title:ye||I,type:"button"},Oe||(Oe=p.createElement(ct,{className:"down-icon"}))),p.createElement("div",{className:`${u}--number__rule-divider`}),p.createElement("button",{"aria-label":he||I,className:`${u}--number__control-btn up-icon`,disabled:o||b,onClick:s=>xe(s,"up"),tabIndex:-1,title:he||I,type:"button"},Te||(Te=p.createElement(dt,{className:"up-icon"}))),p.createElement("div",{className:`${u}--number__rule-divider`}))),O&&p.createElement("hr",{className:`${u}--number-input__divider`}),d.validation?d.validation:p.createElement(je,{id:d.helperId,disabled:o,description:W})))});xt.propTypes={allowEmpty:i.bool,className:i.string,decorator:i.node,defaultValue:i.oneOfType([i.number,i.string]),disableWheel:i.bool,disabled:i.bool,formatOptions:vt,helperText:i.node,hideLabel:i.bool,hideSteppers:i.bool,iconDescription:i.string,id:i.string.isRequired,inputMode:i.oneOf(["none","text","tel","url","email","numeric","decimal","search"]),invalid:i.bool,invalidText:i.node,label:i.node,light:Fe(i.bool),locale:i.string,max:i.number,min:i.number,onChange:i.func,onClick:i.func,onKeyUp:i.func,pattern:i.string,readOnly:i.bool,size:i.oneOf(["sm","md","lg"]),slug:Fe(i.node),step:i.number,translateWithId:i.func,type:i.oneOf(["number","text"]),value:i.oneOfType([i.number,i.string]),warn:i.bool,warnText:i.node};const We=({disabled:n,id:t,hideLabel:e,label:r})=>{const a=le(),l=T({[`${a}--label`]:!0,[`${a}--label--disabled`]:n,[`${a}--visually-hidden`]:e});return r?p.createElement(Me,{as:"label",htmlFor:t,className:l},r):null};We.propTypes={disabled:i.bool,hideLabel:i.bool,id:i.string,label:i.node};function je({disabled:n,description:t,id:e}){const r=le(),a=T(`${r}--form__helper-text`,{[`${r}--form__helper-text--disabled`]:n});return t?p.createElement(Me,{as:"div",id:e,className:a},t):null}je.propTypes={description:i.node,disabled:i.bool,id:i.string};function Nt({allowEmpty:n,invalid:t,value:e,max:r,min:a}){return t?!1:e===""?n:!(e>r||e<a)}function Re(n){n.preventDefault()}export{xt as N,vt as a};
