{"version":3,"file":"ScrollGradient-UgML7aOJ.js","sources":["../../src/components/ScrollGradient/constants.js","../../src/components/ScrollGradient/ScrollGradient.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useIsomorphicEffect } from '../../global/js/hooks';\n\nexport const ScrollStates = {\n  // No scrolling required because content fits within container.\n  NONE: 'NONE',\n  // Scroll position is a the start of the scrollable content.\n  INITIAL: 'INITIAL',\n  // Scroll position is neither at start or end of scrollable content.\n  STARTED: 'STARTED',\n  // Scroll position is a the end of the scrollable content.\n  END: 'END',\n};\n\n// FUNCTIONS\n\nexport const useIsOverflow = (ref) => {\n  const [isHorizontallyScrollable, setIsHorizontallyScrollable] = useState();\n  const [isVerticallyScrollable, setIsVerticallyScrollable] = useState();\n  const [mutationObserver, setMutationObserver] = useState();\n  const [resizeObserver, setResizeObserver] = useState();\n\n  const checkOverflow = useCallback(() => {\n    if (!ref.current) {\n      return;\n    }\n    setIsHorizontallyScrollable(\n      ref.current.scrollWidth > ref.current.clientWidth\n    );\n    setIsVerticallyScrollable(\n      ref.current.scrollHeight > ref.current.clientHeight\n    );\n  }, [ref]);\n\n  useEffect(() => {\n    if (!mutationObserver) {\n      return;\n    }\n\n    return () => {\n      if (mutationObserver) {\n        mutationObserver.disconnect();\n      }\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    };\n  });\n\n  useIsomorphicEffect(() => {\n    const { current } = ref;\n    if (current) {\n      if ('ResizeObserver' in window && !resizeObserver) {\n        setResizeObserver(new ResizeObserver(checkOverflow).observe(current));\n      }\n      if ('MutationObserver' in window && !mutationObserver) {\n        setMutationObserver(\n          new MutationObserver(checkOverflow).observe(current, {\n            attributes: false,\n            childList: true,\n            subtree: false,\n          })\n        );\n      }\n      checkOverflow();\n    }\n  }, [ref, checkOverflow, mutationObserver, resizeObserver]);\n\n  return {\n    xScrollable: isHorizontallyScrollable,\n    yScrollable: isVerticallyScrollable,\n  };\n};\n","/**\n * Copyright IBM Corp. 2024, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\nimport { pkg } from '../../settings';\nimport { ScrollStates, useIsOverflow } from './constants';\nimport { useIsomorphicEffect } from '../../global/js/hooks';\nimport { usePrefix } from '@carbon/react';\n\nconst blockClass = `${pkg.prefix}--scroll-gradient`;\nconst componentName = 'ScrollGradient';\n\n// Default values for props\nconst defaults = {\n  hideStartGradient: false,\n  onScroll: () => {},\n  getScrollElementRef: () => {},\n};\n\n/**\n * TODO: A description of the component.\n */\nexport let ScrollGradient = React.forwardRef(\n  (\n    {\n      children,\n      className,\n      color,\n      onScroll = defaults.onScroll,\n      scrollElementClassName,\n      getScrollElementRef = defaults.getScrollElementRef,\n      hideStartGradient = defaults.hideStartGradient,\n      ...rest\n    },\n    ref\n  ) => {\n    const intersectionStartRef = useRef(undefined);\n    const intersectionEndRef = useRef(undefined);\n    const intersectionLeftRef = useRef(undefined);\n    const intersectionRightRef = useRef(undefined);\n\n    const carbonPrefix = usePrefix();\n    const fallbackColor = `var(--${carbonPrefix}-layer-01)`;\n\n    const scrollContainer = useRef(undefined);\n    const contentChildrenContainer = useRef(undefined);\n    const { xScrollable, yScrollable } = useIsOverflow(scrollContainer);\n\n    const gradientRight =\n      yScrollable && scrollContainer.current && contentChildrenContainer.current\n        ? scrollContainer.current.offsetWidth -\n          contentChildrenContainer.current.offsetWidth\n        : 0;\n    const gradientBottom =\n      xScrollable && scrollContainer.current && contentChildrenContainer.current\n        ? scrollContainer.current.offsetHeight -\n          contentChildrenContainer.current.offsetHeight\n        : 0;\n\n    const [verticalPosition] = useState(ScrollStates.NONE);\n    const [horizontalPosition] = useState(ScrollStates.NONE);\n\n    const startVerticalRef = useRef(null);\n    const startHorizontalRef = useRef(null);\n    const endVerticalRef = useRef(null);\n    const endHorizontalRef = useRef(null);\n\n    useIsomorphicEffect(() => {\n      // start vertical styles\n      startVerticalRef.current.style.right = gradientRight;\n      startVerticalRef.current.style.backgroundImage = `linear-gradient(0deg, transparent, ${color ?? fallbackColor} 90%)`;\n      // start horizontal styles\n      startHorizontalRef.current.backgroundImage = `linear-gradient(-90deg, transparent, ${color ?? fallbackColor} 90%)`;\n      startHorizontalRef.current.bottom = gradientBottom;\n      // end vertical styles\n      endVerticalRef.current.style.right = gradientRight;\n      endVerticalRef.current.style.bottom = gradientBottom;\n      endVerticalRef.current.style.backgroundImage = `linear-gradient(0deg, ${color ?? fallbackColor} 10%, transparent)`;\n      // end horizontal styles\n      endHorizontalRef.current.style.right = gradientRight;\n      endHorizontalRef.current.style.bottom = gradientBottom;\n      endHorizontalRef.current.style.backgroundImage = `linear-gradient(-90deg, ${color ?? fallbackColor} 10%, transparent)`;\n    }, [color, gradientRight, gradientBottom]);\n\n    const setGradientOnIntersection = (entry, gradientRef) => {\n      if (gradientRef.current) {\n        if (entry.isIntersecting) {\n          gradientRef.current.style.opacity = 0;\n          gradientRef.current.style.display = 'none';\n          gradientRef?.current.setAttribute('aria-hidden', false);\n        } else {\n          gradientRef.current.style.opacity = 1;\n          gradientRef.current.style.display = 'block';\n          gradientRef?.current.setAttribute('aria-hidden', true);\n        }\n      }\n    };\n\n    useEffect(() => {\n      const observer = new IntersectionObserver(\n        (entries) => {\n          entries.forEach((entry) => {\n            if (entry.target.hasAttribute('data-start-vertical')) {\n              setGradientOnIntersection(entry, startVerticalRef);\n            }\n            if (entry.target.hasAttribute('data-end-vertical')) {\n              setGradientOnIntersection(entry, endVerticalRef);\n            }\n            if (entry.target.hasAttribute('data-start-horizontal')) {\n              setGradientOnIntersection(entry, startHorizontalRef);\n            }\n            if (entry.target.hasAttribute('data-end-horizontal')) {\n              setGradientOnIntersection(entry, endHorizontalRef);\n            }\n          });\n        },\n        {\n          root: null,\n          rootMargin: '0px',\n          threshold: 0.1,\n        }\n      );\n\n      observer.observe(intersectionStartRef.current);\n      observer.observe(intersectionEndRef.current);\n      observer.observe(intersectionLeftRef.current);\n      observer.observe(intersectionRightRef.current);\n\n      const startVerticalRefValue = intersectionStartRef.current;\n      const endVerticalRefValue = intersectionEndRef.current;\n      const startHorizontalRefValue = intersectionLeftRef.current;\n      const endHorizontalRefValue = intersectionRightRef.current;\n      return () => {\n        observer.unobserve(startVerticalRefValue);\n        observer.unobserve(endVerticalRefValue);\n        observer.unobserve(startHorizontalRefValue);\n        observer.unobserve(endHorizontalRefValue);\n      };\n    }, []);\n\n    const setRefs = (element) => {\n      scrollContainer.current = element;\n      getScrollElementRef(element);\n    };\n\n    return (\n      <div\n        {...rest}\n        className={cx(\n          blockClass,\n          `${blockClass}--x-${horizontalPosition.toLowerCase()}`,\n          `${blockClass}--y-${verticalPosition.toLowerCase()}`,\n          {\n            [`${blockClass}--x-scrollable`]: xScrollable,\n            [`${blockClass}--y-scrollable`]: yScrollable,\n          },\n          className\n        )}\n        ref={ref}\n        role=\"presentation\"\n        {...getDevtoolsProps(componentName)}\n      >\n        <div\n          onScroll={onScroll}\n          ref={setRefs}\n          className={cx(`${blockClass}__content`, scrollElementClassName)}\n        >\n          <span ref={intersectionStartRef} data-start-vertical />\n          <span ref={intersectionLeftRef} data-start-horizontal />\n          <div\n            ref={contentChildrenContainer}\n            className={`${blockClass}__content-children`}\n          >\n            {children}\n          </div>\n          <span ref={intersectionEndRef} data-end-vertical />\n          <span ref={intersectionRightRef} data-end-horizontal />\n        </div>\n\n        {/* Gradient elements */}\n        {!hideStartGradient && (\n          <>\n            <div\n              ref={startVerticalRef}\n              className={`${blockClass}__start-vertical`}\n              role=\"presentation\"\n              aria-hidden\n            />\n            <div\n              ref={startHorizontalRef}\n              className={`${blockClass}__start-horizontal`}\n              role=\"presentation\"\n              aria-hidden\n            />\n          </>\n        )}\n        <div\n          ref={endVerticalRef}\n          className={`${blockClass}__end-vertical`}\n          role=\"presentation\"\n          aria-hidden\n        />\n        <div\n          ref={endHorizontalRef}\n          className={`${blockClass}__end-horizontal`}\n          role=\"presentation\"\n          aria-hidden\n        />\n      </div>\n    );\n  }\n);\n\n// Return a placeholder if not released and not enabled by feature flag\nScrollGradient = pkg.checkComponentEnabled(ScrollGradient, componentName);\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nScrollGradient.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nScrollGradient.propTypes = {\n  /**\n   * Provide the contents of the ScrollGradient.\n   */\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]),\n\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n\n  /** @type {string} Fade out color. Any valid CSS color value works */\n  color: PropTypes.string,\n\n  /** @type {(element: HTMLElement) => {}} Optional function to get reference to scrollable DOM element */\n  getScrollElementRef: PropTypes.func,\n\n  /** @type {boolean} Set to true if you want to hide gradient on the start side (top or left) of scrollable element. */\n  hideStartGradient: PropTypes.bool,\n\n  /** @type {Function} Optional scroll handler */\n  onScroll: PropTypes.func,\n\n  /** @type {string} Optional classname for scroll element. */\n  scrollElementClassName: PropTypes.string,\n};\n"],"names":["ScrollStates","useIsOverflow","ref","isHorizontallyScrollable","setIsHorizontallyScrollable","useState","isVerticallyScrollable","setIsVerticallyScrollable","mutationObserver","setMutationObserver","resizeObserver","setResizeObserver","checkOverflow","useCallback","useEffect","useIsomorphicEffect","current","blockClass","pkg","componentName","defaults","ScrollGradient","React","children","className","color","onScroll","scrollElementClassName","getScrollElementRef","hideStartGradient","rest","intersectionStartRef","useRef","intersectionEndRef","intersectionLeftRef","intersectionRightRef","fallbackColor","usePrefix","scrollContainer","contentChildrenContainer","xScrollable","yScrollable","gradientRight","gradientBottom","verticalPosition","horizontalPosition","startVerticalRef","startHorizontalRef","endVerticalRef","endHorizontalRef","setGradientOnIntersection","entry","gradientRef","observer","entries","startVerticalRefValue","endVerticalRefValue","startHorizontalRefValue","endHorizontalRefValue","setRefs","element","cx","getDevtoolsProps","PropTypes"],"mappings":"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"}