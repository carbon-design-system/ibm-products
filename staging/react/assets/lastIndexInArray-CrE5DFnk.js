import{r as b,e as w,c as H,p as U,P as y}from"./iframe-BBf3bqTv.js";import{w as V}from"./wait-CTNFjQS8.js";import{P as j,a as z}from"./ProgressIndicator-CIMPzV17.js";import{S as G,H as J}from"./index-7K8oyqWX.js";const B=({previousState:s,currentStep:t,blockClass:a,onMount:n,firstFocusElement:i})=>{b.useEffect(()=>{typeof n=="function"&&n()},[n]),b.useEffect(()=>{const h=async e=>{await V(10),e.focus()},u=e=>{if(!e)return!1;const r=e.closest("[inert]");return!r||!r.hasAttribute("inert")&&!e.disabled},o=()=>Array.from(document.querySelectorAll(a)).find(r=>{let c=r;for(;c;){if(c.hasAttribute("inert"))return!1;c=c.parentElement}return!0}),l=e=>{const r='button, input[type="button"], input, select, textarea, a[href]',c=e.querySelector(i);return c&&u(c)&&!c.disabled?c:Array.from(e.querySelectorAll(r)).find(m=>u(m)&&!m.disabled)};if(s?.currentStep!==t&&t>0){const e=o();if(e&&u(e)){const r=l(e);r&&h(r)}}},[t,s,a,n,i])},D=({firstIncludedStep:s,lastIncludedStep:t,stepData:a,onPrevious:n,onNext:i,isSubmitDisabled:h,setCurrentStep:u,setIsSubmitting:o,setLoadingPrevious:l=null,loadingPrevious:e=!1,onClose:r,onRequestSubmit:c,componentName:d,currentStep:m,backButtonText:$,cancelButtonText:P,submitButtonText:v,nextButtonText:I,isSubmitting:_,componentBlockClass:A,setCreateComponentActions:F,setModalIsOpen:O,experimentalSecondarySubmit:g,experimentalSecondarySubmitText:E})=>{const C=b.useCallback(()=>{o(!1),u(p=>{do p++;while(!a[p-1]?.shouldIncludeStep);return p})},[u,o,a]),S=b.useCallback(()=>{d!=="CreateFullPage"&&l(!1),u(p=>{do p--;while(!a[p-1]?.shouldIncludeStep);return p})},[u,a,l,d]);b.useEffect(()=>{const p=()=>{d!=="CreateFullPage"&&u(1),o(!1),r()},T=async()=>{try{(await c())?.preventClose||p()}catch(f){o(!1),console.warn(`${d} submit error: ${f}`)}},L=async()=>{if(l?.(!0),typeof n=="function")try{await n(),S()}catch(f){console.warn(`${d} onBack error: ${f}`)}else S()},N=async()=>{if(o(!0),typeof i=="function")try{await i(),C()}catch(f){o(!1),console.warn(`${d} onNext error: ${f}`)}else C()},R=async()=>{if(o(!0),typeof i=="function")try{await i(),await T()}catch(f){o(!1),console.warn(`${d} onNext error: ${f}`)}else await T()},Q=()=>{typeof g?.onClick=="function"&&g.onClick()};if(a?.length>0){const f=[];a?.length>1&&f.push({key:"create-action-button-back",label:$,onClick:L,kind:"secondary",disabled:m===s,loading:e}),f.push({key:"create-action-button-cancel",label:P,onClick:d==="CreateFullPage"?()=>O(!0):p,kind:"ghost"}),E&&!g?.hideSecondarySubmit&&f.push({key:"create-action-button-experimentalSecondarySubmit",label:E,onClick:Q,kind:"secondary",disabled:g?.disabled}),f.push({key:"create-action-button-submit",label:m<t?I:v,onClick:m<t?N:R,disabled:h,kind:"primary",loading:_,className:`${A}__create-button`}),F(f)}},[s,t,a,i,h,$,P,m,r,I,v,c,_,A,d,C,u,F,o,O,S,n,l,e,g,E])},M=(s,t)=>{let a=0;return s.forEach((n,i)=>{i+1>t||n.shouldIncludeStep===!1&&(a+=1)}),a},x=({stepsContext:s,stepNumber:t,introStep:a,invalid:n,shouldIncludeStep:i,secondaryLabel:h,title:u})=>{b.useEffect(()=>{s&&s.setStepData(o=>{const l={title:u,secondaryLabel:h,introStep:a,invalid:n,shouldIncludeStep:i},e=o[t-1];if(e?.title!==l.title||e?.secondaryLabel!==l.secondaryLabel||e?.introStep!==l.introStep||e?.shouldIncludeStep!==l.shouldIncludeStep||e?.invalid!==l.invalid){const r=[...o];return r[t-1]=l,r}return o})},[i,u,h,a,n,s,t])},ee=(s,t)=>{b.useEffect(()=>{s===1&&console.warn(`${t}: ${t}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`)},[s,t])},k=`${U.prefix}--create-influencer`,K="CreateInfluencer",q=({className:s,currentStep:t,onClickStep:a,stepData:n,title:i})=>{const h=(o,l)=>{const e=[];return o.forEach((r,c)=>{o[c]?.[l]===!1&&c<=t-1&&e.push(r)}),e.length},u=()=>{const l=n?.filter(r=>!r?.introStep)?.filter(r=>r?.shouldIncludeStep),e=h(n,"shouldIncludeStep")||0;return w.createElement(G,{className:`${k}__left-nav`},i&&w.createElement(J,{className:`${k}__title`},i),t===1&&n[0]?.introStep?null:w.createElement(j,{currentIndex:n[0]?.introStep?t-e-2:t-e-1,spaceEqually:!0,vertical:!0,className:H(`${k}__progress-indicator`),onChange:a},l.map((r,c)=>w.createElement(z,{label:r?.title,key:c,secondaryLabel:r.secondaryLabel||void 0,invalid:r.invalid}))))};return w.createElement("div",{className:H(k,s)},u())};q.displayName=K;q.propTypes={className:y.string,currentStep:y.number.isRequired,onClickStep:y.func,stepData:y.arrayOf(y.shape({introStep:y.bool,secondaryLabel:y.string,shouldIncludeStep:y.bool,title:y.node})),title:y.string};q.__docgenInfo={description:"",methods:[],displayName:"CreateInfluencer",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},currentStep:{required:!0,tsType:{name:"number"},description:"Provide the current step number.",type:{name:"number"}},onClickStep:{required:!1,tsType:{name:"signature",type:"function",raw:"(step: number) => void",signature:{arguments:[{type:{name:"number"},name:"step"}],return:{name:"void"}}},description:"onChange event for Progress Indicator",type:{name:"func"}},stepData:{required:!1,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:"Provide the Set Data.",type:{name:"arrayOf",value:{name:"shape",value:{introStep:{name:"bool",required:!1},secondaryLabel:{name:"string",required:!1},shouldIncludeStep:{name:"bool",required:!1},title:{name:"node",required:!1}}}}},title:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Title.",type:{name:"string"}}}};const re=(s,t,a)=>{for(let n=s.length-1;n>=0;n--)if(s[n]?.[t]===a)return n+1;return-1};export{q as C,ee as a,D as b,x as c,M as g,re as l,B as u};
//# sourceMappingURL=lastIndexInArray-CrE5DFnk.js.map
