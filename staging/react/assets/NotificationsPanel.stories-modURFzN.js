import{e,S as P,r as s,p as j,B as Y}from"./iframe-BBf3bqTv.js";import{H as Z,a as K}from"./HeaderName-D-HZUStp.js";import{H as F,a as v}from"./HeaderGlobalBar-DYhHCSw2.js";import{H as B}from"./HeaderPanel-D0OLYbeE.js";import{u as t}from"./uuidv4-BN2rGLQG.js";import{N as x}from"./NotificationsPanel-PIMMrTon.js";import{N as V}from"./bucket-12-Ct7mMWJO.js";import{c as X}from"./bucket-17-Do5TN8B6.js";import{U as q}from"./bucket-19-zmdOpOwk.js";import"./preload-helper-D9Z9MdNV.js";import"./Link-zosztSaj.js";import"./AriaPropTypes-HXIEJ2pk.js";import"./wrapComponent-CngbhOr7.js";import"./Link-qk3ncX2u.js";import"./Toggle-DStrfoZc.js";import"./useControllableState-DY2q8Reb.js";import"./Text-CaNb5F2n.js";import"./index-7K8oyqWX.js";import"./documentLang-E105Y72C.js";import"./usePrefersReducedMotion-RE_VlNd9.js";import"./useIsomorphicEffect-ZKZ1smHY.js";import"./devtools-c2gfrTL0.js";import"./props-helper-CYOz70En.js";import"./getSupportedLocale--Qslfae5.js";import"./useId-BfWl2o0S.js";import"./usePresence-Dys_wWiG.js";import"./useClickOutside-BrSO7SBE.js";import"./NotificationsEmptyState-GoizjKfO.js";import"./EmptyState-D-YP1Etv.js";import"./EmptyStateV2.deprecated-CLCET4gM.js";import"./NotificationsIllustration-Cnl_Q32y.js";import"./bucket-16-Bt_nnyiQ.js";import"./bucket-10-BG8-V5O3.js";import"./bucket-6-TRoxTq9G.js";const J=".c4p--notifications-panel__story--full-height{block-size:100vh;max-block-size:var(--doc-story-height)}.c4p--notifications-panel__story__add{padding:4rem 0 0 1rem}.c4p--notifications-panel__story__header-panel{padding:4rem 1rem 0;font-weight:700;line-height:1.4;text-align:center}.cds--header__global{z-index:2}[dir=rtl] .sb-unread-notification-icon{transform:scaleX(-1)}",R=()=>e.createElement("svg",{width:"18px",height:"19px",viewBox:"0 0 18 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"sb-unread-notification-icon"},e.createElement("title",null,"Unread notification bell"),e.createElement("g",{id:"Group",transform:"translate(-1.000000, 0.000000)"},e.createElement("path",{d:"M17.9419375,12.058125 L16.25,10.3661875 L16.25,8.125 C16.245845,4.91692673 13.816599,2.23147626 10.625,1.90675 L10.625,0.625 L9.375,0.625 L9.375,1.90675 C6.183401,2.23147626 3.754155,4.91692673 3.75,8.125 L3.75,10.3661875 L2.0580625,12.058125 C1.94086706,12.1753182 1.875,12.3342622 1.875,12.5 L1.875,14.375 C1.875,14.720178 2.15482203,15 2.5,15 L6.875,15 L6.875,15.4855 C6.84694527,17.1272367 8.05869477,18.5271305 9.6875,18.7346875 C10.5660567,18.8218694 11.4405518,18.5337871 12.0952737,17.9415019 C12.7499955,17.3492167 13.1239886,16.5078712 13.125,15.625 L13.125,15 L17.5,15 C17.845178,15 18.125,14.720178 18.125,14.375 L18.125,12.5 C18.125,12.3342622 18.0591329,12.1753182 17.9419375,12.058125 Z M11.875,15.625 C11.875,16.6605339 11.0355339,17.5 10,17.5 C8.96446609,17.5 8.125,16.6605339 8.125,15.625 L8.125,15 L11.875,15 L11.875,15.625 Z M16.875,13.75 L3.125,13.75 L3.125,12.7588125 L4.816875,11.066875 C4.93409336,10.949692 4.9999646,10.7907468 5,10.625 L5,8.125 C5,5.36357625 7.23857625,3.125 10,3.125 C12.7614237,3.125 15,5.36357625 15,8.125 L15,10.625 C15.0000354,10.7907468 15.0659066,10.949692 15.183125,11.066875 L16.875,12.7588125 L16.875,13.75 Z",id:"Shape",fillRule:"nonzero"}),e.createElement("circle",{id:"Oval",stroke:"#161616",fill:"#DA1E28",cx:"15",cy:"4.375",r:"2.5"})));R.__docgenInfo={description:"",methods:[],displayName:"UnreadNotificationBell"};const T=()=>e.createElement(P,{altGuidelinesHref:[{href:"https://pages.github.ibm.com/carbon/ibm-products/components/notification-panel/usage/",label:"Usage guidelines"}],blocks:[{story:f}]});T.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const{action:i}=__STORYBOOK_MODULE_ACTIONS__,Q=new Date().getFullYear(),l=new Date(Q,0,1);let G=new Date(l);G.setDate(l.getDate()-1);let r=new Date(l);r.setDate(l.getDate()-2);const H=6e4,E=[{id:t(),type:"error",title:"LogRhythm connection failure",description:"LogRhythm is failing to connect, check timeout.",timestamp:l,unread:!0,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"LogDNA cannot be reached.",description:"Unable to communicate with LogDNA.",timestamp:new Date(new Date().getTime()-30*1e3),unread:!0,onNotificationClick:i("Clicked on notification")},{id:t(),type:"warning",title:"System alert",description:"Email classification was exported successfully.",timestamp:new Date(l.getTime()-11*H),unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"success",title:"IBM Cloud Pak for Automation Success",description:"Successfully connected cartridge",timestamp:new Date(l.getTime()-120*H),unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"success",title:"Successfully connected LogDNA",description:"App connection succeeded",timestamp:G,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"warning",title:"Cloud Foundry app memory",description:"Allocated app memory low",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"informational",title:"Logs are now being monitored",link:{text:"View logs",url:"https://www.carbondesignsystem.com"},timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")},{id:t(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:r,unread:!1,onNotificationClick:i("Clicked on notification")}],{action:p}=__STORYBOOK_MODULE_ACTIONS__,C=`${j.prefix}--notifications-panel__story`,O={"Sample data set":E,"Empty data set":[]},A={undefined:void 0,bg:"bg",cs:"cs","da-DK":"da-DK","de-CH":"de-CH",de:"de","en-AU":"en-AU","en-GB":"en-GB","en-US":"en-US","en-ZA":"en-ZA","es-ES":"es-ES",es:"es",et:"et",fi:"fi","fr-CA":"fr-CA","fr-CH":"fr-CH",fr:"fr",hu:"hu",it:"it",ja:"ja",lv:"lv","nl-BE":"nl-BE","nl-NL":"nl-NL",no:"no",pl:"pl","pt-BR":"pt-BR","pt-PT":"pt-PT","ru-UA":"ru-UA",ru:"ru",sk:"sk",sl:"sl",th:"th",tr:"tr","uk-UA":"uk-UA",vi:"vi"},Re={title:"Components/NotificationsPanel",component:x,tags:["autodocs"],parameters:{styles:J,layout:"fullscreen",percy:{waitForTimeout:1e3},docs:{page:T}},argTypes:{data:{control:{type:"select",labels:Object.keys(O)},options:Object.values(O).map((m,a)=>a),mapping:Object.values(O)},dateTimeLocale:{control:{type:"select",labels:Object.keys(A)},options:Object.values(A).map((m,a)=>a),mapping:Object.values(A)},dateTimeStyle:{options:["long","short","narrow"],control:{type:"radio"}},docs:{page:()=>e.createElement(P,{altGuidelinesHref:"https://pages.github.ibm.com/carbon/ibm-products/components/notification-panel/usage/"})}}},W={data:0,dateTimeLocale:0,dateTimeStyle:"long",open:!0,onDoNotDisturbChange:p('Toggled "Do not disturb"'),onViewAllClick:p('Clicked "View all"'),onSettingsClick:p("Clicked gear icon")},ee=()=>{const m=Math.floor(Math.random()*E.length),a={...E[m]};return a.id=t(),a.timestamp=new Date,a.unread=!0,a},te=m=>{const{data:a,open:k,...I}=m,[d,u]=s.useState(a),[M,$]=s.useState(!0),[N,g]=s.useState(!1),[c,h]=s.useState(k),[b,y]=s.useState(!1),S=s.useRef(null),_=s.useRef(null),U=s.useRef(null),L=()=>{let n=[...d];n.forEach(o=>o.unread=!1),u(n)};s.useEffect(()=>{const n=d.find(o=>o.unread===!0);$(n)},[d]),s.useEffect(()=>{c&&L()},[c]),s.useEffect(()=>{u(a)},[a]),s.useEffect(()=>{h(k)},[k]);const z=()=>{const n=ee();u(o=>[...o,{...n}])};return e.createElement("div",{className:`${C}--full-height`},e.createElement(Z,{"aria-label":"IBM Cloud Pak",className:`${C}--header`},e.createElement(K,{href:"/",prefix:"IBM",onClick:n=>{n.preventDefault()}},"Cloud Pak"),e.createElement(F,null,e.createElement(v,{ref:S,"aria-label":N?"Close user account":"Open user account",isActive:N,onClick:n=>{n.preventDefault(),g(o=>!o),h(!1),y(!1),setTimeout(()=>{S?.current?.focus()},0)}},e.createElement(q,{size:20})),e.createElement(B,{expanded:N},e.createElement("div",{className:`${C}__header-panel`},"User account",e.createElement("br",null),"example panel")),e.createElement(v,{ref:_,"aria-label":c?"Close notifications":"Open notifications","aria-expanded":c,isActive:c,onClick:n=>{n.preventDefault(),L(),h(o=>!o),g(!1),y(!1)}},!c&&M?e.createElement(R,null):e.createElement(V,{size:20})),e.createElement(x,{triggerButtonRef:_,data:d,open:c,onClickOutside:()=>{p("Clicked outside")(),h(!1)},onDismissAllNotifications:()=>{p('Clicked "Dismiss all"')(),u([])},onDismissSingleNotification:({id:n})=>{const o=d.find(D=>D.id);p('Clicked "Dismiss notification"')(o);let w=[...d];w=w.filter(D=>D.id!==n),u(w)},...I}),e.createElement(v,{ref:U,"aria-label":b?"Close switcher":"Open switcher",isActive:b,onClick:n=>{n.preventDefault(),y(o=>!o),g(!1),h(!1),setTimeout(()=>{U?.current?.focus()},0)}},e.createElement(X,{size:20})),e.createElement(B,{expanded:b},e.createElement("div",{className:`${C}__header-panel`},"App switcher",e.createElement("br",null),"example panel")))),e.createElement("main",null,e.createElement("div",{className:`${C}__add`},e.createElement(Y,{onClick:z},"Add new notification"))))},f=te.bind({});f.args={...W};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`args => {
  const {
    data,
    open,
    ...rest
  } = args;
  const [notificationsData, setNotificationsData] = useState(data);
  const [hasUnreadNotifications, setHasUnreadNotifications] = useState(true);
  const [userOpen, setUserOpen] = useState(false);
  const [notificationsOpen, setNotificationsOpen] = useState(open);
  const [switcherOpen, setSwitcherOpen] = useState(false);
  const userActionRef = useRef(null);
  const notificationActionRef = useRef(null);
  const switcherActionRef = useRef(null);
  const markAllAsUnread = () => {
    let tempData = [...notificationsData];
    tempData.forEach(element => element.unread = false);
    setNotificationsData(tempData);
  };

  // Every time data is added or removed, check for unread notifications.
  useEffect(() => {
    const hasUnread = notificationsData.find(notification => notification.unread === true);
    setHasUnreadNotifications(hasUnread);
  }, [notificationsData]);

  // Every time the panel is opened, mark all notifications as unread.
  useEffect(() => {
    if (notificationsOpen) {
      markAllAsUnread();
    }
  }, [notificationsOpen]);

  // After changing \`data\` from the Storybook control.
  useEffect(() => {
    setNotificationsData(data);
  }, [data]);
  // After changing \`open\` from the Storybook control.
  useEffect(() => {
    setNotificationsOpen(open);
  }, [open]);
  const addNewNotification = () => {
    const notification = newNotification();
    setNotificationsData(data => [...data, {
      ...notification
    }]);
  };
  return <div className={\`\${storyBlockClass}--full-height\`}>
      <Header aria-label="IBM Cloud Pak" className={\`\${storyBlockClass}--header\`}>
        <HeaderName href="/" prefix="IBM" onClick={e => {
        e.preventDefault();
      }}>
          Cloud Pak
        </HeaderName>
        <HeaderGlobalBar>
          {/**
           *
           * User account
           *
           */}
          <HeaderGlobalAction ref={userActionRef} aria-label={userOpen ? 'Close user account' : 'Open user account'} isActive={userOpen} onClick={e => {
          e.preventDefault();
          setUserOpen(prevState => !prevState);
          setNotificationsOpen(false);
          setSwitcherOpen(false);
          setTimeout(() => {
            userActionRef?.current?.focus();
          }, 0);
        }}>
            <User size={20} />
          </HeaderGlobalAction>
          <HeaderPanel expanded={userOpen}>
            <div className={\`\${storyBlockClass}__header-panel\`}>
              User account
              <br />
              example panel
            </div>
          </HeaderPanel>
          {/**
           *
           * Notifications
           *
           */}
          <HeaderGlobalAction ref={notificationActionRef} aria-label={notificationsOpen ? 'Close notifications' : 'Open notifications'} aria-expanded={notificationsOpen} isActive={notificationsOpen} onClick={e => {
          e.preventDefault();
          markAllAsUnread();
          setNotificationsOpen(prevState => !prevState);
          setUserOpen(false);
          setSwitcherOpen(false);
        }}>
            {!notificationsOpen && hasUnreadNotifications ? <UnreadNotificationBell /> : <Notification size={20} />}
          </HeaderGlobalAction>
          <NotificationsPanel triggerButtonRef={notificationActionRef} data={notificationsData} open={notificationsOpen} onClickOutside={() => {
          action('Clicked outside')();
          setNotificationsOpen(false);
        }} onDismissAllNotifications={() => {
          action('Clicked "Dismiss all"')();
          setNotificationsData([]);
        }} onDismissSingleNotification={({
          id
        }) => {
          const deletedItem = notificationsData.find(item => item.id);
          action('Clicked "Dismiss notification"')(deletedItem);
          let tempData = [...notificationsData];
          tempData = tempData.filter(item => item.id !== id);
          setNotificationsData(tempData);
        }} {...rest} />
          {/**
           *
           * App switcher
           *
           */}
          <HeaderGlobalAction ref={switcherActionRef} aria-label={switcherOpen ? 'Close switcher' : 'Open switcher'} isActive={switcherOpen} onClick={e => {
          e.preventDefault();
          setSwitcherOpen(prevState => !prevState);
          setUserOpen(false);
          setNotificationsOpen(false);
          setTimeout(() => {
            switcherActionRef?.current?.focus();
          }, 0);
        }}>
            <Switcher size={20} />
          </HeaderGlobalAction>
          <HeaderPanel expanded={switcherOpen}>
            <div className={\`\${storyBlockClass}__header-panel\`}>
              App switcher
              <br />
              example panel
            </div>
          </HeaderPanel>
        </HeaderGlobalBar>
      </Header>
      <main>
        <div className={\`\${storyBlockClass}__add\`}>
          <Button onClick={addNewNotification}>Add new notification</Button>
        </div>
      </main>
    </div>;
}`,...f.parameters?.docs?.source}}};const Te=["Default"];export{f as Default,Te as __namedExportsOrder,Re as default};
//# sourceMappingURL=NotificationsPanel.stories-modURFzN.js.map
