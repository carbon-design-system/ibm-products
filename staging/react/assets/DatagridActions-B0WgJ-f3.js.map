{"version":3,"file":"DatagridActions-B0WgJ-f3.js","sources":["../../src/components/Datagrid/utils/DatagridActions.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  Add,\n  ChevronDown,\n  Download,\n  Filter,\n  Restart,\n} from '@carbon/react/icons';\nimport {\n  Button,\n  ComposedModal,\n  Dropdown,\n  IconButton,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  OverflowMenu,\n  OverflowMenuItem,\n  TableToolbarContent,\n  TableToolbarSearch,\n  MenuButton,\n  MenuItem,\n} from '@carbon/react';\nimport React, { useState } from 'react';\nimport { useIsomorphicEffect } from '../../../global/js/hooks';\n\nimport { action } from 'storybook/actions';\nimport { pkg } from '../../../settings';\nimport { useFilterContext } from '../Datagrid/addons/Filtering/hooks';\n\nconst blockClass = `${pkg.prefix}--datagrid`;\nexport const DatagridActions = (datagridState) => {\n  const { setPanelOpen } = useFilterContext();\n  const {\n    selectedFlatRows,\n    setGlobalFilter,\n    CustomizeColumnsButton,\n    RowSizeDropdown,\n    rowSizeDropdownProps,\n    useDenseHeader,\n    filterProps,\n    getFilterFlyoutProps,\n    FilterFlyout,\n    data,\n  } = datagridState;\n  const downloadCsv = () => {\n    alert('Downloading...');\n  };\n  const refreshColumns = () => {\n    alert('refreshing...');\n  };\n\n  const searchForAColumn = 'Search';\n  const isNothingSelected = selectedFlatRows.length === 0;\n\n  const renderFilterFlyout = () =>\n    filterProps?.variation === 'flyout' && (\n      <FilterFlyout {...getFilterFlyoutProps()} />\n    );\n\n  const renderFilterPanelButton = () =>\n    filterProps?.variation === 'panel' && (\n      <IconButton\n        kind=\"ghost\"\n        align={filterProps.align}\n        label={filterProps.panelIconDescription}\n        className={`${blockClass}-filter-panel-open-button`}\n        onClick={() => setPanelOpen((open) => !open)}\n        disabled={data.length === 0}\n      >\n        <Filter />\n      </IconButton>\n    );\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [size, setSize] = useState(window.innerWidth);\n  useIsomorphicEffect(() => {\n    function updateSize() {\n      setSize(window.innerWidth);\n    }\n    window.addEventListener('resize', updateSize);\n    return () => window.removeEventListener('resize', updateSize);\n  }, []);\n\n  const mobileToolbar = size < 672 ? true : false;\n  const items = ['Option 1', 'Option 2', 'Option 3'];\n  return (\n    isNothingSelected &&\n    (useDenseHeader && useDenseHeader ? (\n      <TableToolbarContent size=\"sm\">\n        {!mobileToolbar ? (\n          <>\n            {renderFilterPanelButton()}\n            <Button\n              kind=\"ghost\"\n              hasIconOnly\n              tooltipPosition=\"bottom\"\n              renderIcon={Download}\n              iconDescription={'Download CSV'}\n              onClick={downloadCsv}\n            />\n            {renderFilterFlyout()}\n            {CustomizeColumnsButton && <CustomizeColumnsButton />}\n            <RowSizeDropdown {...rowSizeDropdownProps} />\n            <div className={`${blockClass}__toolbar-divider`}>\n              <Button kind=\"ghost\" renderIcon={Add} iconDescription={'Action'}>\n                Ghost button\n              </Button>\n            </div>\n          </>\n        ) : (\n          <OverflowMenu aria-label=\"Tools\" size=\"md\" flipped>\n            <OverflowMenuItem\n              itemText=\"Filter\"\n              hasDivider\n              requireTitle\n              onClick={() => setModalOpen(true)}\n            />\n            <OverflowMenuItem itemText=\"Export\" hasDivider requireTitle />\n            <OverflowMenuItem itemText=\"Settings\" hasDivider requireTitle />\n            <OverflowMenuItem itemText=\"Import items\" hasDivider requireTitle />\n            <OverflowMenuItem itemText=\"Create\" hasDivider requireTitle />\n          </OverflowMenu>\n        )}\n      </TableToolbarContent>\n    ) : !mobileToolbar ? (\n      <TableToolbarContent>\n        {renderFilterPanelButton()}\n        <TableToolbarSearch\n          size=\"lg\"\n          id=\"columnSearch\"\n          persistent\n          placeholder={searchForAColumn}\n          onChange={(e) => setGlobalFilter(e.target.value)}\n        />\n        {renderFilterFlyout()}\n\n        <Button\n          kind=\"ghost\"\n          hasIconOnly\n          tooltipPosition=\"bottom\"\n          renderIcon={Restart}\n          iconDescription={'Refresh'}\n          onClick={refreshColumns}\n        />\n\n        <Button\n          kind=\"ghost\"\n          hasIconOnly\n          tooltipPosition=\"bottom\"\n          renderIcon={Download}\n          iconDescription={'Download CSV'}\n          onClick={downloadCsv}\n        />\n\n        {CustomizeColumnsButton && <CustomizeColumnsButton />}\n        <RowSizeDropdown {...rowSizeDropdownProps} />\n        <MenuButton\n          label=\"Primary button\"\n          className={`${blockClass}__toolbar-options`}\n        >\n          <MenuItem\n            label=\"Option 1\"\n            onClick={action(`Click on ButtonMenu Option 1`)}\n          />\n          <MenuItem\n            label=\"Option 2\"\n            onClick={action(`Click on ButtonMenu Option 2`)}\n          />\n          <MenuItem\n            label=\"Option 3\"\n            onClick={action(`Click on ButtonMenu Option 3`)}\n          />\n        </MenuButton>\n      </TableToolbarContent>\n    ) : (\n      <TableToolbarContent>\n        {renderFilterPanelButton()}\n        <TableToolbarSearch\n          size=\"xl\"\n          id=\"columnSearch\"\n          persistent\n          placeholder={searchForAColumn}\n          onChange={(e) => setGlobalFilter(e.target.value)}\n        />\n        {renderFilterFlyout()}\n        <OverflowMenu\n          aria-label=\"Tools\"\n          size=\"lg\"\n          flipped\n          renderIcon={ChevronDown}\n          className={`${blockClass}__toolbar-menu__trigger`}\n          menuOptionsClass={`${blockClass}__toolbar-options`}\n        >\n          <OverflowMenuItem\n            itemText=\"Filter\"\n            hasDivider\n            requireTitle\n            onClick={() => setModalOpen(true)}\n          />\n          <OverflowMenuItem itemText=\"Export\" hasDivider requireTitle />\n          <OverflowMenuItem itemText=\"Settings\" hasDivider requireTitle />\n          <OverflowMenuItem itemText=\"Import items\" hasDivider requireTitle />\n          <OverflowMenuItem itemText=\"Create\" hasDivider requireTitle />\n        </OverflowMenu>\n        {modalOpen && (\n          <ComposedModal\n            size=\"lg\"\n            open={modalOpen && modalOpen}\n            onClose={() => setModalOpen(false)}\n            className={`${blockClass}__mobile-toolbar-modal`}\n          >\n            <ModalHeader>\n              <h4>Filters</h4>\n            </ModalHeader>\n            <ModalBody>\n              <Dropdown\n                initialSelectedItem={items[2]}\n                items={items}\n                titleText=\"Label\"\n                id=\"filter1\"\n              />\n              <Dropdown\n                initialSelectedItem={items[2]}\n                items={items}\n                titleText=\"Label\"\n                id=\"filter2\"\n              />\n              <Dropdown\n                initialSelectedItem={items[2]}\n                items={items}\n                titleText=\"Label\"\n                id=\"filter3\"\n              />\n            </ModalBody>\n            <ModalFooter\n              primaryButtonText=\"Apply\"\n              secondaryButtonText=\"Cancel\"\n            />\n          </ComposedModal>\n        )}\n      </TableToolbarContent>\n    ))\n  );\n};\n"],"names":["action","blockClass","pkg","DatagridActions","datagridState","setPanelOpen","useFilterContext","selectedFlatRows","setGlobalFilter","CustomizeColumnsButton","RowSizeDropdown","rowSizeDropdownProps","useDenseHeader","filterProps","getFilterFlyoutProps","FilterFlyout","data","downloadCsv","refreshColumns","searchForAColumn","isNothingSelected","renderFilterFlyout","React","renderFilterPanelButton","IconButton","open","Filter","modalOpen","setModalOpen","useState","size","setSize","useIsomorphicEffect","updateSize","mobileToolbar","items","TableToolbarContent","OverflowMenu","OverflowMenuItem","Button","Download","Add","TableToolbarSearch","e","ChevronDown","ComposedModal","ModalHeader","ModalBody","Dropdown","ModalFooter","Restart","MenuButton","MenuItem"],"mappings":"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"}