import{u as H,d as L,b as j,s as D,a as I,g as P,c as h,_ as q,G,f as K}from"./index-CQ0F2wkl.js";import{r as i,R as y}from"./index-BwDkhjyp.js";import{P as e}from"./index-Dk74W0Oi.js";import{B as U}from"./settings-xiNX1vM3.js";import{b as V,a as J}from"./useAttachedMenu-DuO3mIji.js";import{m as Q}from"./mergeRefs-CTUecegF.js";const X=["primary","tertiary","ghost"],Y="primary",Z=i.forwardRef(function(r,n){let{children:s,className:a,disabled:l,kind:t=Y,label:R,size:x="lg",menuAlignment:u="bottom",tabIndex:z=0,menuTarget:E,...C}=r;const _=H("enable-v12-dynamic-floating-styles"),p=L("MenuButton"),m=j(),f=i.useRef(null);let w=[];_||(w=[K({crossAxis:!1})]),(u==="bottom"||u==="top")&&w.push(D({apply(g){let{rects:N,elements:S}=g;Object.assign(S.floating.style,{width:`${N.reference.width}px`})}}));const{refs:c,floatingStyles:b,placement:v,middlewareData:M}=I({placement:u,strategy:"fixed",middleware:w,whileElementsMounted:P}),O=Q(n,f),{open:o,handleClick:k,handleMousedown:$,handleClose:B}=V(f);i.useLayoutEffect(()=>{Object.keys(b).forEach(g=>{c.floating.current&&(c.floating.current.style[g]=b[g])})},[b,c.floating,M,v,o]);function W(){f.current&&k()}const T=h(`${m}--menu-button__container`,a),A=h(`${m}--menu-button__trigger`,{[`${m}--menu-button__trigger--open`]:o}),F=h(`${m}--menu-button__${u}`);return y.createElement("div",q({},C,{ref:O,"aria-owns":o?p:void 0,className:T}),y.createElement(U,{ref:c.setReference,className:A,size:x,tabIndex:z,kind:t,renderIcon:G,disabled:l,"aria-haspopup":!0,"aria-expanded":o,onClick:W,onMouseDown:$,"aria-controls":o?p:void 0},R),y.createElement(J,{containerRef:f,menuAlignment:u,className:F,ref:c.setFloating,id:p,legacyAutoalign:!1,label:R,mode:"basic",size:x,open:o,onClose:B,target:E},s))});Z.propTypes={children:e.node.isRequired,className:e.string,disabled:e.bool,kind:e.oneOf(X),label:e.string.isRequired,menuAlignment:e.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:e.oneOf(["sm","md","lg"]),tabIndex:e.number,menuTarget:e.instanceOf(typeof Element<"u"?Element:Object)};const ee=typeof window<"u",te=()=>{if(!ee)return{innerHeight:0,innerWidth:0,outerHeight:0,outerWidth:0};const{innerHeight:d,innerWidth:r,outerHeight:n,outerWidth:s}={...window};return{innerHeight:d,innerWidth:r,outerHeight:n,outerWidth:s}},le=(d,r,n=0)=>{const s=i.useRef({}),a=i.useRef(null),l=()=>{const t={previous:s.current,current:te()};d(t),s.current=t.current,a.current=null};i.useLayoutEffect(()=>{const t=()=>{n?a.current===null&&(a.current=setTimeout(l,n)):l()};return window.addEventListener("resize",t),l(),()=>window.removeEventListener("resize",t)},r)};export{Z as M,le as u};
