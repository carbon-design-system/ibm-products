import{e as n,u as I,c as T,_ as x,V as ue,m as fe,P as e,q as S,B as P,d as me,r as m,v as ge,ea as ye,a as ae,l as re,n as le,t as Fe,a6 as Me,i as Ae}from"./iframe-Cff_uvRq.js";import{r as ce}from"./index-BEhuL1MR.js";import{L as Y}from"./index-BbMc6LY2.js";import{B as U}from"./ButtonSet-BsWxyNA0.js";import{I as pe}from"./InlineLoading-Xj1uHorY.js";import{m as Oe}from"./mergeRefs-D4pwfk3t.js";import{r as He}from"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import{w as Pe,a as qe,e as ze}from"./wrapFocus-C0YgiTtk.js";import{T as be}from"./Text-BeripsbQ.js";import{A as Le}from"./index-A0BY4CbF.js";import{i as ie}from"./utils-DxZkHSRU.js";const he=n.forwardRef(function({buttonOnClick:o,children:s,className:r,closeClassName:f,closeIconClassName:b,closeModal:g,iconDescription:c="Close",label:l,labelClassName:h,title:$,titleClassName:i,...k},E){const d=I();function C(v){g?.(v),o?.(v)}const w=T(`${d}--modal-header`,r),D=T(`${d}--modal-header__label ${d}--type-delta`,h),R=T(`${d}--modal-header__heading ${d}--type-beta`,i),B=T(`${d}--modal-close`,f),a=T(`${d}--modal-close__icon`,b);return n.createElement("div",x({className:w},k,{ref:E}),l&&n.createElement("h2",{className:D},l),$&&n.createElement("h2",{className:R},$),s,n.createElement("div",{className:`${d}--modal-close-button`},n.createElement(ue,{className:B,label:c,onClick:C,"aria-label":c,align:"left"},n.createElement(fe,{size:20,"aria-hidden":"true",tabIndex:"-1",className:a}))))});he.propTypes={buttonOnClick:e.func,children:e.node,className:e.string,closeClassName:e.string,closeIconClassName:e.string,closeModal:e.func,iconDescription:e.string,label:e.node,labelClassName:e.string,title:e.node,titleClassName:e.string};function Ce({secondaryButtons:t,secondaryButtonText:o,secondaryClassName:s,closeModal:r,onRequestClose:f,disabled:b}){function g(c){r(c),f(c)}return Array.isArray(t)&&t.length<=2?n.createElement(n.Fragment,null,t.map(({buttonText:c,onClick:l},h)=>n.createElement(P,{key:`${c}-${h}`,className:s,kind:"secondary",onClick:l||g},c))):o?n.createElement(P,{disabled:b,className:s,onClick:g,kind:"secondary"},o):null}Ce.propTypes={closeModal:e.func,disabled:e.bool,onRequestClose:e.func,secondaryButtonText:e.string,secondaryButtons:(t,o,s)=>{if(t.secondaryButtons){if(!Array.isArray(t.secondaryButtons)||t.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const r={buttonText:e.node,onClick:e.func};t[o].forEach(f=>{e.checkPropTypes(r,f,o,s)})}return null},secondaryClassName:e.string};const X=n.forwardRef(function({children:o,className:s,closeModal:r=S,danger:f,inputref:b,onRequestClose:g=S,onRequestSubmit:c=S,primaryButtonDisabled:l,primaryButtonText:h,primaryClassName:$,secondaryButtonText:i,secondaryButtons:k,secondaryClassName:E,loadingStatus:d="inactive",loadingDescription:C,loadingIconDescription:w,onLoadingSuccess:D=S,...R},B){const a=I(),v=T(`${a}--modal-footer`,s,Array.isArray(k)&&k.length===2?`${a}--modal-footer--three-button`:null),_=T($,d!=="inactive"?`${a}--btn--loading`:null),F=d!=="inactive",H={closeModal:r,secondaryButtons:k,secondaryButtonText:i,secondaryClassName:E,onRequestClose:g,disabled:F};return n.createElement(U,x({className:v},R,{ref:B,"aria-busy":F}),n.createElement(Ce,H),h&&n.createElement(P,{onClick:c,className:_,disabled:F||l,kind:f?"danger":"primary",ref:b},d==="inactive"?h:n.createElement(pe,{status:d,description:C,iconDescription:w,className:`${a}--inline-loading--btn`,onSuccess:D})),o)});X.propTypes={children:e.node,className:e.string,closeModal:e.func,danger:e.bool,inputref:e.oneOfType([e.func,e.shape({current:e.any})]),loadingDescription:e.string,loadingIconDescription:e.string,loadingStatus:e.oneOf(["inactive","active","finished","error"]),onLoadingSuccess:e.func,onRequestClose:e.func,onRequestSubmit:e.func,primaryButtonDisabled:e.bool,primaryButtonText:e.string,primaryClassName:e.string,secondaryButtonText:e.string,secondaryButtons:(t,o,s)=>{if(t.secondaryButtons){if(!Array.isArray(t.secondaryButtons)||t.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const r={buttonText:e.node,onClick:e.func};t[o].forEach(f=>{e.checkPropTypes(r,f,o,s)})}return null},secondaryClassName:e.string};const de=(t,o,s)=>{t.classList.toggle(o,s)},G=m.createContext({}),Z=n.forwardRef(({children:t,className:o,focusAfterCloseRef:s,modal:r,onCancel:f=S,onClick:b=S,onClose:g=S,onRequestClose:c=S,open:l=!1,role:h,ariaLabel:$,ariaLabelledBy:i,ariaDescribedBy:k,...E},d)=>{const C=I(),w=me(),D=`${C}--dialog-header__heading--${w}`,R=`${C}--dialog-header__label--${w}`,B=m.useRef(null),a=d??B;function v(y){l&&r&&y.target===a.current&&c(y)}function _(y){v(y),b(y)}m.useEffect(()=>{a.current&&(l?r?a.current.showModal():a.current.show():a.current.close())},[r,l]),m.useEffect(()=>{if(!l&&s){const y=setTimeout(()=>{s.current?.focus()});return()=>{clearTimeout(y)}}},[l,s]);const F=T(`${C}--dialog-container`),H={dialogId:w,titleId:D,subtitleId:R,isOpen:l};return m.useEffect(()=>{if(a.current&&l&&!$&&!i){const y=a.current.querySelector(`.${C}--dialog-header__heading`);y&&y.id&&a.current.setAttribute("aria-labelledby",y.id)}},[l,$,i,C]),n.createElement(G.Provider,{value:H},n.createElement("dialog",x({},E,{className:T(`${C}--dialog`,{[`${C}--dialog--modal`]:r},o),ref:a,onCancel:f,onClick:_,onClose:g,role:h,"aria-label":$,"aria-labelledby":$?void 0:i||D,"aria-describedby":k}),n.createElement("div",{className:F},t)))});Z.displayName="Dialog";Z.propTypes={children:e.node,className:e.string,focusAfterCloseRef:e.oneOfType([e.func,e.shape({current:e.any})]),modal:e.bool,onRequestClose:e.func,open:e.bool,role:e.oneOf(["dialog","alertdialog"]),"aria-label":e.string,"aria-labelledby":e.string,ariaDescribedBy:e.string};const Ee=n.forwardRef(({children:t,...o},s)=>{const r=I();return n.createElement("div",x({className:`${r}--dialog__header`,ref:s},o),t)});Ee.displayName="DialogHeader";Ee.propTypes={children:e.node};const $e=n.forwardRef(({children:t,...o},s)=>{const r=I();return n.createElement("div",x({className:`${r}--dialog__header-controls`,ref:s},o),t)});$e.displayName="DialogControls";$e.propTypes={children:e.node};const Ne=n.forwardRef(({onClick:t,...o},s)=>{const r=I();return n.createElement(ue,x({kind:"ghost",className:`${r}--dialog__close`,label:"Close",title:"Close","aria-label":"Close",align:"left",onClick:t,ref:s},o),n.createElement(fe,{size:20,"aria-hidden":"true",tabIndex:-1,className:`${r}--icon__close`}))});Ne.displayName="DialogCloseButton";Ne.propTypes={onClick:e.func};const we=n.forwardRef(({children:t,className:o,id:s,...r},f)=>{const b=I(),{titleId:g}=m.useContext(G),c=s||g;return n.createElement(be,x({as:"h2",id:c,className:T(`${b}--dialog-header__heading`,o),ref:f},r),t)});we.displayName="DialogTitle";we.propTypes={children:e.node,className:e.string,id:e.string};const Te=n.forwardRef(({children:t,className:o,id:s,...r},f)=>{const b=I(),{subtitleId:g}=m.useContext(G),c=s||g;return n.createElement(be,x({as:"h2",id:c,className:T(`${b}--dialog-header__label`,o),ref:f},r),t)});Te.displayName="DialogSubtitle";Te.propTypes={children:e.node,className:e.string,id:e.string};const ke=n.forwardRef(({children:t,className:o,hasScrollingContent:s,...r},f)=>{const b=I(),g=m.useRef(null),[c,l]=m.useState(!1),h=me(),$=`${b}--dialog-body--${h}`;ge(()=>{g.current&&l(g.current.scrollHeight>g.current.clientHeight);function d(){g.current&&l(g.current.scrollHeight>g.current.clientHeight)}const C=ye(d,200);return window.addEventListener("resize",C),()=>{C.cancel(),window.removeEventListener("resize",C)}},[]);const i=T(`${b}--dialog-content`,{[`${b}--dialog-scroll-content`]:s||c},o),k=s||c?{tabIndex:0,role:"region"}:{},E=d=>{typeof f=="function"?f(d):f&&(f.current=d),g.current=d};return n.createElement(Y,x({ref:E,id:$,className:i},k,r),t)});ke.displayName="DialogBody";ke.propTypes={children:e.node,className:e.string,hasScrollingContent:e.bool};const De=n.forwardRef(({children:t,className:o,onRequestClose:s=S,onSecondarySubmit:r,onRequestSubmit:f=S,primaryButtonText:b="Save",primaryButtonDisabled:g=!1,secondaryButtonText:c="Cancel",secondaryButtons:l,loadingStatus:h="inactive",loadingDescription:$,loadingIconDescription:i,onLoadingSuccess:k=S,danger:E=!1,...d},C)=>{const w=I(),D=m.useRef(null),{isOpen:R}=m.useContext(G),[B,a]=m.useState(null);m.useEffect(()=>{if(E&&B){const y=requestAnimationFrame(()=>{B.focus()});return()=>cancelAnimationFrame(y)}},[E,B,R]);const v=T(`${w}--dialog-footer`,o,{[`${w}--dialog-footer--three-button`]:Array.isArray(l)&&l.length===2}),_=h!=="inactive",F=T({[`${w}--btn--loading`]:h!=="inactive"}),H=r||s;return t?n.createElement(U,x({className:v,ref:C},d),t):n.createElement(U,x({className:v,"aria-busy":_,ref:C},d),Array.isArray(l)&&l.length<=2?l.map(({buttonText:y,onClick:q},z)=>n.createElement(P,{key:`${y}-${z}`,autoFocus:E,kind:"secondary",ref:z===0&&E?a:void 0,onClick:q},y)):c&&n.createElement(P,{ref:E?a:void 0,disabled:_,kind:"secondary",autoFocus:E,onClick:H},c),n.createElement(P,{className:F,kind:E?"danger":"primary",disabled:_||g,onClick:f,ref:D},h==="inactive"?b:n.createElement(pe,{status:h,description:$,iconDescription:i,className:`${w}--inline-loading--btn`,onSuccess:k})))});De.displayName="DialogFooter";De.propTypes={children:e.node,className:e.string,onRequestClose:e.func,onSecondarySubmit:e.func,onRequestSubmit:e.func,primaryButtonText:e.node,primaryButtonDisabled:e.bool,secondaryButtonText:e.node,secondaryButtons:(t,o,s)=>{if(t.secondaryButtons){if(!Array.isArray(t.secondaryButtons)||t.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const r={buttonText:e.node,onClick:e.func};t[o].forEach(f=>{e.checkPropTypes(r,f,o,s)})}return null},danger:e.bool,loadingStatus:e.oneOf(["inactive","active","finished","error"]),loadingDescription:e.string,loadingIconDescription:e.string,onLoadingSuccess:e.func};const We=n.forwardRef(function({className:o,children:s,hasForm:r,hasScrollingContent:f,...b},g){const c=I(),l=m.useRef(null),[h,$]=m.useState(!1),i=T({[`${c}--modal-content`]:!0,[`${c}--modal-content--with-form`]:r,[`${c}--modal-scroll-content`]:f||h},o);ge(()=>{l.current&&$(l.current.scrollHeight>l.current.clientHeight);function E(){l.current&&$(l.current.scrollHeight>l.current.clientHeight)}const d=ye(E,200);return window.addEventListener("resize",d),()=>{d.cancel(),window.removeEventListener("resize",d)}},[]);const k=f||h?{tabIndex:0,role:"region"}:{};return n.createElement(Y,x({className:i},k,b,{ref:Oe(l,g)}),s)});We.propTypes={"aria-label":He("hasScrollingContent",e.string),children:e.node,className:e.string,hasForm:e.bool,hasScrollingContent:e.bool};const Ke=n.forwardRef(function({["aria-labelledby"]:o,["aria-label"]:s,children:r,className:f,containerClassName:b,danger:g,decorator:c,isFullWidth:l,onClose:h,onKeyDown:$,open:i,preventCloseOnClickOutside:k,selectorPrimaryFocus:E="[data-modal-primary-focus]",selectorsFloatingMenus:d,size:C,launcherButtonRef:w,slug:D,...R},B){const a=I(),[v,_]=m.useState(!!i),[F,H]=m.useState(!!i),y=m.useRef(null),q=m.useRef(null),z=m.useRef(null),ee=m.useRef(null),ne=m.useRef(null),A=ae("enable-dialog-element"),W=ae("enable-experimental-focus-wrap-without-sentinels");m.useEffect(()=>{!A&&i!==F&&(_(!!i),H(!!i),de(document.body,`${a}--body--with-modal-open`,!!i))},[i,F,a]),m.useEffect(()=>{if(!A)return()=>{de(document.body,`${a}--body--with-modal-open`,!1)}},[]);function ve(u){A||W&&i&&le(u,Me)&&y.current&&Pe({containerNode:y.current,currentActiveNode:u.target,event:u}),$?.(u)}function xe(u){const p=u.target;ne.current=p}function Ie(u){const{target:p}=u,N=ne.current;u.stopPropagation(),(oe&&!k||!oe&&k===!1)&&p instanceof Node&&!ze(p,d)&&y.current&&!y.current.contains(p)&&!y.current.contains(N)&&K(u)}function Re({target:u,relatedTarget:p}){if(!A&&!W&&i&&p&&u&&y.current){const{current:L}=y,{current:V}=z,{current:_e}=ee;qe({bodyNode:L,startTrapNode:V,endTrapNode:_e,currentActiveNode:p,oldActiveNode:u,selectorsFloatingMenus:d?.filter(Boolean)})}const N=document.querySelector(`.${a}--modal-content`);if(!N||!N.classList.contains(`${a}--modal-scroll-content`)||!p||!N.contains(p))return;const M=N.children[N.children.length-1],O=N.scrollHeight-M.offsetTop-M.clientHeight;for(const L of N.children)if(L.contains(p)){const V=N.clientHeight-L.offsetTop+N.scrollTop-L.clientHeight;V<O&&(N.scrollTop=N.scrollTop+(O-V));break}}function K(u){(!h||h(u)!==!1)&&_(!1)}const Be=T(`${a}--modal`,{"is-visible":v,[`${a}--modal--danger`]:g,[`${a}--modal--slug`]:D,[`${a}--modal--decorator`]:c},f),te=T(`${a}--modal-container`,C&&`${a}--modal-container--${C}`,l&&`${a}--modal-container--full-width`,b);let J;const Q=n.Children.toArray(r).map(u=>{switch(!0){case(ce.isElement(u)&&u.type===n.createElement(he).type):{const p=u;return J=p.props.label,n.cloneElement(p,{closeModal:K})}case(ce.isElement(u)&&u.type===n.createElement(X).type):{const p=u;return n.cloneElement(p,{closeModal:K,inputref:q,danger:g})}default:return u}}),oe=!m.Children.toArray(Q).some(u=>ie(u,X));m.useEffect(()=>{if(!i)return;const u=p=>{le(p,Fe)&&(p.preventDefault(),p.stopPropagation(),K(p))};return document.addEventListener("keydown",u,!0),()=>{document.removeEventListener("keydown",u,!0)}},[i]),m.useEffect(()=>{!A&&!i&&w&&setTimeout(()=>{w.current?.focus()})},[A,i,w]),m.useEffect(()=>{if(!A){const u=N=>{const M=N||y.current,O=M?M.querySelector(g?`.${a}--btn--secondary`:E):null;return O||q&&q.current};i&&v&&(N=>{const M=u(N),O=N.querySelector(`.${a}--modal-close`);M?M.focus():!M&&O&&O?.focus()})(y.current)}},[i,E,v]);const se=D??c,j=ie(se,Le)?m.cloneElement(se,{size:"sm"}):null,Se=A?n.createElement(Z,{open:i,focusAfterCloseRef:w,modal:!0,className:te,"aria-label":s||J,"aria-labelledby":o},n.createElement("div",{ref:y,className:`${a}--modal-container-body`},D?j:c?n.createElement("div",{className:`${a}--modal--inner__decorator`},j):"",Q)):n.createElement("div",{className:te,role:"dialog","aria-modal":"true","aria-label":s||J,"aria-labelledby":o},!W&&n.createElement("button",{type:"button",ref:z,className:`${a}--visually-hidden`},"Focus sentinel"),n.createElement("div",{ref:y,className:`${a}--modal-container-body`},D?j:c?n.createElement("div",{className:`${a}--modal--inner__decorator`},j):"",Q),!W&&n.createElement("button",{type:"button",ref:ee,className:`${a}--visually-hidden`},"Focus sentinel"));return n.createElement(Y,x({},R,{level:0,role:"presentation",ref:B,"aria-hidden":!i,onBlur:Re,onClick:re([R?.onClick,Ie]),onMouseDown:re([R?.onMouseDown,xe]),onKeyDown:ve,className:Be}),Se)});Ke.propTypes={"aria-label":e.string,"aria-labelledby":e.string,children:e.node,className:e.string,containerClassName:e.string,danger:e.bool,decorator:e.node,isFullWidth:e.bool,launcherButtonRef:e.oneOfType([e.func,e.shape({current:e.any})]),onClose:e.func,onKeyDown:e.func,open:e.bool,preventCloseOnClickOutside:e.bool,selectorPrimaryFocus:e.string,selectorsFloatingMenus:e.arrayOf(e.string.isRequired),size:e.oneOf(["xs","sm","md","lg"]),slug:Ae(e.node)};export{Ke as C,Z as D,he as M,We as a,X as b,ke as c,Ne as d,$e as e,De as f,Ee as g,Te as h,we as i,de as t};
