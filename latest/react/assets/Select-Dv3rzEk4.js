import{e as s,u as te,r as u,g as se,c,_ as le,t as ae,D as ne,P as t,k as D}from"./iframe-DMSo7fNu.js";import{F as oe}from"./FormContext-EOTHCOkS.js";import{A as re}from"./index-BkMDkXli.js";import{i as ce}from"./utils-CkYnHtpG.js";import{T as E}from"./Text-Dh2QBwQf.js";import{W as ie,a as de}from"./bucket-19-D9iFC4WK.js";const S=s.forwardRef(function({className:L,decorator:p,id:f,inline:o=!1,labelText:P="Select",disabled:i=!1,children:v,noLabel:K=!1,hideLabel:O=!1,invalid:a=!1,invalidText:V="",helperText:$="",light:W=!1,readOnly:d,size:x,warn:m=!1,warnText:k,onChange:q,slug:b,...g},z){const e=te(),{isFluid:n}=u.useContext(oe),[H,R]=u.useState(!1),B=se(),h=s.Children.toArray(v).filter(l=>s.isValidElement(l)),M=h.find(l=>l.props?.value===g?.defaultValue)?.props?.text||h[0]?.props?.text||"",[U,j]=u.useState(M),G=c({[`${e}--select`]:!0,[`${e}--select--inline`]:o,[`${e}--select--light`]:W,[`${e}--select--invalid`]:a,[`${e}--select--disabled`]:i,[`${e}--select--readonly`]:d,[`${e}--select--warning`]:m,[`${e}--select--fluid--invalid`]:n&&a,[`${e}--select--fluid--focus`]:n&&H,[`${e}--select--slug`]:b,[`${e}--select--decorator`]:p}),J=c(`${e}--label`,{[`${e}--visually-hidden`]:O,[`${e}--label--disabled`]:i}),Q=c({[`${e}--select-input`]:!0,[`${e}--select-input--${x}`]:x}),N=`${f}-error-msg`,X=(()=>{if(a)return V;if(m)return k})(),r=a||m?s.createElement(E,{as:"div",className:`${e}--form-requirement`,id:N},X):null,Y=c(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:i}),y=$?`select-helper-text-${B}`:void 0,w=$?s.createElement(E,{as:"div",id:y,className:Y},$):null,_={};a?_["aria-describedby"]=N:!o&&!n&&(_["aria-describedby"]=w?y:void 0);const C=l=>{R(l.type==="focus")},Z=l=>{const T=l?.target?.options[l.target.selectedIndex];j(T?.text)},ee={onMouseDown:l=>{d&&(l.preventDefault(),l.target.focus())},onKeyDown:l=>{d&&["ArrowDown","ArrowUp"," "].includes(l.key)&&l.preventDefault()}},I=b??p,F=ce(I,re)?u.cloneElement(I,{size:"mini"}):null,A=s.createElement(s.Fragment,null,s.createElement("select",le({},g,_,{id:f,className:Q,disabled:i||void 0,"aria-invalid":a||void 0,"aria-readonly":d||void 0,title:U,onChange:ae([q,Z])},ee,{ref:z}),v),s.createElement(ne,{className:`${e}--select__arrow`}),a&&s.createElement(ie,{className:`${e}--select__invalid-icon`}),!a&&m&&s.createElement(de,{className:`${e}--select__invalid-icon ${e}--select__invalid-icon--warning`}));return s.createElement("div",{className:c(`${e}--form-item`,L)},s.createElement("div",{className:G},!K&&s.createElement(E,{as:"label",htmlFor:f,className:J},P),o&&s.createElement("div",{className:`${e}--select-input--inline__wrapper`},s.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null},A),r),!o&&s.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null,onFocus:C,onBlur:C},A,b?F:p?s.createElement("div",{className:`${e}--select__inner-wrapper--decorator`},F):"",n&&s.createElement("hr",{className:`${e}--select__divider`}),n&&r?r:null),!o&&!n&&r?r:w))});S.displayName="Select";S.propTypes={children:t.node,className:t.string,decorator:t.node,defaultValue:t.any,disabled:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node,light:D(t.bool),noLabel:t.bool,onChange:t.func,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:D(t.node),warn:t.bool,warnText:t.node};export{S};
