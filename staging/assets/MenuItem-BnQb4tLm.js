import{a as W,g as X,o as Y,p as Z,q as ee,r as te,b as v,j as ne,c as M,F as ae,_ as k,i as $,t as se,v as oe,S as re}from"./index-CQ0F2wkl.js";import{P as e}from"./index-Dk74W0Oi.js";import{r as n,R as t}from"./index-BwDkhjyp.js";import{u as j}from"./useControllableState-DwpxGhsf.js";import{M as D,u as le,a as ce}from"./useAttachedMenu-DuO3mIji.js";import{T as ie}from"./Text-BiMgJRID.js";import{c as ue,d as me,C as L}from"./bucket-2-DlXCnOsR.js";var G,K;const q=n.forwardRef(function(m,f){let{children:l,className:d,disabled:c,kind:s="default",label:p,onClick:g,renderIcon:h,shortcut:i,...o}=m;const[r,b]=n.useState(!1),[N,R]=n.useState(!1),{refs:C,floatingStyles:u,context:S}=W({open:r,onOpenChange:b,placement:N?"left-start":"right-start",whileElementsMounted:X,middleware:[Y({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:F,getFloatingProps:B}=Z([ee(S,{delay:100,enabled:!0,handleClose:te({requireIntent:!1})})]),E=v(),x=n.useContext(D),w=n.useRef(null),V=ne([f,w,C.setReference]),I=!!l,T=c&&!I,H=s==="danger"&&!I;function U(){x.dispatch({type:"registerItem",payload:{ref:w,disabled:!!c}})}function P(){w.current&&b(!0)}function z(){b(!1)}function O(a){T||(I?P():(x.state.requestCloseRoot(a),g&&g(a)))}function J(a){I&&$(a,se)&&(P(),a.stopPropagation()),($(a,oe)||$(a,re))&&O(a),o.onKeyDown&&o.onKeyDown(a)}const Q=M(d,`${E}--menu-item`,{[`${E}--menu-item--disabled`]:T,[`${E}--menu-item--danger`]:H});n.useEffect(()=>{U()},[]);const{direction:A}=le();n.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||A==="rtl"?R(!0):R(!1)},[A]);const _=x.state.mode==="basic"||o.role==="menuitemcheckbox"||o.role==="menuitemradio";return n.useEffect(()=>{_&&h&&!x.state.hasIcons&&x.dispatch({type:"enableIcons"})},[_,h,x.state.hasIcons,x]),n.useEffect(()=>{Object.keys(u).forEach(a=>{C.floating.current&&a!=="position"&&(C.floating.current.style[a]=u[a])})},[u,C.floating]),t.createElement(ae,{context:S,order:["reference","floating"],modal:!1},t.createElement("li",k({role:"menuitem"},o,{ref:V,className:Q,tabIndex:-1,"aria-disabled":T??void 0,"aria-haspopup":I??void 0,"aria-expanded":I?r:void 0,onClick:O,onKeyDown:J},F()),t.createElement("div",{className:`${E}--menu-item__icon`},_&&h&&t.createElement(h,null)),t.createElement(ie,{as:"div",className:`${E}--menu-item__label`,title:p},p),i&&!I&&t.createElement("div",{className:`${E}--menu-item__shortcut`},i),I&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${E}--menu-item__shortcut`},N?G||(G=t.createElement(ue,null)):K||(K=t.createElement(me,null))),t.createElement(ce,k({label:p,open:r,onClose:()=>{var a;z(),(a=w.current)==null||a.focus()},ref:C.setFloating},B()),l))))});q.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const fe=n.forwardRef(function(m,f){let{className:l,defaultSelected:d,label:c,onChange:s,selected:p,...g}=m;const h=v(),i=n.useContext(D);i.state.mode;const[o,r]=j({value:p,onChange:s,defaultValue:d??!1});function b(R){r(!o),s&&s(R)}n.useEffect(()=>{i.state.hasIcons||i.dispatch({type:"enableIcons"})},[i.state.hasIcons,i]);const N=M(l,`${h}--menu-item-selectable--selected`);return t.createElement(q,k({},g,{ref:f,label:c,className:N,role:"menuitemcheckbox","aria-checked":o,renderIcon:o?L:void 0,onClick:b}))});fe.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const de=n.forwardRef(function(m,f){let{children:l,className:d,label:c,...s}=m;const p=v(),g=M(d,`${p}--menu-item-group`);return t.createElement("li",{className:g,role:"none",ref:f},t.createElement("ul",k({},s,{role:"group","aria-label":c}),l))});de.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const pe=y=>y.toString(),ge=n.forwardRef(function(m,f){let{className:l,defaultSelectedItem:d,items:c,itemToString:s=pe,label:p,onChange:g,selectedItem:h,...i}=m;const o=v(),r=n.useContext(D);r.state.mode;const[b,N]=j({value:h,onChange:g,defaultValue:d});function R(u,S){N(u)}n.useEffect(()=>{r.state.hasIcons||r.dispatch({type:"enableIcons"})},[r.state.hasIcons,r]);const C=M(l,`${o}--menu-item-radio-group`);return t.createElement("li",{className:C,role:"none",ref:f},t.createElement("ul",k({},i,{role:"group","aria-label":p}),c.map((u,S)=>t.createElement(q,{key:S,label:s(u),role:"menuitemradio","aria-checked":u===b,renderIcon:u===b?L:void 0,onClick:F=>{R(u)}}))))});ge.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const he=n.forwardRef(function(m,f){let{className:l,...d}=m;const c=v(),s=M(l,`${c}--menu-item-divider`);return t.createElement("li",k({},d,{className:s,role:"separator",ref:f}))});he.propTypes={className:e.string};export{q as M};
