import{e as r,u as D,r as l,k as ee,d as te,c as T,_ as se,l as N,m as ae,n as g,E as re,o as ne,q as d,P as e,i as I,t as ce}from"./iframe-Cx5KSUkN.js";import{F as oe}from"./FormContext-B2Gj6hIG.js";import{S as le}from"./bucket-15-Cv3_8V3l.js";var w;const R=r.forwardRef(({autoComplete:i="off",className:u,closeButtonLabelText:b="Clear search input",defaultValue:y,disabled:m,isExpanded:o=!0,id:E,labelText:F,light:K,onChange:C=()=>{},onClear:j=()=>{},onKeyDown:k,onExpand:s,placeholder:$="Search",renderIcon:q,role:V,size:h="md",type:_="search",value:c,...x},B)=>{const H=!!(c||y),t=D(),{isFluid:M}=l.useContext(oe),n=l.useRef(null),A=ee([B,n]),v=l.useRef(null),G=te("search-input"),f=E||G,P=`${f}-search`,[J,p]=l.useState(H||!1),[L,Q]=l.useState(c),U=T({[`${t}--search`]:!0,[`${t}--search--sm`]:h==="sm",[`${t}--search--md`]:h==="md",[`${t}--search--lg`]:h==="lg",[`${t}--search--light`]:K,[`${t}--search--disabled`]:m,[`${t}--search--fluid`]:M},u),W=T({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!J||!o});c!==L&&(p(!!c),Q(c));function S(){if(!c&&n.current&&(n.current.value=""),n.current){const a=Object.assign({},n.current,{value:""}),z={bubbles:!1,cancelable:!1,currentTarget:n.current,defaultPrevented:!1,eventPhase:0,isDefaultPrevented:()=>!1,isPropagationStopped:()=>!1,isTrusted:!1,nativeEvent:new Event("change"),persist:d,preventDefault:d,stopPropagation:d,target:a,timeStamp:0,type:"change"};C(z)}j(),p(!1),n.current?.focus()}function X(a){p(a.target.value!=="")}function Y(a){g(a,ce)&&(a.stopPropagation(),n.current?.value?S():s&&o&&v.current?.focus())}function Z(a){(g(a,re)||g(a,ne))&&(a.stopPropagation(),s&&s(a))}return r.createElement("div",{role:"search","aria-label":$,className:U},r.createElement("div",{"aria-labelledby":s?P:void 0,role:s?"button":void 0,className:`${t}--search-magnifier`,onClick:s,onKeyDown:Z,tabIndex:s&&!o?0:-1,ref:v,"aria-expanded":s&&o?!0:s&&!o?!1:void 0,"aria-controls":s?f:void 0},r.createElement(O,{icon:q})),r.createElement("label",{id:P,htmlFor:f,className:`${t}--label`},F),r.createElement("input",se({autoComplete:i,className:`${t}--search-input`,defaultValue:y,disabled:m,role:V,ref:A,id:f,onChange:N([C,X]),onKeyDown:N([k,Y]),placeholder:$,type:_,value:c,tabIndex:s&&!o?-1:void 0},x)),r.createElement("button",{"aria-label":b,className:W,disabled:m,onClick:S,title:b,type:"button"},w||(w=r.createElement(ae,null))))});R.displayName="Search";R.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:I(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:I(e.string),size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function O({icon:i}){const u=D();return i?r.createElement(i,{className:`${u}--search-magnifier-icon`}):r.createElement(le,{className:`${u}--search-magnifier-icon`})}O.propTypes={icon:e.oneOfType([e.func,e.object])};export{R as S};
