import{b as z,u as D,l as it,a as lt,o as ct,f as ut,$ as pt,h as ft,g as dt,j as G,c as R,_ as J,P as r}from"./index-CXyjPnaX.js";import{r as g,e as u}from"./index-CPiZ6Cnx.js";const B={};function gt(n,a,i){return function(d,e,o){if(d[e]!==void 0){if(!B[o]||!B[o][e]){B[o]={...B[o],[e]:!0};const f=d[e],j=i?i(f):null;a&&!a.includes(f)&&(i?`${f}${e}${o}${j}${f}`:`${f}${e}${o}${a.join(", ")}${f}`)}for(var p=arguments.length,m=new Array(p>3?p-3:0),v=3;v<p;v++)m[v-3]=arguments[v];return n(d,e,o,...m)}}}function wt(n,a,i){const s=g.useRef(null);g.useEffect(()=>{s.current=i},[i]),g.useEffect(()=>{var o;const d=p=>{s.current&&s.current(p)},e="current"in n?n.current:n;return(o=e==null?void 0:e.addEventListener)==null||o.call(e,a,d),()=>{var p;(p=e==null?void 0:e.removeEventListener)==null||p.call(e,a,d)}},[n,a])}function I(n,a){const i=g.useRef(null);g.useEffect(()=>{i.current=a},[a]),g.useEffect(()=>{function s(d){i.current&&i.current(d)}return window.addEventListener(n,s),()=>{window.removeEventListener(n,s)}},[n])}function bt(n){switch(n){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return n}}const K=u.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ht=n=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[n],mt=u.forwardRef(function(a,i){var k;let{isTabTip:s,align:d=s?"bottom-start":"bottom",as:e="span",autoAlign:o=!1,autoAlignBoundary:p,caret:m=!s,className:v,children:f,dropShadow:j=!0,highContrast:X=!1,onRequestClose:E,open:H,...Y}=a;const b=z(),Z=g.useRef(null),h=g.useRef(null),C=g.useRef(null),y=D("enable-v12-dynamic-floating-styles")||o;let P=bt(d);I("blur",()=>{H&&(E==null||E())}),I("click",l=>{var t;H&&!((t=C==null?void 0:C.current)!=null&&t.contains(l.target))&&(E==null||E())});const _=u.Children.toArray(f).some(l=>{var t,c;return(c=(t=l==null?void 0:l.props)==null?void 0:t.className)==null?void 0:c.includes("slug")})?7:6,$=g.useRef({offset:10,caretHeight:_});it(()=>{if(m&&C.current){const l=window.getComputedStyle(C.current,null),t=l.getPropertyValue("--cds-popover-offset"),c=l.getPropertyValue("--cds-popover-caret-height");t&&($.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),c&&($.current.caretHeight=c.includes("px")?Number(c.split("px",1)[0])*1:Number(c.split("rem",1)[0])*16)}});const{refs:T,floatingStyles:V,placement:F,middlewareData:x}=lt(y?{placement:P,strategy:"fixed",middleware:[ct(s?0:(k=$==null?void 0:$.current)==null?void 0:k.offset),o&&ut({fallbackPlacements:P.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:p}),pt({element:h}),o&&ft()],whileElementsMounted:dt}:{}),tt=g.useMemo(()=>({floating:Z,setFloating:T.setFloating,caretRef:h,autoAlign:o}),[T.setFloating,o]);s&&(["bottom-start","bottom-end"].includes(P)||(P="bottom-start")),g.useEffect(()=>{var l,t;if(y){const c={...V,visibility:(l=x.hide)!=null&&l.referenceHidden?"hidden":"visible"};if(Object.keys(c).forEach(w=>{T.floating.current&&(T.floating.current.style[w]=c[w])}),m&&x&&x.arrow&&(h!=null&&h.current)){const{x:w,y:S}=x.arrow,N={top:"bottom",right:"left",bottom:"top",left:"right"}[F.split("-")[0]];h.current.style.left=w!=null?`${w}px`:"",h.current.style.top=S!=null?`${S}px`:"",h.current.style.right="",h.current.style.bottom="",N&&(h.current.style[N]=`${-((t=$==null?void 0:$.current)==null?void 0:t.caretHeight)}px`)}}},[V,T.floating,y,x,F,m]);const et=G([i,C]),rt=o&&F!==P?F:P,ot=R({[`${b}--popover-container`]:!0,[`${b}--popover--caret`]:m,[`${b}--popover--drop-shadow`]:j,[`${b}--popover--high-contrast`]:X,[`${b}--popover--open`]:H,[`${b}--popover--auto-align ${b}--autoalign`]:y,[`${b}--popover--${rt}`]:!0,[`${b}--popover--tab-tip`]:s},v),nt=u.Children.map(f,l=>{var q,O;const t=l,c=(q=t==null?void 0:t.type)==null?void 0:q.displayName,w=(t==null?void 0:t.type)==="button",S=y&&c&&["ToggletipButton"].includes(c),N=y&&!["ToggletipContent","PopoverContent"].includes(c);if(u.isValidElement(t)&&(w||S||N)){const W=(O=t==null?void 0:t.props)==null?void 0:O.className,A=(t==null?void 0:t.props).ref,at=R(`${b}--popover--tab-tip__button`,W);return u.cloneElement(t,{className:s&&(t==null?void 0:t.type)==="button"?at:W||"",ref:L=>{var M,U;(y&&((M=t==null?void 0:t.type)==null?void 0:M.displayName)!=="PopoverContent"||y&&((U=t==null?void 0:t.type)==null?void 0:U.displayName)==="ToggletipButton")&&T.setReference(L),typeof A=="function"?A(L):A!=null&&(A.current=L)}})}else return t}),st=e;return u.createElement(K.Provider,{value:tt},u.createElement(st,J({},Y,{className:ot,ref:et}),y||s?nt:f))});mt.propTypes={align:gt(r.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],ht),as:r.oneOfType([r.string,r.elementType]),autoAlign:r.bool,autoAlignBoundary:r.oneOfType([r.oneOf(["clippingAncestors"]),r.elementType,r.arrayOf(r.elementType),r.exact({x:r.number.isRequired,y:r.number.isRequired,width:r.number.isRequired,height:r.number.isRequired})]),caret:r.bool,children:r.node,className:r.string,dropShadow:r.bool,highContrast:r.bool,isTabTip:r.bool,onRequestClose:r.func,open:r.bool.isRequired};function yt(n,a){let{className:i,children:s,...d}=n;const e=z(),{setFloating:o,caretRef:p,autoAlign:m}=u.useContext(K),v=G([o,a]),f=D("enable-v12-dynamic-floating-styles")||m;return u.createElement("span",J({},d,{className:`${e}--popover`}),u.createElement("span",{className:R(`${e}--popover-content`,i),ref:v},s,f&&u.createElement("span",{className:R({[`${e}--popover-caret`]:!0,[`${e}--popover--auto-align`]:!0}),ref:p})),!f&&u.createElement("span",{className:R({[`${e}--popover-caret`]:!0}),ref:p}))}const Q=u.forwardRef(yt);Q.displayName="PopoverContent";Q.propTypes={children:r.node,className:r.string};export{mt as P,Q as a,wt as b,gt as d,bt as m,I as u};
