import{r as a,O as ee,a1 as U,e as t,c as I,p as h,B as K,T as te,P as e}from"./iframe-DKsKIeO_.js";import{g as Y}from"./devtools-Bn3omVKL.js";import{c as ae,a as ne,b as re,C as se}from"./CoachmarkOverlayElements-BXg0eF_S.js";import{u as j}from"./useIsomorphicEffect-0hnIMifz.js";import{e as oe}from"./bucket-9-DIS24dXC.js";import{C as ie}from"./CoachmarkTagline-C6nOYfGJ.js";const C=`${h.prefix}--coachmark-stacked-home`,T=`${h.prefix}--coachmark-overlay`,W="CoachmarkStackHome",H=a.forwardRef(({className:x,description:E,isOpen:y,renderMedia:N,navLinkLabels:_,onClickNavItem:A,onClose:u,portalTarget:q,closeButtonLabel:O,title:k,tooltipAlign:D,...P},B)=>{const R=a.useRef(null),[F,d]=a.useState(0),n=a.useRef([]),[w,m]=a.useState([]);a.useEffect(()=>{setTimeout(()=>{y&&R.current&&R.current.focus()},100)},[y]);const p=a.useRef(null);if(j(()=>{p.current=q?document?.querySelector(q)??document?.querySelector("body"):document?.querySelector("body")},[q]),!_)return ee.warn(`${W} is an Onboarding internal component and is not intended for general use.`);const i=(r,s)=>{if(s&&n.current[r]!==s){const S=s.scrollWidth>s.clientWidth;n.current[r]=s,m(c=>{const v=[...c];return v[r]=S,v})}};function g(r,s,S=null){const c=w[r]??!1;return t.createElement("li",{key:r,ref:v=>{i(r,v)}},t.createElement(K,{kind:"ghost",size:"sm",onClick:()=>{d(r),A(r+1)},ref:S},c?t.createElement(te,{highContrast:!1,label:s,align:D,className:`${C}__navLinkLabels-tooltip`},t.createElement("span",{className:`${C}__navLinkLabels-text`},s)):s))}return p?.current?U.createPortal(t.createElement("div",{...P,className:I(C,x),ref:B,...Y(W)},t.createElement(ae,{onClose:()=>{d(0),u()}}),t.createElement("div",{className:`${T}__body`},t.createElement("div",{className:`${T}-element`},!N&&t.createElement(oe,{size:20,className:`${C}__icon-idea`}),N&&t.createElement("div",{className:`${C}__element-stepped-media`},N({playStep:0})),t.createElement("div",{className:`${T}-element__content`},k&&t.createElement("h2",{className:`${T}-element__title`},k),E&&t.createElement("p",{className:`${T}-element__body`},E)),t.createElement("ul",{className:`${C}__nav-links`},_.map((r,s)=>s===F?g(s,r,R):g(s,r))),O&&t.createElement("div",{className:`${T}__footer`},t.createElement(K,{size:"sm",onClick:()=>{d(0),u()}},O))))),p?.current):null});H.displayName=W;H.propTypes={className:e.string,closeButtonLabel:e.string,description:e.node.isRequired,isOpen:e.bool.isRequired,navLinkLabels:e.arrayOf(e.string.isRequired).isRequired,onClickNavItem:e.func.isRequired,onClose:e.func.isRequired,portalTarget:e.string,renderMedia:e.func,title:e.string.isRequired,tooltipAlign:e.oneOf(["top","bottom"])};H.__docgenInfo={description:`DO NOT USE. This component is for the exclusive use
of other Onboarding components.`,methods:[],displayName:"CoachmarkStackHome",props:{className:{required:!1,tsType:{name:"string"},description:"Optional class name for this component.",type:{name:"string"}},closeButtonLabel:{required:!1,tsType:{name:"string"},description:"The label for the button that will close the stack",type:{name:"string"}},description:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The description of the Coachmark.",type:{name:"node"}},isOpen:{required:!0,tsType:{name:"boolean"},description:"If the stack home is open.",type:{name:"bool"}},renderMedia:{required:!1,tsType:{name:"signature",type:"function",raw:"(params) => ReactNode",signature:{arguments:[{name:"params"}],return:{name:"ReactNode"}}},description:"Optional prop to render any media like images or any animated media.",type:{name:"func"}},navLinkLabels:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"The labels used to link to the stackable Coachmarks.",type:{name:"arrayOf",value:{name:"string"}}},onClickNavItem:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:"For internal use only by CoachmarkStack and CoachmarkStackHome.",type:{name:"func"}},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Function to call when the stack closes.",type:{name:"func"}},portalTarget:{required:!1,tsType:{name:"string"},description:`By default, the CoachmarkStackHome will be appended to the end of \`document.body\`.
The CoachmarkStackHome will remain persistent as the user navigates the app until
the user closes the CoachmarkStackHome.

Alternatively, the app developer can tightly couple the CoachmarkStackHome to a DOM
element or other component by specifying a CSS selector. The CoachmarkStackHome will
remain visible as long as that element remains visible or mounted. When the
element is hidden or component is unmounted, the CoachmarkStackHome will disappear.`,type:{name:"string"}},title:{required:!0,tsType:{name:"string"},description:"The title of the Coachmark.",type:{name:"string"}},tooltipAlign:{required:!1,tsType:{name:"union",raw:"'top' | 'bottom'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"Label's tooltip position",type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'bottom'",computed:!1}]}}}};const $=`${h.prefix}--coachmark-stack`,G="CoachmarkStack",l=`${h.prefix}--coachmark-stack-element`,V={onClose:()=>{},theme:"light",portalTarget:"body"},z=t.forwardRef(({children:x,className:E,onClose:y=V.onClose,description:N,renderMedia:_,navLinkLabels:A,portalTarget:u=V.portalTarget,closeButtonLabel:q,tagline:O,theme:k=V.theme,title:D,tooltipAlign:P,closeIconDescription:B,...R},F)=>{const d=a.useRef(null);j(()=>{d.current=u?document?.querySelector(u)??document?.querySelector("body"):document?.querySelector("body")},[u]);const n=a.useRef(null),w=a.useRef([]),[m,p]=a.useState(!1),[i,g]=a.useState(0),[r,s]=a.useState(),S=a.Children.toArray(x),c=a.useRef(void 0),v=240,J=o=>{g(o)},b=a.useCallback(o=>{if(o){g(-1);const f=setTimeout(()=>{p(!1),y()},v);return()=>clearTimeout(f)}else g(0)},[y]),M=a.useCallback(o=>{o.key==="Escape"&&b(i===0)},[b,i]);a.useEffect(()=>(document.addEventListener("keydown",M,!1),()=>{document.removeEventListener("keydown",M,!1)}),[M]);const Q={buttonProps:{tabIndex:0,"aria-expanded":m,onClick:()=>{p(!0)},onDoubleClick:()=>{p(!0)}},closeButtonProps:{onClick:()=>b(!1)},isOpen:m,closeIconDescription:B};a.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]),a.useEffect(()=>{const o=i-1;if(!r){if(n.current){const L=n.current.clientHeight;L>0&&s(L)}return}if(n.current&&(n.current.style.height=`${r}px`),!m||o<0){n.current&&(n.current.classList.remove(`${$}--scaled-home`),n.current.classList.add(`${$}--unscaled-home`),n.current.focus());return}const f=w.current[o].clientHeight;n.current&&(n.current.style.height=`calc(${f}px + 3rem)`,w.current[o].focus(),n.current.classList.remove(`${$}--unscaled-home`),n.current.classList.add(`${$}--scaled-home`))},[i,m,r]);const X=a.Children.map(S,(o,f)=>{const L=c.current?`${l}--is-mounted`:"";return t.createElement(ne,{key:f,ref:Z=>{w.current[f]=Z},kind:re.STACKED,onClose:()=>b(!1),theme:k,fixedIsVisible:!1,className:I(l,L,f===i-1&&`${l}--is-visible`,c.current&&`${l}--is-mounted`)},o)});return t.createElement(se.Provider,{value:Q},t.createElement("div",{...R,className:I($,`${h.prefix}--coachmark-overlay--stack`,E),ref:F,...Y(G)},t.createElement(ie,{title:O,onClose:y}),t.createElement(H,{ref:n,className:I(`${h.prefix}--coachmark-overlay`,`${h.prefix}--coachmark-overlay__${k}`,l,i>0&&`${l}--is-stacked`,i>0&&`${l}--is-stacked__${k}`,m&&`${l}--is-visible`,c.current&&`${l}--is-mounted`),isOpen:m&&i<1,description:N,renderMedia:_,navLinkLabels:A,onClickNavItem:J,onClose:()=>{b(!0)},portalTarget:u,closeButtonLabel:q,title:D,tooltipAlign:P}),d?.current?U.createPortal(X,d?.current):null))});z.displayName=G;z.propTypes={children:e.node.isRequired,className:e.string,closeButtonLabel:e.string,closeIconDescription:e.string,description:e.node.isRequired,navLinkLabels:e.arrayOf(e.string.isRequired).isRequired,onClose:e.func,portalTarget:e.string,renderMedia:e.func,tagline:e.string.isRequired,theme:e.oneOf(["light","dark"]),title:e.string.isRequired,tooltipAlign:e.oneOf(["top","bottom"])};z.__docgenInfo={description:`Stacked coachmarks are used to call out specific functionality or concepts
within the UI that may not be intuitive but are important for the
user to gain understanding of the product's main value and discover new use cases.
This variant allows the stacking of multiple coachmark overlays to be displayed by interacting with the tagline.`,methods:[],displayName:"CoachmarkStack",props:{children:{required:!0,tsType:{name:"ReactNode"},description:"CoachmarkStack should use a single CoachmarkOverlayElements component as a child.",type:{name:"node"}},className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},closeButtonLabel:{required:!1,tsType:{name:"string"},description:"The label for the button that will close the Stack",type:{name:"string"}},description:{required:!0,tsType:{name:"ReactNode"},description:"The description of the Coachmark.",type:{name:"node"}},renderMedia:{required:!1,tsType:{name:"signature",type:"function",raw:"(params) => ReactNode",signature:{arguments:[{name:"params"}],return:{name:"ReactNode"}}},description:"Optional prop to render any media like images or any animated media.",type:{name:"func"}},navLinkLabels:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"The labels used to link to the stackable Coachmarks.",type:{name:"arrayOf",value:{name:"string"}}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Function to call when the CoachmarkStack closes.",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},portalTarget:{required:!1,tsType:{name:"string"},description:"Where in the DOM to render the stack.\nThe default is `document.body`.",defaultValue:{value:"'body'",computed:!1},type:{name:"string"}},tagline:{required:!0,tsType:{name:"string"},description:"The tagline title which will be fixed to the bottom right of the window and will serve as the display trigger.",type:{name:"string"}},theme:{required:!1,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"Determines the theme of the component.",defaultValue:{value:"'light'",computed:!1},type:{name:"enum",value:[{value:"'light'",computed:!1},{value:"'dark'",computed:!1}]}},title:{required:!0,tsType:{name:"string"},description:"The title of the Coachmark.",type:{name:"string"}},tooltipAlign:{required:!1,tsType:{name:"union",raw:"'top' | 'bottom'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"Label's tooltip position",type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'bottom'",computed:!1}]}},closeIconDescription:{required:!1,tsType:{name:"string"},description:"Tooltip text and aria label for the Close button icon.",type:{name:"string"}}}};export{z as C};
