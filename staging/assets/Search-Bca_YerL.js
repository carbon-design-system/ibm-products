import{b as R,j as ae,d as te,c as S,_ as ne,C as se,e as oe,i as b,E as re,o as ce,S as le}from"./index-CO-HQMMN.js";import{P as e}from"./index-Dk74W0Oi.js";import{R as s,r as d}from"./index-BwDkhjyp.js";import{c as I}from"./events-OVwOsPzJ.js";import{F as ie}from"./FormContext-C7kRVu4t.js";import{S as ue}from"./bucket-14-mit-FcZ1.js";function de(i){const o=i.current||i;o&&o.focus&&document.activeElement!==o&&o.focus()}var N;const w=s.forwardRef(function(o,f){let{autoComplete:D="off",className:K,closeButtonLabelText:x="Clear search input",defaultValue:C,disabled:m,isExpanded:c=!0,id:O,labelText:V,light:j,onChange:E=()=>{},onClear:B=()=>{},onKeyDown:F,onExpand:a,placeholder:y="Search",renderIcon:_,role:k="searchbox",size:h="md",type:q="text",value:r,...z}=o;const H=!!(r||C),t=R(),{isFluid:L}=d.useContext(ie),l=d.useRef(null),M=ae([f,l]),v=d.useRef(null),A=te("search-input"),u=O||A,G=`${u}-search`,[J,g]=d.useState(H||!1),[Q,U]=d.useState(r),W=S({[`${t}--search`]:!0,[`${t}--search--sm`]:h==="sm",[`${t}--search--md`]:h==="md",[`${t}--search--lg`]:h==="lg",[`${t}--search--light`]:j,[`${t}--search--disabled`]:m,[`${t}--search--fluid`]:L},K),X=S({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!J||!c});r!==Q&&(g(!!r),U(r));function $(){!r&&l.current&&(l.current.value="");const p={target:Object.assign({},l.current,{value:""}),type:"change"};E(p),B(),g(!1),de(l)}function Y(n){g(n.target.value!=="")}function Z(n){var p,T;b(n,re)&&(n.stopPropagation(),(p=l.current)!=null&&p.value?$():a&&c&&((T=v.current)==null||T.focus()))}function ee(n){(b(n,ce)||b(n,le))&&(n.stopPropagation(),a&&a(n))}return s.createElement("div",{role:"search","aria-label":y,className:W},s.createElement("div",{"aria-label":a?"button":void 0,"aria-labelledby":a?u:void 0,role:a?"button":void 0,className:`${t}--search-magnifier`,onClick:a,onKeyDown:ee,tabIndex:a&&!c?0:-1,ref:v,"aria-expanded":a&&c?!0:a&&!c?!1:void 0,"aria-controls":a?u:void 0},s.createElement(P,{icon:_})),s.createElement("label",{id:G,htmlFor:u,className:`${t}--label`},V),s.createElement("input",ne({autoComplete:D,className:`${t}--search-input`,defaultValue:C,disabled:m,role:k,ref:M,id:u,onChange:I([E,Y]),onKeyDown:I([F,Z]),placeholder:y,type:q,value:r,tabIndex:a&&!c?-1:void 0},z)),s.createElement("button",{"aria-label":x,className:X,disabled:m,onClick:$,title:x,type:"button"},N||(N=s.createElement(se,null))))});w.displayName="Search";w.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:oe(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function P(i){let{icon:o}=i;const f=R();return o?s.createElement(o,{className:`${f}--search-magnifier-icon`}):s.createElement(ue,{className:`${f}--search-magnifier-icon`})}P.propTypes={icon:e.oneOfType([e.func,e.object])};export{w as S};
