import{u as k,e as a,M,_ as T,n as j,P as e,r as $,g as O,c as P,t as W,v as B,H as q,E as L,q as S,l as I,N as G}from"./iframe-HX3uP5rF.js";import{L as J}from"./InlineLoading-BBzqH8Wg.js";import{W as Q}from"./bucket-19-DB0RW10U.js";import{T as x}from"./Text-DBtsZOEn.js";var A;function U({iconDescription:s="Uploading file",status:l="uploading",invalid:d,name:o,tabIndex:g=0,["aria-describedby"]:r,...p}){const c=k();switch(l){case"uploading":return a.createElement(J,{description:s,small:!0,withOverlay:!1,className:`${c}--file-loading`});case"edit":return a.createElement(a.Fragment,null,d&&a.createElement(Q,{className:`${c}--file-invalid`}),a.createElement("button",T({"aria-label":`${s} - ${o}`,className:`${c}--file-close`,type:"button",tabIndex:g},p,{"aria-describedby":d?r:void 0}),A||(A=a.createElement(j,null))));case"complete":return a.createElement(M,T({"aria-label":s,className:`${c}--file-complete`},p,{tabIndex:-1}),s&&a.createElement("title",null,s));default:return null}}U.propTypes={"aria-describedby":e.string,iconDescription:e.string,invalid:e.bool,name:e.string,status:e.oneOf(["edit","complete","uploading"]),tabIndex:e.number};function X({accept:s=[],className:l,id:d,disabled:o,labelText:g="Add file",multiple:r=!1,name:p,onAddFiles:c=W,onClick:h,pattern:C=".[0-9a-z]+$",innerRef:F,...y}){const f=k(),N=$.useRef(null),{current:n}=$.useRef(d||O()),[v,_]=$.useState(!1),w=P(`${f}--file__drop-container`,`${f}--file-browse-btn`,{[`${f}--file__drop-container--drag-over`]:v,[`${f}--file-browse-btn--disabled`]:o},l);function E(t){if(!s.length)return t;const u=new Set(s);return t.reduce((b,m)=>{const{name:K,type:V=""}=m,z=new RegExp(C,"i"),[R]=K.match(z)??[];return R===void 0?b:u.has(V)||u.has(R.toLowerCase())?b.concat([m]):(m.invalidFileType=!0,b.concat([m]))},[])}function D(t){const u=[...t.target.files??[]],b=r?u:[u[0]],m=E(b);return c(t,{addedFiles:m})}function i(t){const u=[...t.dataTransfer.files],b=r?u:[u[0]],m=E(b);return c(t,{addedFiles:m})}const H=()=>{o||N.current?.click()};return a.createElement("div",{className:`${f}--file`,onDragOver:t=>{t.stopPropagation(),t.preventDefault(),!o&&(_(!0),t.dataTransfer.dropEffect="copy")},onDragLeave:t=>{t.stopPropagation(),t.preventDefault(),!o&&(_(!1),t.dataTransfer.dropEffect="move")},onDrop:t=>{t.stopPropagation(),t.preventDefault(),!o&&(_(!1),i(t))}},a.createElement("button",T({type:"button",className:w,ref:F,onKeyDown:t=>{q(t,[L,S])&&(t.preventDefault(),N.current?.click())},onClick:B([h,H])},y),g),a.createElement("label",{htmlFor:n,className:`${f}--visually-hidden`},g),a.createElement("input",{type:"file",id:n,className:`${f}--file-input`,ref:N,tabIndex:-1,disabled:o,accept:s.join(","),name:p,multiple:r,onChange:D,onClick:t=>{t.target.value=""}}))}X.propTypes={accept:e.arrayOf(e.string),className:e.string,disabled:e.bool,id:e.string,labelText:e.string.isRequired,multiple:e.bool,name:e.string,onAddFiles:e.func,onClick:e.func,pattern:e.string,role:I(e.number),tabIndex:I(e.number)};function Y({uuid:s,name:l,status:d="uploading",iconDescription:o,onDelete:g=W,invalid:r,errorSubject:p,errorBody:c,size:h,className:C,...F}){const y=$.useRef(null),[f,N]=$.useState(!1),n=k(),{current:v}=$.useRef(s||O()),_=P(`${n}--file__selected-file`,C,{[`${n}--file__selected-file--invalid`]:r,[`${n}--file__selected-file--md`]:h==="md",[`${n}--file__selected-file--sm`]:h==="sm"}),w=r?`${n}--file-filename-container-wrap-invalid`:`${n}--file-filename-container-wrap`,E=i=>i?.replace(/\s+/g,""),D=i=>(N(i.offsetWidth<i.scrollWidth),i.offsetWidth<i.scrollWidth);return $.useLayoutEffect(()=>{D(y.current)},[n,l]),a.createElement("span",T({className:_},F),f?a.createElement("div",{className:w},a.createElement(G,{label:l,align:"bottom",className:`${n}--file-filename-tooltip`},a.createElement("button",{className:`${n}--file-filename-button`,type:"button"},a.createElement(x,{ref:y,as:"p",title:l,className:`${n}--file-filename-button`,id:E(l)},l)))):a.createElement(x,{ref:y,as:"p",title:l,className:`${n}--file-filename`,id:E(l)},l),a.createElement("div",{className:`${n}--file-container-item`},a.createElement("span",{className:`${n}--file__state-container`},a.createElement(U,{name:l,iconDescription:o,status:d,invalid:r,"aria-describedby":r&&p?`${E(l)}-id-error`:void 0,onKeyDown:i=>{q(i,[L,S])&&d==="edit"&&(i.preventDefault(),g(i,{uuid:v}))},onClick:i=>{d==="edit"&&g(i,{uuid:v})}}))),r&&p&&a.createElement("div",{className:`${n}--form-requirement`,role:"alert",id:`${E(l)}-id-error`},a.createElement(x,{as:"div",className:`${n}--form-requirement__title`},p),c&&a.createElement(x,{as:"p",className:`${n}--form-requirement__supplement`},c)))}Y.propTypes={errorBody:e.string,errorSubject:e.string,iconDescription:e.string,invalid:e.bool,name:e.string,onDelete:e.func,size:e.oneOf(["sm","md","lg"]),status:e.oneOf(["uploading","edit","complete"]),uuid:e.string};export{X as F,Y as a,U as b};
