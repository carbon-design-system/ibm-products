import{a as X,x as Y,e as Z,y as ee,z as te,A as ne,b as N,i as ae,d as M,B as se,_ as S,C as oe,m as $,D as re,E as le,S as ce,P as e}from"./index-C360Eztx.js";import{r as a,e as t}from"./index-DtHxqM--.js";import{u as L}from"./useControllableState-P5wT7SAH.js";import{M as T,u as ie,a as ue}from"./useAttachedMenu-DmwntCh_.js";import{T as me}from"./Text-DKfZ87L_.js";import{C as fe,a as de}from"./bucket-2-BWELrLSK.js";var A,G,B;const D=a.forwardRef(function({children:r,className:u,disabled:l,kind:m="default",label:s,onClick:d,renderIcon:c,shortcut:y,...o},E){const[i,h]=a.useState(!1),[x,k]=a.useState(!1),{refs:b,floatingStyles:f,context:R}=X({open:i,onOpenChange:h,placement:x?"left-start":"right-start",whileElementsMounted:Z,middleware:[Y({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:K,getFloatingProps:U}=ee([te(R,{delay:100,enabled:!0,handleClose:ne({requireIntent:!1})})]),p=N(),I=a.useContext(T),v=a.useRef(null),j=ae([E,v,b.setReference]),g=!!r,_=l&&!g,V=m==="danger"&&!g;function z(){I.dispatch({type:"registerItem",payload:{ref:v,disabled:!!l}})}function P(){v.current&&h(!0)}function H(){h(!1)}function q(n){_||(g?P():(I.state.requestCloseRoot(n),d&&d(n)))}const w=a.useRef(!1),F=n=>$(n,le)||$(n,ce);function J(n){g&&$(n,re)&&(P(),n.stopPropagation()),w.current=F(n),o.onKeyDown&&o.onKeyDown(n)}function Q(n){w.current&&F(n)&&q(n),w.current=!1}const W=M(u,`${p}--menu-item`,{[`${p}--menu-item--disabled`]:_,[`${p}--menu-item--danger`]:V});a.useEffect(()=>{z()},[]);const{direction:O}=ie();return a.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||O==="rtl"?k(!0):k(!1)},[O]),a.useEffect(()=>{c&&!I.state.hasIcons&&I.dispatch({type:"enableIcons"})},[c,I.state.hasIcons,I]),a.useEffect(()=>{Object.keys(f).forEach(n=>{b.floating.current&&n!=="position"&&(b.floating.current.style[n]=f[n])})},[f,b.floating]),t.createElement(se,{context:R,order:["reference","floating"],modal:!1},t.createElement("li",S({role:"menuitem"},o,{ref:j,className:W,tabIndex:-1,"aria-disabled":_??void 0,"aria-haspopup":g??void 0,"aria-expanded":g?i:void 0,onClick:q,onKeyDown:J,onKeyUp:Q},K()),t.createElement("div",{className:`${p}--menu-item__selection-icon`},o["aria-checked"]&&(A||(A=t.createElement(oe,null)))),t.createElement("div",{className:`${p}--menu-item__icon`},c&&t.createElement(c,null)),t.createElement(me,{as:"div",className:`${p}--menu-item__label`,title:s},s),y&&!g&&t.createElement("div",{className:`${p}--menu-item__shortcut`},y),g&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${p}--menu-item__shortcut`},x?G||(G=t.createElement(fe,null)):B||(B=t.createElement(de,null))),t.createElement(ue,S({label:s,open:i,onClose:()=>{var n;H(),(n=v.current)==null||n.focus()},ref:b.setFloating},U()),r))))});D.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const pe=a.forwardRef(function({className:r,defaultSelected:u,label:l,onChange:m,selected:s,...d},c){const y=N(),o=a.useContext(T),[E,i]=L({value:s,onChange:m,defaultValue:u??!1});function h(k){i(!E)}a.useEffect(()=>{o.state.hasSelectableItems||o.dispatch({type:"enableSelectableItems"})},[o.state.hasSelectableItems,o]);const x=M(r,`${y}--menu-item-selectable--selected`);return t.createElement(D,S({},d,{ref:c,label:l,className:x,role:"menuitemcheckbox","aria-checked":E,onClick:h}))});pe.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const ge=a.forwardRef(function({children:r,className:u,label:l,...m},s){const d=N(),c=M(u,`${d}--menu-item-group`);return t.createElement("li",{className:c,role:"none",ref:s},t.createElement("ul",S({},m,{role:"group","aria-label":l}),r))});ge.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const he=C=>C.toString(),be=a.forwardRef(function({className:r,defaultSelectedItem:u,items:l,itemToString:m=he,label:s,onChange:d,selectedItem:c,...y},o){const E=N(),i=a.useContext(T),[h,x]=L({value:c,onChange:d,defaultValue:u??{}});function k(f,R){x(f)}a.useEffect(()=>{i.state.hasSelectableItems||i.dispatch({type:"enableSelectableItems"})},[i.state.hasSelectableItems,i]);const b=M(r,`${E}--menu-item-radio-group`);return t.createElement("li",{className:b,role:"none",ref:o},t.createElement("ul",S({},y,{role:"group","aria-label":s}),l.map((f,R)=>t.createElement(D,{key:R,label:m(f),role:"menuitemradio","aria-checked":f===h,onClick:K=>{k(f)}}))))});be.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Ce=a.forwardRef(function({className:r,...u},l){const m=N(),s=M(r,`${m}--menu-item-divider`);return t.createElement("li",S({},u,{className:s,role:"separator",ref:l}))});Ce.propTypes={className:e.string};export{D as M,Ce as a,ge as b,be as c,pe as d};
