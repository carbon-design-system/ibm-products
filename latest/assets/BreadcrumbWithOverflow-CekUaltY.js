import{r as c,R as r}from"./index-BwDkhjyp.js";import{P as s}from"./index-Dk74W0Oi.js";import{a as V,c as p}from"./floating-ui.dom.mjs-BB6krl5l.js";import{u as C}from"./useResizeObserver-CYrpFlRY.js";import{B as P,a as h}from"./BreadcrumbItem-9ZCFYnUq.js";import{L as j}from"./Link-nkMjvGqf.js";import{O as z,a as G}from"./index-CKiAp7gD.js";import{p as W,T as x}from"./settings-GP6q6PuD.js";import{u as J}from"./uuidv4-BQrI85uz.js";import"./props-helper-2sr7eXy7.js";import{O as S}from"./bucket-12-sA1mfcOl.js";import{T as Q}from"./TooltipTrigger-D9C1uyVx.js";import{a as U}from"./bucket-0-ChI4u8X4.js";const o=`${W.prefix}--breadcrumb-with-overflow`,A="BreadcrumbWithOverflow";let g=({breadcrumbs:t,className:M,maxVisible:b,noTrailingSlash:D,overflowAriaLabel:w,overflowTooltipAlign:F,...L})=>{const B=V(),[y,T]=c.useState(3),[$,I]=c.useState([]),v=c.useRef(null),_=c.useRef(null),E=c.useRef(J()),[O,H]=c.useState([]),K=({overflowItems:a})=>r.createElement(h,{key:`breadcrumb-overflow-${E.current}`},r.createElement(z,{align:F,"aria-label":w,iconDescription:w,renderIcon:e=>r.createElement(S,{size:32,...e}),className:`${o}__overflow-menu`,menuOptionsClass:`${o}__overflow-menu-options`},a.map((e,i)=>r.createElement(G,{key:`breadcrumb-overflow-menu-item-${E.current}-${i}`,href:e.props.href,onClick:e.props.onClick,itemText:e.props.children}))));c.useEffect(()=>{H(r.createElement("div",{className:`${o}__breadcrumb-container ${o}__breadcrumb-container--hidden`,"aria-hidden":!0,ref:_},r.createElement(P,null,r.createElement(h,{key:`${o}-hidden-overflow-${E}`},r.createElement(z,{"aria-label":w,renderIcon:a=>r.createElement(S,{size:32,...a})})),t.map(({label:a,key:e,title:i,id:u,shortTitle:l,...f})=>r.createElement(h,{key:e,...f,"data-original-id":u,title:i??a},a)))))},[t,w]),c.useEffect(()=>{if(t.length===0){I([]);return}const a=t.map(({className:u,key:l,label:f,shortTitle:m,title:d,...q},k)=>r.createElement(h,{key:l,className:k>0||y>1?p([u,`${o}__displayed-breadcrumb`]):u,title:k+1===t.length?d:null,...q},m||f)),e=y>1?1:0;let i=a.splice(e,t.length-y);i.length&&a.splice(e,0,r.createElement(K,{overflowItems:i,key:`displayed-breadcrumb-${E}-overflow`})),I(a)},[t,y]);const N=()=>{if(!v.current)return;const a=(e,i)=>i===0?e-1:i===1?1:e-i;if(b<=1)T(1);else{let e=0,i=v.current.offsetWidth;if(_.current){const u=_.current.querySelectorAll(`.${B}--breadcrumb-item`),l=[];for(let m of u){const d=window?window.getComputedStyle(u[0]):null,q=d?parseFloat(d.marginLeft||0,10)+parseFloat(d.marginRight||0,10):0;l.push(m.offsetWidth+q)}let f=l[0];for(let m=0;m<l.length-1;m++){const d=a(l.length,m);if(i>=l[d])i-=l[d],e+=1;else break}if(e<l.length-1)for(;e>0&&i<f;){e-=1;const m=a(l.length,e);i+=l[m]}}e<=1?T(1):T(b?Math.min(e,b):e)}};c.useEffect(()=>{N()},[O,b]);const R=()=>{N()};let n=t[t.length-1];return n.isCurrentPage&&(n=t[t.length-2]),C(_,R),C(v,R),r.createElement("div",{className:p(o,M,{[`${o}__with-items`]:$.length>1}),ref:v},r.createElement("div",{className:p([`${o}__space`])},O,r.createElement(P,{className:p(`${o}__breadcrumb-container`,{[`${o}__breadcrumb-container-with-items`]:$.length>1}),noTrailingSlash:D,...L},(n==null?void 0:n.href)&&((n==null?void 0:n.label)||(n==null?void 0:n.title))&&r.createElement(h,{className:p(`${o}__breadcrumb-back`)},r.createElement(j,{href:n.href,renderIcon:()=>r.createElement(x,{align:"right",label:n.title||n.label,className:`${o}__back__button ${B}--icon-tooltip`},r.createElement(Q,null,r.createElement(U,{size:16})))})),$)))};g=W.checkComponentEnabled(g,A);g.propTypes={breadcrumbs:s.arrayOf(s.shape({href:s.string,isCurrentPage:s.bool,key:s.string.isRequired,label:s.node,shortTitle:s.string,title:s.string.isRequired.if(({label:t})=>typeof t!="string")})),className:s.string,maxVisible:s.number,noTrailingSlash:s.bool,overflowAriaLabel:s.string.isRequired.if(({breadcrumbs:t})=>t.length>1),overflowTooltipAlign:x.propTypes.align};g.displayName=A;g.__docgenInfo={description:"The BreadcrumbWithOverflow is used internally by the PageHeader to wrap BreadcrumbItems.",methods:[],displayName:"BreadcrumbWithOverflow",props:{breadcrumbs:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{href:{name:"string",description:"Optional string representing the link location for the BreadcrumbItem",required:!1},isCurrentPage:{name:"bool",description:"Provide if this breadcrumb item represents the current page",required:!1},key:{name:"string",description:"Key required to render array efficiently",required:!0},label:{name:"node",description:"Pass in content that will be inside of the BreadcrumbItem",required:!1},shortTitle:{name:"string",description:"An optional title label for extra long breadcrumb",required:!1},title:{name:"string",description:"A string based alternative to the children, required only if children is not of type string",required:!0}}}},required:!1},className:{description:"className",type:{name:"string"},required:!1},maxVisible:{description:"maxVisible: maximum visible breadcrumb-items before overflow is used (values less than 1 are treated as 1)",type:{name:"number"},required:!1},noTrailingSlash:{description:"noTrailing slash - same as for Carbon",type:{name:"bool"},required:!1},overflowAriaLabel:{description:"overflowAriaLabel label for open close button overflow used for breadcrumb items that do not fit.",type:{name:"string"},required:!0},overflowTooltipAlign:{description:"overflowTooltipAlign: align tooltip position",type:{name:"custom",raw:"Tooltip.propTypes.align"},required:!1}}};export{g as B};
