{"version":3,"file":"index-CqBphhZJ.js","sources":["../../../../node_modules/@carbon/react/es/components/MenuButton/index.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2016, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { extends as _extends } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport React, { forwardRef, useRef, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { ChevronDown } from '@carbon/icons-react';\nimport Button from '../Button/Button.js';\nimport '../Button/Button.Skeleton.js';\nimport { Menu } from '../Menu/Menu.js';\nimport '../Menu/MenuItem.js';\nimport { useAttachedMenu } from '../../internal/useAttachedMenu.js';\nimport { useId } from '../../internal/useId.js';\nimport { usePrefix } from '../../internal/usePrefix.js';\nimport { flip, size, useFloating, autoUpdate } from '@floating-ui/react';\nimport { useFeatureFlag } from '../FeatureFlags/index.js';\nimport { mergeRefs } from '../../tools/mergeRefs.js';\n\nconst validButtonKinds = ['primary', 'tertiary', 'ghost'];\nconst defaultButtonKind = 'primary';\n// eslint-disable-next-line react/display-name -- https://github.com/carbon-design-system/carbon/issues/20452\nconst MenuButton = /*#__PURE__*/forwardRef(({\n  children,\n  className,\n  disabled,\n  kind = defaultButtonKind,\n  label,\n  menuBackgroundToken = 'layer',\n  menuBorder = false,\n  size: size$1 = 'lg',\n  menuAlignment = 'bottom',\n  tabIndex = 0,\n  menuTarget,\n  ...rest\n}, forwardRef) => {\n  // feature flag utilized to separate out only the dynamic styles from @floating-ui\n  // flag is turned on when collision detection (ie. flip, hide) logic is not desired\n  const enableOnlyFloatingStyles = useFeatureFlag('enable-v12-dynamic-floating-styles');\n  const id = useId('MenuButton');\n  const prefix = usePrefix();\n  const triggerRef = useRef(null);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- https://github.com/carbon-design-system/carbon/issues/20452\n  let middlewares = [];\n  if (!enableOnlyFloatingStyles) {\n    middlewares = [flip({\n      crossAxis: false\n    })];\n  }\n  if (menuAlignment === 'bottom' || menuAlignment === 'top') {\n    middlewares.push(size({\n      apply({\n        rects,\n        elements\n      }) {\n        Object.assign(elements.floating.style, {\n          width: `${rects.reference.width}px`\n        });\n      }\n    }));\n  }\n  const {\n    refs,\n    floatingStyles,\n    placement,\n    middlewareData\n  } = useFloating({\n    placement: menuAlignment,\n    // The floating element is positioned relative to its nearest\n    // containing block (usually the viewport). It will in many cases also\n    // “break” the floating element out of a clipping ancestor.\n    // https://floating-ui.com/docs/misc#clipping\n    strategy: 'fixed',\n    // Submenus are using a fixed position to break out of the parent menu's\n    // box avoiding clipping while allowing for vertical scroll. When an\n    // element is using transform it establishes a new containing block\n    // block for all of its descendants. Therefore, its padding box will be\n    // used for fixed-positioned descendants. This would cause the submenu\n    // to be clipped by its parent menu.\n    // Reference: https://www.w3.org/TR/2019/CR-css-transforms-1-20190214/#current-transformation-matrix-computation\n    // Reference: https://github.com/carbon-design-system/carbon/pull/18153#issuecomment-2498548835\n    transform: false,\n    // Middleware order matters, arrow should be last\n    middleware: middlewares,\n    whileElementsMounted: autoUpdate\n  });\n  const ref = mergeRefs(forwardRef, triggerRef);\n  const {\n    open,\n    handleClick: hookOnClick,\n    handleMousedown,\n    handleClose\n  } = useAttachedMenu(triggerRef);\n  useLayoutEffect(() => {\n    Object.keys(floatingStyles).forEach(style => {\n      if (refs.floating.current) {\n        let value = floatingStyles[style];\n        if (['top', 'right', 'bottom', 'left'].includes(style) && Number(value)) {\n          value += 'px';\n        }\n        refs.floating.current.style[style] = value;\n      }\n    });\n  }, [floatingStyles, refs.floating, middlewareData, placement, open]);\n  function handleClick() {\n    if (triggerRef.current) {\n      hookOnClick();\n    }\n  }\n  const containerClasses = cx(`${prefix}--menu-button__container`, className);\n  const triggerClasses = cx(`${prefix}--menu-button__trigger`, {\n    [`${prefix}--menu-button__trigger--open`]: open\n  });\n  const menuClasses = cx(`${prefix}--menu-button__${menuAlignment}`);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, rest, {\n    ref: ref,\n    \"aria-owns\": open ? id : undefined,\n    className: containerClasses\n  }), /*#__PURE__*/React.createElement(Button, {\n    ref: refs.setReference,\n    className: triggerClasses,\n    size: size$1,\n    tabIndex: tabIndex,\n    kind: kind,\n    renderIcon: ChevronDown,\n    disabled: disabled,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": open,\n    onClick: handleClick,\n    onMouseDown: handleMousedown,\n    \"aria-controls\": open ? id : undefined\n  }, label), /*#__PURE__*/React.createElement(Menu, {\n    containerRef: triggerRef,\n    menuAlignment: menuAlignment,\n    className: menuClasses,\n    ref: refs.setFloating,\n    id: id,\n    legacyAutoalign: false,\n    label: label,\n    size: size$1,\n    open: open,\n    onClose: handleClose,\n    target: menuTarget,\n    backgroundToken: menuBackgroundToken,\n    border: menuBorder\n  }, children));\n});\nMenuButton.propTypes = {\n  /**\n   * A collection of MenuItems to be rendered as actions for this MenuButton.\n   */\n  children: PropTypes.node.isRequired,\n  /**\n   * Additional CSS class names.\n   */\n  className: PropTypes.string,\n  /**\n   * Specify whether the MenuButton should be disabled, or not.\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Specify the type of button to be used as the base for the trigger button.\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- https://github.com/carbon-design-system/carbon/issues/20452\n  // @ts-ignore-next-line -- avoid spurious (?) TS2322 error\n  kind: PropTypes.oneOf(validButtonKinds),\n  /**\n   * Provide the label to be rendered on the trigger button.\n   */\n  label: PropTypes.string.isRequired,\n  /**\n   * Experimental property. Specify how the menu should align with the button element\n   */\n  menuAlignment: PropTypes.oneOf(['top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end']),\n  /**\n   * Specify the size of the button and menu.\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- https://github.com/carbon-design-system/carbon/issues/20452\n  // @ts-ignore-next-line -- avoid spurious (?) TS2322 error\n  size: PropTypes.oneOf(['xs', 'sm', 'md', 'lg']),\n  /**\n   * Specify the tabIndex of the button.\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- https://github.com/carbon-design-system/carbon/issues/20452\n  // @ts-ignore-next-line -- avoid spurious (?) TS2322 error\n  tabIndex: PropTypes.number,\n  /**\n   * Specify the background token to use for the menu. Default is 'layer'.\n   */\n  menuBackgroundToken: PropTypes.oneOf(['layer', 'background']),\n  /**\n   * Specify whether a border should be rendered on the menu\n   */\n  menuBorder: PropTypes.bool,\n  /**\n   * Specify a DOM node where the Menu should be rendered in. Defaults to document.body.\n   */\n  menuTarget: PropTypes.instanceOf(typeof Element !== 'undefined' ? Element : Object)\n};\n\nexport { MenuButton };\n"],"names":["validButtonKinds","defaultButtonKind","MenuButton","children","className","disabled","kind","label","menuBackgroundToken","menuBorder","size$1","menuAlignment","tabIndex","menuTarget","rest","forwardRef","enableOnlyFloatingStyles","useFeatureFlag","id","useId","prefix","usePrefix","triggerRef","useRef","middlewares","flip","size","rects","elements","refs","floatingStyles","placement","middlewareData","useFloating","autoUpdate","ref","mergeRefs","open","hookOnClick","handleMousedown","handleClose","useAttachedMenu","useLayoutEffect","style","value","handleClick","containerClasses","cx","triggerClasses","menuClasses","_extends","React","Button","ChevronDown","Menu","PropTypes"],"mappings":"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","x_google_ignoreList":[0]}