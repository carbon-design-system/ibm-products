import{e,r as n}from"./index-DtHxqM--.js";import"./index-4poXP75K.js";import{p as H,B}from"./settings-Bzj6EGPa.js";import{F as Ee}from"./Form-ChW2GdEk.js";import{F as j}from"./FormGroup-TrQxkASF.js";import{I as he}from"./InlineLoading-WqBhFG3p.js";import{R as M}from"./RadioButton-CwmiMLVZ.js";import{R as we}from"./RadioButtonGroup-1xQBolgx.js";import{T as U}from"./TextInput-CBue0XF4.js";import{T as Te}from"./Toggle-DA2_CY_V.js";import{a as W}from"./index-B-lxVbXh.js";import{w as _}from"./wait-CTNFjQS8.js";import{j as t}from"./index-DgLvjnYm.js";import{useMDXComponents as ke}from"./index-CseD6FCQ.js";import"./index-BeK2u_YJ.js";import{A as F}from"./APIKeyModal-D-VIWyWU.js";import{s as k}from"./codePreviewer-Rfvc6IlN.js";import{a as R,C as Ke}from"./index-Bi6vE2wr.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./events-CdfZZS3f.js";import"./bucket-6-DLW23Ky6.js";import"./mergeRefs-91-mP8KM.js";import"./index-CVEmjZFv.js";import"./bucket-18-338UTbBD.js";import"./utils--12iVJsW.js";import"./Text-Cjos7Soh.js";import"./bucket-19-D8xKEiK4.js";import"./useNormalizedInputProps-OpqrZ34r.js";import"./FormContext-C4Nuixum.js";import"./useControllableState-P5wT7SAH.js";import"./v4-CtRu48qb.js";import"./index-CiYgQLeJ.js";import"./preview-Cb0nZa6U.js";import"./iframe-Ck3ixXeo.js";import"./DocsRenderer-CFRXHY34-CMn4s62p.js";import"./client-CZTHzaKS.js";import"./ComposedModal-CpTP8HrD.js";import"./index-BqG52EEo.js";import"./LayerContext-B9CO-6mR.js";import"./clamp--00YEiB8.js";import"./ButtonSet-A5I0_tvd.js";import"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import"./wrapFocus-jEwItT4M.js";import"./usePortalTarget-CqHjfDP8.js";import"./feature-flags-eU_vhwbI.js";import"./index-CbYM9rgX.js";import"./props-helper-57MyEezq.js";import"./devtools-B69Kc3qg.js";import"./uuidv4-BN2rGLQG.js";import"./useFocus-NuZvsjqA.js";import"./usePreviousValue-CuNkkQo9.js";import"./bucket-9-BIeYAPRu.js";import"./AccordionItem-BSN9nR-N.js";import"./SkeletonText-B8DfBI4g.js";import"./AspectRatio-Dkv90gTO.js";import"./BreadcrumbItem-Cq3CDMAV.js";import"./Link-PvdHJXrE.js";import"./bucket-12-BL1rFmTg.js";import"./Checkbox-BrqLuRFj.js";import"./index-CK_d43HR.js";import"./inheritsLoose-D3Az7yH5.js";import"./MultiSelect-Ul3YZ_aT.js";import"./useAttachedMenu-DN6VGMKt.js";import"./DataTable-CExWMnEp.js";import"./TableRow-D8ak2P_I.js";import"./wrapComponent-CT2vJnKR.js";import"./bucket-0-C0XwVn_F.js";import"./bucket-1-C6RjXMcc.js";import"./TableToolbar-CjOrY1GR.js";import"./index-2cTe6Fdx.js";import"./TableSelectRow-CBTW6LCg.js";import"./OverflowMenuItem-B6tFdKKp.js";import"./TableToolbarSearch-M4JrmKr2.js";import"./Search-Dh4hBxPL.js";import"./bucket-15-B3K3_0FD.js";import"./index-BqgEKY31.js";import"./useOutsideClick-BtJZ_vFp.js";import"./DatePicker-hGdxol6v.js";import"./Dropdown-CEnPVNAx.js";import"./FileUploaderItem-B3hs5cWR.js";import"./FormLabel-VlcU0m_s.js";import"./Grid-1Cbz-cjc.js";import"./Row-CPf5Q4Rm.js";import"./Column-Dx-fSbMQ.js";import"./Icon.Skeleton-BGurz0gM.js";import"./ListItem-BNaOEPt2.js";import"./MenuItem-C71eIvEh.js";import"./bucket-2-D37RcJvy.js";import"./index-B2uEURRZ.js";import"./Notification-kbftZmQO.js";import"./NumberInput-CY9fJUbq.js";import"./documentLang-E105Y72C.js";import"./bucket-16-B0VO6oot.js";import"./index-BHMIdRzp.js";import"./useMatchMedia-DHmWTWsL.js";import"./DefinitionTooltip-DCyVnqQ8.js";import"./Tag-B0aqwsPh.js";import"./OperationalTag-cKIIvDqH.js";import"./Pagination-o1Hii_G-.js";import"./Select-bfhl0XC0.js";import"./SelectItem-DWCkc9vO.js";import"./ProgressIndicator-C5SqSulB.js";import"./TileGroup-Czffaopc.js";import"./bucket-14-DPOFM6cY.js";import"./TimePickerSelect-DmO9b8Gb.js";import"./index-CjE2UT1D.js";import"./StructuredList-B9E0jpvP.js";import"./Tabs-B8I-mZDA.js";import"./useNoInteractiveChildren-Bz6WKoA6.js";import"./DismissibleTag-KethSBWI.js";import"./SelectableTag-DUpXZBgF.js";import"./TextArea-BNEwO0sM.js";import"./Tile-DM3YNXIm.js";import"./Content-Bfu2_2_V.js";import"./HeaderName-sCUWorPj.js";import"./Link-UZfSSxF0.js";import"./HeaderContainer-o0qECZSC.js";import"./HeaderGlobalBar-Bwqs3YXh.js";import"./SideNavLink-ChXKV0EH.js";import"./bucket-11-CU6-yNIl.js";import"./SideNavLinkText-BxQmQhIB.js";import"./HeaderPanel-Cdi_jdSB.js";import"./SideNavMenuItem-BZ1wbWEA.js";import"./UnorderedList-jCs3W9AF.js";import"./bucket-13-rR59vOQ6.js";import"./bucket-5-DZgMrkHT.js";import"./index-BQudZueS.js";import"./index-DFb9d7Yc.js";import"./bucket-7-Cjlx_XCo.js";import"./bucket-10-CJixWMOF.js";import"./bucket-17-BL2goobU.js";import"./index-Dytf1aFS.js";import"./index-DrFu-skq.js";const Ge=".c4p--apikey-modal .cds--radio-button-wrapper{margin-block-end:.25rem}.c4p--apikey-modal__permissions.cds--fieldset{margin-block:1rem 0}.c4p--apikey-modal__resource-toggle.cds--fieldset{margin-block:0 1rem}.c4p--apikey-modal__resource-name.cds--fieldset{margin-block:0}.c4p--apikey-modal__button-loading.cds--btn--primary{background:var(--cds-link-secondary, #0043ce)}",x=[`function wait(ms) {
      return new Promise((resolve) => setTimeout(resolve, ms));
    }`],Be=["import {InlineLoading} from '@carbon/react';"];function V(s){const o={a:"a",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...ke(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(o.h1,{id:"apikeymodal",children:"APIKeyModal"}),`
`,t.jsxs(o.p,{children:[t.jsx(o.a,{href:"https://pages.github.ibm.com/carbon/ibm-products/patterns/generate-an-api-key/usage/",rel:"nofollow",children:"Usage guidelines"})," | ",t.jsx(o.a,{href:"https://www.carbondesignsystem.com/components/modal/usage",rel:"nofollow",children:"Carbon modal usage guidelines"})," | ",t.jsx(o.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-modal",rel:"nofollow",children:"Carbon modal documentation"})]}),`
`,t.jsx(o.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,t.jsxs(o.ul,{children:[`
`,t.jsx(o.li,{children:t.jsx(o.a,{href:"#overview",children:"Overview"})}),`
`,t.jsx(o.li,{children:t.jsx(o.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,t.jsx(o.h2,{id:"overview",children:"Overview"}),`
`,t.jsx(o.p,{children:"The API key modal is an implementation of the generating an API key pattern."}),`
`,t.jsx(o.h2,{id:"generate",children:"Generate"}),`
`,t.jsx(R,{of:A,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:A,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"generate-with-error",children:"Generate With Error"}),`
`,t.jsx(R,{of:S,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:S,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"instant-generate",children:"Instant Generate"}),`
`,t.jsx(R,{of:C,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:C,customImports:Be,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"custom-generate",children:"Custom Generate"}),`
`,t.jsx(R,{of:f,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:f,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"edit",children:"Edit"}),`
`,t.jsx(R,{of:P,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:P,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"edit-with-error",children:"Edit With Error"}),`
`,t.jsx(R,{of:I,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:I,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"custom-edit",children:"Custom Edit"}),`
`,t.jsx(R,{of:g,additionalActions:[{title:"Open in Stackblitz",onClick:()=>k({story:g,customFunctionDefs:x,styles:v.parameters.styles})}]}),`
`,t.jsx(o.h2,{id:"component-api",children:"Component API"}),`
`,t.jsx(Ke,{})]})}function Fe(s={}){const{wrapper:o}={...ke(),...s.components};return o?t.jsx(o,{...s,children:t.jsx(V,{...s})}):V(s)}const v={title:"Patterns/Prebuilt patterns/APIKeyModal",component:F,tags:["autodocs"],parameters:{styles:Ge,docs:{page:Fe}},argTypes:{generateSuccessBody:{control:{type:"select",labels:{0:"short body",1:"long body"}},options:[0,1],mapping:{0:e.createElement("p",null,"API key successfully created."),1:e.createElement("p",null,"This is your unique API key and is non-recoverable. If you lose this API key, you will have to reset it.")}},portalTarget:{control:!1}}},E={apiKey:"123-456-789",apiKeyLabel:"API key",showAPIKeyLabel:"Show key",hideAPIKeyLabel:"Hide key",copyButtonText:"Copy",copyIconDescription:"Copy",hasAPIKeyVisibilityToggle:!0,helperText:"This is your unique API key and is non-recoverable. If you lose this API key, you will have to reset it.",downloadLinkText:"Download as JSON",downloadLinkLabel:"Download API Key in Java Script File format",hasDownloadLink:!0,downloadFileName:"apikey",downloadFileType:"json",open:!0,closeButtonText:"Close",generateSuccessMessage:"API key successfully created",editSuccessMessage:"API key successfully saved",loadingText:"Generating...",modalLabel:"An example of Generate API key"},Ne=(s,o)=>{const[a,l]=n.useState(o.viewMode!=="docs"),[y,c]=n.useState(!1),u=n.useRef(void 0),d=`${H.prefix}--apikey-modal`,p=async()=>{c(!0),await _(1e3),l(!0),c(!1)};return e.createElement("main",null,e.createElement("style",null,`.${d} { opacity: 0; }`,";"),e.createElement(F,{...s,onClose:()=>l(!1),open:a,launcherButtonRef:u}),y?e.createElement(B,{renderIcon:he,className:`${d}__button-loading`},"Generating..."):e.createElement(B,{onClick:p,ref:u},"Generate"))},Re=(s,o)=>{const{error:a}=s,[l,y]=n.useState(o.viewMode!=="docs"),[c,u]=n.useState(""),[d,p]=n.useState(!1),[b,w]=n.useState(!1),h=n.useRef(void 0),r=`${H.prefix}--apikey-modal`,T=async i=>{W(`submitted ${i}`)(),w(!1),p(!0),await _(1e3),a?w(!0):u("111-111-111-111"),p(!1)},K=()=>{y(!1),u("")};return e.createElement("main",null,e.createElement("style",null,`.${r} { opacity: 0; }`,";"),e.createElement(F,{...s,apiKey:c,loading:d,onClose:K,onRequestGenerate:T,open:l,error:b,launcherButtonRef:h}),e.createElement(B,{onClick:()=>y(!l),ref:h},"Generate API key"))},xe=(s,o)=>{const{editing:a}=s,{savedName:l,savedPermissions:y,savedAllResources:c,savedResource:u,...d}=s,[p,b]=n.useState(o.viewMode!=="docs"),[w,h]=n.useState(""),[r,T]=n.useState(!1),K=n.useRef(void 0),i=`${H.prefix}--apikey-modal`,[N,q]=n.useState(l),[D,z]=n.useState(y),[G,X]=n.useState(c),[O,$]=n.useState(u),[J,Ae]=n.useState(!1),L=async()=>{W("submitted")(),T(!0),await _(1e3),a?Ae(!0):h("111-111-111-111"),T(!1)},Se=()=>{b(!1),a||(h(""),q(""),z(""),X(!1),$(""))},Ce=m=>{m.preventDefault(),L()},Pe=()=>{G&&O&&$(""),X(m=>!m)},Ie=[{valid:!!(N&&D),title:a?"Edit API key":"Generate API key",content:e.createElement(e.Fragment,null,e.createElement("p",{className:`${i}__body`},"(Optional description text) To connect securely to [product name], your application or tool needs an API key with permission to access resources such as [product resource name]."),e.createElement(U,{value:N,onChange:m=>q(m.target.value),labelText:"Name your application",placeholder:"Application name",id:"name-input","data-modal-primary-focus":!0}),e.createElement(j,{legendText:"What do you want your application to be able to do",className:`${i}__permissions`},e.createElement(we,{onChange:m=>z(m),valueSelected:D,name:"permission",orientation:"vertical","aria-label":"permission"},e.createElement(M,{value:"Read and write",labelText:"Read and write"}),e.createElement(M,{value:"Read only",labelText:"Read only"}),e.createElement(M,{value:"Write only",labelText:"Write only"}))))},{valid:G||!G&&!!O,title:"Choose which resources the API will have access to",content:e.createElement(e.Fragment,null,e.createElement(Ee,{onSubmit:Ce},e.createElement(j,{legendText:"What do you want your application to be able to do",className:`${i}__resource-toggle`},e.createElement(Te,{onClick:Pe,labelText:"All resources",toggled:G,disabled:r,id:"toggle1",autoFocus:!0})),e.createElement(j,{legendText:"What do you want your application to be able to do",className:`${i}__resource-name`},e.createElement(U,{value:O,onChange:m=>$(m.target.value),labelText:"Which resource?",placeholder:"Resources name",disabled:r||G,id:"resource-input"}))),r&&e.createElement(he,{description:r?"Saving...":"Generating..."}),J&&e.createElement("div",{className:`${i}__messaging`},"Edited successfully, API key successfully saved."))}];return e.createElement("main",null,e.createElement("style",null,`.${i} { opacity: 0; }`,";"),e.createElement(F,{...d,apiKey:w,loading:r,onClose:Se,onRequestEdit:L,onRequestGenerate:L,open:p,customSteps:Ie,nameRequired:!1,editSuccess:J,launcherButtonRef:K}),e.createElement(B,{onClick:()=>b(!p),ref:K},a?"Edit API key":"Generate API key"))},ve=(s,o)=>{const{error:a,apiKeyName:l}=s,[y,c]=n.useState(o.viewMode!=="docs"),[u,d]=n.useState(!1),[p,b]=n.useState(!1),[w,h]=n.useState(!1),r=n.useRef(void 0),T=`${H.prefix}--apikey-modal`,K=async()=>{W(`submitted ${l}`)(),b(!1),d(!0),await _(1e3),a?b(!0):h(!0),d(!1)},i=()=>{c(!1)},N=()=>{c(!0)};return e.createElement("main",null,e.createElement("style",null,`.${T} { opacity: 0; }`,";"),e.createElement(F,{...s,loading:u,onClose:i,onRequestEdit:K,open:y,error:p,editSuccess:w,launcherButtonRef:r}),e.createElement(B,{onClick:N,ref:r},"Edit API key"))},A=Re.bind({});A.args={...E,generateButtonText:"Generate API key",generateTitle:"Generate an API key",generateSuccessBody:1,body:"(Optional description text) To connect securely to [product name], your application or tool needs an API key with permission to access resources such as [product resource name].",nameHelperText:"Providing the application name will help you identify your API key later.",nameLabel:"Name your application",namePlaceholder:"Application name",nameRequired:!0};const S=Re.bind({});S.args={...E,hasAPIKeyVisibilityToggle:!0,generateButtonText:"Generate API key",generateTitle:"Generate an API key",body:"(Optional description text) To connect securely to [product name], your application or tool needs an API key with permission to access resources such as [product resource name].",nameHelperText:"Providing the application name will help you identify your API key later.",nameLabel:"Name your application",namePlaceholder:"Application name",nameRequired:!0,error:!0,errorText:"Failed to create API key"};const C=Ne.bind({});C.args={...E,apiKeyLabel:"Unique API Key",generateTitle:"Generate an API key"};const f=xe.bind({});f.args={...E,generateButtonText:"Generate",nextStepButtonText:"Next",previousStepButtonText:"Previous",downloadFileName:"apikey",savedName:"",savedAllResources:!1,savedResource:"",savedPermissions:"",generateTitle:"Generate an API key"};f.parameters={docs:{source:{code:"Sorry, this feature is not currently available for this story"}}};const P=ve.bind({});P.args={...E,editButtonText:"Save API key",generateTitle:"Save an API key",body:"(Optional description text) To connect securely to [product name], your application or tool needs an API key with permission to access resources such as [product resource name].",nameHelperText:"Providing the application name will help you identify your API key later.",nameLabel:"Name your application",namePlaceholder:"Application name",nameRequired:!0,editing:!0,apiKey:"",loadingText:"Saving...",apiKeyName:"test_key_1"};const I=ve.bind({});I.args={...E,editButtonText:"Save API key",generateTitle:"Save an API key",body:"(Optional description text) To connect securely to [product name], your application or tool needs an API key with permission to access resources such as [product resource name].",nameHelperText:"Providing the application name will help you identify your API key later.",nameLabel:"Name your application",namePlaceholder:"Application name",nameRequired:!0,editing:!0,apiKey:"",loadingText:"Saving...",generateSuccessBody:"API Key saved.",apiKeyName:"test_key_1",error:!0,errorText:"Failed to edit API key"};const g=xe.bind({});g.args={...E,generateButtonText:"Generate",nextStepButtonText:"Next",previousStepButtonText:"Previous",downloadFileName:"apikey",savedName:"test_key_1",savedAllResources:!1,savedResource:"resource_1",savedPermissions:"Read only",editing:!0,editButtonText:"Save API key",generateTitle:"Save an API key"};g.parameters={docs:{source:{code:"Sorry, this feature is not currently available for this story"}}};var Q,Y,Z;A.parameters={...A.parameters,docs:{...(Q=A.parameters)==null?void 0:Q.docs,source:{originalSource:`(args, context) => {
  const {
    error
  } = args;
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [apiKey, setApiKey] = useState('');
  const [loading, setLoading] = useState(false);
  const [fetchError, setFetchError] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;

  // eslint-disable-next-line
  const submitHandler = async apiKeyName => {
    action(\`submitted \${apiKeyName}\`)();
    setFetchError(false);
    setLoading(true);
    await wait(1000);
    if (error) {
      setFetchError(true);
    } else {
      setApiKey('111-111-111-111');
    }
    setLoading(false);
  };
  const onCloseHandler = () => {
    setOpen(false);
    setApiKey('');
  };
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...args} apiKey={apiKey} loading={loading} onClose={onCloseHandler} onRequestGenerate={submitHandler} open={open} error={fetchError} launcherButtonRef={buttonRef} />
      <Button onClick={() => setOpen(!open)} ref={buttonRef}>
        Generate API key
      </Button>
    </main>;
}`,...(Z=(Y=A.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,te,oe;S.parameters={...S.parameters,docs:{...(ee=S.parameters)==null?void 0:ee.docs,source:{originalSource:`(args, context) => {
  const {
    error
  } = args;
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [apiKey, setApiKey] = useState('');
  const [loading, setLoading] = useState(false);
  const [fetchError, setFetchError] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;

  // eslint-disable-next-line
  const submitHandler = async apiKeyName => {
    action(\`submitted \${apiKeyName}\`)();
    setFetchError(false);
    setLoading(true);
    await wait(1000);
    if (error) {
      setFetchError(true);
    } else {
      setApiKey('111-111-111-111');
    }
    setLoading(false);
  };
  const onCloseHandler = () => {
    setOpen(false);
    setApiKey('');
  };
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...args} apiKey={apiKey} loading={loading} onClose={onCloseHandler} onRequestGenerate={submitHandler} open={open} error={fetchError} launcherButtonRef={buttonRef} />
      <Button onClick={() => setOpen(!open)} ref={buttonRef}>
        Generate API key
      </Button>
    </main>;
}`,...(oe=(te=S.parameters)==null?void 0:te.docs)==null?void 0:oe.source}}};var ne,se,ae;C.parameters={...C.parameters,docs:{...(ne=C.parameters)==null?void 0:ne.docs,source:{originalSource:`(args, context) => {
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [loading, setLoading] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;
  const generateKey = async () => {
    setLoading(true);
    await wait(1000);
    setOpen(true);
    setLoading(false);
  };
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...args} onClose={() => setOpen(false)} open={open} launcherButtonRef={buttonRef} />
      {loading ? <Button renderIcon={InlineLoading} className={\`\${blockClass}__button-loading\`}>
          Generating...
        </Button> : <Button onClick={generateKey} ref={buttonRef}>
          Generate
        </Button>}
    </main>;
}`,...(ae=(se=C.parameters)==null?void 0:se.docs)==null?void 0:ae.source}}};var re,ie,le;f.parameters={...f.parameters,docs:{...(re=f.parameters)==null?void 0:re.docs,source:{originalSource:`(args, context) => {
  const {
    editing
  } = args;
  const {
    savedName,
    savedPermissions,
    savedAllResources,
    savedResource,
    ...finalArgs
  } = args;
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [apiKey, setApiKey] = useState('');
  const [loading, setLoading] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;

  // multi step options
  const [name, setName] = useState(savedName);
  const [permissions, setPermissions] = useState(savedPermissions);
  const [allResources, setAllResources] = useState(savedAllResources);
  const [resource, setResource] = useState(savedResource);
  const [editSuccess, setEditSuccess] = useState(false);

  // eslint-disable-next-line
  const submitHandler = async () => {
    action('submitted')();
    setLoading(true);
    await wait(1000);
    if (editing) {
      setEditSuccess(true);
    } else {
      setApiKey('111-111-111-111');
    }
    setLoading(false);
  };
  const onCloseHandler = () => {
    setOpen(false);
    if (!editing) {
      setApiKey('');
      setName('');
      setPermissions('');
      setAllResources(false);
      setResource('');
    }
  };
  const formHandler = evt => {
    evt.preventDefault();
    submitHandler();
  };
  const allResourcesHandler = () => {
    if (allResources && resource) {
      setResource('');
    }
    setAllResources(prev => !prev);
  };
  const steps = [{
    valid: Boolean(name && permissions),
    title: editing ? 'Edit API key' : 'Generate API key',
    content: <>
          <p className={\`\${blockClass}__body\`}>
            (Optional description text) To connect securely to [product name],
            your application or tool needs an API key with permission to access
            resources such as [product resource name].
          </p>
          <TextInput value={name} onChange={e => setName(e.target.value)} labelText="Name your application" placeholder="Application name" id="name-input" data-modal-primary-focus />
          <FormGroup legendText="What do you want your application to be able to do" className={\`\${blockClass}__permissions\`}>
            <RadioButtonGroup onChange={opt => setPermissions(opt)} valueSelected={permissions} name="permission" orientation="vertical" aria-label="permission">
              <RadioButton value="Read and write" labelText="Read and write" />
              <RadioButton value="Read only" labelText="Read only" />
              <RadioButton value="Write only" labelText="Write only" />
            </RadioButtonGroup>
          </FormGroup>
        </>
  }, {
    valid: allResources || !allResources && !!resource,
    title: 'Choose which resources the API will have access to',
    content: <>
          <Form onSubmit={formHandler}>
            <FormGroup legendText="What do you want your application to be able to do" className={\`\${blockClass}__resource-toggle\`}>
              <Toggle onClick={allResourcesHandler} labelText="All resources" toggled={allResources} disabled={loading} id="toggle1"
          // eslint-disable-next-line jsx-a11y/no-autofocus
          autoFocus />
            </FormGroup>
            <FormGroup legendText="What do you want your application to be able to do" className={\`\${blockClass}__resource-name\`}>
              <TextInput value={resource} onChange={e => setResource(e.target.value)} labelText="Which resource?" placeholder="Resources name" disabled={loading || allResources} id="resource-input" />
            </FormGroup>
          </Form>
          {loading && <InlineLoading description={loading ? 'Saving...' : 'Generating...'} />}
          {editSuccess && <div className={\`\${blockClass}__messaging\`}>
              Edited successfully, API key successfully saved.
            </div>}
        </>
  }];
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...finalArgs} apiKey={apiKey} loading={loading} onClose={onCloseHandler} onRequestEdit={submitHandler} onRequestGenerate={submitHandler} open={open} customSteps={steps} nameRequired={false} editSuccess={editSuccess} launcherButtonRef={buttonRef} />
      <Button onClick={() => setOpen(!open)} ref={buttonRef}>
        {editing ? 'Edit API key' : 'Generate API key'}
      </Button>
    </main>;
}`,...(le=(ie=f.parameters)==null?void 0:ie.docs)==null?void 0:le.source}}};var ce,ue,de;P.parameters={...P.parameters,docs:{...(ce=P.parameters)==null?void 0:ce.docs,source:{originalSource:`(args, context) => {
  const {
    error,
    apiKeyName
  } = args;
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [loading, setLoading] = useState(false);
  const [fetchError, setFetchError] = useState(false);
  const [fetchSuccess, setFetchSuccess] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;
  const submitHandler = async () => {
    action(\`submitted \${apiKeyName}\`)();
    setFetchError(false);
    setLoading(true);
    await wait(1000);
    if (error) {
      setFetchError(true);
    } else {
      setFetchSuccess(true);
    }
    setLoading(false);
  };
  const onCloseHandler = () => {
    setOpen(false);
  };
  const onOpenHandler = () => {
    setOpen(true);
  };
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...args} loading={loading} onClose={onCloseHandler} onRequestEdit={submitHandler} open={open} error={fetchError} editSuccess={fetchSuccess} launcherButtonRef={buttonRef} />
      <Button onClick={onOpenHandler} ref={buttonRef}>
        Edit API key
      </Button>
    </main>;
}`,...(de=(ue=P.parameters)==null?void 0:ue.docs)==null?void 0:de.source}}};var pe,me,ye;I.parameters={...I.parameters,docs:{...(pe=I.parameters)==null?void 0:pe.docs,source:{originalSource:`(args, context) => {
  const {
    error,
    apiKeyName
  } = args;
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [loading, setLoading] = useState(false);
  const [fetchError, setFetchError] = useState(false);
  const [fetchSuccess, setFetchSuccess] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;
  const submitHandler = async () => {
    action(\`submitted \${apiKeyName}\`)();
    setFetchError(false);
    setLoading(true);
    await wait(1000);
    if (error) {
      setFetchError(true);
    } else {
      setFetchSuccess(true);
    }
    setLoading(false);
  };
  const onCloseHandler = () => {
    setOpen(false);
  };
  const onOpenHandler = () => {
    setOpen(true);
  };
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...args} loading={loading} onClose={onCloseHandler} onRequestEdit={submitHandler} open={open} error={fetchError} editSuccess={fetchSuccess} launcherButtonRef={buttonRef} />
      <Button onClick={onOpenHandler} ref={buttonRef}>
        Edit API key
      </Button>
    </main>;
}`,...(ye=(me=I.parameters)==null?void 0:me.docs)==null?void 0:ye.source}}};var fe,ge,be;g.parameters={...g.parameters,docs:{...(fe=g.parameters)==null?void 0:fe.docs,source:{originalSource:`(args, context) => {
  const {
    editing
  } = args;
  const {
    savedName,
    savedPermissions,
    savedAllResources,
    savedResource,
    ...finalArgs
  } = args;
  const [open, setOpen] = useState(context.viewMode !== 'docs');
  const [apiKey, setApiKey] = useState('');
  const [loading, setLoading] = useState(false);
  const buttonRef = useRef(undefined);
  const blockClass = \`\${pkg.prefix}--apikey-modal\`;

  // multi step options
  const [name, setName] = useState(savedName);
  const [permissions, setPermissions] = useState(savedPermissions);
  const [allResources, setAllResources] = useState(savedAllResources);
  const [resource, setResource] = useState(savedResource);
  const [editSuccess, setEditSuccess] = useState(false);

  // eslint-disable-next-line
  const submitHandler = async () => {
    action('submitted')();
    setLoading(true);
    await wait(1000);
    if (editing) {
      setEditSuccess(true);
    } else {
      setApiKey('111-111-111-111');
    }
    setLoading(false);
  };
  const onCloseHandler = () => {
    setOpen(false);
    if (!editing) {
      setApiKey('');
      setName('');
      setPermissions('');
      setAllResources(false);
      setResource('');
    }
  };
  const formHandler = evt => {
    evt.preventDefault();
    submitHandler();
  };
  const allResourcesHandler = () => {
    if (allResources && resource) {
      setResource('');
    }
    setAllResources(prev => !prev);
  };
  const steps = [{
    valid: Boolean(name && permissions),
    title: editing ? 'Edit API key' : 'Generate API key',
    content: <>
          <p className={\`\${blockClass}__body\`}>
            (Optional description text) To connect securely to [product name],
            your application or tool needs an API key with permission to access
            resources such as [product resource name].
          </p>
          <TextInput value={name} onChange={e => setName(e.target.value)} labelText="Name your application" placeholder="Application name" id="name-input" data-modal-primary-focus />
          <FormGroup legendText="What do you want your application to be able to do" className={\`\${blockClass}__permissions\`}>
            <RadioButtonGroup onChange={opt => setPermissions(opt)} valueSelected={permissions} name="permission" orientation="vertical" aria-label="permission">
              <RadioButton value="Read and write" labelText="Read and write" />
              <RadioButton value="Read only" labelText="Read only" />
              <RadioButton value="Write only" labelText="Write only" />
            </RadioButtonGroup>
          </FormGroup>
        </>
  }, {
    valid: allResources || !allResources && !!resource,
    title: 'Choose which resources the API will have access to',
    content: <>
          <Form onSubmit={formHandler}>
            <FormGroup legendText="What do you want your application to be able to do" className={\`\${blockClass}__resource-toggle\`}>
              <Toggle onClick={allResourcesHandler} labelText="All resources" toggled={allResources} disabled={loading} id="toggle1"
          // eslint-disable-next-line jsx-a11y/no-autofocus
          autoFocus />
            </FormGroup>
            <FormGroup legendText="What do you want your application to be able to do" className={\`\${blockClass}__resource-name\`}>
              <TextInput value={resource} onChange={e => setResource(e.target.value)} labelText="Which resource?" placeholder="Resources name" disabled={loading || allResources} id="resource-input" />
            </FormGroup>
          </Form>
          {loading && <InlineLoading description={loading ? 'Saving...' : 'Generating...'} />}
          {editSuccess && <div className={\`\${blockClass}__messaging\`}>
              Edited successfully, API key successfully saved.
            </div>}
        </>
  }];
  return <main>
      <style>{\`.\${blockClass} { opacity: 0; }\`};</style>
      <APIKeyModal {...finalArgs} apiKey={apiKey} loading={loading} onClose={onCloseHandler} onRequestEdit={submitHandler} onRequestGenerate={submitHandler} open={open} customSteps={steps} nameRequired={false} editSuccess={editSuccess} launcherButtonRef={buttonRef} />
      <Button onClick={() => setOpen(!open)} ref={buttonRef}>
        {editing ? 'Edit API key' : 'Generate API key'}
      </Button>
    </main>;
}`,...(be=(ge=g.parameters)==null?void 0:ge.docs)==null?void 0:be.source}}};const cn=["Generate","GenerateWithError","InstantGenerate","CustomGenerate","Edit","EditWithError","CustomEdit"];export{g as CustomEdit,f as CustomGenerate,P as Edit,I as EditWithError,A as Generate,S as GenerateWithError,C as InstantGenerate,cn as __namedExportsOrder,v as default};
