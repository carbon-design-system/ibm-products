import{b as ie,c as oe,d,_ as ce,o as de,P as s,g as V}from"./index-CGLP8AGt.js";import{e as l,r as g}from"./index-DtHxqM--.js";import{F as me}from"./FormContext-C4Nuixum.js";import{c as ue}from"./events-OVwOsPzJ.js";import{T as E}from"./Text-CeswpK61.js";import{W as pe,a as fe}from"./bucket-18-OZh5kibs.js";const K=l.forwardRef(function(W,q){var D,S,L,z;let{className:H,decorator:m,id:v,inline:o=!1,labelText:O="Select",disabled:u=!1,children:y,noLabel:R=!1,hideLabel:k=!1,invalid:a=!1,invalidText:B="",helperText:h="",light:M=!1,readOnly:p,size:w,warn:f=!1,warnText:U,onChange:j,slug:$,...b}=W;const e=ie(),{isFluid:r}=g.useContext(me),[G,J]=g.useState(!1),Q=oe(),N=l.Children.toArray(y).filter(t=>l.isValidElement(t)),x=N.find(t=>{var n;return((n=t.props)==null?void 0:n.value)===(b==null?void 0:b.defaultValue)}),X=((D=x==null?void 0:x.props)==null?void 0:D.text)||((L=(S=N[0])==null?void 0:S.props)==null?void 0:L.text)||"",[Y,Z]=g.useState(X),ee=d({[`${e}--select`]:!0,[`${e}--select--inline`]:o,[`${e}--select--light`]:M,[`${e}--select--invalid`]:a,[`${e}--select--disabled`]:u,[`${e}--select--readonly`]:p,[`${e}--select--warning`]:f,[`${e}--select--fluid--invalid`]:r&&a,[`${e}--select--fluid--focus`]:r&&G,[`${e}--select--slug`]:$,[`${e}--select--decorator`]:m}),le=d(`${e}--label`,{[`${e}--visually-hidden`]:k,[`${e}--label--disabled`]:u}),se=d({[`${e}--select-input`]:!0,[`${e}--select-input--${w}`]:w}),T=`${v}-error-msg`,te=(()=>{if(a)return B;if(f)return U})(),c=a||f?l.createElement(E,{as:"div",className:`${e}--form-requirement`,id:T},te):null,ae=d(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:u}),C=h?`select-helper-text-${Q}`:void 0,F=h?l.createElement(E,{as:"div",id:C,className:ae},h):null,_={};a?_["aria-describedby"]=T:!o&&!r&&(_["aria-describedby"]=F?C:void 0);const I=t=>{J(t.type==="focus")},ne=t=>{var P;const n=(P=t==null?void 0:t.target)==null?void 0:P.options[t.target.selectedIndex];Z(n==null?void 0:n.text)},re={onMouseDown:t=>{p&&(t.preventDefault(),t.target.focus())},onKeyDown:t=>{p&&["ArrowDown","ArrowUp"," "].includes(t.key)&&t.preventDefault()}};let i=l.isValidElement($??m)?$??m:null;i&&((z=i.type)==null?void 0:z.displayName)==="AILabel"&&(i=l.cloneElement(i,{size:"mini"}));const A=l.createElement(l.Fragment,null,l.createElement("select",ce({},b,_,{id:v,className:se,disabled:u||void 0,"aria-invalid":a||void 0,"aria-readonly":p||void 0,title:Y,onChange:ue([j,ne])},re,{ref:q}),y),l.createElement(de,{className:`${e}--select__arrow`}),a&&l.createElement(pe,{className:`${e}--select__invalid-icon`}),!a&&f&&l.createElement(fe,{className:`${e}--select__invalid-icon ${e}--select__invalid-icon--warning`}));return l.createElement("div",{className:d(`${e}--form-item`,H)},l.createElement("div",{className:ee},!R&&l.createElement(E,{as:"label",htmlFor:v,className:le},O),o&&l.createElement("div",{className:`${e}--select-input--inline__wrapper`},l.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null},A),c),!o&&l.createElement("div",{className:`${e}--select-input__wrapper`,"data-invalid":a||null,onFocus:I,onBlur:I},A,$?i:m?l.createElement("div",{className:`${e}--select__inner-wrapper--decorator`},i):"",r&&l.createElement("hr",{className:`${e}--select__divider`}),r&&c?c:null),!o&&!r&&c?c:F))});K.displayName="Select";K.propTypes={children:s.node,className:s.string,decorator:s.node,defaultValue:s.any,disabled:s.bool,helperText:s.node,hideLabel:s.bool,id:s.string.isRequired,inline:s.bool,invalid:s.bool,invalidText:s.node,labelText:s.node,light:V(s.bool),noLabel:s.bool,onChange:s.func,readOnly:s.bool,size:s.oneOf(["sm","md","lg"]),slug:V(s.node),warn:s.bool,warnText:s.node};export{K as S};
