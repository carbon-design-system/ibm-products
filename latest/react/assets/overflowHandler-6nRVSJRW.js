function y(e,t){if(!e)return 0;const c=e.style.display;!e.offsetParent&&getComputedStyle(e).display==="none"&&(e.style.display="inline-block");const r=e.getBoundingClientRect()[t];return e.style.display=c,r}function v({container:e,items:t,offset:c,sizes:r,fixedSizes:f,offsetSize:l,maxVisibleItems:o,dimension:h,onChange:p,previousHiddenItems:m=[]}){const g=h==="width"?e.clientWidth:e.clientHeight;let a=[],n=[];const b=r.reduce((s,d)=>s+d,0),i=f.reduce((s,d)=>s+d,0);if(b+i<=g)a=o?t.slice(0,o):[...t],n=o?t.slice(o):[];else{const s=g-l;let d=0;for(let u=0;u<t.length;u++){const w=r[u];d+w+i<=s&&(!o||a.length<o)?(a.push(t[u]),d+=w):n.push(t[u])}}return m.length===n.length&&m.every((s,d)=>s===n[d])?m:(a.forEach(s=>s.removeAttribute("data-hidden")),n.forEach(s=>s.setAttribute("data-hidden","")),c&&c.toggleAttribute("data-hidden",n.length===0),p(a,n),n)}function x({container:e,maxVisibleItems:t,onChange:c,dimension:r="width"}){if(!(e instanceof HTMLElement))throw new Error("container must be an HTMLElement");if(typeof c!="function")throw new Error("onChange must be a function");if(t!==void 0&&(!Number.isInteger(t)||t<=0))throw new Error("maxVisibleItems must be a positive integer");const f=Array.from(e.children),l=f.find(i=>i.hasAttribute("data-offset")),o=f.filter(i=>i.hasAttribute("data-fixed")),h=f.filter(i=>i!==l&&!o.includes(i)),p=o.map(i=>y(i,r)),m=h.map(i=>y(i,r)),g=y(l,r);let a=[];function n(){a=v({container:e,items:h,offset:l,sizes:m,fixedSizes:p,offsetSize:g,maxVisibleItems:t,dimension:r,onChange:c,previousHiddenItems:a})}const b=new ResizeObserver(()=>requestAnimationFrame(n));return b.observe(e),requestAnimationFrame(n),{disconnect(){b.disconnect()}}}export{x as L};
