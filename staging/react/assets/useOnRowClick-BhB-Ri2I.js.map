{"version":3,"file":"useOnRowClick-BhB-Ri2I.js","sources":["../../src/components/Datagrid/useOnRowClick.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { Hooks, TableInstance } from 'react-table';\nimport { pkg } from '../../settings';\nimport { DataGridState } from './types';\nimport { usePrefix } from '@carbon/react';\n\nconst useOnRowClick = (hooks: Hooks) => {\n  const useInstance = (rowInstance: TableInstance) => {\n    const carbonPrefix = usePrefix();\n    const { onRowClick } = rowInstance as DataGridState;\n    const getRowProps = (props, datagridState) => {\n      const { isFetching, row, instance } = datagridState;\n      const { id, toggleRowSelected } = row;\n      const { withSelectRows, tableId } = instance;\n      const onClick = (event) => {\n        if (!isFetching && onRowClick) {\n          onRowClick(row, event);\n          // We do not want to change the list of selected rows if using the useSelectedRows hook, otherwise clicking on an entire row will mark the row as checked\n\n          // Remove selected class from all other clickable rows as only one clickable row can be selected at a time\n          const clickableSelectedRows = document.querySelectorAll(\n            `#${tableId}.${pkg.prefix}--datagrid .${carbonPrefix}--data-table--selected:not(.${pkg.prefix}--datagrid__active-row)`\n          );\n          if (clickableSelectedRows.length) {\n            Array.from(clickableSelectedRows).forEach((row) => {\n              row.classList.remove(`${carbonPrefix}--data-table--selected`);\n            });\n          }\n          const closestRow = event.currentTarget.closest('tr');\n          closestRow.classList.add(`${carbonPrefix}--data-table--selected`);\n\n          if (!withSelectRows) {\n            if (instance.selectedFlatRows) {\n              instance.selectedFlatRows.map((toggleRow) =>\n                toggleRow.toggleRowSelected?.(false)\n              );\n            }\n            toggleRowSelected(id, true);\n          }\n        }\n      };\n\n      const onKeyDown = (event) => {\n        const { key } = event;\n        if (key === 'Enter') {\n          onClick(event);\n        }\n      };\n\n      return [\n        props,\n        { onClick, onKeyDown },\n        {\n          tabIndex: 0,\n          style: {\n            cursor: 'pointer',\n          },\n        },\n      ];\n    };\n\n    hooks.getRowProps.push(getRowProps);\n  };\n  hooks.useInstance.push(useInstance);\n};\n\nexport default useOnRowClick;\n"],"names":["useOnRowClick","hooks","useInstance","rowInstance","carbonPrefix","usePrefix","onRowClick","getRowProps","props","datagridState","isFetching","row","instance","id","toggleRowSelected","withSelectRows","tableId","onClick","event","clickableSelectedRows","pkg","toggleRow","key"],"mappings":"gDAYA,MAAMA,EAAiBC,GAAiB,CACtC,MAAMC,EAAeC,GAA+B,CAClD,MAAMC,EAAeC,EAAA,EACf,CAAE,WAAAC,GAAeH,EACjBI,EAAc,CAACC,EAAOC,IAAkB,CAC5C,KAAM,CAAE,WAAAC,EAAY,IAAAC,EAAK,SAAAC,CAAA,EAAaH,EAChC,CAAE,GAAAI,EAAI,kBAAAC,CAAA,EAAsBH,EAC5B,CAAE,eAAAI,EAAgB,QAAAC,CAAA,EAAYJ,EAC9BK,EAAWC,GAAU,CACzB,GAAI,CAACR,GAAcJ,EAAY,CAC7BA,EAAWK,EAAKO,CAAK,EAIrB,MAAMC,EAAwB,SAAS,iBACrC,IAAIH,CAAO,IAAII,EAAI,MAAM,eAAehB,CAAY,+BAA+BgB,EAAI,MAAM,yBAAA,EAE3FD,EAAsB,QACxB,MAAM,KAAKA,CAAqB,EAAE,QAASR,GAAQ,CACjDA,EAAI,UAAU,OAAO,GAAGP,CAAY,wBAAwB,CAC9D,CAAC,EAEgBc,EAAM,cAAc,QAAQ,IAAI,EACxC,UAAU,IAAI,GAAGd,CAAY,wBAAwB,EAE3DW,IACCH,EAAS,kBACXA,EAAS,iBAAiB,IAAKS,GAC7BA,EAAU,oBAAoB,EAAK,CAAA,EAGvCP,EAAkBD,EAAI,EAAI,EAE9B,CACF,EASA,MAAO,CACLL,EACA,CAAE,QAAAS,EAAS,UATMC,GAAU,CAC3B,KAAM,CAAE,IAAAI,GAAQJ,EACZI,IAAQ,SACVL,EAAQC,CAAK,CAEjB,CAIa,EACX,CACE,SAAU,EACV,MAAO,CACL,OAAQ,SAAA,CACV,CACF,CAEJ,EAEAjB,EAAM,YAAY,KAAKM,CAAW,CACpC,EACAN,EAAM,YAAY,KAAKC,CAAW,CACpC"}