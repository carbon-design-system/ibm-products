import{r as m}from"./index-BwDkhjyp.js";import{w as U}from"./wait-CTNFjQS8.js";import{p as V,j as $}from"./settings-DrdbGLhD.js";import{P as b}from"./index-Dk74W0Oi.js";import{c as R}from"./deprecate-D9ms-jbM.js";import{P as z,a as G}from"./ProgressIndicator-Cj-AlNDT.js";import"./props-helper-D-fMQKH_.js";const M=({previousState:l,currentStep:r,blockClass:e,onMount:c,firstFocusElement:a})=>{m.useEffect(()=>{typeof c=="function"&&c()},[c]),m.useEffect(()=>{const d=async n=>{await U(10),n.focus()};if((l==null?void 0:l.currentStep)!==r&&r>0&&a){const n=document.querySelector(a);n&&d(n)}},[r,l,e,c,a])},I=({firstIncludedStep:l,lastIncludedStep:r,stepData:e,onPrevious:c,onNext:a,isSubmitDisabled:d,setCurrentStep:n,setIsSubmitting:s,setLoadingPrevious:f=null,loadingPrevious:o=!1,onClose:h,onRequestSubmit:i,componentName:y,currentStep:g,backButtonText:p,cancelButtonText:E,submitButtonText:j,nextButtonText:T,isSubmitting:N,componentBlockClass:O,setCreateComponentActions:P,setModalIsOpen:x})=>{const q=m.useCallback(()=>{s(!1),n(t=>{var w;do t++;while(!((w=e[t-1])!=null&&w.shouldIncludeStep));return t})},[n,s,e]),C=m.useCallback(()=>{y!=="CreateFullPage"&&f(!1),n(t=>{var w;do t--;while(!((w=e[t-1])!=null&&w.shouldIncludeStep));return t})},[n,e,f,y]);m.useEffect(()=>{const t=()=>{y!=="CreateFullPage"&&n(1),s(!1),h()},w=async()=>{try{await i(),t()}catch(u){s(!1),console.warn(`${y} submit error: ${u}`)}},F=async()=>{if(f==null||f(!0),typeof c=="function")try{await c(),C()}catch(u){console.warn(`${y} onBack error: ${u}`)}else C()},H=async()=>{if(s(!0),typeof a=="function")try{await a(),q()}catch(u){s(!1),console.warn(`${y} onNext error: ${u}`)}else q()},A=async()=>{if(s(!0),typeof a=="function")try{await a(),await w()}catch(u){s(!1),console.warn(`${y} onNext error: ${u}`)}else await w()};if((e==null?void 0:e.length)>0){const u=[];(e==null?void 0:e.length)>1&&u.push({key:"create-action-button-back",label:p,onClick:F,kind:"secondary",disabled:g===l,loading:o}),u.push({key:"create-action-button-cancel",label:E,onClick:y==="CreateFullPage"?()=>x(!0):t,kind:"ghost"}),u.push({key:"create-action-button-submit",label:g<r?T:j,onClick:g<r?H:A,disabled:d,kind:"primary",loading:N,className:`${O}__create-button`}),P(u)}},[l,r,e,a,d,p,E,g,h,T,j,i,N,O,y,q,n,P,s,x,C,c,f,o])},J=(l,r)=>{let e=0;return l.forEach((c,a)=>{a+1>r||c.shouldIncludeStep===!1&&(e+=1)}),e},S=({firstIncludedStep:l,previousState:r,open:e,setCurrentStep:c,stepData:a,initialStep:d,totalSteps:n,componentName:s})=>{m.useEffect(()=>{if(!(r!=null&&r.open)&&e){if(d&&n&&Number(d)<=Number(n)&&Number(d)>0){const f=J(a,d);c(Number(d+f))}else c(l);(d&&n&&Number(d)>Number(n)||Number(d)<=0)&&console.warn(`${s}: An invalid \`initialStep\` prop was supplied. The \`initialStep\` prop should be a number that is greater than 0 or less than or equal to the number of steps your ${s} has.`)}},[l,e,r,c,a,d,n,s])},D=({stepsContext:l,stepNumber:r,introStep:e,invalid:c,shouldIncludeStep:a,secondaryLabel:d,title:n})=>{m.useEffect(()=>{l&&l.setStepData(s=>{const f={title:n,secondaryLabel:d,introStep:e,invalid:c,shouldIncludeStep:a},o=s[r-1];if((o==null?void 0:o.title)!==f.title||(o==null?void 0:o.secondaryLabel)!==f.secondaryLabel||(o==null?void 0:o.introStep)!==f.introStep||(o==null?void 0:o.shouldIncludeStep)!==f.shouldIncludeStep||(o==null?void 0:o.invalid)!==f.invalid){const h=[...s];return h[r-1]=f,h}return s})},[a,n,d,e,c,l,r])},v=(l,r)=>{m.useEffect(()=>{l===1&&console.warn(`${r}: ${r}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`)},[l,r])},k=`${V.prefix}--create-influencer`,K="CreateInfluencer",_=({className:l,currentStep:r,stepData:e,title:c})=>{const a=(n,s)=>{const f=[];return n.forEach((o,h)=>{var i;((i=n[h])==null?void 0:i[s])===!1&&h<=r-1&&f.push(o)}),f.length},d=()=>{var o,h;const n=e==null?void 0:e.filter(i=>!(i!=null&&i.introStep)),s=n==null?void 0:n.filter(i=>i==null?void 0:i.shouldIncludeStep),f=a(e,"shouldIncludeStep")||0;return $.jsxs("div",{className:`${k}__left-nav`,children:[c&&$.jsx("h3",{className:`${k}__title`,children:c}),r===1&&((o=e[0])!=null&&o.introStep)?null:$.jsx(z,{currentIndex:(h=e[0])!=null&&h.introStep?r-f-2:r-f-1,spaceEqually:!0,vertical:!0,className:R(`${k}__progress-indicator`),children:s.map((i,y)=>$.jsx(G,{label:i.title,secondaryLabel:i.secondaryLabel||void 0,invalid:i.invalid},y))})]})};return $.jsx("div",{className:R(k,l),children:d()})};_.displayName=K;_.propTypes={className:b.string,currentStep:b.number.isRequired,stepData:b.arrayOf(b.shape({introStep:b.bool,secondaryLabel:b.string,shouldIncludeStep:b.bool,title:b.node})),title:b.string};_.__docgenInfo={description:"",methods:[],displayName:"CreateInfluencer",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},currentStep:{required:!0,tsType:{name:"number"},description:"Provide the current step number.",type:{name:"number"}},stepData:{required:!1,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:"Provide the Set Data.",type:{name:"arrayOf",value:{name:"shape",value:{introStep:{name:"bool",required:!1},secondaryLabel:{name:"string",required:!1},shouldIncludeStep:{name:"bool",required:!1},title:{name:"node",required:!1}}}}},title:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Title.",type:{name:"string"}}}};const ee=(l,r,e)=>{var c;for(let a=l.length-1;a>=0;a--)if(((c=l[a])==null?void 0:c[r])===e)return a+1;return-1};export{_ as C,v as a,S as b,I as c,D as d,J as g,ee as l,M as u};
