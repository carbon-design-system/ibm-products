import{b as k,v as H,_ as T,j as B,P as t,d as A,q as O,E as P,S as W,g as I}from"./index-C360Eztx.js";import{e as a,r as $}from"./index-DtHxqM--.js";import{bi as L,T as G}from"./settings-CFkY3W_8.js";import{n as S,c as J}from"./events-CdfZZS3f.js";import{L as M}from"./InlineLoading-DwO_qCAY.js";import{W as Q}from"./bucket-19-D7HYZr93.js";import{T as x}from"./Text-DKfZ87L_.js";var q;function U({iconDescription:r="Uploading file",status:l="uploading",invalid:p,name:c,tabIndex:g=0,["aria-describedby"]:s,...u}){const f=k();switch(l){case"uploading":return a.createElement(M,{description:r,small:!0,withOverlay:!1,className:`${f}--file-loading`});case"edit":return a.createElement(a.Fragment,null,p&&a.createElement(Q,{className:`${f}--file-invalid`}),a.createElement("button",T({"aria-label":`${r} - ${c}`,className:`${f}--file-close`,type:"button",tabIndex:g},u,{"aria-describedby":p?s:void 0}),q||(q=a.createElement(B,null))));case"complete":return a.createElement(H,T({"aria-label":r,className:`${f}--file-complete`},u,{tabIndex:-1}),r&&a.createElement("title",null,r));default:return null}}U.propTypes={"aria-describedby":t.string,iconDescription:t.string,invalid:t.bool,name:t.string,status:t.oneOf(["edit","complete","uploading"]),tabIndex:t.number};function X({accept:r=[],className:l,id:p,disabled:c,labelText:g="Add file",multiple:s=!1,name:u,onAddFiles:f=S,onClick:h,pattern:C=".[0-9a-z]+$",innerRef:F,...y}){const d=k(),N=$.useRef(null),{current:n}=$.useRef(p||L()),[v,_]=$.useState(!1),w=A(`${d}--file__drop-container`,`${d}--file-browse-btn`,{[`${d}--file__drop-container--drag-over`]:v,[`${d}--file-browse-btn--disabled`]:c},l);function E(e){if(!r.length)return e;const o=new Set(r);return e.reduce((b,m)=>{const{name:V,type:j=""}=m,z=new RegExp(C,"i"),[R]=V.match(z)??[];return R===void 0?b:o.has(j)||o.has(R.toLowerCase())?b.concat([m]):(m.invalidFileType=!0,b.concat([m]))},[])}function D(e){const o=[...e.target.files??[]],b=s?o:[o[0]],m=E(b);return f(e,{addedFiles:m})}function i(e){const o=[...e.dataTransfer.files],b=s?o:[o[0]],m=E(b);return f(e,{addedFiles:m})}const K=()=>{var e;c||(e=N.current)==null||e.click()};return a.createElement("div",{className:`${d}--file`,onDragOver:e=>{e.stopPropagation(),e.preventDefault(),!c&&(_(!0),e.dataTransfer.dropEffect="copy")},onDragLeave:e=>{e.stopPropagation(),e.preventDefault(),!c&&(_(!1),e.dataTransfer.dropEffect="move")},onDrop:e=>{e.stopPropagation(),e.preventDefault(),!c&&(_(!1),i(e))}},a.createElement("button",T({type:"button",className:w,ref:F,onKeyDown:e=>{var o;O(e,[P,W])&&(e.preventDefault(),(o=N.current)==null||o.click())},onClick:J([h,K])},y),g),a.createElement("label",{htmlFor:n,className:`${d}--visually-hidden`},g),a.createElement("input",{type:"file",id:n,className:`${d}--file-input`,ref:N,tabIndex:-1,disabled:c,accept:r.join(","),name:u,multiple:s,onChange:D,onClick:e=>{e.target.value=""}}))}X.propTypes={accept:t.arrayOf(t.string),className:t.string,disabled:t.bool,id:t.string,labelText:t.string.isRequired,multiple:t.bool,name:t.string,onAddFiles:t.func,onClick:t.func,pattern:t.string,role:I(t.number),tabIndex:I(t.number)};function Y({uuid:r,name:l,status:p="uploading",iconDescription:c,onDelete:g=S,invalid:s,errorSubject:u,errorBody:f,size:h,className:C,...F}){const y=$.useRef(null),[d,N]=$.useState(!1),n=k(),{current:v}=$.useRef(r||L()),_=A(`${n}--file__selected-file`,C,{[`${n}--file__selected-file--invalid`]:s,[`${n}--file__selected-file--md`]:h==="md",[`${n}--file__selected-file--sm`]:h==="sm"}),w=s?`${n}--file-filename-container-wrap-invalid`:`${n}--file-filename-container-wrap`,E=i=>i==null?void 0:i.replace(/\s+/g,""),D=i=>(N(i.offsetWidth<i.scrollWidth),i.offsetWidth<i.scrollWidth);return $.useLayoutEffect(()=>{D(y.current)},[n,l]),a.createElement("span",T({className:_},F),d?a.createElement("div",{className:w},a.createElement(G,{label:l,align:"bottom",className:`${n}--file-filename-tooltip`},a.createElement("button",{className:`${n}--file-filename-button`,type:"button"},a.createElement(x,{ref:y,as:"p",title:l,className:`${n}--file-filename-button`,id:E(l)},l)))):a.createElement(x,{ref:y,as:"p",title:l,className:`${n}--file-filename`,id:E(l)},l),a.createElement("div",{className:`${n}--file-container-item`},a.createElement("span",{className:`${n}--file__state-container`},a.createElement(U,{name:l,iconDescription:c,status:p,invalid:s,"aria-describedby":s&&u?`${E(l)}-id-error`:void 0,onKeyDown:i=>{O(i,[P,W])&&p==="edit"&&(i.preventDefault(),g(i,{uuid:v}))},onClick:i=>{p==="edit"&&g(i,{uuid:v})}}))),s&&u&&a.createElement("div",{className:`${n}--form-requirement`,role:"alert",id:`${E(l)}-id-error`},a.createElement(x,{as:"div",className:`${n}--form-requirement__title`},u),f&&a.createElement(x,{as:"p",className:`${n}--form-requirement__supplement`},f)))}Y.propTypes={errorBody:t.string,errorSubject:t.string,iconDescription:t.string,invalid:t.bool,name:t.string,onDelete:t.func,size:t.oneOf(["sm","md","lg"]),status:t.oneOf(["uploading","edit","complete"]),uuid:t.string};export{X as F,Y as a,U as b};
