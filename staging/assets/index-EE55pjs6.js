import{r as E,e as o}from"./index-DtHxqM--.js";import{P as y}from"./index-C360Eztx.js";import{e as k}from"./iframe-DQx73iB6.js";import{F as g}from"./index-B3dOPLFv.js";import{A as T}from"./index-BpQ54rfJ.js";const{STORY_CHANGED:L,SELECT_STORY:b}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:C,addons:m}=__STORYBOOK_MODULE_PREVIEW_API__,{global:v}=__STORYBOOK_MODULE_GLOBAL__;var D="links",{document:p,HTMLElement:F}=v;function R(e){let t={},a=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let n=0;n<a.length;n++){let r=a[n].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}var h=e=>m.getChannel().emit(b,e),K=(e,t)=>new Promise(a=>{let{location:n}=p,r=R(n.search).id,s=e||r.split("--",2)[0],i=`/story/${k(s,t)}`,c=n.pathname.replace(/iframe\.html$/,""),O=`${n.origin+c}?${Object.entries({path:i}).map(d=>`${d[0]}=${d[1]}`).join("&")}`;a(O)}),u=e=>{let{target:t}=e;if(!(t instanceof F))return;let a=t,{sbKind:n,sbStory:r}=a.dataset;(n||r)&&(e.preventDefault(),h({kind:n,story:r}))},l=!1,P=()=>{l||(l=!0,p.addEventListener("click",u))},j=()=>{l&&(l=!1,p.removeEventListener("click",u))};C({name:"withLinks",parameterName:D,wrapper:(e,t)=>(P(),m.getChannel().once(L,j),e(t))});var A=0,B=e=>e.button===A&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,I=(e,t=a=>{})=>{B(e)&&(e.preventDefault(),t(e))},f=class extends E.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:e,title:t=e,story:a,name:n=a}=this.props;if(t&&n){let r=await K(t,n);this.setState({href:r})}},this.handleClick=()=>{let{kind:e,title:t=e,story:a,name:n=a}=this.props;t&&n&&h({title:t,name:n})}}componentDidMount(){this.updateHref()}componentDidUpdate(e){let{kind:t,title:a,story:n,name:r}=this.props;(e.kind!==t||e.story!==n||e.title!==a||e.name!==r)&&this.updateHref()}render(){let{kind:e,title:t=e,story:a,name:n=a,children:r,...s}=this.props,{href:i}=this.state;return o.createElement("a",{href:i,onClick:c=>I(c,this.handleClick),...s},r)}};f.defaultProps={children:void 0};var M=f;function _({flags:e,children:t,...a}){const n=Object.values(a).reduce((s,i)=>(s[i]=!0,s),{}),r={...n,...e};return o.createElement(g,{...n,flags:e},o.createElement(T,{type:"feature-flags",text:o.createElement("span",null,"This story is rendered with"," ",o.createElement(M,{title:"IBM Products/Components/FeatureFlags",name:"Docs"},Object.keys(r).length===0?"all available feature flags":Object.keys(r).map((s,i)=>Object.keys(r).length>1?i===Object.keys(r).length-1?s:`${s}, `:s))," ","enabled")},t))}_.propTypes={children:y.node};_.__docgenInfo={description:"",methods:[],displayName:"WithFeatureFlags",props:{children:{description:"",type:{name:"node"},required:!1}}};export{_ as W};
