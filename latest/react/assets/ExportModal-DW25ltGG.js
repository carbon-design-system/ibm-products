import{r as s,u as Z,p as ee,e,Q as te,c as ne,J as ae,B as w,P as t}from"./iframe-BCQS5_Al.js";import{C as re,M as se,a as ie,b as oe}from"./ComposedModal-CMyFULfX.js";import{F as le}from"./FormGroup-DpRa_VRl.js";import{L as pe}from"./InlineLoading-CTAg-ra2.js";import{P as de}from"./codePreviewer-BJMsUFr3.js";import{R as ue}from"./RadioButton-4O64ZZyC.js";import{R as me}from"./RadioButtonGroup-D0_8VsFI.js";import{T as ce}from"./TextInput-D4gQt_iX.js";import{g as fe}from"./devtools-BnxPUADb.js";import{u as ye}from"./usePortalTarget-Cyw6i5As.js";import{u as ge}from"./uuidv4-BN2rGLQG.js";import{b as be}from"./bucket-6-BnWBUhiK.js";const M="ExportModal",R={preformattedExtensions:Object.freeze([]),validExtensions:Object.freeze([])},c=s.forwardRef(({body:f,className:N,error:y,errorMessage:_,filename:l,hidePasswordLabel:k,inputLabel:B,inputType:$="text",invalidInputText:P,loading:p,loadingMessage:O,onClose:d,onRequestSubmit:S,open:g,portalTarget:C,preformattedExtensions:r=R.preformattedExtensions,preformattedExtensionsLabel:L,primaryButtonText:F,secondaryButtonText:I,showPasswordLabel:z,successMessage:j,successful:o,title:b,triggerButtonRef:D,validExtensions:u=R.validExtensions,...H},V)=>{const a=`${ee.prefix}--export-modal`,[i,x]=s.useState(""),[G,W]=s.useState(!1),[m,h]=s.useState(""),A=ye(C),v=Z();s.useEffect(()=>{x(l),r&&r.length>0&&r[0]?.extension&&h(r?.[0]?.extension)},[l,r,g]),s.useEffect(()=>{o&&document.querySelector(`.${a} .${v}--modal-close-button button`)?.focus()},[o,a,v]);const J=n=>{x(n.target.value)},Q=n=>{h(n)},U=()=>{W(!0)},K=()=>{const n=m?`${l}.${m.toLocaleLowerCase()}`:i;S?.(n)},T=()=>{if(!G||!u||!u.length)return!1;if(!i.includes("."))return!0;const n=i.split(".").pop();return!u.includes(n)},X=s.useRef(ge()),Y=p||!i||T(),E=p||y||o,q={id:`text-input--${X.current}`,value:i,onChange:J,labelText:B,invalid:T(),invalidText:P,onBlur:U,"data-modal-primary-focus":!0};return A(e.createElement(te,{enableExperimentalFocusWrapWithoutSentinels:!0},e.createElement(re,{...H,className:ne(a,N),"aria-label":b,size:"sm",preventCloseOnClickOutside:!0,launcherButtonRef:D,open:g,ref:V,onClose:d,...fe(M)},e.createElement(se,{className:`${a}__header`,closeModal:d,title:b}),e.createElement(ie,{className:`${a}__body-container`},!E&&e.createElement(e.Fragment,null,f&&e.createElement("p",{className:`${a}__body`},f),r.length?e.createElement(le,{legendText:L},e.createElement(me,{orientation:"vertical",onChange:Q,valueSelected:m,name:"extensions","aria-label":"extensions"},r.map(n=>e.createElement(ue,{key:n.extension,id:n.extension,value:n.extension,labelText:`${n.extension} (${n.description})`,"data-modal-primary-focus":!0})))):e.createElement("div",{className:`${a}__input-container`},$==="text"?e.createElement(ce,{...q}):e.createElement(de,{...q,showPasswordLabel:z,hidePasswordLabel:k,tooltipPosition:"left"}))),e.createElement("div",{"aria-live":"polite",className:`${a}__messaging`},p&&e.createElement(e.Fragment,null,e.createElement(pe,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,O)),o&&e.createElement(e.Fragment,null,e.createElement(ae,{size:16,className:`${a}__checkmark-icon`}),e.createElement("p",null,j)),y&&e.createElement(e.Fragment,null,e.createElement(be,{size:16,className:`${a}__error-icon`}),e.createElement("p",null,_)))),!E&&e.createElement(oe,{className:`${a}__footer`},e.createElement(w,{type:"button",kind:"secondary",onClick:d},I),e.createElement(w,{type:"submit",kind:"primary",onClick:K,disabled:Y},F)))))});c.propTypes={body:t.string,className:t.string,error:t.bool,errorMessage:t.string,filename:t.string.isRequired,hidePasswordLabel:t.string,inputLabel:t.string,inputType:t.oneOf(["text","password"]),invalidInputText:t.string,loading:t.bool,loadingMessage:t.string,onClose:t.func,onRequestSubmit:t.func,open:t.bool,portalTarget:t.node,preformattedExtensions:t.arrayOf(t.shape({extension:t.string,description:t.string})),preformattedExtensionsLabel:t.string,primaryButtonText:t.string.isRequired,secondaryButtonText:t.string.isRequired,showPasswordLabel:t.string,successMessage:t.string,successful:t.bool,title:t.string.isRequired,triggerButtonRef:t.any,validExtensions:t.array};c.displayName=M;c.__docgenInfo={description:"Modal dialog version of the export pattern",methods:[],displayName:"ExportModal",props:{body:{required:!1,tsType:{name:"string"},description:"Body content for the modal",type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"Optional class name",type:{name:"string"}},error:{required:!1,tsType:{name:"boolean"},description:"specify if an error occurred",type:{name:"bool"}},errorMessage:{required:!1,tsType:{name:"string"},description:"messaging to display in the event of an error",type:{name:"string"}},filename:{required:!0,tsType:{name:"string"},description:"name of the file being exported",type:{name:"string"}},hidePasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to hide key",type:{name:"string"}},inputLabel:{required:!1,tsType:{name:"string"},description:"label for the text input",type:{name:"string"}},inputType:{required:!1,tsType:{name:"union",raw:"'text' | 'password'",elements:[{name:"literal",value:"'text'"},{name:"literal",value:"'password'"}]},description:"specify the type of text input",defaultValue:{value:"'text'",computed:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'password'",computed:!1}]}},invalidInputText:{required:!1,tsType:{name:"string"},description:"text for an invalid input",type:{name:"string"}},loading:{required:!1,tsType:{name:"boolean"},description:"specify if the modal is in a loading state",type:{name:"bool"}},loadingMessage:{required:!1,tsType:{name:"string"},description:"message to display during the loading state",type:{name:"string"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Specify a handler for closing modal",type:{name:"func"}},onRequestSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:'Specify a handler for "submitting" modal. Returns the file name',type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specify whether the Modal is currently open",type:{name:"bool"}},portalTarget:{required:!1,tsType:{name:"ReactNode"},description:"The DOM node the tearsheet should be rendered within. Defaults to document.body.",type:{name:"node"}},preformattedExtensions:{required:!1,tsType:{name:"unknown"},description:"Array of extensions to display as radio buttons",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"arrayOf",value:{name:"shape",value:{extension:{name:"string",required:!1},description:{name:"string",required:!1}}}}},preformattedExtensionsLabel:{required:!1,tsType:{name:"string"},description:"Label for the preformatted label form group",type:{name:"string"}},primaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the primary button",type:{name:"string"}},secondaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the secondary button",type:{name:"string"}},showPasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to show key",type:{name:"string"}},successMessage:{required:!1,tsType:{name:"string"},description:"messaging to display if the export was successful",type:{name:"string"}},successful:{required:!1,tsType:{name:"boolean"},description:"specify if the export was successful",type:{name:"bool"}},title:{required:!0,tsType:{name:"string"},description:"The text displayed at the top of the modal",type:{name:"string"}},triggerButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Reference to trigger button",type:{name:"any"}},validExtensions:{required:!1,tsType:{name:"unknown"},description:"array of valid extensions the file can have",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"array"}}}};export{c as E};
