import{j as n,aA as S,r as a,e,B as d,A as M}from"./iframe-CECvNR-E.js";import{C as N,M as w,a as O,b as $}from"./ComposedModal-knVyg-RR.js";import{F as I}from"./FormGroup-tt2ybUGc.js";import{L as H}from"./InlineLoading-AxKMSEh1.js";import{R}from"./RadioButton-DvcfIgXl.js";import{R as P}from"./RadioButtonGroup-ewWImFG-.js";import{T as z}from"./TextInput-Bw04_Iht.js";import{useMDXComponents as D}from"./index-CB45JN3N.js";import{w as y}from"./wait-CTNFjQS8.js";import{a as L}from"./bucket-6-6Xg8dT13.js";import{s as j}from"./codePreviewer-CTKFTNX8.js";import"./preload-helper-PPVm8Dsz.js";import"./index-D9kzaMMU.js";import"./LayerContext-6g403wGD.js";import"./clamp--00YEiB8.js";import"./ButtonSet-CJvqeno-.js";import"./mergeRefs-BZpmU3mx.js";import"./requiredIfGivenPropIsTruthy-C6rAip-Q.js";import"./wrapFocus-2UnpdR_d.js";import"./Text-JYrlRVpp.js";import"./index-CY5VH0Wo.js";import"./bucket-18-aLT4L9Ee.js";import"./utils-5D3DEOFD.js";import"./useNormalizedInputProps-Bnm0Ei9o.js";import"./bucket-19-DzVW02r8.js";import"./FormContext-D-anyOyh.js";import"./AccordionItem-BIHBNNEu.js";import"./SkeletonText-CxUnjpMl.js";import"./AspectRatio-DwVNpCts.js";import"./BreadcrumbItem-BY3DiwHf.js";import"./Link-DC6sJXxH.js";import"./bucket-13-BsaKR1EV.js";import"./Checkbox-GrZpxim0.js";import"./index-nuXQNMyh.js";import"./inheritsLoose-DHKJTbHM.js";import"./MultiSelect-D63q8W5e.js";import"./defaultItemToString-zSItMTD_.js";import"./useAttachedMenu-D1mlKi8p.js";import"./DataTable-BEwXXkYV.js";import"./TableRow-nE5Z2m4H.js";import"./wrapComponent-CgUKGyK0.js";import"./bucket-0-Ct-c54fM.js";import"./bucket-1-CWEhWKsT.js";import"./TableToolbar-CgZQ2mCp.js";import"./index-CeDLcdNt.js";import"./TableSelectRow-CV2wRaCK.js";import"./OverflowMenuItem-CuAQreUF.js";import"./TableToolbarSearch-FT_JklIp.js";import"./Search-C_NXnGDc.js";import"./bucket-15-B5w10YD2.js";import"./index-D6SLJGyk.js";import"./useOutsideClick-NWUtwkfn.js";import"./DatePicker-DJAC_JWU.js";import"./bucket-2-B2qVJJyY.js";import"./documentLang-E105Y72C.js";import"./Dropdown-B3sMF6DL.js";import"./Form-MxWQF5Pi.js";import"./FormLabel-DfTwjdGq.js";import"./Grid-DV0NhGws.js";import"./Row-C7WCnM_U.js";import"./Column-B2I8Y_hl.js";import"./Icon.Skeleton-BBOl6a3w.js";import"./ListItem-CnWwpprY.js";import"./MenuItem-CuhJ5Fdm.js";import"./useControllableState-CeUHG2Ws.js";import"./index-OyYMWOsD.js";import"./Notification-BXYs3_Is.js";import"./bucket-10-Xp843jPM.js";import"./NumberInput-rbdBayvn.js";import"./bucket-17-BzB5Sqr3.js";import"./useMatchMedia-KzNwi0gm.js";import"./DefinitionTooltip-CASlUOQ5.js";import"./Tag-BXeLWXEp.js";import"./OperationalTag-CBsDAR3R.js";import"./Pagination-Dbk6zCJh.js";import"./Select-CottMwKN.js";import"./SelectItem-C63vC68U.js";import"./ProgressIndicator-DjOTg1N7.js";import"./bucket-9-YI5K28uj.js";import"./TileGroup-CatcfX-W.js";import"./bucket-14-CHDSepZv.js";import"./TimePickerSelect-Dm4TOMc7.js";import"./Slider-CXUPIIzR.js";import"./StructuredList-BS_xG_kd.js";import"./Tabs-BnGgSbaA.js";import"./DismissibleTag-0sJOjJTR.js";import"./SelectableTag--Esly7hT.js";import"./TextArea-e3dwhDDr.js";import"./Tile-DYNlPvKP.js";import"./Toggle-CiBsKVKd.js";import"./Content-DaQ04l_q.js";import"./HeaderName-DZ2R7zeF.js";import"./Link-Dy5m0NgV.js";import"./HeaderContainer-BCO3QJP-.js";import"./HeaderGlobalBar-CHX8uAir.js";import"./AriaPropTypes-DSia6hRf.js";import"./SideNavLink-C_5-jfPU.js";import"./bucket-11-6ft5AANw.js";import"./SideNavLinkText-itGM3JdL.js";import"./HeaderPanel-CgP-6DE-.js";import"./SideNavMenuItem-CfiiI_6F.js";import"./UnorderedList-DpMbgF5M.js";import"./bucket-5-D0YzbwVS.js";import"./index-DjOK281B.js";import"./bucket-7-BNY8no_f.js";import"./bucket-8-DITalON4.js";import"./bucket-12-CMRcaq-T.js";import"./bucket-16-C9XaBUTK.js";import"./bucket-20-Bo2fSLYA.js";const W=".export-modal__body{margin-block-end:1rem;padding-inline-end:calc(20% - 1rem)}.export-modal__messaging{display:flex;align-items:center}.export-modal__messaging p{margin-inline-start:.5rem}.export-modal__checkmark-icon{fill:var(--cds-button-primary, #0f62fe)}.export-modal__error-icon{fill:var(--cds-button-danger-primary, #da1e28)}",B=[y];function T(s){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...D(),...s.components};return n.jsxs(n.Fragment,{children:[n.jsx(t.h1,{id:"export-modal",children:"Export Modal"}),`
`,n.jsxs(t.p,{children:[n.jsx(t.a,{href:"https://pages.github.ibm.com/carbon/ibm-products/patterns/export/usage/",rel:"nofollow",children:"Usage guidelines"}),`
|
`,n.jsx(t.a,{href:"https://www.carbondesignsystem.com/components/modal/usage",rel:"nofollow",children:"Carbon modal usage guidelines"}),`
|
`,n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-modal",rel:"nofollow",children:"Carbon modal documentation"})]}),`
`,n.jsx(t.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#overview",children:"Overview"})}),`
`,n.jsxs(t.li,{children:[n.jsx(t.a,{href:"#example-usage",children:"Example usage"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#standard",children:"Standard"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#with-extension-validation",children:"With Extension Validation"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#with-preformatted-extensions",children:"With Preformatted Extensions"})}),`
`]}),`
`]}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,n.jsx(t.h2,{id:"overview",children:"Overview"}),`
`,n.jsx(t.p,{children:`Export modal is a pattern which is applicable to both exporting and downloading.
Below is the Modal dialog version of the export pattern.`}),`
`,n.jsx(t.p,{children:"To build this pattern, we recommend including the following ingredients:"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-composedmodal",rel:"nofollow",children:"ComposedModal"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-button",rel:"nofollow",children:"cds-button"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-formgroup",rel:"nofollow",children:"FormGroup"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-textinput",rel:"nofollow",children:"TextInput"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-radiobutton",rel:"nofollow",children:"RadioButton"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-loading",rel:"nofollow",children:"Loading"})}),`
`]}),`
`,n.jsx(t.h3,{id:"standard",children:"Standard"}),`
`,n.jsx(S,{of:b,additionalActions:[{title:"Open in Stackblitz",onClick:()=>j({story:b,customFunctionDefs:B,styles:F.parameters.styles})}]}),`
`,n.jsx(t.h3,{id:"with-extension-validation",children:"With Extension Validation"}),`
`,n.jsx(S,{of:E,additionalActions:[{title:"Open in Stackblitz",onClick:()=>j({story:E,customFunctionDefs:B,styles:F.parameters.styles})}]}),`
`,n.jsx(t.h3,{id:"with-preformatted-extensions",children:"With Preformatted Extensions"}),`
`,n.jsx(S,{of:g,additionalActions:[{title:"Open in Stackblitz",onClick:()=>j({story:g,customFunctionDefs:B,styles:F.parameters.styles})}]})]})}function G(s={}){const{wrapper:t}={...D(),...s.components};return t?n.jsx(t,{...s,children:n.jsx(T,{...s})}):T(s)}const F={title:"Patterns/Export Modal",component:()=>{},tags:["autodocs"],parameters:{styles:W,docs:{page:G}}},V=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState("Sample02.pdf"),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(!1),m=i||x||u,o="export-modal",c=()=>{t(!1),f(!1),_(!1)},h=async()=>{p(!0),await y(1e3),f(!0),p(!1)},k=i||!l;return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",preventCloseOnClickOutside:!0,onClose:c},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:c}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement(z,{labelText:"File name",value:l,onChange:v=>C(v.target.value)}),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},i&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),u&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),x&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:c},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:h,disabled:k},"Export"))))},X=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState("Sample02.pdf"),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(!1),m=i||x||u,o="export-modal",c=()=>{t(!1),f(!1),_(!1)},h=async()=>{p(!0),await y(1e3),f(!0),p(!1)},k=()=>{let r=["pdf"];if(!r||!r.length)return!1;if(!l.includes("."))return!0;const A=l.split(".").pop();return!r.includes(A)},v=i||!l||k();return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",onClose:c},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:c}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement("p",{className:`${o}__body`},"File must be exported in a PDF format."),!m&&e.createElement(z,{labelText:"File name",value:l,onChange:r=>C(r.target.value),invalid:k(),invalidText:"File must have valid extension .pdf"}),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},i&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),u&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),x&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:c},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:h,disabled:v},"Export"))))},Y=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState(!1),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(""),m=l||u||i,o="export-modal",c=[{extension:"YAML",description:"best for IBM managed cloud"},{extension:"BAR",description:"best for integration server"}];a.useEffect(()=>{s||_(c[0].extension)},[s]);const h=()=>{t(!1),p(!1),f(!1)},k=async()=>{C(!0),await y(1e3),p(!0),C(!1)},v=l;return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",onClose:h},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:h}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement(I,{legendText:"Choose an export format"},e.createElement(P,{orientation:"vertical",onChange:r=>_(r),valueSelected:x,name:"extensions","aria-label":"extensions"},c.map(r=>e.createElement(R,{key:r.extension,id:r.extension,value:r.extension,labelText:`${r.extension} (${r.description})`,"data-modal-primary-focus":!0})))),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},l&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),i&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),u&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:h},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:k,disabled:v},"Export"))))},b=V.bind({});b.args={};const E=X.bind({});E.args={};const g=Y.bind({});g.args={};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [name, setName] = useState('Sample02.pdf');
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const primaryButtonDisabled = loading || !name;
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" preventCloseOnClickOutside onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <TextInput labelText="File name" value={name} onChange={evt => setName(evt.target.value)} />}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...b.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [name, setName] = useState('Sample02.pdf');
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const hasInvalidExtension = () => {
    let validExtensions = ['pdf'];
    if (!validExtensions || !validExtensions.length) {
      return false;
    }
    if (!name.includes('.')) {
      return true;
    }
    const ext = name.split('.').pop();
    if (!validExtensions.includes(ext)) {
      return true;
    }
    return false;
  };
  const primaryButtonDisabled = loading || !name || hasInvalidExtension();
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <p className={\`\${blockClass}__body\`}>
                File must be exported in a PDF format.
              </p>}
            {!submitted && <TextInput labelText="File name" value={name} onChange={evt => setName(evt.target.value)} invalid={hasInvalidExtension()} invalidText="File must have valid extension .pdf" />}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...E.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const [extension, setExtension] = useState('');
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const preformattedExtensions = [{
    extension: 'YAML',
    description: 'best for IBM managed cloud'
  }, {
    extension: 'BAR',
    description: 'best for integration server'
  }];
  useEffect(() => {
    if (!isOpen) {
      setExtension(preformattedExtensions[0].extension);
    }
  }, [isOpen]);
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const primaryButtonDisabled = loading;
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <FormGroup legendText="Choose an export format">
                <RadioButtonGroup orientation="vertical" onChange={value => setExtension(value)} valueSelected={extension} name="extensions" aria-label="extensions">
                  {preformattedExtensions.map(o => <RadioButton key={o.extension} id={o.extension} value={o.extension} labelText={\`\${o.extension} (\${o.description})\`} data-modal-primary-focus />)}
                </RadioButtonGroup>
              </FormGroup>}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...g.parameters?.docs?.source}}};const qt=["Standard","WithExtensionValidation","WithPreformattedExtensions"];export{b as Standard,E as WithExtensionValidation,g as WithPreformattedExtensions,qt as __namedExportsOrder,F as default};
//# sourceMappingURL=ExportModal.stories-DpPLQs5W.js.map
