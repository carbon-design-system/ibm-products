{"version":3,"file":"usePresence-CR1b5qhP.js","sources":["../../src/global/js/hooks/usePresence.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2025, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect, useState, RefObject } from 'react';\n\n/**\n * Used as a replacement for AnimatePresence from framer-motion,\n * this hook will return a boolean value to let the component\n * calling this hook to know whether it should render or not.\n * This solves a pain point around handling unmounting of components\n * in React that should also include an exit animation.\n *\n * @param open The open value to the component using this hook\n * @param ref The ref to the element that contains the animation this hook will be listening for\n * @param animationName The animation that will be listened for, if event.animationName equals the \n * animationName value provided it means that the exit animation has completed and shouldRender\n * should be updated to false. If a separate animation is used for reduced motion cases, it should\n * be conditionally passed as the `animationName`.\n * @returns A boolean value so the component using this hook knows when it should render it's contents\n * \n * @example\n * ```typescript\n * const exitAnimationName = shouldReduceMotion\n    ? 'reduced-animation-name'\n    : 'standard-animation-name';\n * const { shouldRender } = usePresence(open, componentRef, exitAnimationName);\n * ```\n */\nexport function usePresence(\n  open: boolean,\n  ref: RefObject<HTMLElement>,\n  animationName: string\n) {\n  const [shouldRender, setShouldRender] = useState(open);\n  useEffect(() => {\n    const handleAnimationEnd = (event: AnimationEvent) => {\n      if (!open && event.animationName === animationName) {\n        setShouldRender(false);\n      }\n    };\n    if (open) {\n      setShouldRender(true);\n    }\n    if (ref?.current) {\n      ref?.current.addEventListener('animationend', handleAnimationEnd);\n    }\n\n    const animatedRef = ref?.current;\n    return () => {\n      if (animatedRef) {\n        animatedRef.removeEventListener('animationend', handleAnimationEnd);\n      }\n    };\n  }, [open, setShouldRender, ref, animationName]);\n  return { shouldRender };\n}\n"],"names":["usePresence","open","ref","animationName","shouldRender","setShouldRender","useState","useEffect","handleAnimationEnd","event","animatedRef"],"mappings":"yCAgCO,SAASA,EACdC,EACAC,EACAC,EACA,CACA,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAAA,SAASL,CAAI,EACrDM,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAsBC,GAA0B,CAChD,CAACR,GAAQQ,EAAM,gBAAkBN,GACnCE,EAAgB,EAAK,CAEzB,EACIJ,GACFI,EAAgB,EAAI,EAElBH,GAAK,SACPA,GAAK,QAAQ,iBAAiB,eAAgBM,CAAkB,EAGlE,MAAME,EAAcR,GAAK,QACzB,MAAO,IAAM,CACPQ,GACFA,EAAY,oBAAoB,eAAgBF,CAAkB,CAEtE,CACF,EAAG,CAACP,EAAMI,EAAiBH,EAAKC,CAAa,CAAC,EACvC,CAAE,aAAAC,CAAA,CACX"}