import{u as V,c as _,e as B,_ as L,at as de,P as t,g as ie,r as $,b2 as He,l as K}from"./iframe-BbTYfv9-.js";import{i as k}from"./MultiSelect-BQTbEAvY.js";import{s as C,g as U,h as G,e as J,T as Oe,d as ve,a as Pe,c as De,b as _e}from"./TableRow-BRMSMudN.js";import{A as ue}from"./index-DxihRps1.js";import{c as Le,b as Ke,a as qe,T as Ve,d as Me,e as ze}from"./TableToolbar-BaEWHkeg.js";import{r as F}from"./requiredIfGivenPropIsTruthy-C6rAip-Q.js";import{i as j}from"./utils-C-ow7gcy.js";import{T as ke}from"./TableSelectRow-C79cZLNP.js";import{O as Fe}from"./OverflowMenuItem-BH5I5zXc.js";import{T as je,a as We}from"./TableToolbarSearch-Bmbg6jK6.js";import{O as Ue}from"./index-DxyAS3QW.js";import{S as Ge}from"./bucket-16-Bdv0o6Pm.js";const q=(s,a)=>`${s}:${a}`,Z=(s,a,c="en")=>{if(s===null&&(s=""),a===null&&(a=""),typeof s=="number"&&typeof a=="number")return s-a;if(typeof s=="string"&&typeof a=="string")return W(s,a,c);const n=s?.props?.children,d=a?.props?.children;return typeof n=="string"&&typeof d=="string"?W(n,d,c):W(String(s),String(a),c)},W=(s,a,c="en")=>{const n=!isNaN(parseFloat(s))&&!isNaN(parseFloat(a));return s.localeCompare(a,c,{numeric:n})},Ze=({rowIds:s,cellsById:a,sortDirection:c,key:n,locale:d="en",sortRow:r=Je})=>s.slice().sort((u,i)=>{const T=a[q(u,n)],m=a[q(i,n)];return r(T?.value,m?.value,{key:n,sortDirection:c,sortStates:C,locale:d,compare:Z,rowIds:[u,i]})}),Je=(s,a,{sortDirection:c,sortStates:n,locale:d})=>c===n.ASC?Z(s,a,d):Z(a,s,d),Qe=C.NONE,Xe=(s,a,c)=>{if(s===a)switch(c){case C.NONE:return C.ASC;case C.ASC:return C.DESC;case C.DESC:return C.NONE}return C.ASC},le=(s,a,{key:c})=>{const{sortDirection:n,sortHeaderKey:d}=a,r=Xe(c,d??"",n);return be(s,a,c,r)},be=({locale:s,sortRow:a},{rowIds:c,cellsById:n,initialRowOrder:d},r,u)=>{const i=u!==C.NONE?Ze({rowIds:c,cellsById:n,sortDirection:u,key:r,locale:s,sortRow:a}):d;return{sortHeaderKey:r,sortDirection:u,rowIds:i}},Ye=(s,a,c={})=>{const{rowsById:n}=c,d=new Array(s.length),r={},u={};return s.forEach((i,T)=>{d[T]=i.id;const{id:m,isSelected:H=!1,isExpanded:O=!1,disabled:y=!1}=i;r[m]={id:m,isSelected:H,isExpanded:O,disabled:y,cells:new Array(a.length)},n&&n[i.id]!==void 0&&(r[i.id].isSelected=n[i.id].isSelected,r[i.id].isExpanded=n[i.id].isExpanded),a.forEach(({key:E,slug:N,decorator:v},p)=>{const I=q(i.id,E);u[I]={id:I,value:i[E],isEditable:!1,isEditing:!1,isValid:!0,errors:null,hasAILabelHeader:!!(N||v?.type===ue),info:{header:E}},r[i.id].cells[p]=I})}),{rowIds:d,rowsById:r,cellsById:u}},re=(s,a)=>{const{rowIds:c,rowsById:n,cellsById:d}=Ye(s.rows,s.headers,a),r={rowIds:c,rowsById:n,cellsById:d,sortDirection:a.sortDirection||Qe,sortHeaderKey:a.sortHeaderKey||null,initialRowOrder:c.slice(),filterInputValue:a.filterInputValue||null,shouldShowBatchActions:a.shouldShowBatchActions||!1,isExpandedAll:!1};if(a.sortDirection&&a.sortHeaderKey){const{rowIds:u}=be(s,r,a.sortHeaderKey,a.sortDirection);r.rowIds=u}return r.isExpandedAll=r.rowIds.every(u=>r.rowsById[u].isExpanded===!0),r},ce=(s,a,c)=>s.map(n=>({...a[n],cells:a[n].cells.map(d=>c[d])})),et=({rowIds:s,headers:a,cellsById:c,inputValue:n,getCellId:d})=>{const r=n.trim().toLowerCase();return r?s.filter(u=>a.some(({key:i})=>{const T=d(u,i),m=c[T];return typeof m.value=="boolean"?!1:String(m.value).toLowerCase().includes(r)})):s},pe=({["aria-controls"]:s,["aria-label"]:a,ariaLabel:c,className:n,enableExpando:d,enableToggle:r,id:u="expand",isExpanded:i,onExpand:T,expandIconDescription:m,children:H,...O})=>{const y=V(),E=_(`${y}--table-expand`,n),N=i?"collapsed":void 0;return B.createElement("th",L({scope:"col",className:E,"data-previous-value":N,id:u},O),d||r?B.createElement("button",{type:"button",className:`${y}--table-expand__button`,onClick:T,title:m,"aria-label":c||a,"aria-expanded":i,"aria-controls":s},B.createElement(de,{className:`${y}--table-expand__svg`,"aria-label":m})):null,H)};pe.propTypes={"aria-controls":t.string,"aria-label":t.string,ariaLabel:t.string,children:t.node,className:t.string,enableExpando:ie(t.bool),enableToggle:t.bool,expandIconDescription:t.string,id:t.string,isExpanded:F("enableToggle",t.bool),onExpand:t.oneOfType([F("enableExpando",t.func),F("enableToggle",t.func)])};const Q=$.forwardRef(({["aria-controls"]:s,["aria-label"]:a,ariaLabel:c,className:n,children:d,isExpanded:r,onExpand:u,expandIconDescription:i,isSelected:T,expandHeader:m="expand",...H},O)=>{const y=V();let E;const N=$.Children.toArray(d).map(R=>{if(j(R,U))return R.props.slug&&(E=!0),R;if(j(R,G))return j(R.props.decorator,ue)&&(E=!0),R}),v=$.Children.toArray(d).map(R=>{if($.isValidElement(R)&&R.type!==U&&R.type!==G)return R}),p=_({[`${y}--parent-row`]:!0,[`${y}--expandable-row`]:r,[`${y}--data-table--selected`]:T,[`${y}--data-table--slug-row ${y}--data-table--ai-label-row`]:E},n),I=r?"collapsed":void 0;return B.createElement("tr",L({},H,{ref:O,className:p,"data-parent-row":!0}),N,B.createElement(J,{className:`${y}--table-expand`,"data-previous-value":I,headers:m},B.createElement("button",{type:"button",className:`${y}--table-expand__button`,onClick:u,title:i,"aria-label":c||a,"aria-expanded":r,"aria-controls":s},B.createElement(de,{className:`${y}--table-expand__svg`,"aria-label":i}))),v)});Q.propTypes={"aria-controls":t.string,"aria-label":t.string,ariaLabel:t.string,children:t.node,className:t.string,expandHeader:t.string,expandIconDescription:t.string,isExpanded:t.bool,isSelected:t.bool,onExpand:t.func.isRequired};Q.displayName="TableExpandRow";const we=({className:s,children:a,colSpan:c,...n})=>{const d=$.useRef(null),r=V(),u=_(`${r}--expandable-row`,s),i=T=>{if(d&&d.current&&d.current.previousElementSibling){const m=d.current.previousElementSibling;T==="enter"?m.classList.add(`${r}--expandable-row--hover`):m.classList.remove(`${r}--expandable-row--hover`)}};return B.createElement("tr",L({ref:d,onMouseEnter:()=>i("enter"),onMouseLeave:()=>i("leave")},n,{className:u,"data-child-row":!0}),B.createElement(J,{colSpan:c},B.createElement("div",{className:`${r}--child-row-inner-container`},a)))};we.propTypes={children:t.node,className:t.string,colSpan:t.number.isRequired};const tt=$.forwardRef,X=tt((s,a)=>{const{children:c,...n}=s;return B.createElement(Fe,L({ref:a,itemText:c},n))});X.displayName="TableToolbarAction";X.propTypes={children:t.node,className:t.string,onClick:t.func.isRequired};const at="Settings",fe=({className:s,renderIcon:a=Ge,iconDescription:c=at,children:n,menuOptionsClass:d,...r})=>{const u=V(),i=_(s,`${u}--toolbar-action ${u}--overflow-menu`),T=_(d,`${u}--toolbar-action__menu`);return B.createElement(Ue,L({renderIcon:a,className:i,title:c,iconDescription:c,menuOptionsClass:T,flipped:!0},r),n)};fe.propTypes={children:t.node.isRequired,className:t.string,iconDescription:t.string,menuOptionsClass:t.string,renderIcon:t.oneOfType([t.func,t.object])};const st=He(),S={"carbon.table.row.expand":"carbon.table.row.expand","carbon.table.row.collapse":"carbon.table.row.collapse","carbon.table.all.expand":"carbon.table.all.expand","carbon.table.all.collapse":"carbon.table.all.collapse","carbon.table.all.select":"carbon.table.all.select","carbon.table.all.unselect":"carbon.table.all.unselect","carbon.table.row.select":"carbon.table.row.select","carbon.table.row.unselect":"carbon.table.row.unselect"},ot={[S["carbon.table.all.expand"]]:"Expand all rows",[S["carbon.table.all.collapse"]]:"Collapse all rows",[S["carbon.table.row.expand"]]:"Expand current row",[S["carbon.table.row.collapse"]]:"Collapse current row",[S["carbon.table.all.select"]]:"Select all rows",[S["carbon.table.all.unselect"]]:"Unselect all rows",[S["carbon.table.row.select"]]:"Select row",[S["carbon.table.row.unselect"]]:"Unselect row"},nt=s=>ot[s],w=s=>{const{children:a,filterRows:c=et,headers:n,render:d,translateWithId:r=nt,size:u,isSortable:i,useZebraStyles:T,useStaticWidth:m,stickyHeader:H,overflowMenuOnHover:O,experimentalAutoAlign:y,radio:E,rows:N}=s,v=$.useMemo(()=>st(),[]),[p,I]=$.useState(()=>({...re(s,{}),isExpandedAll:!1}));$.useEffect(()=>{const e=N.map(g=>g.id),o=n.map(g=>g.key),l=!k(e,p.rowIds),b=Array.from(new Set(Object.keys(p.cellsById).map(g=>g.split(":")[1]))),x=!k(o,b),h=p.rowIds.map(g=>{const A=p.rowsById[g];return{id:A.id,disabled:A.disabled,isExpanded:A.isExpanded,isSelected:A.isSelected}}),f=!k(N,h);(l||x||f)&&I(g=>re(s,g))},[n,N]);const R=({header:e,onClick:o,isSortable:l=i,...b})=>{const{sortDirection:x,sortHeaderKey:h}=p,{key:f,slug:g,decorator:A}=e;return{...b,key:f,sortDirection:x,isSortable:l,isSortHeader:h===f,slug:g,decorator:A,onClick:D=>{const ne=le(s,p,{key:f});I($e=>({...$e,...ne})),o&&xe(o,{sortHeaderKey:f,sortDirection:ne.sortDirection})(D)}}},me=({onClick:e,onExpand:o,...l}={})=>{const{isExpandedAll:b,rowIds:x,rowsById:h}=p,f=b||x.every(D=>h[D].isExpanded),g=f?S["carbon.table.all.collapse"]:S["carbon.table.all.expand"],A=[se,o];return e&&A.push(he(e,{isExpanded:f})),{...l,"aria-label":r(g),"aria-controls":x.map(D=>`${P()}-expanded-row-${D}`).join(" "),isExpanded:f,onExpand:K(A),id:`${P()}-expand`}},xe=(e,o)=>l=>e(l,o),he=(e,o)=>l=>e(l,o),ge=({row:e,onClick:o,...l})=>{const b=e.isExpanded?S["carbon.table.row.collapse"]:S["carbon.table.row.expand"];return{...l,key:e.id,onClick:o,onExpand:K([ae(e.id),o]),isExpanded:e.isExpanded,"aria-label":r(b),"aria-controls":`${P()}-expanded-row-${e.id}`,isSelected:e.isSelected,disabled:e.disabled,expandHeader:`${P()}-expand`}},ye=({row:e,...o})=>({...o,id:`${P()}-expanded-row-${e.id}`}),Se=({onClick:e,row:o,...l}={})=>{if(o){const A=o.isSelected?S["carbon.table.row.unselect"]:S["carbon.table.row.select"];return{...l,checked:o.isSelected,onSelect:K([te(o.id),e]),id:`${P()}__select-row-${o.id}`,name:`select-row-${v}`,"aria-label":r(A),disabled:o.disabled,radio:E}}const b=p.rowIds.length,x=M.length,h=b>0&&x===b,f=b>0&&x>0&&x!==b,g=h||f?S["carbon.table.all.unselect"]:S["carbon.table.all.select"];return{...l,"aria-label":r(g),checked:h,id:`${P()}__select-all`,indeterminate:f,name:`select-all-${v}`,onSelect:K([ee,e])}},Te=e=>({...e,size:u==="xs"||u==="sm"?"sm":void 0}),Ie=e=>{const{shouldShowBatchActions:o}=p,l=M.length;return{onSelectAll:void 0,totalCount:p.rowIds.length,...e,shouldShowBatchActions:o&&l>0,totalSelected:l,onCancel:Be}},Ee=()=>({useZebraStyles:T,size:u??"lg",isSortable:i,useStaticWidth:m,stickyHeader:H,overflowMenuOnHover:O??!1,experimentalAutoAlign:y}),Re=()=>({stickyHeader:H,useStaticWidth:m}),Ae=({cell:{hasAILabelHeader:e,id:o},...l})=>({...l,hasAILabelHeader:e,key:o}),M=p.rowIds.filter(e=>{const o=p.rowsById[e];return o.isSelected&&!o.disabled}),z=typeof p.filterInputValue=="string"?c({cellsById:p.cellsById,getCellId:q,headers:n,inputValue:p.filterInputValue,rowIds:p.rowIds}):p.rowIds,P=()=>`data-table-${v}`,Y=(e,o)=>{const{rowIds:l}=e,b=l.length!==z.length;return{rowsById:l.reduce((x,h)=>{const f={...e.rowsById[h]};return!f.disabled&&(!b||z.includes(h))&&(f.isSelected=o),x[h]=f,x},{})}},Be=()=>{I(e=>({...e,shouldShowBatchActions:!1,...Y(e,!1)}))},ee=()=>{I(e=>{const{rowsById:o}=e,l=!Object.values(o).filter(b=>b.isSelected&&!b.disabled).length;return{...e,shouldShowBatchActions:l,...Y(e,l)}})},te=e=>()=>{I(o=>{const l=o.rowsById[e];if(E){const h=Object.entries(o.rowsById).reduce((f,[g,A])=>(f[g]={...A,isSelected:!1},f),{});return{...o,shouldShowBatchActions:!1,rowsById:{...h,[e]:{...h[e],isSelected:!h[e].isSelected}}}}const b=o.rowIds.filter(h=>o.rowsById[h].isSelected).length,x=l.isSelected?b-1:b+1;return{...o,shouldShowBatchActions:!l.isSelected||x>0,rowsById:{...o.rowsById,[e]:{...l,isSelected:!l.isSelected}}}})},ae=e=>()=>{I(o=>{const l=o.rowsById[e],{isExpandedAll:b}=o;return{...o,isExpandedAll:l.isExpanded?!1:b,rowsById:{...o.rowsById,[e]:{...l,isExpanded:!l.isExpanded}}}})},se=()=>{I(e=>{const{rowIds:o,isExpandedAll:l}=e;return{...e,isExpandedAll:!l,rowsById:o.reduce((b,x)=>(b[x]={...e.rowsById[x],isExpanded:!l},b),{})}})},Ce=e=>()=>{I(o=>{const l=le(s,o,{key:e});return{...o,...l}})},Ne=(e,o)=>{const l=o||e.target?.value;I(b=>({...b,filterInputValue:l}))},oe={rows:ce(z,p.rowsById,p.cellsById),headers:n,selectedRows:ce(M,p.rowsById,p.cellsById),getHeaderProps:R,getExpandHeaderProps:me,getRowProps:ge,getExpandedRowProps:ye,getSelectionProps:Se,getToolbarProps:Te,getBatchActionProps:Ie,getTableProps:Ee,getTableContainerProps:Re,getCellProps:Ae,onInputChange:Ne,sortBy:e=>Ce(e)(),selectAll:ee,selectRow:e=>te(e)(),expandRow:e=>ae(e)(),expandAll:se,radio:E};return typeof d<"u"?d(oe):typeof a<"u"?a(oe):null};w.Table=Oe;w.TableActionList=Le;w.TableBatchAction=Ke;w.TableBatchActions=qe;w.TableBody=ve;w.TableCell=J;w.TableContainer=Ve;w.TableDecoratorRow=G;w.TableExpandHeader=pe;w.TableExpandRow=Q;w.TableExpandedRow=we;w.TableHead=Pe;w.TableHeader=De;w.TableRow=_e;w.TableSelectAll=Me;w.TableSelectRow=ke;w.TableSlugRow=U;w.TableToolbar=ze;w.TableToolbarAction=X;w.TableToolbarContent=je;w.TableToolbarSearch=We;w.TableToolbarMenu=fe;w.propTypes={children:t.func,experimentalAutoAlign:t.bool,filterRows:t.func,headers:t.arrayOf(t.shape({key:t.string.isRequired,header:t.node.isRequired})).isRequired,isSortable:t.bool,locale:t.string,overflowMenuOnHover:t.bool,radio:t.bool,render:ie(t.func),rows:t.arrayOf(t.shape({id:t.string.isRequired,disabled:t.bool,isSelected:t.bool,isExpanded:t.bool})).isRequired,size:t.oneOf(["xs","sm","md","lg","xl"]),sortRow:t.func,stickyHeader:t.bool,translateWithId:t.func,useStaticWidth:t.bool,useZebraStyles:t.bool};export{w as D,pe as T,Q as a,we as b,X as c,fe as d};
//# sourceMappingURL=DataTable-CQnwLUF2.js.map
