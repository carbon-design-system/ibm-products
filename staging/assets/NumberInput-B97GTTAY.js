import{b as A,i as Ce,d as g,_ as Te,P as e,g as Y}from"./index-Ccw_5OKp.js";import{e as r,r as _}from"./index-DtHxqM--.js";import{u as Fe}from"./useNormalizedInputProps-Cy1SYPx-.js";import{F as Ve}from"./FormContext-C4Nuixum.js";import{c as Le}from"./clamp--00YEiB8.js";import{T as re}from"./Text-CPocCdE2.js";import{S as Se}from"./bucket-16-BNzuCNgJ.js";import{b as Pe}from"./bucket-0-BTuMVGfh.js";var Z,ee;const ne={"increment.number":"increment.number","decrement.number":"decrement.number"},De={[ne["increment.number"]]:"Increment number",[ne["decrement.number"]]:"Decrement number"},ze=r.forwardRef(function(p,d){var Q,X;const{allowEmpty:l=!1,className:s,decorator:i,disabled:c=!1,disableWheel:O=!1,defaultValue:y=0,helperText:R="",hideLabel:W=!1,hideSteppers:k,iconDescription:x,id:T,label:ie,invalid:se=!1,invalidText:oe,light:ue,max:F,min:V,onChange:E,onClick:L,onKeyUp:de,readOnly:b,size:B="md",slug:f,step:$=1,translateWithId:K=n=>De[n],warn:ce=!1,warnText:me="",value:v,...w}=p,t=A(),{isFluid:h}=_.useContext(Ve),[pe,M]=_.useState(!1),[S,N]=_.useState(()=>v!==void 0?v:y!==void 0?y:l?"":0),[be,fe]=_.useState(v),I=_.useRef(null),ve=Ce([d,I]),he=g({[`${t}--number`]:!0,[`${t}--number--helpertext`]:!0,[`${t}--number--readonly`]:b,[`${t}--number--light`]:ue,[`${t}--number--nolabel`]:W,[`${t}--number--nosteppers`]:k,[`${t}--number--${B}`]:B}),_e=Ae({allowEmpty:l,invalid:se,value:S,max:F,min:V}),a=Fe({id:T,readOnly:b,disabled:c,invalid:!_e,invalidText:oe,warn:ce,warnText:me}),[U,q]=[K("increment.number"),K("decrement.number")],ge=g(`${t}--number__input-wrapper`,{[`${t}--number__input-wrapper--warning`]:a.warn,[`${t}--number__input-wrapper--slug`]:f,[`${t}--number__input-wrapper--decorator`]:i}),ye=g({[`${t}--number__invalid`]:a.invalid||a.warn,[`${t}--number__invalid--warning`]:a.warn});v!==be&&(N(v),fe(v));let C;a.invalid&&(C=a.invalidId),a.warn&&(C=a.warnId),a.validation||(C=R?a.helperId:void 0);function $e(n){if(c)return;const m={value:l&&n.target.value===""?"":Number(n.target.value),direction:S<n.target.value?"up":"down"};N(m.value),E&&E(n,m)}const H=n=>{"type"in n.target&&n.target.type==="button"?M(!1):M(n.type==="focus")},we=g(`${t}--form-item`,{[s]:!!s,[`${t}--number-input--fluid--invalid`]:h&&a.invalid,[`${t}--number-input--fluid--focus`]:h&&pe,[`${t}--number-input--fluid--disabled`]:h&&c}),j=a.icon,G=n=>{const m=n.toString().split(".");return m[1]?m[1].length:0},J=(n,m)=>{if(I.current){const D=Number(I.current.value),xe=m==="up"?D+$:D-$,Ee=Math.max(G(D),G($)),Ne=parseFloat(xe.toFixed(Ee)),Ie=Le(Ne,V??-1/0,F??1/0),z={value:l&&I.current.value===""&&$===0?"":Ie,direction:m};N(z.value),E&&E(n,z),L&&L(n,z)}};let o=r.isValidElement(f??i)?f??i:null;o&&((Q=o.type)==null?void 0:Q.displayName)==="AILabel"&&(o=r.cloneElement(o,{size:"mini"}));let P;return o&&((X=o.type)==null?void 0:X.displayName)==="AILabel"&&(P=o.props.revertActive),_.useEffect(()=>{!P&&f&&y&&N(y)},[y,P,f]),r.createElement("div",{className:we,onFocus:h?H:void 0,onBlur:h?H:void 0},r.createElement("div",{className:he,"data-invalid":a.invalid?!0:void 0},r.createElement(ae,{disabled:a.disabled,hideLabel:W,id:T,label:ie}),r.createElement("div",{className:ge},r.createElement("input",Te({},w,{"data-invalid":a.invalid?!0:void 0,"aria-invalid":a.invalid,"aria-describedby":C,"aria-readonly":b,disabled:a.disabled,ref:ve,id:T,max:F,min:V,onClick:L,onChange:$e,onKeyUp:de,onFocus:n=>{O&&n.target.addEventListener("wheel",te),w.onFocus&&w.onFocus(n)},onBlur:n=>{O&&n.target.removeEventListener("wheel",te),w.onBlur&&w.onBlur(n)},pattern:"[0-9]*",readOnly:b,step:$,type:"number",value:S})),f?o:i?r.createElement("div",{className:`${t}--number__input-inner-wrapper--decorator`},o):"",j?r.createElement(j,{className:ye}):null,!k&&r.createElement("div",{className:`${t}--number__controls`},r.createElement("button",{"aria-label":q||x,className:`${t}--number__control-btn down-icon`,disabled:c||b,onClick:n=>J(n,"down"),tabIndex:-1,title:q||x,type:"button"},Z||(Z=r.createElement(Se,{className:"down-icon"}))),r.createElement("div",{className:`${t}--number__rule-divider`}),r.createElement("button",{"aria-label":U||x,className:`${t}--number__control-btn up-icon`,disabled:c||b,onClick:n=>J(n,"up"),tabIndex:-1,title:U||x,type:"button"},ee||(ee=r.createElement(Pe,{className:"up-icon"}))),r.createElement("div",{className:`${t}--number__rule-divider`}))),h&&r.createElement("hr",{className:`${t}--number-input__divider`}),a.validation?a.validation:r.createElement(le,{id:a.helperId,disabled:c,description:R})))});ze.propTypes={allowEmpty:e.bool,className:e.string,decorator:e.node,defaultValue:e.oneOfType([e.number,e.string]),disableWheel:e.bool,disabled:e.bool,helperText:e.node,hideLabel:e.bool,hideSteppers:e.bool,iconDescription:e.string,id:e.string.isRequired,invalid:e.bool,invalidText:e.node,label:e.node,light:Y(e.bool),max:e.number,min:e.number,onChange:e.func,onClick:e.func,onKeyUp:e.func,readOnly:e.bool,size:e.oneOf(["sm","md","lg"]),slug:Y(e.node),step:e.number,translateWithId:e.func,value:e.oneOfType([e.number,e.string]),warn:e.bool,warnText:e.node};const ae=u=>{let{disabled:p,id:d,hideLabel:l,label:s}=u;const i=A(),c=g({[`${i}--label`]:!0,[`${i}--label--disabled`]:p,[`${i}--visually-hidden`]:l});return s?r.createElement(re,{as:"label",htmlFor:d,className:c},s):null};ae.propTypes={disabled:e.bool,hideLabel:e.bool,id:e.string,label:e.node};function le(u){let{disabled:p,description:d,id:l}=u;const s=A(),i=g(`${s}--form__helper-text`,{[`${s}--form__helper-text--disabled`]:p});return d?r.createElement(re,{as:"div",id:l,className:i},d):null}le.propTypes={description:e.node,disabled:e.bool,id:e.string};function Ae(u){let{allowEmpty:p,invalid:d,value:l,max:s,min:i}=u;return d?!1:l===""?p:!(l>s||l<i)}function te(u){u.preventDefault()}export{ze as N};
