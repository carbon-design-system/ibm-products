import{r as a,e as t,c as w,p as U,P as e,L as be,N as Te}from"./iframe-DoONWhft.js";import{T as D}from"./Tag-DBgKAnsH.js";import{D as Z}from"./DismissibleTag-v3qU7Vsb.js";import{C as we,M as Se,a as Ce}from"./ComposedModal-CO73icGN.js";import{S as _e}from"./Search-DOrlbM9o.js";import{p as Ne}from"./props-helper-CgHaYMy-.js";import{u as qe}from"./usePortalTarget-CNTXyWag.js";import{L as Ee}from"./Link-Ifh5DqEn.js";import{O as ee}from"./OperationalTag-CUpvV-kh.js";import{u as ke}from"./useClickOutside-DBu9ER0T.js";import{g as $e}from"./devtools-Bope-Kcp.js";import{u as te}from"./useResizeObserver-D1Iv75rh.js";const Oe="TagSetModal",x=`${U.prefix}--tag-set-modal`,ae={modalAriaLabel:"List of all tags",searchLabel:""},I=({allTags:m,className:E,title:V,modalAriaLabel:R=ae.modalAriaLabel,onClose:g,open:S,portalTarget:n,searchLabel:h=ae.searchLabel,searchPlaceholder:L,...C})=>{const[y,z]=a.useState([]),[_,N]=a.useState(""),v=qe(n);a.useEffect(()=>{let s=[];if(S)if(_===""&&m)s=m?.slice(0);else{const c=_.toLocaleLowerCase();m?.forEach(f=>{const u=f["data-search"]?.toLocaleLowerCase()?.indexOf(c),d=f.label?.toLocaleLowerCase()?.indexOf(c);(u>-1||d>-1)&&s.push(f)})}z(s)},[m,S,_]);const o=s=>{N(s.target.value||"")};return v(t.createElement(we,{...C,containerClassName:`${x}__container`,className:w(E,`${x}`),size:"sm",open:S,onClose:g},t.createElement(Se,{className:`${x}__header`,closeModal:g,title:V},t.createElement(_e,{"data-modal-primary-focus":!0,className:`${x}__search`,labelText:h,placeholder:L,onChange:o,size:"lg"})),t.createElement(Ce,{className:`${x}__body`,hasForm:!0,hasScrollingContent:!0,"aria-label":R},y.map(({label:s,...c},f)=>t.createElement(D,{...c,key:`all-tags-${f}`},s)),t.createElement("div",{className:`${x}__fade`}))))};I.propTypes={allTags:e.arrayOf(e.shape({...Ne(D.propTypes,"filter"),label:e.string.isRequired})),className:e.string,onClose:e.func,open:e.bool,portalTarget:e.node,searchLabel:e.string,searchPlaceholder:e.string,title:e.string};I.displayName=Oe;const Ae="TagSetOverflow",i=`${U.prefix}--tag-set-overflow`,Me={allTagsModalSearchThreshold:10},H=t.forwardRef(({allTagsModalSearchThreshold:m=Me.allTagsModalSearchThreshold,onOverflowClick:E,className:V,onShowAllClick:R,overflowAlign:g="bottom",overflowAutoAlign:S,overflowTags:n,overflowType:h,showAllTagsLabel:L,popoverOpen:C=!1,setPopoverOpen:y,size:z,..._},N)=>{const v=a.useRef(null),o=a.useRef(null);ke(N||v,()=>{C&&y(!1)});const s=u=>{u.stopPropagation(),u.preventDefault(),y(!1),R()},c=u=>{const{key:d}=u;d==="Escape"&&y(!1)},f=()=>{E?E(n):y(!C)};return E?t.createElement("span",{..._,"aria-hidden":n.length===0,className:w(`${i}`,{[`${i}--hidden`]:n.length===0}),ref:N||v},t.createElement(ee,{onClick:()=>f(),className:`${i}__popover-trigger`,size:z,text:`+${n.length}`})):t.createElement("span",{..._,"aria-hidden":n.length===0,className:w(`${i}`,{[`${i}--hidden`]:n.length===0}),ref:N||v},t.createElement(be,{align:g,className:w(V,`${i}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:c,open:C,autoAlign:S},t.createElement(ee,{onClick:()=>y(!C),className:w(`${i}__popover-trigger`),size:z,text:`+${n.length}`}),t.createElement(Te,null,t.createElement("div",{ref:o,className:`${i}__content`},t.createElement("ul",{className:`${i}__tag-list`},n.filter((u,d)=>n.length>m?d<m:d<=m).map((u,d)=>{const b={};if(h==="tag"&&(b.type="high-contrast"),h==="default"&&(b.filter=!1),t.isValidElement(u))return t.createElement("li",{className:w(`${i}__tag-item`,{[`${i}__tag-item--default`]:h==="default",[`${i}__tag-item--tag`]:h==="tag"}),key:d},t.cloneElement(u,b))})),n.length>m&&t.createElement(Ee,{className:`${i}__show-all-tags-link`,href:"",onClick:s,role:"button"},L)))))});H.displayName=Ae;H.propTypes={allTagsModalSearchThreshold:e.number,className:e.string,onOverflowClick:e.func,onShowAllClick:e.func.isRequired,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowTags:e.arrayOf(e.object).isRequired,overflowType:e.oneOf(["default","tag"]),popoverOpen:e.bool,setPopoverOpen:e.func.isRequired,showAllTagsLabel:e.string,size:e.string};H.__docgenInfo={description:"",methods:[],displayName:"TagSetOverflow",props:{allTagsModalSearchThreshold:{required:!1,tsType:{name:"number"},description:"count of overflowTags over which a modal is offered",defaultValue:{value:"10",computed:!1},type:{name:"number"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},onOverflowClick:{required:!1,tsType:{name:"union",raw:"((overFlowTags: ReactNode[]) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"An optional click handler that overrides the default functionality of displaying all tags in a modal",type:{name:"func"}},onShowAllClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"function to execute on clicking show all",type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowTags:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:`@type {Array<any>}
tags shown in overflow`,type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},popoverOpen:{required:!1,tsType:{name:"boolean"},description:"Open state of the popover",defaultValue:{value:"false",computed:!1},type:{name:"bool"}},setPopoverOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:"Setter function for the popoverOpen state value",type:{name:"func"}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link",type:{name:"string"}},size:{required:!1,tsType:{name:"string"},description:"Size of the overflow tag",type:{name:"string"}}}};const oe="TagSet",T=`${U.prefix}--tag-set`,Re=10,le={measurementOffset:0,onOverflowTagChange:()=>{}},B=t.forwardRef(({align:m="start",allTagsModalTarget:E,className:V,maxVisible:R,multiline:g,overflowAutoAlign:S,overflowAlign:n="bottom",overflowClassName:h,overflowType:L="default",allTagsModalAriaLabel:C,allTagsModalTitle:y="All tags",allTagsModalSearchLabel:z="Search all tags",allTagsModalSearchPlaceholderText:_="Search all tags",showAllTagsLabel:N="View all tags",onOverflowClick:v,tags:o,containingElementRef:s,measurementOffset:c=le.measurementOffset,onOverflowTagChange:f=le.onOverflowTagChange,...u},d)=>{const[b,G]=a.useState(3),[se,re]=a.useState([]),[ie,ue]=a.useState([]),[me,K]=a.useState(!1),pe=a.useRef(null),W=d||pe,Y=a.useRef(null),ce=a.useRef(null),[k,fe]=a.useState([]),j=a.useRef(null),[P,de]=a.useState(0),[J,Q]=a.useState(!1),ge=()=>{K(!0)};a.useEffect(()=>{const l=R||o?.length||0;de(l)},[R,o]),a.useEffect(()=>{const l=[];ue(o&&o.length>0?o.map(({label:r,id:$,filter:p,onClose:q,...O},A)=>t.createElement("div",{key:A,className:`${T}__sizing-tag`,ref:M=>{M!=null&&(l[A]=M)}},typeof q=="function"||p?t.createElement(Z,{...O,"data-original-id":$,text:r}):t.createElement(D,{...O,"data-original-id":$},r))):[]),fe(l)},[o]);const X=a.useCallback((l,r)=>{l?.(),r<=b-1&&Q(!1)},[b]);a.useEffect(()=>{let l="md",r=o&&o.length>0?o.map(({label:p,onClose:q,filter:O,...A},M)=>(M==o.length-1&&A.size&&(l=A.size),typeof q=="function"||O?t.createElement(Z,{...A,key:`displayed-tag-${M}`,onClose:()=>X(q,M),text:p}):t.createElement(D,{...A,key:`displayed-tag-${M}`},p))):[];const $=r.splice(b,r.length-b);r=r.map((p,q)=>t.createElement("div",{key:q,className:`${T}__displayed-tag`},p)),r.push(t.createElement(H,{allTagsModalSearchThreshold:Re,overflowAutoAlign:S,className:h,onShowAllClick:ge,overflowTags:$,overflowAlign:n,overflowType:L,showAllTagsLabel:N,size:l,key:"displayed-tag-overflow",ref:j,popoverOpen:J,onOverflowClick:v,setPopoverOpen:Q})),f?.($),re(r)},[b,n,h,L,N,v,o,f,J,X,S]);const F=a.useCallback(()=>{if(g)return G(P);let l=0;if(k.length>0){const r=typeof s!="function"&&s?.current,$=typeof c=="number"?c:0;let p=r?r.offsetWidth-$:W?.current.offsetWidth;for(const q in k){const O=k[q]?.offsetWidth||0;if(p>=O)p-=O,l+=1;else break}if(l<k.length&&j.current)for(;l>0&&p<j.current.offsetWidth;)l-=1,p+=k[l].offsetWidth}l<1?G(0):G(P?Math.min(l,P):l)},[P,g,k,W,c,s]);a.useEffect(()=>{F()},[F,P,g,k]);const he=()=>{F()},ye=()=>{F()},ve=()=>{K(!1);const l=j.current?.querySelector("button");setTimeout(()=>l?.focus(),0)};return te(Y,ye),te(s||W,he),t.createElement("div",{...u,className:w([T,V]),ref:W,...$e(oe)},t.createElement("div",{className:w([`${T}__space`,`${T}__space--align-${m}`])},t.createElement("div",{className:`${T}__tag-container ${T}__tag-container--hidden`,"aria-hidden":!0,ref:Y},ie),t.createElement("div",{className:w([`${T}__tag-container`,g&&`${T}__tag-container--multiline`]),ref:ce},se)),!v&&t.createElement(I,{allTags:o,open:me,title:y,onClose:ve,modalAriaLabel:C,searchLabel:z,searchPlaceholder:_,portalTarget:E}))}),Le={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},ne=Object.keys(Le);B.types=ne;B.propTypes={align:e.oneOf(["start","center","end"]),allTagsModalAriaLabel:e.string,allTagsModalSearchLabel:e.string,allTagsModalSearchPlaceholderText:e.string,allTagsModalTarget:e.node,allTagsModalTitle:e.string,className:e.string,containingElementRef:e.object,maxVisible:e.number,measurementOffset:e.number,multiline:e.bool,onOverflowClick:e.func,onOverflowTagChange:e.func,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowClassName:e.string,overflowType:e.oneOf(["default","tag"]),showAllTagsLabel:e.string,tags:e.arrayOf(e.shape({...D.propTypes,label:e.string.isRequired,type:e.oneOf(ne)}))};B.displayName=oe;B.__docgenInfo={description:"",methods:[],displayName:"TagSet",props:{align:{required:!1,tsType:{name:"union",raw:"'start' | 'center' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'center'"},{name:"literal",value:"'end'"}]},description:"align the Tags displayed by the TagSet. Default start.",defaultValue:{value:"'start'",computed:!1},type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]}},allTagsModalAriaLabel:{required:!1,tsType:{name:"string"},description:"aria label for all tags modal with hasScrollingContent",type:{name:"string"}},allTagsModalSearchLabel:{required:!1,tsType:{name:"string"},description:"label text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalSearchPlaceholderText:{required:!1,tsType:{name:"string"},description:"placeholder text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalTarget:{required:!1,tsType:{name:"ReactNode"},description:"portal target for the all tags modal",type:{name:"node"}},allTagsModalTitle:{required:!1,tsType:{name:"string"},description:"title for the show all modal.",defaultValue:{value:"'All tags'",computed:!1},type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},containingElementRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLElement>",elements:[{name:"HTMLElement"}]},description:`Optional ref for custom resize container to measure available space
Default will measure the available space of the TagSet container itself.`,type:{name:"object"}},maxVisible:{required:!1,tsType:{name:"number"},description:"maximum visible tags",type:{name:"number"}},measurementOffset:{required:!1,tsType:{name:"number"},description:"Specify offset amount for measure available space, only used when `containingElementSelector`\nis also provided",defaultValue:{value:"0",computed:!1},type:{name:"number"}},multiline:{required:!1,tsType:{name:"boolean"},description:"display tags in multiple lines",type:{name:"bool"}},onOverflowClick:{required:!1,tsType:{name:"union",raw:"((overFlowTags: ReactNode[]) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"An optional click handler that overrides the default functionality of displaying all tags in a modal",type:{name:"func"}},onOverflowTagChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ReactNode) => void",signature:{arguments:[{type:{name:"ReactNode"},name:"value"}],return:{name:"void"}}},description:"Handler to get overflow tags",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip. Default center.",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},overflowClassName:{required:!1,tsType:{name:"string"},description:"overflowClassName for the tooltip popup",type:{name:"string"}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link.",defaultValue:{value:"'View all tags'",computed:!1},type:{name:"string"}},tags:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
  /**
   * @deprecated Use the \`onClose\` function instead to render as a DismissibleTag
   */
  filter?: boolean;
} & TagBaseProps`,elements:[{name:"signature",type:"object",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
  /**
   * @deprecated Use the \`onClose\` function instead to render as a DismissibleTag
   */
  filter?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"unknown",required:!1}},{key:"filter",value:{name:"boolean",required:!1},description:"@deprecated Use the `onClose` function instead to render as a DismissibleTag"}]}},{name:"TagBaseProps"}]}],raw:"TagType[]"},description:`The tags to be shown in the TagSet. Each tag is specified as an object
with properties: **label**\\* (required) to supply the tag content, and
other properties will be passed to the Carbon Tag component, such as
**type**, **disabled**, **ref**, **className** , and any other Tag props.

See https://react.carbondesignsystem.com/?path=/docs/components-tag--default`,type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},type:{name:"enum",value:[{value:'"red"',computed:!1},{value:'"magenta"',computed:!1},{value:'"purple"',computed:!1},{value:'"blue"',computed:!1},{value:'"cyan"',computed:!1},{value:'"teal"',computed:!1},{value:'"green"',computed:!1},{value:'"gray"',computed:!1},{value:'"cool-gray"',computed:!1},{value:'"warm-gray"',computed:!1},{value:'"high-contrast"',computed:!1},{value:'"outline"',computed:!1}],required:!1}}}}}},composes:["PropsWithChildren"]};export{B as T};
