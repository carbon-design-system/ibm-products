{"version":3,"file":"Search-Cp-mgmER.js","sources":["../../../../node_modules/@carbon/react/es/components/Search/Search.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2016, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { extends as _extends } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport { Close, Search as Search$1 } from '@carbon/icons-react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useRef, useState } from 'react';\nimport { Escape, Enter, Space } from '../../internal/keyboard/keys.js';\nimport { match } from '../../internal/keyboard/match.js';\nimport { useId } from '../../internal/useId.js';\nimport { usePrefix } from '../../internal/usePrefix.js';\nimport { composeEventHandlers } from '../../tools/events.js';\nimport { useMergedRefs } from '../../internal/useMergedRefs.js';\nimport { deprecate } from '../../prop-types/deprecate.js';\nimport '../FluidForm/FluidForm.js';\nimport { FormContext } from '../FluidForm/FormContext.js';\nimport { noopFn } from '../../internal/noopFn.js';\nimport '../Tooltip/DefinitionTooltip.js';\nimport { Tooltip } from '../Tooltip/Tooltip.js';\n\nvar _Close;\nconst Search = /*#__PURE__*/React.forwardRef(({\n  autoComplete = 'off',\n  className,\n  closeButtonLabelText = 'Clear search input',\n  defaultValue,\n  disabled,\n  isExpanded = true,\n  id,\n  labelText,\n  // @ts-expect-error: deprecated prop\n  light,\n  onChange = () => {},\n  onClear = () => {},\n  onKeyDown,\n  onExpand,\n  placeholder = 'Search',\n  renderIcon,\n  role,\n  size = 'md',\n  type = 'search',\n  value,\n  ...rest\n}, forwardRef) => {\n  const hasPropValue = value || defaultValue ? true : false;\n  const prefix = usePrefix();\n  const {\n    isFluid\n  } = useContext(FormContext);\n  const inputRef = useRef(null);\n  const ref = useMergedRefs([forwardRef, inputRef]);\n  const expandButtonRef = useRef(null);\n  const inputId = useId('search-input');\n  const uniqueId = id || inputId;\n  const searchId = `${uniqueId}-search`;\n  const [hasContent, setHasContent] = useState(hasPropValue || false);\n  const [prevValue, setPrevValue] = useState(value);\n  const searchClasses = cx({\n    [`${prefix}--search`]: true,\n    [`${prefix}--search--sm`]: size === 'sm',\n    [`${prefix}--search--md`]: size === 'md',\n    [`${prefix}--search--lg`]: size === 'lg',\n    [`${prefix}--search--light`]: light,\n    [`${prefix}--search--disabled`]: disabled,\n    [`${prefix}--search--fluid`]: isFluid\n  }, className);\n  const clearClasses = cx({\n    [`${prefix}--search-close`]: true,\n    [`${prefix}--search-close--hidden`]: !hasContent || !isExpanded\n  });\n  if (value !== prevValue) {\n    setHasContent(!!value);\n    setPrevValue(value);\n  }\n  function clearInput() {\n    if (!value && inputRef.current) {\n      inputRef.current.value = '';\n    }\n    if (inputRef.current) {\n      const inputTarget = Object.assign({}, inputRef.current, {\n        value: ''\n      });\n      const syntheticEvent = {\n        bubbles: false,\n        cancelable: false,\n        currentTarget: inputRef.current,\n        defaultPrevented: false,\n        eventPhase: 0,\n        isDefaultPrevented: () => false,\n        isPropagationStopped: () => false,\n        isTrusted: false,\n        nativeEvent: new Event('change'),\n        persist: noopFn,\n        preventDefault: noopFn,\n        stopPropagation: noopFn,\n        target: inputTarget,\n        timeStamp: 0,\n        type: 'change'\n      };\n      onChange(syntheticEvent);\n    }\n    onClear();\n    setHasContent(false);\n    inputRef.current?.focus();\n  }\n  function handleChange(event) {\n    setHasContent(event.target.value !== '');\n  }\n  function handleKeyDown(event) {\n    if (match(event, Escape)) {\n      event.stopPropagation();\n      if (inputRef.current?.value) {\n        clearInput();\n      }\n      // ExpandableSearch closes on escape when isExpanded, focus search activation button\n      else if (onExpand && isExpanded) {\n        expandButtonRef.current?.focus();\n      }\n    }\n  }\n  function handleExpandButtonKeyDown(event) {\n    if (match(event, Enter) || match(event, Space)) {\n      event.stopPropagation();\n      if (onExpand) {\n        onExpand(event);\n      }\n    }\n  }\n  const magnifierButton = /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-labelledby\": onExpand ? searchId : undefined,\n    role: onExpand ? 'button' : undefined,\n    className: `${prefix}--search-magnifier`,\n    onClick: onExpand,\n    onKeyDown: handleExpandButtonKeyDown,\n    tabIndex: onExpand && !isExpanded ? 0 : -1,\n    ref: expandButtonRef,\n    \"aria-expanded\": onExpand && isExpanded ? true : onExpand && !isExpanded ? false : undefined,\n    \"aria-controls\": onExpand ? uniqueId : undefined\n  }, /*#__PURE__*/React.createElement(CustomSearchIcon, {\n    icon: renderIcon\n  }));\n\n  // Wrap magnifierButton in a tooltip if it's expandable\n  const magnifierWithTooltip = onExpand && !isExpanded ? /*#__PURE__*/React.createElement(Tooltip, {\n    className: `${prefix}--search-tooltip ${prefix}--search-magnifier-tooltip`,\n    align: \"top\",\n    label: \"Search\"\n  }, magnifierButton) : magnifierButton;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    role: \"search\",\n    \"aria-label\": placeholder,\n    className: searchClasses\n  }, magnifierWithTooltip, /*#__PURE__*/React.createElement(\"label\", {\n    id: searchId,\n    htmlFor: uniqueId,\n    className: `${prefix}--label`\n  }, labelText), /*#__PURE__*/React.createElement(\"input\", _extends({\n    autoComplete: autoComplete,\n    className: `${prefix}--search-input`,\n    defaultValue: defaultValue,\n    disabled: disabled,\n    role: role,\n    ref: ref,\n    id: uniqueId,\n    onChange: composeEventHandlers([onChange, handleChange]),\n    onKeyDown: composeEventHandlers([onKeyDown, handleKeyDown]),\n    placeholder: placeholder,\n    type: type,\n    value: value,\n    tabIndex: onExpand && !isExpanded ? -1 : undefined\n  }, rest)), /*#__PURE__*/React.createElement(\"button\", {\n    \"aria-label\": closeButtonLabelText,\n    className: clearClasses,\n    disabled: disabled,\n    onClick: clearInput,\n    title: closeButtonLabelText,\n    type: \"button\"\n  }, _Close || (_Close = /*#__PURE__*/React.createElement(Close, null))));\n});\nSearch.displayName = 'Search';\nSearch.propTypes = {\n  /**\n   * Specify an optional value for the `autocomplete` property on the underlying\n   * `<input>`, defaults to \"off\"\n   */\n  autoComplete: PropTypes.string,\n  /**\n   * Specify an optional className to be applied to the container node\n   */\n  className: PropTypes.string,\n  /**\n   * Specify a label to be read by screen readers on the \"close\" button\n   */\n  closeButtonLabelText: PropTypes.string,\n  /**\n   * Optionally provide the default value of the `<input>`\n   */\n  defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  /**\n   * Specify whether the `<input>` should be disabled\n   */\n  disabled: PropTypes.bool,\n  /**\n   * Specify a custom `id` for the input\n   */\n  id: PropTypes.string,\n  /**\n   * Specify whether or not ExpandableSearch should render expanded or not\n   */\n  isExpanded: PropTypes.bool,\n  /**\n   * Provide the label text for the Search icon\n   */\n  labelText: PropTypes.node.isRequired,\n  /**\n   * Specify light version or default version of this control\n   */\n  light: deprecate(PropTypes.bool, 'The `light` prop for `Search` is no longer needed and has ' + 'been deprecated in v11 in favor of the new `Layer` component. It will be moved in the next major release.'),\n  /**\n   * Optional callback called when the search value changes.\n   */\n  onChange: PropTypes.func,\n  /**\n   * Optional callback called when the search value is cleared.\n   */\n  onClear: PropTypes.func,\n  /**\n   * Optional callback called when the magnifier icon is clicked in ExpandableSearch.\n   */\n  onExpand: PropTypes.func,\n  /**\n   * Provide a handler that is invoked on the key down event for the input\n   */\n  onKeyDown: PropTypes.func,\n  /**\n   * Provide an optional placeholder text for the Search.\n   * Note: if the label and placeholder differ,\n   * VoiceOver on Mac will read both\n   */\n  placeholder: PropTypes.string,\n  /**\n   * A component used to render an icon.\n   */\n  renderIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n  /**\n   * Deprecated, since <input type=\"search\"> already provides correct semantics.\n   * Specify the role for the underlying `<input>`, defaults to `searchbox`\n   */\n  role: deprecate(PropTypes.string, 'The `role` prop has been deprecated since <input type=\"search\"> already provides correct semantics. ' + 'It will be removed in the next major release of Carbon.'),\n  /**\n   * Specify the size of the Search\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n  /**\n   * Specify the type of the `<input>`\n   */\n  type: PropTypes.string,\n  /**\n   * Specify the value of the `<input>`\n   */\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nfunction CustomSearchIcon({\n  icon: Icon\n}) {\n  const prefix = usePrefix();\n  if (Icon) {\n    return /*#__PURE__*/React.createElement(Icon, {\n      className: `${prefix}--search-magnifier-icon`\n    });\n  }\n  return /*#__PURE__*/React.createElement(Search$1, {\n    className: `${prefix}--search-magnifier-icon`\n  });\n}\nCustomSearchIcon.propTypes = {\n  /**\n   * Rendered icon for the Search. Can be a React component class\n   */\n  icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n};\n\nexport { Search as default };\n"],"names":["_Close","Search","React","autoComplete","className","closeButtonLabelText","defaultValue","disabled","isExpanded","id","labelText","light","onChange","onClear","onKeyDown","onExpand","placeholder","renderIcon","role","size","type","value","rest","forwardRef","hasPropValue","prefix","usePrefix","isFluid","useContext","FormContext","inputRef","useRef","ref","useMergedRefs","expandButtonRef","inputId","useId","uniqueId","searchId","hasContent","setHasContent","useState","prevValue","setPrevValue","searchClasses","cx","clearClasses","clearInput","inputTarget","syntheticEvent","noopFn","handleChange","event","handleKeyDown","match","Escape","handleExpandButtonKeyDown","Enter","Space","magnifierButton","CustomSearchIcon","magnifierWithTooltip","Tooltip","_extends","composeEventHandlers","Close","PropTypes","deprecate","Icon","Search$1"],"mappings":"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","x_google_ignoreList":[0]}