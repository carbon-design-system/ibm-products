import{e as a,r as l}from"./index-DtHxqM--.js";import{u as pe}from"./useResizeObserver-CiQvgsPb.js";import{b as he,L as ue,d as u,P as t}from"./index-4poXP75K.js";import{p as fe,B}from"./settings-Bzj6EGPa.js";import{g as ye}from"./getNodeTextContent-C8IeKkUQ.js";import{d as ge}from"./props-helper-57MyEezq.js";import{C as be,M as we}from"./ComposedModal-CpTP8HrD.js";import{S as ve}from"./index-2cTe6Fdx.js";import{L as E}from"./index-BqG52EEo.js";import{W as n}from"./Wrap-Dkwk7Xz6.js";import{u as Te}from"./usePortalTarget-CqHjfDP8.js";import{u as _e}from"./useFocus-NuZvsjqA.js";import{u as $e}from"./usePreviousValue-CuNkkQo9.js";import{u as Ne}from"./useIsomorphicEffect-DztsuiUB.js";import{A as Ee}from"./ActionSet-5vkpASfI.js";const e=`${fe.prefix}--tearsheet`,Se="TearsheetShell",qe=3,i={open:[],all:[],sizes:[]},Ue=["headerActions","influencer","influencerPosition","influencerWidth","navigation"],U=o=>!o||!(o!=null&&o.length),Pe=(o,m)=>m??U(o),C=({children:o,...m})=>a.createElement(ve,{level:3,...m},o),O=a.forwardRef(({actions:o,decorator:m,ariaLabel:K,children:G,className:J,closeIconDescription:Q="Close",currentStep:X,description:x,hasCloseIcon:Y,hasError:A,headerActions:z,influencer:S,influencerPosition:q,influencerWidth:M,label:I,navigation:P,onClose:R,open:c,portalTarget:Z,selectorPrimaryFocus:D,selectorsFloatingMenus:ee=[],size:v,slug:F,title:k,verticalPosition:te,launcherButtonRef:p,...ae},ne)=>{var H,V;const T=he(),L=`${T}--modal-header`,oe=Te(Z),se=l.useRef(void 0),j=l.useRef(null),re=l.useRef(null),s=ne||se,{width:w}=pe(j),W=$e(c),{keyDownListener:ie,claimFocus:f}=_e(s,D);s.current;const y=v==="wide",[h,le]=l.useState(0),[_,ce]=l.useState(0),$=l.useRef(void 0);l.useEffect(()=>{$.current=h});const de=U(o),g=Pe(o,Y);function N(r,d){le(r),ce(d)}l.useEffect(()=>{c&&f()},[c,X,g,f]),l.useEffect(()=>{W&&!c&&(p!=null&&p.current)&&setTimeout(()=>{p==null||p.current.focus()},0)},[c,W,p]),l.useEffect(()=>{requestAnimationFrame(()=>{var r;c&&h===_&&!((r=s==null?void 0:s.current)!=null&&r.contains(document.activeElement))&&f()})},[f,h,s,_]),l.useEffect(()=>{var r;A&&!((r=s==null?void 0:s.current)!=null&&r.contains(document.activeElement))&&f()},[f,A,s]),l.useEffect(()=>{const r=()=>i.all.forEach(d=>{d(Math.min(i.open.length,qe),i.open.indexOf(d)+1)});return i.all.push(N),i.sizes.push(v),c&&(i.open.push(N),r()),function(){i.all.splice(i.all.indexOf(N),1),i.sizes.splice(i.sizes.indexOf(v),1);const b=i.open.indexOf(N);b>=0&&(i.open.splice(b,1),r())}},[c,v]);const me=()=>new Set(i.sizes).size===1;if(Ne(()=>{const r=()=>me()?{[`--${e}--stacking-scale-factor-single`]:(w-32)/w,[`--${e}--stacking-scale-factor-double`]:(w-64)/w}:{[`--${e}--stacking-scale-factor-single`]:1,[`--${e}--stacking-scale-factor-double`]:1};s.current&&Object.entries(r()).map(([d,b])=>{s.current.style.setProperty(d,String(b))})},[s,w]),_<=h){const r=I||k||x||z||P||g,d=o&&(o==null?void 0:o.length)>0,b=()=>new Set(i.sizes).size===1;return oe(a.createElement(ue,{enableExperimentalFocusWrapWithoutSentinels:!0},a.createElement(be,{...ae,"aria-label":K||ye(k),className:u(e,J,{[`${e}--stacked-${_}-of-${h}`]:h>1||h===1&&(($==null?void 0:$.current)??0)>1,[`${e}--wide`]:y,[`${e}--narrow`]:!y,[`${e}--has-slug`]:F,[`${e}--has-ai-label`]:!!m&&((H=m.type)==null?void 0:H.displayName)==="AILabel",[`${e}--has-decorator`]:!!m&&((V=m.type)==null?void 0:V.displayName)!=="AILabel",[`${e}--has-close`]:g}),decorator:m||F,containerClassName:u(`${e}__container`,{[`${e}__container--lower`]:te==="lower",[`${e}__container--mixed-size-stacking`]:!b()}),onClose:R,open:c,selectorPrimaryFocus:D,onKeyDown:ie,preventCloseOnClickOutside:!de,ref:s,selectorsFloatingMenus:[`.${T}--overflow-menu-options`,`.${T}--tooltip`,".flatpickr-calendar",`.${e}__container`,...ee],size:"sm"},r&&a.createElement(we,{className:u(`${e}__header`,{[`${e}__header--with-close-icon`]:g,[`${e}__header--with-nav`]:P}),closeClassName:u({[`${e}__header--no-close-icon`]:!g}),closeModal:R,iconDescription:g?Q:void 0},a.createElement(n,{className:`${e}__header-content`,element:y?E:void 0},a.createElement(n,{className:`${e}__header-fields`},a.createElement(n,{element:"h2",className:`${L}__label`},I),a.createElement(n,{element:"h3",className:u(`${L}__heading`,`${e}__heading`)},k),a.createElement(n,{className:`${e}__header-description`},x)),a.createElement(n,{className:`${e}__header-actions`},z)),a.createElement(n,{className:`${e}__header-navigation`},P)),a.createElement(n,{ref:re,className:`${T}--modal-content ${e}__body`},a.createElement(n,{className:u({[`${e}__influencer`]:!0,[`${e}__influencer--wide`]:M==="wide"}),neverRender:q==="right",element:C},a.createElement(n,{element:E},S)),a.createElement(n,{className:`${e}__right`},a.createElement(n,{className:`${e}__main`,alwaysRender:d},a.createElement(n,{className:`${e}__content`,alwaysRender:!!(S&&q==="right"),element:C},a.createElement(n,{element:y?void 0:E},G)),a.createElement(n,{className:u({[`${e}__influencer`]:!0,[`${e}__influencer--wide`]:M==="wide"}),neverRender:q!=="right",element:C},a.createElement(n,{element:E},S))),d&&a.createElement(n,{className:`${e}__button-container`},a.createElement(Ee,{actions:o,buttonSize:y?"2xl":void 0,className:`${e}__buttons`,size:y?"2xl":"lg","aria-hidden":!c})))),a.createElement("div",{className:`${e}__resize-detector`,ref:j}))))}else return null});O.displayName=Se;const ke=typeof Element>"u"?t.object:t.instanceOf(Element),Ce={slug:ge(t.node),verticalPosition:t.oneOf(["normal","lower"])};O.propTypes={actions:t.arrayOf(t.shape({...B.propTypes,kind:t.oneOf(["ghost","danger--ghost","secondary","danger","primary"]),label:t.string,loading:t.bool,onClick:B.propTypes.onClick})),children:t.node,className:t.string,closeIconDescription:t.string,decorator:t.oneOfType([t.node,t.bool]),description:t.node,hasCloseIcon:t.bool,headerActions:t.element,influencer:t.element,influencerPosition:t.oneOf(["left","right"]),influencerWidth:t.oneOf(["narrow","wide"]),label:t.node,launcherButtonRef:t.any,navigation:t.element,onClose:t.func,open:t.bool,portalTarget:ke,selectorPrimaryFocus:t.string,selectorsFloatingMenus:t.arrayOf(t.string),size:t.oneOf(["narrow","wide"]).isRequired,title:t.node,...Ce};O.__docgenInfo={description:`TearSheetShell is used internally by TearSheet and TearSheetNarrow

The component is not public.

See the canvas tab for the component API details.`,methods:[],displayName:"TearsheetShell",props:{actions:{required:!1,tsType:{name:"Array",elements:[{name:"TearsheetAction"}],raw:"TearsheetAction[]"},description:`The actions to be shown as buttons in the action area at the bottom of the
tearsheet. Each action is specified as an object with optional fields
'label' to supply the button label, 'kind' to select the button kind (must
be 'primary', 'secondary' or 'ghost'), 'loading' to display a loading
indicator, and 'onClick' to receive notifications when the button is
clicked. Additional fields in the object will be passed to the Button
component, and these can include 'disabled', 'ref', 'className', and any
other Button props. Any other fields in the object will be passed through
to the button element as HTML attributes.

See https://react.carbondesignsystem.com/?path=/docs/components-button--default#component-api`,type:{name:"arrayOf",value:{name:"shape",value:{kind:{name:"enum",value:[{value:"'ghost'",computed:!1},{value:"'danger--ghost'",computed:!1},{value:"'secondary'",computed:!1},{value:"'danger'",computed:!1},{value:"'primary'",computed:!1}],required:!1},label:{name:"string",required:!1},loading:{name:"bool",required:!1},onClick:{name:"custom",raw:"Button.propTypes.onClick",required:!1}}}}},ariaLabel:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"An optional class or classes to be added to the outermost element.",type:{name:"string"}},closeIconDescription:{required:!1,tsType:{name:"string"},description:`The accessibility title for the close icon (if shown).

**Note:** This prop is only required if a close icon is shown, i.e. if
there are a no navigation actions and/or hasCloseIcon is true.`,defaultValue:{value:"'Close'",computed:!1},type:{name:"string"}},currentStep:{required:!1,tsType:{name:"number"},description:"Used to track the current step on components which use `StepsContext` and `TearsheetShell`"},decorator:{required:!1,tsType:{name:"ReactNode"},description:"Optional prop that allows you to pass any component.",type:{name:"union",value:[{name:"node"},{name:"bool"}]}},description:{required:!1,tsType:{name:"ReactNode"},description:"A description of the flow, displayed in the header area of the tearsheet.",type:{name:"node"}},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:`Enable a close icon ('x') in the header area of the tearsheet. By default,
(when this prop is omitted, or undefined or null) a tearsheet does not
display a close icon if there are navigation actions ("transactional
tearsheet") and displays one if there are no navigation actions ("passive
tearsheet"), and that behavior can be overridden if required by setting
this prop to either true or false.`,type:{name:"bool"}},hasError:{required:!1,tsType:{name:"boolean"},description:`To indicate an error occurred in the Tearsheet step
Mainly used by CreateTearsheet component to pass error state`},headerActions:{required:!1,tsType:{name:"ReactNode"},description:`The content for the header actions area, displayed alongside the title in
the header area of the tearsheet. This is typically a drop-down, or a set
of small buttons, or similar. NB the headerActions is only applicable for
wide tearsheets.`,type:{name:"element"}},influencer:{required:!1,tsType:{name:"ReactNode"},description:`The content for the influencer section of the tearsheet, displayed
alongside the main content. This is typically a menu, or filter, or
progress indicator, or similar. NB the influencer is only applicable for
wide tearsheets.`,type:{name:"element"}},influencerPosition:{required:!1,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:"The position of the influencer section, 'left' or 'right'.",type:{name:"enum",value:[{value:"'left'",computed:!1},{value:"'right'",computed:!1}]}},influencerWidth:{required:!1,tsType:{name:"union",raw:"'narrow' | 'wide'",elements:[{name:"literal",value:"'narrow'"},{name:"literal",value:"'wide'"}]},description:`The width of the influencer: 'narrow' (the default) is 256px, and 'wide'
is 320px.`,type:{name:"enum",value:[{value:"'narrow'",computed:!1},{value:"'wide'",computed:!1}]}},label:{required:!1,tsType:{name:"ReactNode"},description:`A label for the tearsheet, displayed in the header area of the tearsheet
to maintain context for the tearsheet (e.g. as the title changes from page
to page of a multi-page task).`,type:{name:"node"}},launcherButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Provide a ref to return focus to once the tearsheet is closed.",type:{name:"any"}},navigation:{required:!1,tsType:{name:"ReactNode"},description:`Navigation content, such as a set of tabs, to be displayed at the bottom
of the header area of the tearsheet. NB the navigation is only applicable
for wide tearsheets.`,type:{name:"element"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"An optional handler that is called when the user closes the tearsheet (by\nclicking the close button, if enabled, or clicking outside, if enabled).\nReturning `false` here prevents the modal from closing.",type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specifies whether the tearsheet is currently open.",type:{name:"bool"}},portalTarget:{required:!1,tsType:{name:"HTMLElement"},description:"The DOM element that the tearsheet should be rendered within. Defaults to document.body.",type:{name:"custom",raw:`typeof Element === 'undefined'
? PropTypes.object
: // eslint-disable-next-line ssr-friendly/no-dom-globals-in-module-scope
  PropTypes.instanceOf(Element)`}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:`Specify a CSS selector that matches the DOM element that should be
focused when the Modal opens.`,type:{name:"string"}},selectorsFloatingMenus:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:`Specify the CSS selectors that match the floating menus.

See https://react.carbondesignsystem.com/?path=/docs/components-composedmodal--overview#focus-management`,defaultValue:{value:"[]",computed:!1},type:{name:"arrayOf",value:{name:"string"}}},size:{required:!0,tsType:{name:"union",raw:"'narrow' | 'wide'",elements:[{name:"literal",value:"'narrow'"},{name:"literal",value:"'wide'"}]},description:"Specifies the width of the tearsheet, 'narrow' or 'wide'.",type:{name:"enum",value:[{value:"'narrow'",computed:!1},{value:"'wide'",computed:!1}]}},title:{required:!1,tsType:{name:"ReactNode"},description:"The main title of the tearsheet, displayed in the header area.",type:{name:"node"}},verticalPosition:{required:!1,tsType:{name:"union",raw:"'normal' | 'lower'",elements:[{name:"literal",value:"'normal'"},{name:"literal",value:"'lower'"}]},description:`**Deprecated**

The position of the top of tearsheet in the viewport. The 'normal'
position is a short distance down from the top of the
viewport, leaving room at the top for a global header bar to show through
from below. The 'lower' position (the default) provides a little extra room at the top
to allow an action bar navigation or breadcrumbs to also show through.`,type:{name:"enum",value:[{value:"'normal'",computed:!1},{value:"'lower'",computed:!1}]}},slug:{required:!1,tsType:{name:"ReactNode"},description:"@deprecated Property replaced by `decorator`",type:{name:"custom",raw:"deprecateProp(PropTypes.node, 'Property replaced by `decorator`')"}},children:{description:"The main content of the tearsheet.",type:{name:"node"},required:!1}},composes:["PropsWithChildren"]};export{O as T,ke as p,Ue as t};
