import{e as p,r as d}from"./index-DtHxqM--.js";import{b as L,d as C}from"./index-C360Eztx.js";import{T as N}from"./TableSelectRow-Cof5LoH2.js";import{s as W,S as H,h as O}from"./useDatagrid-DRFhvKQ0.js";import{p as P}from"./settings-CFkY3W_8.js";const h=`${P.prefix}--datagrid`,x=`${P.prefix}--datagrid__checkbox-cell`,j=t=>p.createElement(H,{...t}),v=t=>p.createElement(F,{...t}),M=t=>{D(t);const n=o=>{const{rows:e}=o,l=e.map(s=>({...s,isSelectable:!0}));Object.assign(o,{rows:l})};t.useInstance.push(n),t.useInstance.push(o=>{Object.assign(o,{withSelectRows:!0})}),t.visibleColumns.push(o=>{const e=[...o],l=e.findIndex(r=>r.id==="expander"),s=l>-1?e.splice(l,1):[];return[...l>-1&&s&&s.length?s:[],{id:W,Header:j,Cell:v},...e]})},D=t=>{const n=L(),o=(e,{row:l})=>{const{checked:s}=l.getToggleRowSelectedProps();return[e,{className:C([`${h}__carbon-row`,{[`${n}--data-table--selected`]:s,[`${h}__active-row`]:s}])}]};t.getRowProps.push(o)},F=t=>{var b;const{isFetching:n=!1,tableId:o,row:e,cell:l,radio:s,toggleAllRowsSelected:r,onRadioSelect:i,onRowSelect:a,columns:R,withStickyColumn:k,dispatch:w,getRowId:u}=t,[$,g]=d.useState();d.useLayoutEffect(()=>{g(window.innerWidth);function c(){g(window.innerWidth)}return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const I=n||e.getRowProps().disabled,{onChange:m,title:E,..._}=e.getToggleRowSelectedProps(),S=l.getCellProps(),y=((b=R[0])==null?void 0:b.sticky)==="left"&&k,f=`${o}-${e.id}-${e.index}`,{key:z,_cellProps:T}=S,A=d.useCallback(c=>{c.stopPropagation(),s&&(r(!1),i&&i(e)),m(c),a==null||a(e,c),O({dispatch:w,rowData:e,isChecked:c.target.checked,getRowId:u,selectAll:null})},[w,u,m,i,a,s,e,r]);return p.createElement(N,{key:z,...T,..._,radio:s,onSelect:A,id:f,name:`${f}-name`,className:C([x,S.className,{[`${x}-sticky-left`]:y&&Number($)>671}]),"aria-label":E,disabled:I})};export{M as u};
