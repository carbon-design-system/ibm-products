import{p as F,j as r,B as Ie,C as ge}from"./settings-DEdZ0TrD.js";import{r as z,R as K}from"./index-BwDkhjyp.js";import{a as U}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{I as ke,D as ee,a as Ae,m as he,u as ye,b as Re}from"./_storybook-styles-IAKOnpYX.js";import{S as He}from"./StoryDocsPage-CxMYxNDO.js";import{D as be}from"./DatagridActions-jRZ8vd0V.js";import{D as Ce}from"./DatagridPagination-CUOe27Sy.js";import{A as O}from"./getArgTypes-CUsKgYxs.js";import{c as J,a$ as Ee}from"./floating-ui.core.mjs-LzsX8FoD.js";import{W as xe}from"./index-BvSQ7RHp.js";import{r as Ne}from"./index.esm-D1ej05RU.js";import{P as i,p as M}from"./index-Dk74W0Oi.js";import"./feature-flags-ZUymDm0z.js";import{C as Te}from"./Checkbox-BLZlWiKF.js";import{g as Se}from"./_commonjsHelpers-BosuxZz1.js";import{b as Oe,c as Be}from"./index-C0xX6qoh.js";import{u as Ve,C as je,a as le,P as Fe,K as Me,b as We,D as Ge,c as Ue,r as Ye,e as Je,S as Ke,v as Qe}from"./modifiers.esm-C4IbBq9K.js";import{c as Xe}from"./bucket-5-CnrlLpeo.js";import{L as Ze}from"./bucket-10-eH7kl-bD.js";import{g as W}from"./getNodeTextContent-C8IeKkUQ.js";import{u as et}from"./uuidv4-BQrI85uz.js";import{S as tt}from"./Search-BNsOkhPW.js";import{T as st}from"./TearsheetNarrow-O6mcx78L.js";import{u as rt}from"./useActionsColumn-C3NzIyEf.js";import{u as it}from"./useStickyColumn-CW3it_og.js";import{a as ve}from"./bucket-6-COExmpDO.js";import{T as _e}from"./bucket-17-Cv_pKmw7.js";import{C as ot}from"./events-BwXSUnsA.js";import"./index-CJvxHwuA.js";import"./index-CtP8jiW9.js";import"./v4-CQkTLCs1.js";import"./devtools-BMJcATO0.js";import"./TableRow-CbG9n4BV.js";import"./wrapComponent-DouC4vuJ.js";import"./bucket-0-DWSbtM9A.js";import"./TableToolbar-CndNLzEH.js";import"./Text-DzW_iQLr.js";import"./ErrorEmptyState-B-CngyBr.js";import"./Link-Dcx-j9tl.js";import"./EmptyState-AwaedRSM.js";import"./props-helper-Bq60RLbY.js";import"./EmptyStateV2-CDbEDoov.js";import"./iframe-HHF2JHdl.js";import"../sb-preview/runtime.js";import"./ErrorIllustration-ByS_MGs5.js";import"./index-BONylQH5.js";import"./NoDataEmptyState-DNEhri3_.js";import"./NoDataIllustration-CDaoSmH9.js";import"./NotFoundEmptyState-DZqpxlLS.js";import"./NotFoundIllustration-BjNgXaPp.js";import"./useResizeObserver-CYrpFlRY.js";import"./useIsomorphicEffect-D7JMtAof.js";import"./useWindowResize-B5WYYPi1.js";import"./useControllableState-DwpxGhsf.js";import"./useAttachedMenu-DHwtw2Df.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-BkXf54zg.js";import"./useClickOutside-Dcd11u7q.js";import"./AccordionItem-CMtJJchE.js";import"./index-B19trKVm.js";import"./LayerContext-DbU-6VX4.js";import"./motionConstants-CR5hPmRc.js";import"./tslib.es6-B4_xh3D5.js";import"./use-reduced-motion-BisnjenD.js";import"./index-DkUr2NOz.js";import"./ActionSet-aBtXfkQ8.js";import"./ButtonSet-B0eeKBZg.js";import"./InlineLoading-b-XMbmpT.js";import"./DatePicker-DvhXI59Q.js";import"./FormContext-C7kRVu4t.js";import"./bucket-18-BepxNBd9.js";import"./bucket-1-XoaEU4JE.js";import"./Dropdown-B7QPq3_7.js";import"./index-DEc8pD2w.js";import"./extends-CCbyfPlC.js";import"./index-DcAOwtUU.js";import"./FormGroup-2MNJUnTV.js";import"./NumberInput-B_FODUnF.js";import"./useNormalizedInputProps-SnNF9w2p.js";import"./bucket-15-BdI7pN81.js";import"./RadioButton-RVFxoHP5.js";import"./RadioButtonGroup-C9o-g5EX.js";import"./MultiSelect-2vXNKeno.js";import"./usePreviousValue-DDnp_zt4.js";import"./debounce-CI22LTdx.js";import"./toNumber-DVQITUtX.js";import"./TagSet-BmEQlLlo.js";import"./Tag-D0bJ7i5y.js";import"./DefinitionTooltip-BKLgLTUt.js";import"./ComposedModal-Bz57YeIR.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-DKhmFa_m.js";import"./index-Jn_1HPt0.js";import"./usePortalTarget-C9qZOTQP.js";import"./OperationalTag-B3HIPX8m.js";import"./SkeletonText-CfIwLT9n.js";import"./bucket-14-nEnLeouB.js";import"./index-B87aoAka.js";import"./index-DeGQKZDn.js";import"./index-C2eUe6cH.js";import"./index-DrFu-skq.js";import"./story-helper-CtkteSRf.js";import"./index-wQDODWB9.js";import"./bucket-12-rDfie8WR.js";import"./TableToolbarSearch-DM6tuCEg.js";import"./bucket-13-K9d64cD_.js";import"./Select-DGzLH-Q6.js";import"./SelectItem-DVx0fm--.js";import"./index-4199aNwk.js";import"./bucket-9-CaYeOo1b.js";import"./TearsheetShell-D_WxQLC9.js";import"./useFocus-BSpNcszJ.js";import"./wait-CTNFjQS8.js";var Z={exports:{}};(function(s,o){Object.defineProperty(o,"__esModule",{value:!0});function n(e){return typeof e=="object"&&!("toString"in e)?Object.prototype.toString.call(e).slice(8,-1):e}var f=typeof process=="object"&&!0;function c(e,t){if(!e)throw f?new Error("Invariant failed"):new Error(t())}o.invariant=c;var h=Object.prototype.hasOwnProperty,C=Array.prototype.splice,y=Object.prototype.toString;function m(e){return y.call(e).slice(8,-1)}var u=Object.assign||function(e,t){return v(t).forEach(function(d){h.call(t,d)&&(e[d]=t[d])}),e},v=typeof Object.getOwnPropertySymbols=="function"?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function D(e){return Array.isArray(e)?u(e.constructor(e.length),e):m(e)==="Map"?new Map(e):m(e)==="Set"?new Set(e):e&&typeof e=="object"?u(Object.create(Object.getPrototypeOf(e)),e):e}var A=function(){function e(){this.commands=u({},H),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,d){return t===d},this.update.newContext=function(){return new e().update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),e.prototype.extend=function(t,d){this.commands[t]=d},e.prototype.update=function(t,d){var p=this,l=typeof d=="function"?{$apply:d}:d;Array.isArray(t)&&Array.isArray(l)||c(!Array.isArray(l),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),c(typeof l=="object"&&l!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(p.commands).join(", ")+".")});var x=t;return v(l).forEach(function($){if(h.call(p.commands,$)){var q=t===x;x=p.commands[$](l[$],x,l,t),q&&p.isEquals(x,t)&&(x=t)}else{var L=m(t)==="Map"?p.update(t.get($),l[$]):p.update(t[$],l[$]),E=m(x)==="Map"?x.get($):x[$];(!p.isEquals(L,E)||typeof L>"u"&&!h.call(t,$))&&(x===t&&(x=D(t)),m(x)==="Map"?x.set($,L):x[$]=L)}}),x},e}();o.Context=A;var H={$push:function(e,t,d){return P(t,d,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,d){return P(t,d,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,d,p){return a(t,d),e.forEach(function(l){b(l),t===p&&l.length&&(t=D(p)),C.apply(t,l)}),t},$set:function(e,t,d){return g(d),e},$toggle:function(e,t){I(e,"$toggle");var d=e.length?D(t):t;return e.forEach(function(p){d[p]=!t[p]}),d},$unset:function(e,t,d,p){return I(e,"$unset"),e.forEach(function(l){Object.hasOwnProperty.call(t,l)&&(t===p&&(t=D(p)),delete t[l])}),t},$add:function(e,t,d,p){return R(t,"$add"),I(e,"$add"),m(t)==="Map"?e.forEach(function(l){var x=l[0],$=l[1];t===p&&t.get(x)!==$&&(t=D(p)),t.set(x,$)}):e.forEach(function(l){t===p&&!t.has(l)&&(t=D(p)),t.add(l)}),t},$remove:function(e,t,d,p){return R(t,"$remove"),I(e,"$remove"),e.forEach(function(l){t===p&&t.has(l)&&(t=D(p)),t.delete(l)}),t},$merge:function(e,t,d,p){return T(t,e),v(e).forEach(function(l){e[l]!==t[l]&&(t===p&&(t=D(p)),t[l]=e[l])}),t},$apply:function(e,t){return S(e),e(t)}},w=new A;o.isEquals=w.update.isEquals,o.extend=w.extend,o.default=w.update,o.default.default=s.exports=u(o.default,o);function P(e,t,d){c(Array.isArray(e),function(){return"update(): expected target of "+n(d)+" to be an array; got "+n(e)+"."}),I(t[d],d)}function I(e,t){c(Array.isArray(e),function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"})}function a(e,t){c(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+n(e)}),b(t.$splice)}function b(e){c(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"})}function S(e){c(typeof e=="function",function(){return"update(): expected spec of $apply to be a function; got "+n(e)+"."})}function g(e){c(Object.keys(e).length===1,function(){return"Cannot have more than one key in an object with $set"})}function T(e,t){c(t&&typeof t=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+n(t)}),c(e&&typeof e=="object",function(){return"update(): $merge expects a target of type 'object'; got "+n(e)})}function R(e,t){var d=m(e);c(d==="Map"||d==="Set",function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(d)})}})(Z,Z.exports);var nt=Z.exports;const at=Se(nt);var lt=Oe,dt=Be,ut="[object Boolean]";function ct(s){return s===!0||s===!1||dt(s)&&lt(s)==ut}var mt=ct;const pt=Se(mt),X=s=>pt(s.isVisible)?s.isVisible:!0,N=`${F.prefix}--datagrid`,te=({id:s,children:o,classList:n,disabled:f,ariaLabel:c,isSticky:h,selected:C})=>{const{attributes:y,isDragging:m,listeners:u,setNodeRef:v,transform:D,transition:A}=Ve({disabled:f,id:s}),H=r.jsxs(r.Fragment,{children:[r.jsx("div",{className:J({disabled:f},`${N}__draggable-handleStyle`),children:h?r.jsx(Ze,{size:16}):r.jsx(Xe,{size:16})}),o]}),w={transform:f?void 0:je.Transform.toString(D),transition:A};return r.jsxs("li",{className:J(n,`${N}__draggable-handleHolder`,{[`${N}__draggable-handleHolder--selected`]:C,[`${N}__draggable-handleHolder--sticky`]:h,[`${N}__draggable-handleHolder--dragging`]:m}),id:s,ref:v,style:w,...y,...u,"aria-disabled":void 0,"aria-selected":C,role:"option",children:[r.jsx("span",{className:`${N}__shared-ui--assistive-text`,children:c}),r.jsx("div",{className:J({[`${N}__draggable-handleStyle`]:!f},[`${N}__draggable-handleHolder-droppable`]),children:H})]})};te.propTypes={ariaLabel:i.string.isRequired,children:i.element.isRequired,classList:i.string,disabled:i.bool,id:i.string.isRequired,isSticky:i.bool,selected:i.bool};te.__docgenInfo={description:"",methods:[],displayName:"DraggableElement",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},children:{required:!0,tsType:{name:"ReactNode"},description:"",type:{name:"element"}},classList:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},id:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},isSticky:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},selected:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}}},composes:["PropsWithChildren"]};const G=`${F.prefix}--datagrid`,B=(s,o)=>s&&o&&s.id===o.id,se=({columns:s,filterString:o,id:n,moveElement:f,onSelectColumn:c,setAriaRegionText:h})=>{const C=`${G}__draggable-item`,y=s.filter(a=>W(a.Header).trim().length!==0).filter(Boolean).filter(a=>!a.isAction).filter(a=>a.id!=="spacer").filter(a=>o.length===0||W(a.Header).toLowerCase().includes(o)),u=(()=>{const a=[...y];return a.forEach(b=>{b.sticky&&(b.disabled=!0)}),a})(),v=a=>{var p;const{active:b,over:S}=a,g=u.filter(l=>l.id===S.id);if(g!=null&&g.length&&((p=g[0])!=null&&p.disabled))return;const T=u.findIndex(l=>B(l,b)),R=u.findIndex(l=>B(l,S)),e=W(u[T].Header);h(`${e} dropped. New position ${R+1} of ${u.length}.`);const t=s.findIndex(l=>B(l,b)),d=s.findIndex(l=>B(l,S));f(t,d)},D=a=>{const{active:b}=a,S=u.findIndex(T=>B(T,b)),g=W(u[S].Header);h(`${g} grabbed. Current position ${S+1} of ${u.length}.`)},A=a=>{const{active:b,over:S}=a,g=u.findIndex(e=>B(e,b)),T=u.findIndex(e=>B(e,S)),R=W(u[g].Header);h(`${R} grabbed. Original position ${g+1}, new position ${T+1} of ${u.length}.`)},H=le(Fe,{activationConstraint:{distance:4}}),w=le(Me,{coordinateGetter:(a,b)=>{const{currentCoordinates:S}=b;let g=a.target;for(;g&&!g.classList.contains(C);)g=g.parentNode;const T=g.offsetHeight;switch(a.code){case"ArrowRight":case"ArrowLeft":return S;case"ArrowUp":return{...S,y:S.y-T};case"ArrowDown":return{...S,y:S.y+T}}}}),P=We(H,w),I=(a,b)=>{if(a.code==="Space")return c(b,!X(b)),a.preventDefault(),a.stopPropagation(),!1};return r.jsx(Ge,{collisionDetection:Ue,onDragEnd:v,onDragStart:D,onDragMove:A,sensors:P,modifiers:[Ye,Je],children:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`${G}__draggable-underlay`,"aria-hidden":"true",children:y.map(a=>r.jsx("div",{className:`${G}__draggable-underlay-item`},a.id))},`draggable-underlay-${n}`),r.jsx(Ke,{items:u,strategy:Qe,children:y.map(a=>{const b=W(a.Header),g=b.split(new RegExp(`(${o})`,"gi")).map(t=>t.toLowerCase()===o.toLowerCase()?`<strong>${t}</strong>`:t).join(""),T=!!a.sticky,R=a.disabled,e=r.jsxs(r.Fragment,{children:[r.jsx(Te,{checked:X(a),disabled:R||T,onChange:(t,{checked:d})=>c(a,d),id:`${G}__customization-column-${a.id}`,labelText:b,title:b,className:`${G}__customize-columns-checkbox`,hideLabel:!0,onKeyDown:t=>I(t,a)}),r.jsx("div",{dangerouslySetInnerHTML:{__html:g},className:`${G}__customize-columns-checkbox-visible-label`})]});return r.jsx(te,{classList:C,id:a.id,disabled:o.length>0||T,ariaLabel:b,isSticky:T,selected:X(a),children:e},a.id)})})]})})};se.propTypes={columns:M.PropTypes.array.isRequired,filterString:M.PropTypes.string.isRequired,id:M.PropTypes.string.isRequired,moveElement:M.PropTypes.func.isRequired,onSelectColumn:M.PropTypes.func.isRequired,setAriaRegionText:M.PropTypes.func.isRequired};se.__docgenInfo={description:"",methods:[],displayName:"DraggableItemsList",props:{columns:{description:"",type:{name:"array"},required:!0},filterString:{description:"",type:{name:"string"},required:!0},id:{description:"",type:{name:"string"},required:!0},moveElement:{description:"",type:{name:"func"},required:!0},onSelectColumn:{description:"",type:{name:"func"},required:!0},setAriaRegionText:{description:"",type:{name:"func"},required:!0}}};const k=`${F.prefix}--datagrid`,re=({getVisibleColumnsCount:s,filterString:o,columns:n,setColumnsObject:f,onSelectColumn:c,assistiveTextInstructionsLabel:h,assistiveTextDisabledInstructionsLabel:C,selectAllLabel:y,customizeTearsheetHeadingLabel:m})=>{const u=z.useRef(et()),v=z.useRef(null),[D,A]=K.useState(""),H=K.useCallback((P,I)=>{const a=n[P];f(at(n,{$splice:[[P,1],[I,0,a]]}))},[n,f]),w=n==null?void 0:n.filter(P=>!P.sticky);return r.jsx("div",{className:`${k}__customize-columns-column-list`,ref:v,children:r.jsxs("ol",{className:`${k}__customize-columns-column-list--focus`,role:"listbox","aria-label":m,"aria-describedby":`${k}__customize-columns--instructions`,tabIndex:0,children:[r.jsx("span",{"aria-live":"assertive",className:`${k}__shared-ui--assistive-text`,children:D}),r.jsx("span",{id:`${k}__customize-columns--instructions`,className:`${k}__shared-ui--assistive-text`,children:o.length===0?h:C}),r.jsx("div",{id:`${k}__customize-columns-select-all`,className:J(`${k}__customize-columns-select-all`,{[`${k}__customize-columns-select-all--selected`]:s()>0}),selected:s()>0,children:r.jsx(Te,{className:`${k}__customize-columns-checkbox-wrapper`,checked:s()===n.length,indeterminate:s()<n.length&&s()>0,onChange:()=>{c(w,s()!==n.length)},id:`${k}__customization-column-select-all`,labelText:y})}),r.jsx(se,{id:u.current,columns:n,filterString:o,moveElement:H,setAriaRegionText:A,onSelectColumn:c})]})})};re.propTypes={assistiveTextDisabledInstructionsLabel:i.string,assistiveTextInstructionsLabel:i.string,columns:i.array.isRequired,customizeTearsheetHeadingLabel:i.string,disabledInstructionsLabel:i.string,filterString:i.string.isRequired,getVisibleColumnsCount:i.func.isRequired,instructionsLabel:i.string,onSelectColumn:i.func.isRequired,selectAllLabel:i.string,setColumnStatus:i.func,setColumnsObject:i.func.isRequired};re.__docgenInfo={description:"",methods:[],displayName:"Columns",props:{assistiveTextDisabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{description:"",type:{name:"string"},required:!1},columns:{description:"",type:{name:"array"},required:!0},customizeTearsheetHeadingLabel:{description:"",type:{name:"string"},required:!1},disabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},filterString:{description:"",type:{name:"string"},required:!0},getVisibleColumnsCount:{description:"",type:{name:"func"},required:!0},instructionsLabel:{description:"",type:{name:"string"},required:!1},onSelectColumn:{description:"",type:{name:"func"},required:!0},selectAllLabel:{description:"",type:{name:"string"},required:!1},setColumnStatus:{description:"",type:{name:"func"},required:!1},setColumnsObject:{description:"",type:{name:"func"},required:!0}}};const ft=`${F.prefix}--datagrid`,ie=({searchText:s,setSearchText:o,findColumnPlaceholderLabel:n})=>r.jsx("div",{className:`${ft}__customize-columns-tearsheet--actions`,children:r.jsx(tt,{placeholder:n,value:s,size:"lg",labelText:n,onChange:f=>{o(f.target.value)}})});ie.propTypes={columns:i.array.isRequired,findColumnPlaceholderLabel:i.string,originalColumnDefinitions:i.array.isRequired,resetToDefaultLabel:i.string,searchText:i.string.isRequired,setColumnsObject:i.func.isRequired,setSearchText:i.func.isRequired};ie.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{columns:{description:"",type:{name:"array"},required:!0},findColumnPlaceholderLabel:{description:"",type:{name:"string"},required:!1},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},resetToDefaultLabel:{description:"",type:{name:"string"},required:!1},searchText:{description:"",type:{name:"string"},required:!0},setColumnsObject:{description:"",type:{name:"func"},required:!0},setSearchText:{description:"",type:{name:"func"},required:!0}}};const gt=`${F.prefix}--datagrid`,oe=({isOpen:s,setIsTearsheetOpen:o,onSaveColumnPrefs:n,columnDefinitions:f,originalColumnDefinitions:c,customizeTearsheetHeadingLabel:h="Customize columns",primaryButtonTextLabel:C="Save",secondaryButtonTextLabel:y="Cancel",instructionsLabel:m="Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.",findColumnPlaceholderLabel:u="Find column",resetToDefaultLabel:v="Reset to default",assistiveTextInstructionsLabel:D="Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:A="Reordering columns are disabled because they are filtered currently.",selectAllLabel:H="Column name"})=>{const[w,P]=z.useState(""),[I,a]=z.useState(""),[b,S]=z.useState(""),[g,T]=z.useState(f),[R,e]=z.useState(!1),t=z.useRef(),d=()=>{T(f),o(!1)},p=()=>{o(!1);const q=g.map(L=>({id:L.id,isVisible:L.isVisible}));n(q)},l=(q,L)=>{const E=g.map(_=>Array.isArray(q)?q.includes(_)&&_.canFilter&&!_.disabled?{..._,isVisible:L}:_:q.id===_.id?{..._,isVisible:L}:_),ae=E.filter(_=>_.isVisible&&!["datagridSelection","actions"].includes(_.id)).length,Pe=E.map(_=>ae>0?["datagridSelection","actions"].includes(_.id)?{..._,isVisible:!0}:_:["datagridSelection","actions"].includes(_.id)?{..._,isVisible:!1}:_);T(Pe),e(ae!==0)},x=z.useCallback(()=>g.filter(q=>q.isVisible).length,[g]),$=b.trim().toLowerCase();return z.useEffect(()=>{t.current!==f&&T(f);const q=g.filter(E=>E.id==="actions").length,L=g.filter(E=>E.id==="datagridSelection").length;P(x()-q-L<0?0:x()-q-L),a(g.length-q-L),t.current=f},[x,g,f]),r.jsxs(st,{className:`${gt}__customize-columns-tearsheet`,open:s,title:`${h} (${w}/${I})`,description:m,actions:[{kind:"secondary",label:y,onClick:d},{kind:"primary",label:C,onClick:p,disabled:!R}],children:[r.jsx(ie,{columns:g,originalColumnDefinitions:c,searchText:b,setColumnsObject:q=>{T(q),e(!0)},setSearchText:S,findColumnPlaceholderLabel:u,resetToDefaultLabel:v}),s&&r.jsx(re,{assistiveTextInstructionsLabel:D,assistiveTextDisabledInstructionsLabel:A,getVisibleColumnsCount:x,columns:g,filterString:$,onSelectColumn:l,setColumnsObject:q=>{T(q),e(x()!==0)},selectAllLabel:H,customizeTearsheetHeadingLabel:h})]})};oe.propTypes={assistiveTextDisabledInstructionsLabel:i.string,assistiveTextInstructionsLabel:i.string,columnDefinitions:i.array.isRequired,customizeTearsheetHeadingLabel:i.string,findColumnPlaceholderLabel:i.string,instructionsLabel:i.string,isOpen:i.bool.isRequired,onSaveColumnPrefs:i.func.isRequired,originalColumnDefinitions:i.array.isRequired,primaryButtonTextLabel:i.string,resetToDefaultLabel:i.string,secondaryButtonTextLabel:i.string,selectAllLabel:i.string,setIsTearsheetOpen:i.func.isRequired};oe.__docgenInfo={description:"",methods:[],displayName:"CustomizeColumnsTearsheet",props:{customizeTearsheetHeadingLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},primaryButtonTextLabel:{defaultValue:{value:"'Save'",computed:!1},description:"",type:{name:"string"},required:!1},secondaryButtonTextLabel:{defaultValue:{value:"'Cancel'",computed:!1},description:"",type:{name:"string"},required:!1},instructionsLabel:{defaultValue:{value:"'Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.'",computed:!1},description:"",type:{name:"string"},required:!1},findColumnPlaceholderLabel:{defaultValue:{value:"'Find column'",computed:!1},description:"",type:{name:"string"},required:!1},resetToDefaultLabel:{defaultValue:{value:"'Reset to default'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{defaultValue:{value:"'Press space bar to toggle drag drop mode, use arrow keys to move selected elements.'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextDisabledInstructionsLabel:{defaultValue:{value:"'Reordering columns are disabled because they are filtered currently.'",computed:!1},description:"",type:{name:"string"},required:!1},selectAllLabel:{defaultValue:{value:"'Column name'",computed:!1},description:"",type:{name:"string"},required:!1},columnDefinitions:{description:"",type:{name:"array"},required:!0},isOpen:{description:"",type:{name:"bool"},required:!0},onSaveColumnPrefs:{description:"",type:{name:"func"},required:!0},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ne=({instance:s})=>{const{onSaveColumnPrefs:o,isTearsheetOpen:n,setIsTearsheetOpen:f,labels:c,...h}=s.customizeColumnsProps,{state:C}=z.useContext(ke),{featureFlags:y}=C||{};return z.useEffect(()=>{y&&!(y!=null&&y["enable-datagrid-useCustomizeColumns"])&&console.error("Datagrid useCustomizeColumns extension has not been enabled via feature flag.")},[y]),r.jsx(oe,{...h,...c,isOpen:n,setIsTearsheetOpen:f,columnDefinitions:s.allColumns,originalColumnDefinitions:s.columns,onSaveColumnPrefs:m=>{setTimeout(()=>{const u=m.filter(v=>!v.isVisible).map(v=>v.id);s.setHiddenColumns(u),typeof s.setColumnOrder=="function"?s.setColumnOrder(m.map(v=>v.id)):console.warn("Column order can not be updated. Did you forget to add 'useColumnOrder' in 'useDatagrid'")},0),typeof o=="function"&&o(m)}})};ne.propTypes={instance:i.object.isRequired};ne.__docgenInfo={description:"",methods:[],displayName:"TearsheetWrapper",props:{instance:{description:"",type:{name:"object"},required:!0}}};const ht=`${F.prefix}--datagrid`,Q=({onClick:s,setIsTearsheetOpen:o,isTearsheetOpen:n,iconTooltipLabel:f="Customize columns",...c})=>r.jsx(Ie,{...c,renderIcon:h=>r.jsx(Ee,{size:16,...h}),iconDescription:f,tooltipPosition:"bottom",kind:"ghost",hasIconOnly:!0,"test-id":`${ht}__customize-columns-trigger`,onClick:()=>{o(!n),typeof s=="function"&&s()}});Q.defaultProps={onClick:()=>{}};Q.propTypes={iconTooltipLabel:i.string,isTearsheetOpen:i.bool.isRequired,onClick:i.func.isRequired,setIsTearsheetOpen:i.func.isRequired};Q.__docgenInfo={description:"",methods:[],displayName:"ButtonWrapper",props:{iconTooltipLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isTearsheetOpen:{description:"",type:{name:"bool"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const $e=s=>{const[o,n]=z.useState(!1);s.useInstance.push(f=>{const{customizeColumnsProps:c}=f,{labels:h}=c||{};Object.assign(f,{customizeColumnsProps:{...c,isTearsheetOpen:o,setIsTearsheetOpen:n},CustomizeColumnsButton:C=>r.jsx(Q,{iconTooltipLabel:h==null?void 0:h.iconTooltipLabel,isTearsheetOpen:o,setIsTearsheetOpen:n,...C}),CustomizeColumnsTearsheet:ne})})},qe=Ne.useColumnOrder,ze=()=>r.jsx(He,{omitCodedExample:!0,blocks:[{title:"Customizing columns",description:"Customizing columns allows user to reorder and hide certain columns of the datagrid. Consuming component can use the provided callback to save/update according to their persistent strategy.\n- Include `useCustomizeColumns` and `useColumnOrder` hooks (required)\n  - `useColumnOrder` comes from `react-table` but is exported by `@carbon/ibm-products` to be used alongside `useCustomizeColumns`.\n- Implement `options.DatagridActions` component\n  - this component will have props: `datagridState`\n  - render `datagridState.CustomizeColumnsButton` component wherever makes sense.\n- Options available to set:\n  - `options.initialState.hiddenColumns: Array<ColumnId: String>`\n    - Array of column ids that will be hidden after initial render\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useTable#table-options)\n  - `options.initialState.columnOrder: Array<ColumnId: String>`\n    - Order of the columns. Any column ids not in this array will be ordered by their position in the `options.columns`\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useColumnOrder#table-options)\n  - `options.customizeColumnsProps.onSaveColumnPrefs`\n    - type: `Function(Columns: Array<{ColumnId: String, isVisible: Boolean}>) => void`\n    - Callback function when 'Save' button clicked on the narrow tearsheet. It allows consumer to preserve the updated column preference. This output can also be used to compute the `hiddenColumns` and `columnOrder`\n        ",source:{code:`
const columns = React.useMemo(() => defaultHeader, []);
const [data] = useState(makeData(10));
const DatagridActions = (datagridState) => (
  <TableToolbarContent>
    <TableToolbarSearch ... />
    <Button ... />
    <datagridState.CustomizeColumnsButton />
  </TableToolbarContent>
)
const datagridState = useDatagrid(
  {
    columns,
    data,
    initialState: {
      hiddenColumns: ['age'],
      columnOrder: [],
    },
    customizeColumnsProps: {
      onSaveColumnPrefs: (newColDefs) => {
        console.log(newColDefs);
      },
    },
    DatagridActions,
  },
  useCustomizeColumns,
  useColumnOrder,
);

return (
  <Datagrid datagridState={datagridState} />
);
          `}}]});ze.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const Lr={title:"IBM Products/Components/Datagrid/ColumnCustomization",component:ee,tags:["autodocs"],parameters:{styles:Ae,docs:{page:ze},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},De=`${F.prefix}--datagrid`,Le=[{Header:"Row Index",accessor:(s,o)=>o,id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50,disableGlobalFilter:!0},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],Y={emptyStateTitle:"Empty state title",emptyStateDescription:"Description text explaining why table is empty",emptyStateSize:"lg",gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowSize:"lg",rowSizes:[{value:"xl",labelText:"Extra large"},{value:"lg",labelText:"Large"},{value:"md",labelText:"Medium"},{value:"xs",labelText:"Small"}],onRowSizeChange:s=>{console.log("row size changed to: ",s)},rowActions:[{id:"edit",itemText:"Edit",icon:ve,onClick:U("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:_e,isDelete:!0,onClick:U("Clicked row action: delete")}]},yt=({...s})=>{const[o,n]=z.useState([]),f=K.useMemo(()=>{const C=[...Le];return C.forEach(y=>{o.some(m=>{if(y.accessor===m)return y.disableGlobalFilter=!0,!0;y.disableGlobalFilter=!1})}),C},[o]),[c]=z.useState(he(10)),h=ye({className:"c4p--datagrid__hidden--columns",columns:f,data:c,initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[]},DatagridActions:be,DatagridPagination:Ce,...s.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:C=>{const y=C.map((m,u)=>m.isVisible?null:m.id).filter(m=>m!==null);n(y)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},$e,qe);return r.jsxs(xe,{flags:{"enable-datagrid-useCustomizeColumns":!0},children:[r.jsx(ee,{datagridState:h}),r.jsxs("div",{className:`${De}-story__hidden-column-id-snippet`,children:[r.jsx("p",{children:"Hidden column ids:"}),r.jsx(ge,{type:"multi",children:JSON.stringify(h.state.hiddenColumns,null,2)})]})]})},bt=({...s})=>r.jsx(yt,{defaultGridProps:{...s}}),we={gridTitle:Y.gridTitle,gridDescription:Y.gridDescription,useDenseHeader:Y.useDenseHeader,customizeColumnsProps:Y.customizeColumnsProps},Ct="With column customization",V=bt.bind({});V.storyName=Ct;V.argTypes={gridTitle:O.gridTitle,gridDescription:O.gridDescription,useDenseHeader:O.useDenseHeader,customizeColumnsProps:O.customizeColumnsProps};V.args={...we};const xt=({...s})=>{const[o,n]=z.useState([]),f=Le.slice(2,15),c=K.useMemo(()=>{const y=[{Header:"Row Index",accessor:(m,u)=>u,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName",disabled:!0},...f,{Header:"",accessor:"actions",sticky:"right",width:48,isAction:!0}];return y.forEach(m=>{o.some(u=>{if(m.accessor===u)return m.disableGlobalFilter=!0,!0;m.disableGlobalFilter=!1})}),y},[o]),[h]=z.useState(he(10)),C=ye({className:"c4p--datagrid__hidden--columns",columns:c,data:h,ascendingSortableLabelText:"ascending",descendingSortableLabelText:"descending",defaultSortableLabelText:"none",initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[],sortableColumn:{id:"rowIndex",order:"ASC"}},DatagridActions:be,DatagridPagination:Ce,rowActions:[{id:"edit",itemText:"Edit",icon:ve,onClick:U("Clicked row action: edit")},{id:"approve",itemText:"Approve",icon:ot,onClick:U("Clicked row action: approve")},{id:"delete",itemText:"Delete",icon:_e,isDelete:!0,hasDivider:!0,onClick:U("Clicked row action: delete")}],...s.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:y=>{const m=y.map((u,v)=>u.isVisible?null:u.id).filter(u=>u!==null);n(m)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},$e,qe,it,rt,Re);return r.jsxs(xe,{flags:{"enable-datagrid-useCustomizeColumns":!0},children:[r.jsx(ee,{datagridState:C}),r.jsxs("div",{className:`${De}-story__hidden-column-id-snippet`,children:[r.jsx("p",{children:"Hidden column ids:"}),r.jsx(ge,{type:"multi",children:JSON.stringify(C.state.hiddenColumns,null,2)})]})]})},Tt=({...s})=>r.jsx(xt,{defaultGridProps:{...s}}),St="With column customization and frozen columns",j=Tt.bind({});j.storyName=St;j.argTypes={gridTitle:O.gridTitle,gridDescription:O.gridDescription,useDenseHeader:O.useDenseHeader,customizeColumnsProps:O.customizeColumnsProps};j.args={...we};var de,ue,ce;V.parameters={...V.parameters,docs:{...(de=V.parameters)==null?void 0:de.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationUsage defaultGridProps={{
    ...args
  }} />;
}`,...(ce=(ue=V.parameters)==null?void 0:ue.docs)==null?void 0:ce.source}}};var me,pe,fe;j.parameters={...j.parameters,docs:{...(me=j.parameters)==null?void 0:me.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationWithFixedColumn defaultGridProps={{
    ...args
  }} />;
}`,...(fe=(pe=j.parameters)==null?void 0:pe.docs)==null?void 0:fe.source}}};const wr=["ColumnCustomizationUsageStory","ColumnCustomizationWithFixedColumnAndDisabledStory"];export{V as ColumnCustomizationUsageStory,j as ColumnCustomizationWithFixedColumnAndDisabledStory,wr as __namedExportsOrder,Lr as default};
