{"version":3,"file":"Saving.stories-DxNWRZwC.js","sources":["../../src/components/Saving/Saving.mdx","../../src/components/Saving/Saving.stories.jsx"],"sourcesContent":["import { Story, Controls, Source, Canvas } from '@storybook/addon-docs/blocks';\nimport {\n  CodesandboxLink,\n  stackblitzHref,\n} from '../../global/js/utils/story-helper';\nimport { Saving } from '.';\nimport * as stories from './Saving.stories';\nimport { stackblitzPrefillConfig } from '../../../previewer/codePreviewer';\n\n# Saving\n\n[Usage guidelines](https://pages.github.ibm.com/carbon/ibm-products/patterns/save/usage/)\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Example usage](#example-usage)\n  - [Auto](#auto)\n  - [Manual](##auto)\n- [Component API](#component-api)\n\n## Overview\n\n### Auto\n\n<Canvas\n  of={stories.Auto}\n  additionalActions={[\n    {\n      title: 'Open in Stackblitz',\n      onClick: () =>\n        stackblitzPrefillConfig({\n          story: stories.Auto,\n          styles: stories.default.parameters.styles,\n        }),\n    },\n  ]}\n/>\n\n### Manual\n\n<Canvas\n  of={stories.Manual}\n  additionalActions={[\n    {\n      title: 'Open in Stackblitz',\n      onClick: () =>\n        stackblitzPrefillConfig({\n          story: stories.Manual,\n          styles: stories.default.parameters.styles,\n        }),\n    },\n  ]}\n/>\n\n## Component API\n\nNOTE: Changing the controls below affects the default/primary example shown on\nthe docs page.\n\n<Controls />\n","/**\n * Copyright IBM Corp. 2021, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport styles from './_storybook-styles.scss?inline'; // import index in case more files are added later.\nimport { Saving } from '.';\nimport { StoryDocsPage } from '../../global/js/utils/StoryDocsPage';\nimport wait from '../../global/js/utils/wait';\nimport { TextArea } from '@carbon/react';\nimport mdx from './Saving.mdx';\n\nexport default {\n  title: 'Patterns/Prebuilt patterns/Saving',\n  component: Saving,\n  tags: ['autodocs'],\n  parameters: {\n    styles,\n    docs: {\n      page: mdx,\n    },\n  },\n  argTypes: {\n    successful: {\n      control: {\n        type: 'boolean',\n      },\n    },\n  },\n};\n\nconst defaultProps = {\n  className: 'saving-story',\n  defaultText: 'Save',\n  failText: 'Failed to save',\n  inProgressText: 'Saving...',\n  successful: true,\n  successText: 'Saved',\n};\n\nconst AutoTemplate = (args) => {\n  const { successful, ...rest } = args;\n  const [status, setStatus] = useState('default');\n  const [text, setText] = useState('');\n  const [dirtyInput, setDirtyInput] = useState(false);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(async () => {\n      if (dirtyInput) {\n        setStatus('in-progress');\n        await wait(1000);\n        setStatus(successful ? 'success' : 'fail');\n      }\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [text, successful, dirtyInput]);\n\n  const onChangeHandler = async (evt) => {\n    const { value } = evt.target;\n    if (!dirtyInput) {\n      setDirtyInput(true);\n    }\n    setText(value);\n  };\n\n  return (\n    <main>\n      <TextArea\n        id=\"save-auto-textarea\"\n        onChange={onChangeHandler}\n        value={text}\n        labelText=\"Enter in the thing you wanted saved\"\n        className=\"saving-story-textarea\"\n      />\n      {dirtyInput && status !== 'default' && (\n        <Saving {...rest} status={status} />\n      )}\n    </main>\n  );\n};\n\nconst ManualTemplate = (args) => {\n  const { successful, ...rest } = args;\n  const [status, setStatus] = useState('default');\n\n  const onSaveHandler = async () => {\n    setStatus('in-progress');\n    await wait(2000);\n    setStatus(successful ? 'success' : 'fail');\n  };\n\n  return (\n    <main>\n      <Saving {...rest} onRequestSave={onSaveHandler} status={status} />\n    </main>\n  );\n};\n\nexport const Auto = AutoTemplate.bind({});\nAuto.args = {\n  ...defaultProps,\n  type: 'auto',\n};\n\nexport const Manual = ManualTemplate.bind({});\nManual.args = {\n  ...defaultProps,\n  type: 'manual',\n  failText: 'Failed to save. Try again?',\n  secondaryButtonText: 'Cancel',\n};\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Canvas","stories.Auto","stackblitzPrefillConfig","stories.default","stories.Manual","Controls","MDXContent","MDXLayout","Saving_stories","title","component","Saving","tags","parameters","styles","docs","page","mdx","argTypes","successful","control","type","defaultProps","className","defaultText","failText","inProgressText","successText","AutoTemplate","args","rest","status","setStatus","useState","text","setText","dirtyInput","setDirtyInput","useEffect","timeoutId","setTimeout","wait","clearTimeout","onChangeHandler","evt","value","target","React","TextArea","ManualTemplate","onSaveHandler","Auto","bind","Manual","secondaryButtonText","source","originalSource"],"mappings":"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"}