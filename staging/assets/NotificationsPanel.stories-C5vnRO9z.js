import{R as t,r as h}from"./index-BwDkhjyp.js";import{a as l}from"./chunk-MZXVCX43-CM0pFb8Z.js";import{b as je,c as C,C as Ke,t as We}from"./index-C8rbkH0g.js";import{c as ye,p as z,B,I as Ze}from"./settings-DI4GKhuL.js";import{H as Xe,a as Je}from"./HeaderName-Dh3o3ME1.js";import{H as Qe}from"./HeaderContainer-vBD5qrTk.js";import{H as et,a as he}from"./HeaderGlobalBar-Co9yEExf.js";import{u as m}from"./uuidv4-BQrI85uz.js";import{L as tt}from"./Link-DedcumfW.js";import{T as nt}from"./Toggle-BGCADFoV.js";import{P as n}from"./index-Dk74W0Oi.js";import{g as at}from"./devtools-BXUoVCj7.js";import{p as it}from"./props-helper-DbXaHz23.js";import{u as st}from"./usePrefersReducedMotion-DeqUFceN.js";import{u as ot}from"./usePreviousValue-Cw-zRxyE.js";import{u as rt}from"./useClickOutside-Dcd11u7q.js";import{N as lt}from"./NotificationsEmptyState-CwHFDt9l.js";import{a as ct}from"./bucket-14-CF5C4Sen.js";import{a as ut}from"./bucket-18--U95jA7N.js";import{a as mt}from"./bucket-9-DfCy8Gkj.js";import{E as dt}from"./bucket-6-D8gTeSgt.js";import{a as ft}from"./bucket-2-BgPkDhJt.js";import{N as pt}from"./bucket-12-BdJxyMSm.js";import{U as gt}from"./bucket-17-7Xhb4oz5.js";import"./_commonjsHelpers-BosuxZz1.js";import"./v4-CQkTLCs1.js";import"./index-BONylQH5.js";import"./index-CJvxHwuA.js";import"./events-OVwOsPzJ.js";import"./index-7nuGG3yx.js";import"./Link-DH9SHIRS.js";import"./wrapComponent-BxtqFmr4.js";import"./useControllableState-DwpxGhsf.js";import"./Text-DZylbEPL.js";import"./useIsomorphicEffect-D7JMtAof.js";import"./EmptyState-fWaEHUgL.js";import"./EmptyStateV2-Bquhsl-W.js";import"./iframe-B6oKv5UQ.js";import"../sb-preview/runtime.js";import"./NotificationsIllustration-DHUenKZ4.js";const yt=({previousTime:a,secondsAgoText:c,minuteAgoText:d,minutesAgoText:g,hoursAgoText:N,hourAgoText:_,daysAgoText:f,yesterdayAtText:b,monthsAgoText:w,monthAgoText:T,yearsAgoText:p,yearAgoText:D,nowText:Y})=>{const r=new Date-a;switch(!0){case r<6e4:return Math.round(r/1e3)>10?c(Math.round(r/1e3)):Y;case r<36e5:return Math.round(r/6e4)>1?g(Math.round(r/6e4)):d(Math.round(r/6e4));case r<864e5:return Math.round(r/36e5)>1?N(Math.round(r/36e5)):_(Math.round(r/36e5));case r<2592e6:return Math.round(r/864e5)>1?f(Math.round(r/864e5)):b(new Date(a).toLocaleTimeString(ht[0]));case r<31536e6:return Math.round(r/2592e6)>1?w(Math.round(r/2592e6)):T(Math.round(r/2592e6));default:return Math.round(r/31536e6)>1?p(Math.round(r/31536e6)):D(Math.round(r/31536e6))}},ht=()=>(navigator.languages===void 0?[navigator.language,"en"]:navigator.languages).map(c=>c.trim()),bt=typeof Node<"u"&&Node.DOCUMENT_POSITION_PRECEDING|Node.DOCUMENT_POSITION_CONTAINS,Nt=typeof Node<"u"&&Node.DOCUMENT_POSITION_FOLLOWING|Node.DOCUMENT_POSITION_CONTAINED_BY,be=`
  a[href], area[href], input:not([disabled]):not([tabindex='-1']),
  button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
  textarea:not([disabled]):not([tabindex='-1']),
  iframe, object, embed, *[tabindex]:not([tabindex='-1']):not([disabled]), *[contenteditable=true]
`;function vt(a,c=[`.${ye.prefix}--overflow-menu-options`,`.${ye.prefix}--tooltip`,".flatpickr-calendar"]){if(a&&typeof a.closest=="function")return c.some(d=>a.closest(d))}function Tt({bodyNode:a,startTrapNode:c,endTrapNode:d,currentActiveNode:g,oldActiveNode:N,selectorsFloatingMenus:_}){if(a&&g&&N&&!a.contains(g)&&!vt(g,_)){const f=N.compareDocumentPosition(g);if(g===c||f&bt){let b=Array.from(a.querySelectorAll(be));b.reverse();const w=b.find(T=>!!T.offsetParent);w?w.focus():a!==N&&a.focus()}else if(g===d||f&Nt){const b=Array.prototype.find.call(a.querySelectorAll(be),w=>!!w.offsetParent);b?b.focus():a!==N&&a.focus()}}}const ne="NotificationsPanel",s=`${z.prefix}--notifications-panel`,o={daysAgoText:a=>`${a} days ago`,dismissAllLabel:"Dismiss all",dismissSingleNotificationIconDescription:"Dismiss",doNotDisturbLabel:"Do not disturb",emptyStateLabel:"You do not have any notifications",hourAgoText:a=>`${a} hour ago`,hoursAgoText:a=>`${a} hours ago`,minuteAgoText:a=>`${a} minute ago`,minutesAgoText:a=>`${a} minutes ago`,monthAgoText:a=>`${a} month ago`,monthsAgoText:a=>`${a} months ago`,nowText:"Now",onDismissAllNotifications:()=>{},onDismissSingleNotification:()=>{},previousLabel:"Previous",readLessLabel:"Read less",readMoreLabel:"Read more",secondsAgoText:a=>`${a} seconds ago`,settingsIconDescription:"Settings",title:"Notifications",todayLabel:"Today",viewAllLabel:a=>`View all (${a})`,yearAgoText:a=>`${a} year ago`,yearsAgoText:a=>`${a} years ago`,yesterdayAtText:a=>`Yesterday at ${a}`,yesterdayLabel:"Yesterday"};let x=t.forwardRef(({className:a,data:c,daysAgoText:d=o.daysAgoText,dismissAllLabel:g=o.dismissAllLabel,dismissSingleNotificationIconDescription:N=o.dismissSingleNotificationIconDescription,doNotDisturbDefaultToggled:_,doNotDisturbLabel:f=o.doNotDisturbLabel,emptyStateLabel:b=o.emptyStateLabel,hourAgoText:w=o.hourAgoText,hoursAgoText:T=o.hoursAgoText,minuteAgoText:p=o.minuteAgoText,minutesAgoText:D=o.minutesAgoText,monthAgoText:Y=o.monthAgoText,monthsAgoText:ae=o.monthsAgoText,nowText:ie=o.nowText,onClickOutside:G,onDismissAllNotifications:se=o.onDismissAllNotifications,onDismissSingleNotification:oe=o.onDismissSingleNotification,onDoNotDisturbChange:r,onSettingsClick:re,onViewAllClick:le,open:k,previousLabel:Ee=o.previousLabel,readLessLabel:ce=o.readLessLabel,readMoreLabel:ue=o.readMoreLabel,secondsAgoText:Ae=o.secondsAgoText,settingsIconDescription:Se=o.settingsIconDescription,title:Le=o.title,todayLabel:$e=o.todayLabel,viewAllLabel:Pe=o.viewAllLabel,yearAgoText:Oe=o.yearAgoText,yearsAgoText:qe=o.yearsAgoText,yesterdayAtText:Me=o.yesterdayAtText,yesterdayLabel:Ie=o.yesterdayLabel,selectorsFloatingMenus:j,triggerButtonRef:A,...Ve},me)=>{const S=h.useRef(null),K=h.useRef(null),de=h.useRef(null),fe=h.useRef(null),[Re,W]=h.useState(k),[u,pe]=h.useState([]),L=ot({open:k}),Z=st(),ge=je();h.useEffect(()=>{pe(c)},[c]),rt(me||S,()=>{G(),setTimeout(()=>{var i;(i=A==null?void 0:A.current)==null||i.focus()},0)}),h.useEffect(()=>{if(k){W(!0);const i=new MutationObserver(()=>{var e;if(S.current){const y=S.current;(e=y==null?void 0:y.querySelector(`.${s}__dismiss-button`))==null||e.focus(),i.disconnect()}});if(S.current){const e=S.current,y=e==null?void 0:e.querySelector(`.${s}__dismiss-button`);y==null||y.focus()}else i.observe(document.body,{childList:!0,subtree:!0});return()=>i.disconnect()}},[k]);const Ue=()=>{!k&&W(!1)},Be=({target:i,relatedTarget:e})=>{if(k&&e&&i&&K.current){const{current:y}=K,{current:$}=de,{current:U}=fe;Tt({bodyNode:y,startTrapNode:$,endTrapNode:U,currentActiveNode:e,oldActiveNode:i,selectorsFloatingMenus:j==null?void 0:j.filter(Boolean)})}},He=i=>{i.stopPropagation(),i.key==="Escape"&&(G(),setTimeout(()=>{var e;(e=A==null?void 0:A.current)==null||e.focus()},100))};h.useEffect(()=>{!k&&(L!=null&&L.open)&&Z&&W(!1)},[k,L==null?void 0:L.open,Z]);const X=i=>{if(!(!i||i&&!i.length))return i.sort((e,y)=>y.timestamp-e.timestamp)};let q=new Date;q=new Date(q.setDate(q.getDate()-1));let M=new Date;M=new Date(M.setDate(M.getDate()-2));let I=u&&u.length&&u.filter(i=>i.timestamp.getTime()>=q.getTime());I=X(I);let V=u&&u.length&&u.filter(i=>i.timestamp.getTime()<q.getTime()&&i.timestamp.getTime()>=M.getTime());V=X(V);let R=u&&u.length&&u.filter(i=>i.timestamp.getTime()<M.getTime());R=X(R);const Fe=i=>{const e=u&&u.length&&u.filter(P=>P.id===i)[0],y=88,$=e==null?void 0:e.description,U=C([`${s}__notification-description`,{[`${s}__notification-long-description`]:e==null?void 0:e.showAll,[`${s}__notification-short-description`]:!(e!=null&&e.showAll)}]),E=C([{[`${s}__notification-read-less-button`]:e==null?void 0:e.showAll,[`${s}__notification-read-more-button`]:!(e!=null&&e.showAll)}]);return t.createElement("div",null,t.createElement("p",{className:U},$),$.length>y&&t.createElement(B,{kind:"ghost",size:"sm",renderIcon:P=>t.createElement(We,{size:16,...P}),iconDescription:e!=null&&e.showAll?ce:ue,onClick:P=>{P.preventDefault(),P.stopPropagation();const Ge=u.map(O=>O.id===(e==null?void 0:e.id)?Object.assign({},O,{showAll:!(O!=null&&O.showAll)}):O);pe(Ge)},className:E},e!=null&&e.showAll?ce:ue))},J=(i,e,y)=>{const $=C([`${s}__notification`,`${s}__notification-${i}`]),U=C([`${s}__notification-title`,{[`${s}__notification-title-unread`]:e.unread}]);return t.createElement("div",{key:`${e.timestamp}-${e.title}-${y}`,className:$,role:"button",tabIndex:0,onClick:()=>e.onNotificationClick(e),onKeyDown:E=>{E.target instanceof HTMLElement&&E.target.classList.contains(`${s}__dismiss-single-button`)||E.which===13&&e.onNotificationClick(e)}},e.type==="error"&&t.createElement(dt,{size:16,className:C([`${s}__notification-status-icon`,`${s}__notification-status-icon-error`])}),e.type==="success"&&t.createElement(ft,{size:16,className:C([`${s}__notification-status-icon`,`${s}__notification-status-icon-success`])}),e.type==="warning"&&t.createElement(ut,{size:16,className:C([`${s}__notification-status-icon`,`${s}__notification-status-icon-warning`])}),e.type==="informational"&&t.createElement(mt,{size:16,className:C([`${s}__notification-status-icon`,`${s}__notification-status-icon-informational`])}),t.createElement("div",{className:`${s}__notification-content`},t.createElement("p",{className:`${s}__notification-time-label`},yt({previousTime:e.timestamp,secondsAgoText:Ae,minuteAgoText:p,minutesAgoText:D,hoursAgoText:T,hourAgoText:w,daysAgoText:d,yesterdayAtText:Me,monthsAgoText:ae,monthAgoText:Y,yearsAgoText:qe,yearAgoText:Oe,nowText:ie})),t.createElement("h6",{className:U},e.title),e.description&&e.description.length&&Fe(e.id),e.link&&e.link.text&&e.link.url&&t.createElement(tt,{href:e.link.url,className:`${s}__notifications-link`,...it({},e.link,["text","url"])},e.link.text)),t.createElement(Ze,{align:"left",kind:"ghost",size:"sm",label:N,className:`${s}__dismiss-single-button`,onClick:E=>ze(E,e)},t.createElement(Ke,{size:16})))},ze=(i,e)=>{i.preventDefault(),i.stopPropagation(),oe(e)},Ye=C([`${s}__main-section`,{[`${s}__main-section-empty`]:u&&!u.length}]);return Re?t.createElement(t.Fragment,null,t.createElement("button",{type:"button",className:`${ge}--visually-hidden`,ref:de},"Focus sentinel start"),t.createElement("div",{role:"dialog","aria-label":"Notification Panel",onBlur:Be,tabIndex:0,onKeyDown:He,...Ve,id:s,className:C(s,a,`${s}__container`),style:{animation:Z?void 0:`${k?"fade-in 250ms":"fade-out forwards 250ms"}`},onAnimationEnd:Ue,ref:me||S,...at(ne)},t.createElement("div",{ref:K},t.createElement("div",{className:`${s}__header-container`},t.createElement("div",{className:`${s}__header-flex`},t.createElement("h2",{className:`${s}__header`},Le),t.createElement(B,{size:"sm",kind:"ghost",className:`${s}__dismiss-button`,onClick:()=>se()},g)),r&&t.createElement(nt,{size:"sm",className:`${s}__do-not-disturb-toggle`,id:`${s}__do-not-disturb-toggle-component`,labelA:f,labelB:f,onToggle:i=>r(i),defaultToggled:_,"aria-label":f,labelText:f})),t.createElement("div",{className:Ye},I&&I.length?t.createElement(t.Fragment,null,t.createElement("h6",{className:`${s}__time-section-label`},$e),I.map((i,e)=>J("today",i,e))):null,V&&V.length?t.createElement(t.Fragment,null,t.createElement("h6",{className:`${s}__time-section-label`},Ie),V.map((i,e)=>J("yesterday",i,e))):null,R&&R.length?t.createElement(t.Fragment,null,t.createElement("h6",{className:`${s}__time-section-label`},Ee),R.map((i,e)=>J("previous",i,e))):null,!u.length&&t.createElement(lt,{illustrationTheme:"dark",title:"",subtitle:b})),le&&re&&u&&u.length?t.createElement("div",{className:`${s}__bottom-actions`},t.createElement(B,{kind:"ghost",className:`${s}__view-all-button`,onClick:()=>le()},Pe(u.length)),t.createElement(B,{kind:"ghost",size:"sm",className:`${s}__settings-button`,renderIcon:i=>t.createElement(ct,{size:16,...i}),iconDescription:Se,onClick:()=>re(),hasIconOnly:!0})):null)),t.createElement("button",{type:"button",className:`${ge}--visually-hidden`,ref:fe},"Focus sentinel end")):null});x=z.checkComponentEnabled(x,ne);x.displayName=ne;x.propTypes={className:n.string,data:n.arrayOf(n.shape({id:n.oneOfType([n.string,n.number]),type:n.oneOf(["error","warning","success","informational"]),timestamp:n.instanceOf(Date),title:n.string,description:n.string,link:n.shape({url:n.string,text:n.string}),unread:n.bool,onNotificationClick:n.func})).isRequired,daysAgoText:n.func,dismissAllLabel:n.string,dismissSingleNotificationIconDescription:n.string,doNotDisturbDefaultToggled:n.bool,doNotDisturbLabel:n.string,emptyStateLabel:n.string,hourAgoText:n.func,hoursAgoText:n.func,minuteAgoText:n.func,minutesAgoText:n.func,monthAgoText:n.func,monthsAgoText:n.func,nowText:n.string,onClickOutside:n.func.isRequired,onDismissAllNotifications:n.func,onDismissSingleNotification:n.func,onDoNotDisturbChange:n.func,onSettingsClick:n.func,onViewAllClick:n.func,open:n.bool.isRequired,previousLabel:n.string,readLessLabel:n.string,readMoreLabel:n.string,secondsAgoText:n.func,selectorsFloatingMenus:n.arrayOf(n.string.isRequired),settingsIconDescription:n.string,title:n.string,todayLabel:n.string,triggerButtonRef:n.any,viewAllLabel:n.func,yearAgoText:n.func,yearsAgoText:n.func,yesterdayAtText:n.func,yesterdayLabel:n.string};x.__docgenInfo={description:"",methods:[],displayName:"NotificationsPanel",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},data:{required:!0,tsType:{name:"Array",elements:[{name:"Data"}],raw:"Data[]"},description:"Array of data for Notifications component to render",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!1},type:{name:"enum",value:[{value:"'error'",computed:!1},{value:"'warning'",computed:!1},{value:"'success'",computed:!1},{value:"'informational'",computed:!1}],required:!1},timestamp:{name:"instanceOf",value:"Date",required:!1},title:{name:"string",required:!1},description:{name:"string",required:!1},link:{name:"shape",value:{url:{name:"string",required:!1},text:{name:"string",required:!1}},required:!1},unread:{name:"bool",required:!1},onNotificationClick:{name:"func",required:!1}}}}},daysAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `days ago` label text",defaultValue:{value:"(value) => `${value} days ago`",computed:!1},type:{name:"func"}},dismissAllLabel:{required:!1,tsType:{name:"string"},description:"Label for Dismiss all button",defaultValue:{value:"'Dismiss all'",computed:!1},type:{name:"string"}},dismissSingleNotificationIconDescription:{required:!1,tsType:{name:"string"},description:"Label for Dismiss single notification icon button",defaultValue:{value:"'Dismiss'",computed:!1},type:{name:"string"}},doNotDisturbDefaultToggled:{required:!1,tsType:{name:"boolean"},description:"Optional: Determines if the `Do not disturb` toggle is on or off when the component is rendered",type:{name:"bool"}},doNotDisturbLabel:{required:!1,tsType:{name:"string"},description:"Optional: Label for Do not disturb toggle",defaultValue:{value:"'Do not disturb'",computed:!1},type:{name:"string"}},emptyStateLabel:{required:!1,tsType:{name:"string"},description:"Sets the empty state label text when there are no notifications",defaultValue:{value:"'You do not have any notifications'",computed:!1},type:{name:"string"}},hourAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `hour ago` label text",defaultValue:{value:"(value) => `${value} hour ago`",computed:!1},type:{name:"func"}},hoursAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `hours ago` label text",defaultValue:{value:"(value) => `${value} hours ago`",computed:!1},type:{name:"func"}},minuteAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `minute ago` label text",defaultValue:{value:"(value) => `${value} minute ago`",computed:!1},type:{name:"func"}},minutesAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `minutes ago` label text",defaultValue:{value:"(value) => `${value} minutes ago`",computed:!1},type:{name:"func"}},monthAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `month ago` label text",defaultValue:{value:"(value) => `${value} month ago`",computed:!1},type:{name:"func"}},monthsAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `months ago` label text",defaultValue:{value:"(value) => `${value} months ago`",computed:!1},type:{name:"func"}},nowText:{required:!1,tsType:{name:"string"},description:"Sets the `now` label text",defaultValue:{value:"'Now'",computed:!1},type:{name:"string"}},onClickOutside:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Sets the notifications panel open state",type:{name:"func"}},onDismissAllNotifications:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Function that will dismiss all notifications",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},onDismissSingleNotification:{required:!1,tsType:{name:"signature",type:"function",raw:"(prop) => void",signature:{arguments:[{name:"prop"}],return:{name:"void"}}},description:"Function that will dismiss a single notification",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},onDoNotDisturbChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(prop) => void",signature:{arguments:[{name:"prop"}],return:{name:"void"}}},description:"Optional: function that returns the current selected value of the disable notification toggle",type:{name:"func"}},onSettingsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Event handler for the View all button",type:{name:"func"}},onViewAllClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Event handler for the View all button",type:{name:"func"}},open:{required:!0,tsType:{name:"boolean"},description:"Determines whether the notifications panel should render or not",type:{name:"bool"}},previousLabel:{required:!1,tsType:{name:"string"},description:"Sets the previous label text",defaultValue:{value:"'Previous'",computed:!1},type:{name:"string"}},readLessLabel:{required:!1,tsType:{name:"string"},description:"Sets the `read less` label text",defaultValue:{value:"'Read less'",computed:!1},type:{name:"string"}},readMoreLabel:{required:!1,tsType:{name:"string"},description:"Sets the `read more` label text",defaultValue:{value:"'Read more'",computed:!1},type:{name:"string"}},secondsAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `seconds ago` label text",defaultValue:{value:"(value) => `${value} seconds ago`",computed:!1},type:{name:"func"}},settingsIconDescription:{required:!1,tsType:{name:"string"},description:"Sets the settings icon description text",defaultValue:{value:"'Settings'",computed:!1},type:{name:"string"}},title:{required:!1,tsType:{name:"string"},description:"Sets the title for the Notifications panel",defaultValue:{value:"'Notifications'",computed:!1},type:{name:"string"}},todayLabel:{required:!1,tsType:{name:"string"},description:"Sets the today label text",defaultValue:{value:"'Today'",computed:!1},type:{name:"string"}},triggerButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Reference to trigger button",type:{name:"any"}},viewAllLabel:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the View all button text",defaultValue:{value:"(value) => `View all (${value})`",computed:!1},type:{name:"func"}},yearAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `year ago` label text",defaultValue:{value:"(value) => `${value} year ago`",computed:!1},type:{name:"func"}},yearsAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `years ago` label text",defaultValue:{value:"(value) => `${value} years ago`",computed:!1},type:{name:"func"}},yesterdayAtText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `Yesterday at` label text",defaultValue:{value:"(value) => `Yesterday at ${value}`",computed:!1},type:{name:"func"}},yesterdayLabel:{required:!1,tsType:{name:"string"},description:"Sets the yesterday label text",defaultValue:{value:"'Yesterday'",computed:!1},type:{name:"string"}},selectorsFloatingMenus:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"Specify the CSS selectors that match the floating menus.",type:{name:"arrayOf",value:{name:"string"}}}}};const Dt=".c4p--notifications-panel__story--full-height{height:100vh;max-height:var(--doc-story-height)}.c4p--notifications-panel__story__add{display:flex;height:100%;align-items:center;justify-content:center}",_e=()=>t.createElement("svg",{width:"18px",height:"19px",viewBox:"0 0 18 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("title",null,"Unread notification bell"),t.createElement("g",{id:"Group",transform:"translate(-1.000000, 0.000000)"},t.createElement("path",{d:"M17.9419375,12.058125 L16.25,10.3661875 L16.25,8.125 C16.245845,4.91692673 13.816599,2.23147626 10.625,1.90675 L10.625,0.625 L9.375,0.625 L9.375,1.90675 C6.183401,2.23147626 3.754155,4.91692673 3.75,8.125 L3.75,10.3661875 L2.0580625,12.058125 C1.94086706,12.1753182 1.875,12.3342622 1.875,12.5 L1.875,14.375 C1.875,14.720178 2.15482203,15 2.5,15 L6.875,15 L6.875,15.4855 C6.84694527,17.1272367 8.05869477,18.5271305 9.6875,18.7346875 C10.5660567,18.8218694 11.4405518,18.5337871 12.0952737,17.9415019 C12.7499955,17.3492167 13.1239886,16.5078712 13.125,15.625 L13.125,15 L17.5,15 C17.845178,15 18.125,14.720178 18.125,14.375 L18.125,12.5 C18.125,12.3342622 18.0591329,12.1753182 17.9419375,12.058125 Z M11.875,15.625 C11.875,16.6605339 11.0355339,17.5 10,17.5 C8.96446609,17.5 8.125,16.6605339 8.125,15.625 L8.125,15 L11.875,15 L11.875,15.625 Z M16.875,13.75 L3.125,13.75 L3.125,12.7588125 L4.816875,11.066875 C4.93409336,10.949692 4.9999646,10.7907468 5,10.625 L5,8.125 C5,5.36357625 7.23857625,3.125 10,3.125 C12.7614237,3.125 15,5.36357625 15,8.125 L15,10.625 C15.0000354,10.7907468 15.0659066,10.949692 15.183125,11.066875 L16.875,12.7588125 L16.875,13.75 Z",id:"Shape",fillRule:"nonzero"}),t.createElement("circle",{id:"Oval",stroke:"#161616",fill:"#DA1E28",cx:"15",cy:"4.375",r:"2.5"})));_e.__docgenInfo={description:"",methods:[],displayName:"UnreadNotificationBell"};const Q=new Date;let ee=new Date;ee.setDate(ee.getDate()-1);let v=new Date;v.setDate(v.getDate()-2);const Ne=6e4,wt=[{id:m(),type:"error",title:"LogRhythm connection failure",description:"LogRhythm is failing to connect, check timeout.",timestamp:Q,unread:!0,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"LogDNA cannot be reached.",description:"Unable to communicate with LogDNA.",timestamp:new Date(new Date().getTime()-30*1e3),unread:!0,onNotificationClick:l("Clicked on notification")},{id:m(),type:"warning",title:"System alert",description:"Email classification was exported successfully.",timestamp:new Date(Q.getTime()-11*Ne),onNotificationClick:l("Clicked on notification")},{id:m(),type:"success",title:"IBM Cloud Pak for Automation Success",description:"Successfully connected cartridge",timestamp:new Date(Q.getTime()-120*Ne),onNotificationClick:l("Clicked on notification")},{id:m(),type:"success",title:"Successfully connected LogDNA",description:"App connection succeeded",timestamp:ee,onNotificationClick:l("Clicked on notification")},{id:m(),type:"warning",title:"Cloud Foundry app memory",description:"Allocated app memory low",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"informational",title:"Logs are now being monitored",link:{text:"View logs",url:"https://www.carbondesignsystem.com"},timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")},{id:m(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:v,onNotificationClick:l("Clicked on notification")}],te=`${z.prefix}--notifications-panel__story`;`${z.prefix}`;const fn={title:"IBM Products/Patterns/Notifications/NotificationsPanel",component:x,tags:["autodocs"],parameters:{styles:Dt,layout:"fullscreen"}},xe=(a,c,d,g)=>t.createElement(Qe,{render:()=>t.createElement(Xe,{"aria-label":"IBM Cloud Pak",className:`${te}--header`},t.createElement(Je,{href:"/",prefix:"IBM"},"Cloud Pak"),t.createElement(et,{style:{zIndex:2}},t.createElement(he,{"aria-label":"Notifications",onClick:()=>c(!a),ref:d},g?t.createElement(_e,null):t.createElement(pt,{size:20})),t.createElement(he,{"aria-label":"App switcher"},t.createElement(gt,{size:20}))))}),Ct=a=>{const[c,d]=h.useState(!1),g=h.useRef(null),[N,_]=h.useState(!1),[f,b]=h.useState(wt),w=()=>{const T={id:m(),type:"success",title:"Deployed app successfully",description:"Application has been deployed.",timestamp:new Date,unread:!0,onNotificationClick:l("Clicked on notification")};b(p=>[...p,T])};return h.useEffect(()=>{let T;if(c&&N){const p=[...f];p.forEach(D=>{D.unread=!1}),T=setTimeout(()=>{_(!1),b(p)},2e3)}if(!c&&!N){let p;for(let D=0;D<f.length;D++)if(f[D].unread===!0){p=!0;break}else p=!1;_(p)}return()=>clearTimeout(T)},[c,f,N]),t.createElement("div",{className:`${te}--full-height`},xe(c,d,g,N),t.createElement("div",{className:`${te}__add`},t.createElement(B,{onClick:w},"Add new notification")),t.createElement(x,{...a,data:f,open:c,onClickOutside:()=>d(!1),onDismissAllNotifications:()=>b([]),onDismissSingleNotification:({id:T})=>{let p=[...f];p=p.filter(D=>D.id!==T),b(p)},triggerButtonRef:g}))},kt=a=>{const[c,d]=h.useState(!1);return t.createElement(t.Fragment,null,xe(c,d),t.createElement(x,{...a,open:c,onClickOutside:()=>d(!1),doNotDisturbDefaultToggled:!0}))},H=Ct.bind({});H.args={onDoNotDisturbChange:l("Toggled to do not disturb"),onViewAllClick:l("Clicked view all button"),onSettingsClick:l("Clicked settings gear")};const F=kt.bind({});F.args={data:[],onDoNotDisturbChange:l("Toggled to do not disturb"),onViewAllClick:l("Clicked view all button"),onSettingsClick:l("Clicked settings gear")};var ve,Te,De;H.parameters={...H.parameters,docs:{...(ve=H.parameters)==null?void 0:ve.docs,source:{originalSource:`args => {
  const [open, setOpen] = useState(false);
  const notificationTriggerRef = useRef(null);
  const [hasUnreadNotifications, setHasUnreadNotifications] = useState(false);
  const [notificationsData, setNotificationsData] = useState(data);
  const addNewNotification = () => {
    const newNotification = {
      id: uuidv4(),
      type: 'success',
      title: 'Deployed app successfully',
      description: 'Application has been deployed.',
      timestamp: new Date(),
      unread: true,
      onNotificationClick: action(\`Clicked on notification\`)
    };
    setNotificationsData(arr => [...arr, newNotification]);
  };

  // logic for unread bell indicator
  useEffect(() => {
    let unreadTimer;
    if (open && hasUnreadNotifications) {
      const tempData = [...notificationsData];
      tempData.forEach(element => {
        element.unread = false;
      });
      unreadTimer = setTimeout(() => {
        setHasUnreadNotifications(false);
        setNotificationsData(tempData);
      }, 2000);
    }
    if (!open && !hasUnreadNotifications) {
      let hasUnreadNotificationsCheck;
      for (let i = 0; i < notificationsData.length; i++) {
        if (notificationsData[i].unread === true) {
          hasUnreadNotificationsCheck = true;
          break;
        } else {
          hasUnreadNotificationsCheck = false;
        }
      }
      setHasUnreadNotifications(hasUnreadNotificationsCheck);
    }
    return () => clearTimeout(unreadTimer);
  }, [open, notificationsData, hasUnreadNotifications]);
  return <div className={\`\${storyBlockClass}--full-height\`}>
      {renderUIShellHeader(open, setOpen, notificationTriggerRef, hasUnreadNotifications)}
      <div className={\`\${storyBlockClass}__add\`}>
        <Button onClick={addNewNotification}>Add new notification</Button>
      </div>
      <NotificationsPanel {...args} data={notificationsData} open={open} onClickOutside={() => setOpen(false)} onDismissAllNotifications={() => setNotificationsData([])} onDismissSingleNotification={({
      id
    }) => {
      let tempData = [...notificationsData];
      tempData = tempData.filter(item => item.id !== id);
      setNotificationsData(tempData);
    }} triggerButtonRef={notificationTriggerRef} />
    </div>;
}`,...(De=(Te=H.parameters)==null?void 0:Te.docs)==null?void 0:De.source}}};var we,Ce,ke;F.parameters={...F.parameters,docs:{...(we=F.parameters)==null?void 0:we.docs,source:{originalSource:`args => {
  const [open, setOpen] = useState(false);
  return <>
      {renderUIShellHeader(open, setOpen)}
      <NotificationsPanel {...args} open={open} onClickOutside={() => setOpen(false)} doNotDisturbDefaultToggled />
    </>;
}`,...(ke=(Ce=F.parameters)==null?void 0:Ce.docs)==null?void 0:ke.source}}};const pn=["Default","EmptyState"];export{H as Default,F as EmptyState,pn as __namedExportsOrder,fn as default};
