import{r as $,R as g}from"./index-BwDkhjyp.js";import{w as Q}from"./wait-CTNFjQS8.js";import{P as b}from"./index-Dk74W0Oi.js";import{c as j}from"./floating-ui.dom.mjs-BB6krl5l.js";import{P as W,a as X}from"./ProgressIndicator-DZIctbi2.js";import"./props-helper-2sr7eXy7.js";import{p as Y}from"./settings-GP6q6PuD.js";const x=({previousState:n,currentStep:r,blockClass:e,onMount:c,firstFocusElement:a})=>{$.useEffect(()=>{typeof c=="function"&&c()},[c]),$.useEffect(()=>{const d=async l=>{await Q(10),l.focus()};if((n==null?void 0:n.currentStep)!==r&&r>0&&a){const l=document.querySelector(a);l&&d(l)}},[r,n,e,c,a])},S=({firstIncludedStep:n,lastIncludedStep:r,stepData:e,onPrevious:c,onNext:a,isSubmitDisabled:d,setCurrentStep:l,setIsSubmitting:o,setLoadingPrevious:f=null,loadingPrevious:s=!1,onClose:i,onRequestSubmit:h,componentName:y,currentStep:C,backButtonText:P,cancelButtonText:R,submitButtonText:T,nextButtonText:F,isSubmitting:H,componentBlockClass:A,setCreateComponentActions:U,setModalIsOpen:V,experimentalSecondarySubmit:w,experimentalSecondarySubmitText:q})=>{const _=$.useCallback(()=>{o(!1),l(t=>{var k;do t++;while(!((k=e[t-1])!=null&&k.shouldIncludeStep));return t})},[l,o,e]),N=$.useCallback(()=>{y!=="CreateFullPage"&&f(!1),l(t=>{var k;do t--;while(!((k=e[t-1])!=null&&k.shouldIncludeStep));return t})},[l,e,f,y]);$.useEffect(()=>{const t=()=>{y!=="CreateFullPage"&&l(1),o(!1),i()},k=async()=>{try{await h(),t()}catch(u){o(!1),console.warn(`${y} submit error: ${u}`)}},z=async()=>{if(f==null||f(!0),typeof c=="function")try{await c(),N()}catch(u){console.warn(`${y} onBack error: ${u}`)}else N()},G=async()=>{if(o(!0),typeof a=="function")try{await a(),_()}catch(u){o(!1),console.warn(`${y} onNext error: ${u}`)}else _()},J=async()=>{if(o(!0),typeof a=="function")try{await a(),await k()}catch(u){o(!1),console.warn(`${y} onNext error: ${u}`)}else await k()},K=()=>{typeof(w==null?void 0:w.onClick)=="function"&&w.onClick()};if((e==null?void 0:e.length)>0){const u=[];(e==null?void 0:e.length)>1&&u.push({key:"create-action-button-back",label:P,onClick:z,kind:"secondary",disabled:C===n,loading:s}),u.push({key:"create-action-button-cancel",label:R,onClick:y==="CreateFullPage"?()=>V(!0):t,kind:"ghost"}),q&&!(w!=null&&w.hideSecondarySubmit)&&u.push({key:"create-action-button-experimentalSecondarySubmit",label:q,onClick:K,kind:"secondary",disabled:w==null?void 0:w.disabled}),u.push({key:"create-action-button-submit",label:C<r?F:T,onClick:C<r?G:J,disabled:d,kind:"primary",loading:H,className:`${A}__create-button`}),U(u)}},[n,r,e,a,d,P,R,C,i,F,T,h,H,A,y,_,l,U,o,V,N,c,f,s,w,q])},Z=(n,r)=>{let e=0;return n.forEach((c,a)=>{a+1>r||c.shouldIncludeStep===!1&&(e+=1)}),e},ee=({firstIncludedStep:n,previousState:r,open:e,setCurrentStep:c,stepData:a,initialStep:d,totalSteps:l,componentName:o})=>{$.useEffect(()=>{if(!(r!=null&&r.open)&&e){if(d&&l&&Number(d)<=Number(l)&&Number(d)>0){const f=Z(a,d);c(Number(d+f))}else c(n);(d&&l&&Number(d)>Number(l)||Number(d)<=0)&&console.warn(`${o}: An invalid \`initialStep\` prop was supplied. The \`initialStep\` prop should be a number that is greater than 0 or less than or equal to the number of steps your ${o} has.`)}},[n,e,r,c,a,d,l,o])},re=({stepsContext:n,stepNumber:r,introStep:e,invalid:c,shouldIncludeStep:a,secondaryLabel:d,title:l})=>{$.useEffect(()=>{n&&n.setStepData(o=>{const f={title:l,secondaryLabel:d,introStep:e,invalid:c,shouldIncludeStep:a},s=o[r-1];if((s==null?void 0:s.title)!==f.title||(s==null?void 0:s.secondaryLabel)!==f.secondaryLabel||(s==null?void 0:s.introStep)!==f.introStep||(s==null?void 0:s.shouldIncludeStep)!==f.shouldIncludeStep||(s==null?void 0:s.invalid)!==f.invalid){const i=[...o];return i[r-1]=f,i}return o})},[a,l,d,e,c,n,r])},le=(n,r)=>{$.useEffect(()=>{n===1&&console.warn(`${r}: ${r}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`)},[n,r])},E=`${Y.prefix}--create-influencer`,L="CreateInfluencer",O=({className:n,currentStep:r,stepData:e,title:c})=>{const a=(l,o)=>{const f=[];return l.forEach((s,i)=>{var h;((h=l[i])==null?void 0:h[o])===!1&&i<=r-1&&f.push(s)}),f.length},d=()=>{var s,i;const l=e==null?void 0:e.filter(h=>!(h!=null&&h.introStep)),o=l==null?void 0:l.filter(h=>h==null?void 0:h.shouldIncludeStep),f=a(e,"shouldIncludeStep")||0;return g.createElement("div",{className:`${E}__left-nav`},c&&g.createElement("h3",{className:`${E}__title`},c),r===1&&((s=e[0])!=null&&s.introStep)?null:g.createElement(W,{currentIndex:(i=e[0])!=null&&i.introStep?r-f-2:r-f-1,spaceEqually:!0,vertical:!0,className:j(`${E}__progress-indicator`)},o.map((h,y)=>g.createElement(X,{label:h.title,key:y,secondaryLabel:h.secondaryLabel||void 0,invalid:h.invalid}))))};return g.createElement("div",{className:j(E,n)},d())};O.displayName=L;O.propTypes={className:b.string,currentStep:b.number.isRequired,stepData:b.arrayOf(b.shape({introStep:b.bool,secondaryLabel:b.string,shouldIncludeStep:b.bool,title:b.node})),title:b.string};O.__docgenInfo={description:"",methods:[],displayName:"CreateInfluencer",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},currentStep:{required:!0,tsType:{name:"number"},description:"Provide the current step number.",type:{name:"number"}},stepData:{required:!1,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:"Provide the Set Data.",type:{name:"arrayOf",value:{name:"shape",value:{introStep:{name:"bool",required:!1},secondaryLabel:{name:"string",required:!1},shouldIncludeStep:{name:"bool",required:!1},title:{name:"node",required:!1}}}}},title:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Title.",type:{name:"string"}}}};const ne=(n,r,e)=>{var c;for(let a=n.length-1;a>=0;a--)if(((c=n[a])==null?void 0:c[r])===e)return a+1;return-1};export{O as C,le as a,ee as b,S as c,re as d,Z as g,ne as l,x as u};
