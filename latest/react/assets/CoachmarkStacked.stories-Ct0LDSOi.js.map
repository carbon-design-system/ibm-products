{"version":3,"file":"CoachmarkStacked.stories-Ct0LDSOi.js","sources":["../../src/patterns/CoachmarkStacked/CoachmarkStacked.mdx","../../src/patterns/CoachmarkStacked/CoachmarkStacked.stories.jsx"],"sourcesContent":["import { Story, Controls, Source, Canvas } from '@storybook/addon-docs/blocks';\nimport { CodesandboxLink } from '../../global/js/utils/story-helper';\nimport * as CoachmarkStackedStories from './CoachmarkStacked.stories';\nimport { stackblitzPrefillConfig } from '../../../previewer/codePreviewer';\n\n# CoachmarkStacked\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Example usage](#example-usage)\n\n## Overview\n\nThe CoachmarkStacked pattern acts as a container element for onboarding and\nshould only be used within the scope of a Coachmark.\n\nTo build this pattern, we recommend including the following components:\n\n- [Coachmark](https://carbon-for-ibm-products.netlify.app/?path=/docs/preview-onboarding-coachmark--overview)\n- [Button](https://react.carbondesignsystem.com/?path=/docs/components-button)\n- [Carousel utility](https://github.com/carbon-design-system/carbon/blob/main/packages/utilities/src/carousel/README.md)\n\n## About Onboarding\n\n[Onboarding](https://pages.github.ibm.com/security/security-design/department/end-to-end-experiences/onboarding/overview/)\nis a continuous learning methodology and framework that aims to orient, onboard,\nexplain, educate, and cultivate novice users into high-functioning power users.\n\n## Example usage\n\n{/* TODO: One example per designed use case. */}\n\n<Canvas className=\"coachmarkExample\" withSource=\"none\">\n  <div className=\"CoachmarkBaseExampleUsage\">\n    <Story of={CoachmarkStackedStories.CoachmarkStacked} />\n  </div>\n</Canvas>\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { Button, Theme, Link as CarbonLink } from '@carbon/react';\nimport styles from './_storybook-styles.scss?inline';\nimport DocsPage from './CoachmarkStacked.mdx';\nimport { Coachmark } from '../../components/Coachmark/next/Coachmark';\nimport {\n  initCarousel,\n  InitCarousel,\n} from '../../global/js/utils/carousel/carousel';\nimport { CoachmarkTagline } from '../../components/Coachmark/next/Coachmark/CoachmarkTagline/CoachmarkTagline';\nimport { Idea } from '@carbon/react/icons';\nimport { pkg } from '../../settings';\nimport cx from 'classnames';\n\nexport default {\n  title: 'Patterns/Coachmark Stacked',\n  component: () => {},\n  tags: ['autodocs'],\n  parameters: {\n    styles,\n    docs: {\n      page: DocsPage,\n    },\n  },\n};\n\n//fetching theme\nfunction useCarbonTheme() {\n  const [themeValue, setThemeValue] = useState(() =>\n    document.documentElement.getAttribute('data-carbon-theme')\n  );\n\n  useEffect(() => {\n    const target = document.documentElement;\n\n    // function to read the current theme\n    const readTheme = () => {\n      const newTheme = target.getAttribute('data-carbon-theme');\n      setThemeValue((prev) => (prev !== newTheme ? newTheme : prev));\n    };\n\n    const observer = new MutationObserver((mutationsList) => {\n      for (const mutation of mutationsList) {\n        if (\n          mutation.type === 'attributes' &&\n          mutation.attributeName === 'data-carbon-theme'\n        ) {\n          readTheme();\n        }\n      }\n    });\n\n    observer.observe(target, {\n      attributes: true,\n      attributeFilter: ['data-carbon-theme'],\n    });\n\n    //fallback - check readTheme in every 200ms\n    const interval = setInterval(readTheme, 200);\n\n    return () => {\n      observer.disconnect();\n      clearInterval(interval);\n    };\n  }, []);\n\n  return themeValue;\n}\n\nconst CoachmarkStackedPattern = (args) => {\n  const carbonTheme = useCarbonTheme();\n  const [isOpen, setIsOpen] = useState(true);\n\n  const [currentViewIndex, setCurrentViewIndex] = useState(-1);\n  const [lastViewIndex, setLastViewIndex] = useState(-1);\n  //prettier-ignore\n  const [openId, setOpenId] = useState(0);\n  //prettier-ignore\n  const carouselContainerRef = useRef < HTMLDivElement > (null);\n  //prettier-ignore\n  const carouselInit = useRef < InitCarousel > (null);\n  //prettier-ignore\n  const [parentHeight, setParentHeight] = useState<number>(0);\n  //prettier-ignore\n  const stackHomeContentRef = useRef<HTMLDivElement | null>(null);\n  //prettier-ignore\n  const stackedCoachmarkContentRefs = useRef([]);\n\n  const blockClass = `coachmark-stacked-home`;\n  const stackedCoachmark = `stacked-coachmark`;\n  const elementBlockClass = `stacked_element_content`;\n\n  const items = [\n    {\n      id: 1,\n      label: 'Example 1',\n    },\n    {\n      id: 2,\n      label: 'Example 2',\n    },\n    {\n      id: 3,\n      label: 'Example 3',\n    },\n  ];\n\n  const nestedItems = [\n    {\n      id: 1,\n      title: 'Short Coachmark',\n      text: 'As small as it gets.',\n      type: 'simple',\n      button: (\n        <Button\n          size=\"sm\"\n          onClick={(e) => {\n            setOpenId(null);\n            e.stopPropagation();\n          }}\n        >\n          Done\n        </Button>\n      ),\n    },\n    {\n      id: 2,\n      type: 'carousel',\n      pages: [\n        {\n          id: '1',\n          title: 'Mid-height Coachmark',\n          text: (\n            <>\n              This should be about the same height as the base stack item.\n              <br />\n              <br />\n              This is known as the enrichment phase. Enrichment supports you by\n              emulating how an analyst would evaluate a finding—for example, by\n              adding context, such as whether a certain piece of data is known\n              to be malicious, or is linked...\n            </>\n          ),\n          button: (\n            <CarbonLink href=\"https://www.ibm.com\">Learn more</CarbonLink>\n          ),\n        },\n        {\n          id: '2',\n          title: 'Hello World',\n          text: 'Link opens in new tab.',\n          button: (\n            <CarbonLink href=\"https://www.ibm.com\" target=\"_blank\">\n              {' '}\n              Learn more{' '}\n            </CarbonLink>\n          ),\n        },\n      ],\n    },\n    {\n      id: 3,\n      type: 'carousel',\n      pages: [\n        {\n          id: '1',\n          title: 'Tall Coachmark',\n          text: (\n            <>\n              These alerts contain data gathered from your connected security\n              systems.\n            </>\n          ),\n        },\n        {\n          id: '2',\n          title: 'Alerts contain evidence, known as artifacts',\n          text: (\n            <>\n              These help to determine whether the alert is good or bad. And as\n              alerts are added to a case, they become findings.\n            </>\n          ),\n        },\n        {\n          id: '3',\n          title: 'Findings are enriched with more information and context',\n          text: (\n            <>\n              This is known as the enrichment phase. Enrichment supports you by\n              emulating how an analyst would evaluate a finding—for example, by\n              adding context, such as whether a certain piece of data is known\n              to be malicious, or is linked to a known threat.\n              <br />\n              <br />\n              Lets\n              <br />\n              <br />\n              make\n              <br />\n              <br />\n              this\n              <br />\n              <br />\n              one\n              <br />\n              <br />\n              really\n              <br />\n              <br />\n              tall.\n            </>\n          ),\n        },\n        {\n          id: '4',\n          title: 'Next, the correlation process takes place',\n          text: (\n            <>\n              Based on the results of the enrichment process, findings that are\n              potentially related are grouped together, and then evaluated.\n            </>\n          ),\n        },\n        {\n          id: '5',\n          title:\n            'Between enrichment and correlation, the severity of a case is determined',\n          text: (\n            <>\n              And once you know the severity, you can easily choose which case\n              to pick up next.\n            </>\n          ),\n        },\n      ],\n    },\n  ];\n\n  const handleClose = (e) => {\n    e.stopPropagation();\n    setIsOpen(false);\n  };\n\n  const handleCloseCarousel = (e) => {\n    setOpenId(null);\n    carouselInit.current.reset();\n    e.stopPropagation();\n  };\n\n  const handleTaglineClick = () => {\n    setIsOpen((isOpen) => !isOpen);\n  };\n\n  useEffect(() => {\n    if (carouselContainerRef && carouselContainerRef.current) {\n      carouselInit.current = initCarousel(carouselContainerRef.current, {\n        onViewChangeStart: onViewChangeStart,\n        onViewChangeEnd: onViewChangeEnd,\n        useMaxHeight: true,\n      });\n    }\n  }, [carouselInit, openId]);\n\n  const onViewChangeStart = () => {};\n  const onViewChangeEnd = (options) => {\n    handleViewStackUpdate(options);\n  };\n\n  const handleViewStackUpdate = useCallback(\n    ({ currentIndex, lastIndex }) => {\n      setCurrentViewIndex(currentIndex);\n      setLastViewIndex(lastIndex);\n    },\n    [openId]\n  );\n\n  const onNext = (e) => {\n    carouselInit.current.next();\n    e.stopPropagation();\n  };\n  const onPrev = (e) => {\n    carouselInit.current.prev();\n    e.stopPropagation();\n  };\n\n  useLayoutEffect(() => {\n    if (!parentHeight) {\n      if (stackHomeContentRef.current) {\n        //prettier-ignore\n        const stackHomeContent = stackHomeContentRef.current.querySelector<HTMLDivElement>(`div.${pkg.prefix}__bubble`);\n        if (stackHomeContent) {\n          const height = stackHomeContent.clientHeight;\n\n          if (height > 0) {\n            setParentHeight(height);\n          }\n        }\n      }\n      return;\n    }\n\n    if (stackHomeContentRef.current) {\n      //prettier-ignore\n      const stackHomeContent = stackHomeContentRef.current.querySelector<HTMLDivElement>(`div.${pkg.prefix}__bubble`);\n      if (stackHomeContent) {\n        stackHomeContent.style.height = `${parentHeight}px`;\n      }\n    }\n\n    if (!isOpen || openId <= 0) {\n      requestAnimationFrame(() => {\n        if (stackHomeContentRef.current) {\n          //prettier-ignore\n          const stackHomeContent = stackHomeContentRef.current.querySelector<HTMLDivElement>(`div.${pkg.prefix}__bubble`);\n\n          if (stackHomeContent) {\n            stackHomeContent.classList.remove(`${blockClass}--scaled-home`);\n            stackHomeContent.classList.add(`${blockClass}--unscaled-home`);\n            stackHomeContent.focus();\n          }\n        }\n        return;\n      }, 0);\n    }\n\n    if (openId > 0 && isOpen && stackedCoachmarkContentRefs.current) {\n      const container = stackedCoachmarkContentRefs.current[openId];\n\n      //prettier-ignore\n      const targetHome = Array.from(\n        container.querySelectorAll<HTMLDivElement>(`div.${pkg.prefix}__bubble`)\n      ).filter(bubble => bubble.parentElement === container);\n\n      if (targetHome.length > 0) {\n        setTimeout(() => {\n          targetHome.forEach((bubble) => {\n            requestAnimationFrame(() => {\n              const targetHomeHeight = bubble.clientHeight;\n\n              //prettier-ignore\n              const stackHomeContent = stackHomeContentRef.current.querySelector<HTMLDivElement>(`div.${pkg.prefix}__bubble`);\n              if (stackHomeContent) {\n                stackHomeContent.style.height = `calc(${targetHomeHeight}px + 1px)`;\n                stackHomeContent.classList.add(`${blockClass}--scaled-home`);\n                stackHomeContent.classList.remove(\n                  `${blockClass}--unscaled-home`\n                );\n                stackedCoachmarkContentRefs.current[openId].focus();\n              }\n            });\n          });\n        }, 0);\n      }\n    }\n  }, [openId, isOpen, parentHeight]);\n\n  return (\n    <Theme theme={carbonTheme}>\n      <Coachmark\n        open={isOpen}\n        onClose={handleClose}\n        align=\"top\"\n        {...args}\n        className={`${blockClass}`}\n      >\n        <CoachmarkTagline\n          title=\"Why are there two types of severity scores?\"\n          closeIconDescription=\"Close\"\n          data-testid={'helloworld'}\n          isOpen={isOpen}\n          buttonProps={{ onClick: handleTaglineClick, id: 'CoachmarkTagline' }}\n        ></CoachmarkTagline>\n        <Coachmark.Content\n          className={isOpen && `--is-visible`}\n          highContrast={true}\n          ref={stackHomeContentRef}\n        >\n          <Coachmark.Content.Header closeIconDescription=\"Close\"></Coachmark.Content.Header>\n          <Coachmark.Content.Body className={`${blockClass}__body`}>\n            <div className={`${blockClass}-element`}>\n              <Idea size={20} className={`${blockClass}__icon-idea`} />\n            </div>\n            <div className={`${blockClass}__content`}>\n              <h2 className={`${blockClass}__title`}>Example title</h2>\n              <p className={`${blockClass}__body`}>\n                This is an example of a description\n              </p>\n            </div>\n            <ul className={`${blockClass}__nav-links`}>\n              {items.map((item) => (\n                <React.Fragment key={item.id}>\n                  <li key={item.id}>\n                    <Button\n                      kind=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => {\n                        setOpenId(item.id);\n                      }}\n                    >\n                      {item.label}\n                    </Button>\n                  </li>\n                </React.Fragment>\n              ))}\n            </ul>\n            <Button\n              size=\"sm\"\n              onClick={handleClose}\n              className={`${blockClass}__footer`}\n            >\n              Close\n            </Button>\n            <br></br>\n          </Coachmark.Content.Body>\n        </Coachmark.Content>\n      </Coachmark>\n      {items.map((item) => (\n        <Coachmark\n          open={openId === item.id}\n          onClose={(e) => {\n            setOpenId(null);\n            e.stopPropagation();\n          }}\n          align=\"top\"\n        >\n          <Coachmark.Content\n            highContrast\n            ref={(el) => {\n              if (el) {\n                stackedCoachmarkContentRefs.current[item.id] = el;\n              }\n            }}\n            className={cx(`${elementBlockClass}`)}\n          >\n            <Coachmark.Content.Header closeIconDescription=\"Close\" />\n            <Coachmark.Content.Body>\n              {nestedItems\n                .filter((nested) => nested.id === item.id)\n                .map((nested) => {\n                  if (nested.type === 'simple') {\n                    return (\n                      <div\n                        key={nested.id}\n                        className={`${stackedCoachmark}__content`}\n                      >\n                        <h2 className={`${stackedCoachmark}__title`}>\n                          {nested.title}\n                        </h2>\n                        <p className={`${stackedCoachmark}__body`}>\n                          {nested.text}\n                        </p>\n                        <div className={`${stackedCoachmark}__button`}>\n                          {nested.button}\n                        </div>\n                      </div>\n                    );\n                  }\n                  if (nested.type === 'carousel') {\n                    return (\n                      <>\n                        <div\n                          ref={carouselContainerRef}\n                          className=\"exampleCarouselWrapper\"\n                        >\n                          {nested.pages.map((page) => (\n                            <div key={page.id}>\n                              <h2>{page.title}</h2>\n                              <p>{page.text}</p>\n                              <p>{page.button}</p>\n                            </div>\n                          ))}\n                        </div>\n\n                        <div className={'carouselControlWrapper__footer'}>\n                          <div\n                            className={\n                              'carouselControlWrapper--controls-progress'\n                            }\n                          >\n                            {nested.pages.map((page, index) => {\n                              if (\n                                carouselInit.current?.getActiveItem?.()\n                                  ?.index === index\n                              )\n                                return (\n                                  <span key={item.id}>\n                                    {`${carouselInit.current?.getActiveItem?.()?.index + 1} / ${nested.pages.length}`}\n                                  </span>\n                                );\n                            })}\n                          </div>\n                          <div className={'carouselControlWrapper--buttons'}>\n                            {currentViewIndex !== 0 && (\n                              <Button\n                                size=\"sm\"\n                                iconDescription=\"Previous\"\n                                kind=\"ghost\"\n                                onClick={onPrev}\n                              >\n                                Back\n                              </Button>\n                            )}\n\n                            {lastViewIndex !== currentViewIndex ? (\n                              <Button\n                                size=\"sm\"\n                                iconDescription=\"Next\"\n                                onClick={onNext}\n                              >\n                                Next\n                              </Button>\n                            ) : (\n                              <Button size=\"sm\" onClick={handleCloseCarousel}>\n                                Done\n                              </Button>\n                            )}\n                          </div>\n                        </div>\n                      </>\n                    );\n                  }\n                  return null;\n                })}\n            </Coachmark.Content.Body>\n          </Coachmark.Content>\n        </Coachmark>\n      ))}\n    </Theme>\n  );\n};\n\nexport const CoachmarkStack = CoachmarkStackedPattern.bind({});\nCoachmarkStack.args = {};\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Canvas","Story","CoachmarkStackedStories.CoachmarkStacked","MDXContent","MDXLayout","CoachmarkStacked_stories","title","component","tags","parameters","styles","docs","page","DocsPage","useCarbonTheme","themeValue","setThemeValue","useState","document","documentElement","getAttribute","useEffect","target","readTheme","newTheme","prev","observer","MutationObserver","mutationsList","mutation","type","attributeName","observe","attributes","attributeFilter","interval","setInterval","disconnect","clearInterval","CoachmarkStackedPattern","args","carbonTheme","isOpen","setIsOpen","currentViewIndex","setCurrentViewIndex","lastViewIndex","setLastViewIndex","openId","setOpenId","carouselContainerRef","useRef","carouselInit","parentHeight","setParentHeight","stackHomeContentRef","stackedCoachmarkContentRefs","blockClass","stackedCoachmark","elementBlockClass","items","id","label","nestedItems","text","button","React","Button","e","stopPropagation","pages","CarbonLink","handleClose","handleCloseCarousel","current","reset","handleTaglineClick","initCarousel","onViewChangeStart","onViewChangeEnd","useMaxHeight","options","handleViewStackUpdate","useCallback","currentIndex","lastIndex","onNext","next","onPrev","useLayoutEffect","stackHomeContent","querySelector","pkg","prefix","height","clientHeight","style","requestAnimationFrame","classList","remove","add","focus","container","targetHome","Array","from","querySelectorAll","filter","bubble","parentElement","length","setTimeout","forEach","targetHomeHeight","Theme","Coachmark","CoachmarkTagline","onClick","Idea","map","item","el","cx","nested","index","getActiveItem","CoachmarkStack","bind","source","originalSource"],"mappings":"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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,GAAAH,EAAArH,YAAAE,MAAAqH,MAAAA,CAAA,CAAA"}