import{e as a,a as Re,b as ze,r as o,u as Ke,c as _,_ as h,C as Oe,d as Se,s as Be,f as Ue,h as qe,P as n,g as M}from"./iframe-es3YFZs8.js";import{u as re,L as x,a as He,b as We}from"./index-cRBKcX7l.js";import{m as Ve}from"./mergeRefs-BZpmU3mx.js";import{F as Ge}from"./FormContext-ijK0cFxQ.js";import{u as Je}from"./useNormalizedInputProps-DEji8yld.js";import{A as Qe}from"./index-B6dVoXy9.js";import{d as le}from"./defaultItemToString-zSItMTD_.js";import{i as Xe}from"./utils-Whna5qm2.js";import{W as Ye,a as Ze}from"./bucket-19-B3J48Rvk.js";const{ItemMouseMove:es,MenuMouseLeave:ss}=re.stateChangeTypes;function ie(i,v){const{changes:c,type:I}=v;switch(I){case es:case ss:return c.highlightedIndex===i.highlightedIndex?i:c;default:return c}}const de=a.forwardRef(({autoAlign:i=!1,className:v,decorator:c,disabled:I=!1,direction:T="bottom",items:j,label:R,["aria-label"]:ce,ariaLabel:pe,itemToString:p=le,itemToElement:z=null,renderSelectedItem:K,type:ue="default",size:$,onChange:E,id:O,titleText:k="",hideLabel:fe,helperText:S="",translateWithId:be,light:B,invalid:me,invalidText:we,warn:ye,warnText:he,initialSelectedItem:U,selectedItem:q,downshiftProps:H,readOnly:m,slug:D,...ge},_e)=>{const w=Re("enable-v12-dynamic-floating-styles"),{refs:f,floatingStyles:W,middlewareData:xe}=ze(w||i?{placement:T,strategy:"fixed",middleware:[Be({apply({rects:e,elements:l}){Object.assign(l.floating.style,{width:`${e.reference.width}px`})}}),i&&Ue(),i&&qe()],whileElementsMounted:Se}:{});o.useEffect(()=>{if(w||i){const e={...W,visibility:xe.hide?.referenceHidden?"hidden":"visible"};Object.keys(e).forEach(l=>{f.floating.current&&(f.floating.current.style[l]=e[l])})}},[W,i,f.floating]);const s=Ke(),{isFluid:g}=o.useContext(Ge),V=o.useCallback(({selectedItem:e})=>{E&&E({selectedItem:e??null})},[E]),G=o.useCallback((e,l)=>e!==null&&typeof e=="object"&&"disabled"in e&&e.disabled===!0,[]),J=o.useCallback(e=>{const{highlightedIndex:l}=e;if(l!==void 0&&l>-1&&typeof window!==void 0){const u=document.querySelectorAll(`li.${s}--list-box__menu-item[role="option"]`)[l];u&&u.scrollIntoView({behavior:"smooth",block:"nearest"})}},[s]),C=o.useMemo(()=>j,[j]),Q=o.useMemo(()=>({items:C,itemToString:p,initialSelectedItem:U,onSelectedItemChange:V,stateReducer:ie,isItemDisabled:G,onHighlightedIndexChange:J,...H}),[C,p,U,V,ie,G,J,H]);q!==void 0&&(Q.selectedItem=q);const{isOpen:b,getToggleButtonProps:ve,getLabelProps:Ie,getMenuProps:X,getItemProps:$e,selectedItem:r,highlightedIndex:Ee}=re(Q),d=ue==="inline",t=Je({id:O,readOnly:m,disabled:I??!1,invalid:me??!1,invalidText:we,warn:ye??!1,warnText:he}),[ke,F]=o.useState(!1),De=_(`${s}--dropdown`,{[`${s}--dropdown--invalid`]:t.invalid,[`${s}--dropdown--warning`]:t.warn,[`${s}--dropdown--open`]:b,[`${s}--dropdown--focus`]:ke,[`${s}--dropdown--inline`]:d,[`${s}--dropdown--disabled`]:t.disabled,[`${s}--dropdown--light`]:B,[`${s}--dropdown--readonly`]:m,[`${s}--dropdown--${$}`]:$,[`${s}--list-box--up`]:T==="top",[`${s}--autoalign`]:i}),Ce=_(`${s}--label`,{[`${s}--label--disabled`]:t.disabled,[`${s}--visually-hidden`]:fe}),Fe=_(`${s}--form__helper-text`,{[`${s}--form__helper-text--disabled`]:t.disabled}),Pe=_(`${s}--dropdown__wrapper`,`${s}--list-box__wrapper`,v,{[`${s}--dropdown__wrapper--inline`]:d,[`${s}--list-box__wrapper--inline`]:d,[`${s}--dropdown__wrapper--inline--invalid`]:d&&t.invalid,[`${s}--list-box__wrapper--inline--invalid`]:d&&t.invalid,[`${s}--list-box__wrapper--fluid--invalid`]:g&&t.invalid,[`${s}--list-box__wrapper--slug`]:D,[`${s}--list-box__wrapper--decorator`]:c}),P=z,y=ve({"aria-label":ce||pe}),Y=S&&!g?a.createElement("div",{id:t.helperId,className:Fe},S):null,Z=e=>{F(e.type==="focus"&&!r)},ee=o.useRef(null),Ne=Ve(y.ref,_e,ee),[N,Ae]=o.useState(),[se,ne]=o.useState(!1),te=o.useCallback(e=>{(e.code!=="Space"||!["ArrowDown","ArrowUp"," ","Enter"].includes(e.key))&&ne(!0),(se&&e.code==="Space"||!["ArrowDown","ArrowUp"," ","Enter"].includes(e.key))&&(N&&clearTimeout(N),Ae(setTimeout(()=>{ne(!1)},3e3))),["ArrowDown"].includes(e.key)&&F(!1),["Enter"].includes(e.key)&&!r&&!b&&F(!0),y.onKeyDown&&(e.key!=="ArrowUp"||b&&e.key==="ArrowUp")&&y.onKeyDown(e)},[se,N,y]),Le=o.useMemo(()=>m?{onClick:e=>{e.preventDefault(),ee.current?.focus()},onKeyDown:e=>{["ArrowDown","ArrowUp"," ","Enter"].includes(e.key)&&e.preventDefault()}}:{onKeyDown:te},[m,te]),Me=o.useMemo(()=>X({ref:w||i?f.setFloating:null}),[i,X,f.setFloating,w]),A=D??c,oe=Xe(A,Qe)?o.cloneElement(A,{size:"mini"}):A,ae=Ie(),Te=o.isValidElement(k)?{id:ae.id}:ae;return a.createElement("div",h({className:Pe},ge),k&&a.createElement("label",h({className:Ce},Te),k),a.createElement(x,{onFocus:Z,onBlur:Z,size:$,className:De,invalid:t.invalid,warn:t.warn,light:B,isOpen:b,ref:w||i?f.setReference:null,id:O},t.invalid&&a.createElement(Ye,{className:`${s}--list-box__invalid-icon`}),t.warn&&a.createElement(Ze,{className:`${s}--list-box__invalid-icon ${s}--list-box__invalid-icon--warning`}),a.createElement("button",h({type:"button",className:`${s}--list-box__field`,disabled:t.disabled,"aria-disabled":m?!0:void 0,"aria-describedby":!d&&!t.invalid&&!t.warn&&Y?t.helperId:t.invalid?t.invalidId:t.warn?t.warnId:void 0,title:r&&p!==void 0?p(r):le(R)},y,Le,{ref:Ne}),a.createElement("span",{className:`${s}--list-box__label`},r?K?K(r):p(r):R),a.createElement(x.MenuIcon,{isOpen:b,translateWithId:be})),D?oe:c?a.createElement("div",{className:`${s}--list-box__inner-wrapper--decorator`},oe):"",a.createElement(x.Menu,Me,b&&C.map((e,l)=>{const L=e!==null&&typeof e=="object",u=$e({item:e,index:l}),je=L&&"text"in e&&z?e.text:p(e);return a.createElement(x.MenuItem,h({key:u.id,isActive:r===e,isHighlighted:Ee===l,title:je,disabled:u["aria-disabled"]},u),typeof e=="object"&&P!==void 0&&P!==null?a.createElement(P,h({key:u.id},e)):p(e),r===e&&a.createElement(Oe,{className:`${s}--list-box__menu-item__selected-icon`}))}))),!d&&!g&&!t.validation&&Y,!d&&!g&&t.validation)});de.displayName="Dropdown";de.propTypes={"aria-label":n.string,ariaLabel:M(n.string),autoAlign:n.bool,className:n.string,decorator:n.node,direction:n.oneOf(["top","bottom"]),disabled:n.bool,downshiftProps:n.object,helperText:n.node,hideLabel:n.bool,id:n.string.isRequired,initialSelectedItem:n.oneOfType([n.object,n.string,n.number]),invalid:n.bool,invalidText:n.node,itemToElement:n.func,itemToString:n.func,items:n.array.isRequired,label:n.node.isRequired,light:M(n.bool),onChange:n.func,readOnly:n.bool,renderSelectedItem:n.func,selectedItem:n.oneOfType([n.object,n.string,n.number]),size:We,slug:M(n.node),titleText:n.node.isRequired,translateWithId:n.func,type:He,warn:n.bool,warnText:n.node};export{de as D};
//# sourceMappingURL=Dropdown-DKaSKN6M.js.map
