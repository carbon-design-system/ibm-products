import{u as S,d as L,b as j,s as D,a as I,g as P,c as h,_ as q,H as K,P as e,f as G}from"./index-CXyjPnaX.js";import{r as i,e as y}from"./index-CPiZ6Cnx.js";import{B as U}from"./settings-iwZeeh4T.js";import{b as V,a as J}from"./useAttachedMenu-MiCadXk0.js";import{m as Q}from"./mergeRefs-CTUecegF.js";const X=["primary","tertiary","ghost"],Y="primary",Z=i.forwardRef(function(r,n){let{children:s,className:a,disabled:l,kind:t=Y,label:x,size:z="lg",menuAlignment:u="bottom",tabIndex:E=0,menuTarget:R,...C}=r;const _=S("enable-v12-dynamic-floating-styles"),p=L("MenuButton"),f=j(),m=i.useRef(null);let w=[];_||(w=[G({crossAxis:!1})]),(u==="bottom"||u==="top")&&w.push(D({apply(g){let{rects:H,elements:N}=g;Object.assign(N.floating.style,{width:`${H.reference.width}px`})}}));const{refs:c,floatingStyles:b,placement:v,middlewareData:M}=I({placement:u,strategy:"fixed",middleware:w,whileElementsMounted:P}),O=Q(n,m),{open:o,handleClick:k,handleMousedown:$,handleClose:B}=V(m);i.useLayoutEffect(()=>{Object.keys(b).forEach(g=>{c.floating.current&&(c.floating.current.style[g]=b[g])})},[b,c.floating,M,v,o]);function W(){m.current&&k()}const T=h(`${f}--menu-button__container`,a),A=h(`${f}--menu-button__trigger`,{[`${f}--menu-button__trigger--open`]:o}),F=h(`${f}--menu-button__${u}`);return y.createElement("div",q({},C,{ref:O,"aria-owns":o?p:void 0,className:T}),y.createElement(U,{ref:c.setReference,className:A,size:z,tabIndex:E,kind:t,renderIcon:K,disabled:l,"aria-haspopup":!0,"aria-expanded":o,onClick:W,onMouseDown:$,"aria-controls":o?p:void 0},x),y.createElement(J,{containerRef:m,menuAlignment:u,className:F,ref:c.setFloating,id:p,legacyAutoalign:!1,label:x,mode:"basic",size:z,open:o,onClose:B,target:R},s))});Z.propTypes={children:e.node.isRequired,className:e.string,disabled:e.bool,kind:e.oneOf(X),label:e.string.isRequired,menuAlignment:e.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:e.oneOf(["sm","md","lg"]),tabIndex:e.number,menuTarget:e.instanceOf(typeof Element<"u"?Element:Object)};const ee=typeof window<"u",te=()=>{if(!ee)return{innerHeight:0,innerWidth:0,outerHeight:0,outerWidth:0};const{innerHeight:d,innerWidth:r,outerHeight:n,outerWidth:s}={...window};return{innerHeight:d,innerWidth:r,outerHeight:n,outerWidth:s}},ae=(d,r,n=0)=>{const s=i.useRef({}),a=i.useRef(null),l=()=>{const t={previous:s.current,current:te()};d(t),s.current=t.current,a.current=null};i.useLayoutEffect(()=>{const t=()=>{n?a.current===null&&(a.current=setTimeout(l,n)):l()};return window.addEventListener("resize",t),l(),()=>window.removeEventListener("resize",t)},r)};export{Z as M,ae as u};
