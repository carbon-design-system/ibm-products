import{r as l,e as t}from"./index-DtHxqM--.js";import{d as S,P as e}from"./index-Ccw_5OKp.js";import{T as F}from"./Tag-Dv9fGIyR.js";import{D as ae}from"./DismissibleTag-CrcfsBzG.js";import{C as Te,M as we,a as Se}from"./ComposedModal-B82WV5E1.js";import{S as _e}from"./Search-BzOIQZYB.js";import{p as I}from"./settings-JuRwpTYJ.js";import{p as Ne,i as qe}from"./props-helper-mI8EhIiv.js";import{u as Ce}from"./usePortalTarget-DjC7v3SL.js";import{L as ke}from"./Link-BB7CuL0w.js";import{O as le}from"./OperationalTag-Bm7pdY22.js";import{P as $e,a as Ee}from"./index-DxWVrnnv.js";import{u as Ae}from"./useClickOutside-DnYoV4Om.js";import{g as Oe}from"./devtools-DSwQefcu.js";import{u as oe}from"./useResizeObserver-CiQvgsPb.js";const Me="TagSetModal",V=`${I.prefix}--tag-set-modal`,ne={modalAriaLabel:"List of all tags",searchLabel:""},Y=({allTags:o,className:E,title:W,modalAriaLabel:M=ne.modalAriaLabel,onClose:y,open:_,portalTarget:i,searchLabel:v=ne.searchLabel,searchPlaceholder:L,...N})=>{const[b,R]=l.useState([]),[q,C]=l.useState(""),T=Ce(i);l.useEffect(()=>{let s=[];if(_)if(q===""&&o)s=o==null?void 0:o.slice(0);else{const f=q.toLocaleLowerCase();o==null||o.forEach(m=>{var c,z,H,G;const p=(z=(c=m["data-search"])==null?void 0:c.toLocaleLowerCase())==null?void 0:z.indexOf(f),g=(G=(H=m.label)==null?void 0:H.toLocaleLowerCase())==null?void 0:G.indexOf(f);(p>-1||g>-1)&&s.push(m)})}R(s)},[o,_,q]);const n=s=>{C(s.target.value||"")};return T(t.createElement(Te,{...N,containerClassName:`${V}__container`,className:S(E,`${V}`),size:"sm",open:_,onClose:y},t.createElement(we,{className:`${V}__header`,closeModal:y,title:W},t.createElement(_e,{"data-modal-primary-focus":!0,className:`${V}__search`,labelText:v,placeholder:L,onChange:n,size:"lg"})),t.createElement(Se,{className:`${V}__body`,hasForm:!0,hasScrollingContent:!0,"aria-label":M},b.map(({label:s,...f},m)=>t.createElement(F,{...f,key:`all-tags-${m}`},s)),t.createElement("div",{className:`${V}__fade`}))))};Y.propTypes={allTags:e.arrayOf(e.shape({...Ne(F.propTypes,"filter"),label:e.string.isRequired})),className:e.string,onClose:e.func,open:e.bool,portalTarget:e.node,searchLabel:e.string,searchPlaceholder:e.string,title:e.string};Y.displayName=Me;const Le="TagSetOverflow",u=`${I.prefix}--tag-set-overflow`,Re={allTagsModalSearchThreshold:10},K=t.forwardRef(({allTagsModalSearchThreshold:o=Re.allTagsModalSearchThreshold,onOverflowClick:E,className:W,onShowAllClick:M,overflowAlign:y="bottom",overflowAutoAlign:_,overflowTags:i,overflowType:v,showAllTagsLabel:L,popoverOpen:N=!1,setPopoverOpen:b,size:R,...q},C)=>{const T=l.useRef(null),n=l.useRef(null);Ae(C||T,()=>{N&&b(!1)});const s=p=>{p.stopPropagation(),p.preventDefault(),b(!1),M()},f=p=>{const{key:g}=p;g==="Escape"&&b(!1)},m=()=>{E?E(i):b(!N)};return E?t.createElement("span",{...q,"aria-hidden":i.length===0,className:S(`${u}`,{[`${u}--hidden`]:i.length===0}),ref:C||T},t.createElement(le,{onClick:()=>m(),className:`${u}__popover-trigger`,size:R,text:`+${i.length}`})):t.createElement("span",{...q,"aria-hidden":i.length===0,className:S(`${u}`,{[`${u}--hidden`]:i.length===0}),ref:C||T},t.createElement($e,{align:y,className:S(W,`${u}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:f,open:N,autoAlign:_},t.createElement(le,{onClick:()=>b(!N),className:S(`${u}__popover-trigger`),size:R,text:`+${i.length}`}),t.createElement(Ee,null,t.createElement("div",{ref:n,className:`${u}__content`},t.createElement("ul",{className:`${u}__tag-list`},i.filter((p,g)=>i.length>o?g<o:g<=o).map((p,g)=>{const c={};if(v==="tag"&&(c.type="high-contrast"),v==="default"&&(c.filter=!1),t.isValidElement(p))return t.createElement("li",{className:S(`${u}__tag-item`,{[`${u}__tag-item--default`]:v==="default",[`${u}__tag-item--tag`]:v==="tag"}),key:g},t.cloneElement(p,c))})),i.length>o&&t.createElement(ke,{className:`${u}__show-all-tags-link`,href:"",onClick:s,role:"button"},L)))))});K.displayName=Le;K.propTypes={allTagsModalSearchThreshold:e.number,className:e.string,onOverflowClick:e.func,onShowAllClick:e.func.isRequired,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowTags:e.arrayOf(e.object).isRequired,overflowType:e.oneOf(["default","tag"]),popoverOpen:e.bool,setPopoverOpen:e.func.isRequired,showAllTagsLabel:e.string,size:e.string};K.__docgenInfo={description:"",methods:[],displayName:"TagSetOverflow",props:{allTagsModalSearchThreshold:{required:!1,tsType:{name:"number"},description:"count of overflowTags over which a modal is offered",defaultValue:{value:"10",computed:!1},type:{name:"number"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},onOverflowClick:{required:!1,tsType:{name:"union",raw:"((overFlowTags: ReactNode[]) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"An optional click handler that overrides the default functionality of displaying all tags in a modal",type:{name:"func"}},onShowAllClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"function to execute on clicking show all",type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowTags:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:`@type {Array<any>}
tags shown in overflow`,type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},popoverOpen:{required:!1,tsType:{name:"boolean"},description:"Open state of the popover",defaultValue:{value:"false",computed:!1},type:{name:"bool"}},setPopoverOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:"Setter function for the popoverOpen state value",type:{name:"func"}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link",type:{name:"string"}},size:{required:!1,tsType:{name:"string"},description:"Size of the overflow tag",type:{name:"string"}}}};const J="TagSet",w=`${I.prefix}--tag-set`,re=10,se={measurementOffset:0,onOverflowTagChange:()=>{}};let D=t.forwardRef(({align:o="start",allTagsModalTarget:E,className:W,maxVisible:M,multiline:y,overflowAutoAlign:_,overflowAlign:i="bottom",overflowClassName:v,overflowType:L="default",allTagsModalAriaLabel:N,allTagsModalTitle:b="All tags",allTagsModalSearchLabel:R="Search all tags",allTagsModalSearchPlaceholderText:q="Search all tags",showAllTagsLabel:C="View all tags",onOverflowClick:T,tags:n,containingElementRef:s,measurementOffset:f=se.measurementOffset,onOverflowTagChange:m=se.onOverflowTagChange,...p},g)=>{const[c,z]=l.useState(3),[H,G]=l.useState([]),[ue,me]=l.useState([]),[pe,Q]=l.useState(!1),ce=l.useRef(null),x=g||ce,X=l.useRef(null),de=l.useRef(null),[A,fe]=l.useState([]),U=l.useRef(null),[j,ge]=l.useState(0),[Z,ee]=l.useState(!1),he=()=>{Q(!0)};l.useEffect(()=>{const a=M||(n==null?void 0:n.length)||0;ge(a)},[M,n]),l.useEffect(()=>{const a=[];me(n&&n.length>0?n.map(({label:r,id:k,filter:$,onClose:d,...P},h)=>t.createElement("div",{key:h,className:`${w}__sizing-tag`,ref:O=>{O!=null&&(a[h]=O)}},typeof d=="function"||$?t.createElement(ae,{...P,"data-original-id":k,text:r}):t.createElement(F,{...P,"data-original-id":k},r))):[]),fe(a)},[n]);const te=l.useCallback((a,r)=>{a==null||a(),r<=c-1&&ee(!1)},[c]);l.useEffect(()=>{let a="md",r=n&&n.length>0?n.map(({label:$,onClose:d,filter:P,...h},O)=>(O==n.length-1&&h.size&&(a=h.size),typeof d=="function"||P?t.createElement(ae,{...h,key:`displayed-tag-${O}`,onClose:()=>te(d,O),text:$}):t.createElement(F,{...h,key:`displayed-tag-${O}`},$))):[];const k=r.splice(c,r.length-c);r=r.map(($,d)=>t.createElement("div",{key:d,className:`${w}__displayed-tag`},$)),r.push(t.createElement(K,{allTagsModalSearchThreshold:re,overflowAutoAlign:_,className:v,onShowAllClick:he,overflowTags:k,overflowAlign:i,overflowType:L,showAllTagsLabel:C,size:a,key:"displayed-tag-overflow",ref:U,popoverOpen:Z,onOverflowClick:T,setPopoverOpen:ee})),m==null||m(k),G(r)},[c,i,v,L,C,T,n,m,Z,te,_]);const B=l.useCallback(()=>{var r;if(y)return z(j);let a=0;if(A.length>0){const k=typeof s!="function"&&(s==null?void 0:s.current),$=typeof f=="number"?f:0;let d=k?k.offsetWidth-$:x==null?void 0:x.current.offsetWidth;for(const P in A){const h=((r=A[P])==null?void 0:r.offsetWidth)||0;if(d>=h)d-=h,a+=1;else break}if(a<A.length&&U.current)for(;a>0&&d<U.current.offsetWidth;)a-=1,d+=A[a].offsetWidth}a<1?z(0):z(j?Math.min(a,j):a)},[j,y,A,x,f,s]);l.useEffect(()=>{B()},[B,j,y,A]);const ye=()=>{B()},ve=()=>{B()},be=()=>{var r;Q(!1);const a=(r=U.current)==null?void 0:r.querySelector("button");setTimeout(()=>a==null?void 0:a.focus(),0)};return oe(X,ve),oe(s||x,ye),t.createElement("div",{...p,className:S([w,W]),ref:x,...Oe(J)},t.createElement("div",{className:S([`${w}__space`,`${w}__space--align-${o}`])},t.createElement("div",{className:`${w}__tag-container ${w}__tag-container--hidden`,"aria-hidden":!0,ref:X},ue),t.createElement("div",{className:S([`${w}__tag-container`,y&&`${w}__tag-container--multiline`]),ref:de},H)),!T&&t.createElement(Y,{allTags:n,open:pe,title:b,onClose:be,modalAriaLabel:N,searchLabel:R,searchPlaceholder:q,portalTarget:E}))});D=I.checkComponentEnabled(D,J);const Xe=qe(e.string,({tags:o})=>o&&o.length>re),ze={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},ie=Object.keys(ze);D.types=ie;D.propTypes={align:e.oneOf(["start","center","end"]),allTagsModalAriaLabel:e.string,allTagsModalSearchLabel:e.string,allTagsModalSearchPlaceholderText:e.string,allTagsModalTarget:e.node,allTagsModalTitle:e.string,className:e.string,containingElementRef:e.object,maxVisible:e.number,measurementOffset:e.number,multiline:e.bool,onOverflowClick:e.func,onOverflowTagChange:e.func,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowClassName:e.string,overflowType:e.oneOf(["default","tag"]),showAllTagsLabel:e.string,tags:e.arrayOf(e.shape({...F.propTypes,label:e.string.isRequired,type:e.oneOf(ie)}))};D.displayName=J;D.__docgenInfo={description:"",methods:[],displayName:"TagSet",props:{align:{required:!1,tsType:{name:"union",raw:"'start' | 'center' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'center'"},{name:"literal",value:"'end'"}]},description:"align the Tags displayed by the TagSet. Default start.",defaultValue:{value:"'start'",computed:!1},type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]}},allTagsModalAriaLabel:{required:!1,tsType:{name:"string"},description:"aria label for all tags modal with hasScrollingContent",type:{name:"string"}},allTagsModalSearchLabel:{required:!1,tsType:{name:"string"},description:"label text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalSearchPlaceholderText:{required:!1,tsType:{name:"string"},description:"placeholder text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalTarget:{required:!1,tsType:{name:"ReactNode"},description:"portal target for the all tags modal",type:{name:"node"}},allTagsModalTitle:{required:!1,tsType:{name:"string"},description:"title for the show all modal.",defaultValue:{value:"'All tags'",computed:!1},type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},containingElementRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLElement>",elements:[{name:"HTMLElement"}]},description:`Optional ref for custom resize container to measure available space
Default will measure the available space of the TagSet container itself.`,type:{name:"object"}},maxVisible:{required:!1,tsType:{name:"number"},description:"maximum visible tags",type:{name:"number"}},measurementOffset:{required:!1,tsType:{name:"number"},description:"Specify offset amount for measure available space, only used when `containingElementSelector`\nis also provided",defaultValue:{value:"0",computed:!1},type:{name:"number"}},multiline:{required:!1,tsType:{name:"boolean"},description:"display tags in multiple lines",type:{name:"bool"}},onOverflowClick:{required:!1,tsType:{name:"union",raw:"((overFlowTags: ReactNode[]) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"An optional click handler that overrides the default functionality of displaying all tags in a modal",type:{name:"func"}},onOverflowTagChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ReactNode) => void",signature:{arguments:[{type:{name:"ReactNode"},name:"value"}],return:{name:"void"}}},description:"Handler to get overflow tags",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip. Default center.",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},overflowClassName:{required:!1,tsType:{name:"string"},description:"overflowClassName for the tooltip popup",type:{name:"string"}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link.",defaultValue:{value:"'View all tags'",computed:!1},type:{name:"string"}},tags:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
  /**
   * @deprecated Use the \`onClose\` function instead to render as a DismissibleTag
   */
  filter?: boolean;
} & TagBaseProps`,elements:[{name:"signature",type:"object",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
  /**
   * @deprecated Use the \`onClose\` function instead to render as a DismissibleTag
   */
  filter?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"unknown",required:!1}},{key:"filter",value:{name:"boolean",required:!1},description:"@deprecated Use the `onClose` function instead to render as a DismissibleTag"}]}},{name:"TagBaseProps"}]}],raw:"TagType[]"},description:`The tags to be shown in the TagSet. Each tag is specified as an object
with properties: **label**\\* (required) to supply the tag content, and
other properties will be passed to the Carbon Tag component, such as
**type**, **disabled**, **ref**, **className** , and any other Tag props.

See https://react.carbondesignsystem.com/?path=/docs/components-tag--default`,type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},type:{name:"enum",value:[{value:'"red"',computed:!1},{value:'"magenta"',computed:!1},{value:'"purple"',computed:!1},{value:'"blue"',computed:!1},{value:'"cyan"',computed:!1},{value:'"teal"',computed:!1},{value:'"green"',computed:!1},{value:'"gray"',computed:!1},{value:'"cool-gray"',computed:!1},{value:'"warm-gray"',computed:!1},{value:'"high-contrast"',computed:!1},{value:'"outline"',computed:!1}],required:!1}}}}}},composes:["PropsWithChildren"]};export{D as T,Xe as s};
