import{p as F,j as l,P as fe,b as pe}from"./settings-BiUEFdm2.js";import{R as H,r as a}from"./index-BwDkhjyp.js";import{P as e}from"./index-Dk74W0Oi.js";import{c as w}from"./deprecate-D9ms-jbM.js";import{L as ge}from"./Link-CxgVlihf.js";import{T as k}from"./Tag-CwoX20Ao.js";import{u as he}from"./useClickOutside-Dcd11u7q.js";import{C as ye,M as ve,a as be}from"./ComposedModal-Ckm8JaZ3.js";import{S as Te}from"./Search-BxJEuMG1.js";import{p as we,i as Se}from"./props-helper-1oU9hECe.js";import{u as _e}from"./usePortalTarget-CUzsWZah.js";import{u as te}from"./useResizeObserver-CYrpFlRY.js";import{g as Ne}from"./devtools-BPcQvzXy.js";const qe="TagSetOverflow",f=`${F.prefix}--tag-set-overflow`,$e={allTagsModalSearchThreshold:10},B=H.forwardRef(({allTagsModalSearchThreshold:s=$e.allTagsModalSearchThreshold,className:A,onShowAllClick:L,overflowAlign:d="bottom",overflowTags:n,overflowType:p,showAllTagsLabel:C,popoverOpen:b,setPopoverOpen:r,...O},x)=>{const g=a.useRef(null),i=a.useRef(null);he(x||g,()=>{b&&(r==null||r(!1))});const c=o=>{o.stopPropagation(),o.preventDefault(),r==null||r(!1),L()},S=o=>{const{key:u}=o;u==="Escape"&&(r==null||r(!1))};return l.jsx("span",{...O,"aria-hidden":n.length===0,className:w(`${f}`,{[`${f}--hidden`]:n.length===0}),ref:x||g,children:l.jsxs(fe,{align:d,className:w(A,`${f}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:S,open:b,children:[l.jsxs(k,{onClick:()=>r==null?void 0:r(!b),className:w(`${f}__popover-trigger`),children:["+",n.length]}),l.jsx(pe,{children:l.jsxs("div",{ref:i,className:`${f}__content`,children:[l.jsx("ul",{className:`${f}__tag-list`,children:n.filter((o,u)=>n.length>s?u<s:u<=s).map((o,u)=>{const m={};if(p==="tag"&&(m.type="high-contrast"),p==="default"&&(m.filter=!1),H.isValidElement(o))return l.jsx("li",{className:w(`${f}__tag-item`,{[`${f}__tag-item--default`]:p==="default",[`${f}__tag-item--tag`]:p==="tag"}),children:H.cloneElement(o,m)},u)})}),n.length>s&&l.jsx(ge,{className:`${f}__show-all-tags-link`,href:"",onClick:c,role:"button",children:C})]})})]})})});B.displayName=qe;B.propTypes={allTagsModalSearchThreshold:e.number,className:e.string,onShowAllClick:e.func.isRequired,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowTags:e.arrayOf(e.object).isRequired,overflowType:e.oneOf(["default","tag"]),popoverOpen:e.bool,setPopoverOpen:e.func,showAllTagsLabel:e.string};B.__docgenInfo={description:"",methods:[],displayName:"TagSetOverflow",props:{allTagsModalSearchThreshold:{required:!1,tsType:{name:"number"},description:"count of overflowTags over which a modal is offered",defaultValue:{value:"10",computed:!1},type:{name:"number"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},onShowAllClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"function to execute on clicking show all",type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowTags:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:`@type {Array<any>}
tags shown in overflow`,type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},popoverOpen:{required:!1,tsType:{name:"boolean"},description:"Open state of the popover",type:{name:"bool"}},setPopoverOpen:{required:!1,tsType:{name:"union",raw:"((value: boolean) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"Setter function for the popoverOpen state value",type:{name:"func"}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link",type:{name:"string"}}}};const Ce="TagSetModal",j=`${F.prefix}--tag-set-modal`,xe={searchLabel:""},K=({allTags:s,className:A,title:L,onClose:d,open:n,portalTarget:p,searchLabel:C=xe.searchLabel,searchPlaceholder:b,...r})=>{const[O,x]=a.useState([]),[g,i]=a.useState(""),c=_e(p);a.useEffect(()=>{let o=[];if(n)if(g===""&&s)o=s==null?void 0:s.slice(0);else{const u=g.toLocaleLowerCase();s==null||s.forEach(m=>{var E,D,P,V;const _=(D=(E=m["data-search"])==null?void 0:E.toLocaleLowerCase())==null?void 0:D.indexOf(u),z=(V=(P=m.label)==null?void 0:P.toLocaleLowerCase())==null?void 0:V.indexOf(u);(_>-1||z>-1)&&o.push(m)})}x(o)},[s,n,g]);const S=o=>{i(o.target.value||"")};return c(l.jsxs(ye,{...r,containerClassName:`${j}__container`,className:w(A,`${j}`),size:"sm",open:n,onClose:d,children:[l.jsx(ve,{className:`${j}__header`,closeModal:d,title:L,children:l.jsx(Te,{"data-modal-primary-focus":!0,className:`${j}__search`,labelText:C,placeholder:b,onChange:S,size:"lg"})}),l.jsx(be,{className:`${j}__body`,hasForm:!0,children:O.map(({label:o,...u},m)=>a.createElement(k,{...u,filter:!1,key:`all-tags-${m}`},o))}),l.jsx("div",{className:`${j}__fade`})]}))};K.propTypes={allTags:e.arrayOf(e.shape({...we(k.propTypes,"filter"),label:e.string.isRequired})),className:e.string,onClose:e.func,open:e.bool,portalTarget:e.node,searchLabel:e.string,searchPlaceholder:e.string,title:e.string};K.displayName=Ce;const U="TagSet",v=`${F.prefix}--tag-set`,le=10,ae={align:"start",measurementOffset:0,overflowAlign:"bottom",overflowType:"default",onOverflowTagChange:()=>{}};let M=H.forwardRef(({align:s="start",allTagsModalTarget:A,className:L,maxVisible:d,multiline:n,overflowAlign:p="bottom",overflowClassName:C,overflowType:b="default",allTagsModalTitle:r,allTagsModalSearchLabel:O,allTagsModalSearchPlaceholderText:x,showAllTagsLabel:g,tags:i,containingElementRef:c,measurementOffset:S=ae.measurementOffset,onOverflowTagChange:o=ae.onOverflowTagChange,...u},m)=>{const[_,z]=a.useState(3),[E,D]=a.useState([]),[P,V]=a.useState([]),[se,Y]=a.useState(!1),re=a.useRef(null),R=m||re,J=a.useRef(null),ne=a.useRef(null),[N,ie]=a.useState([]),G=a.useRef(null),[Q,X]=a.useState(!1),ue=()=>{Y(!0)};a.useEffect(()=>{const t=[];V(i&&i.length>0?i.map(({label:h,id:T,...q},y)=>l.jsx("div",{className:`${v}__sizing-tag`,ref:$=>{$!=null&&(t[y]=$)},children:l.jsx(k,{...q,"data-original-id":T,children:h})},y)):[]),ie(t)},[i]);const Z=a.useCallback((t,h)=>{t==null||t(),h<=_-1&&X(!1)},[_]);a.useEffect(()=>{let t=i&&i.length>0?i.map(({label:T,onClose:q,...y},$)=>a.createElement(k,{...y,key:`displayed-tag-${$}`,onClose:()=>Z(q,$)},T)):[];const h=t.splice(_,t.length-_);t=t.map((T,q)=>l.jsx("div",{className:`${v}__displayed-tag`,children:T},q)),t.push(l.jsx(B,{allTagsModalSearchThreshold:le,className:C,onShowAllClick:ue,overflowTags:h,overflowAlign:p,overflowType:b,showAllTagsLabel:g,ref:G,popoverOpen:Q,setPopoverOpen:X},"displayed-tag-overflow")),o==null||o(h),D(t)},[_,p,C,b,g,i,o,Q,Z]);const W=a.useCallback(()=>{var h;if(n)return z(d||3);let t=0;if(N.length>0){const T=c==null?void 0:c.current,q=typeof S=="number"?S:0;let y=T?T.offsetWidth-q:R==null?void 0:R.current.offsetWidth;for(const $ in N){const ee=((h=N[$])==null?void 0:h.offsetWidth)||0;if(y>=ee)y-=ee,t+=1;else break}if(t<N.length&&G.current)for(;t>0&&y<G.current.offsetWidth;)t-=1,y+=N[t].offsetWidth}t<1?z(0):z(d?Math.min(t,d):t)},[d,n,N,R,S,c]);a.useEffect(()=>{W()},[W,d,n,N]);const me=()=>{W()},de=()=>{W()},ce=()=>{Y(!1)};return te(J,de),te(c||R,me),l.jsxs("div",{...u,className:w([v,L]),ref:R,...Ne(U),children:[l.jsxs("div",{className:w([`${v}__space`,`${v}__space--align-${s}`]),children:[l.jsx("div",{className:`${v}__tag-container ${v}__tag-container--hidden`,"aria-hidden":!0,ref:J,children:P}),l.jsx("div",{className:w([`${v}__tag-container`,n&&`${v}__tag-container--multiline`]),ref:ne,children:E})]}),l.jsx(K,{allTags:i,open:se,title:r,onClose:ce,searchLabel:O,searchPlaceholder:x,portalTarget:A})]})});M=F.checkComponentEnabled(M,U);const I=Se(e.string,({tags:s})=>s&&s.length>le),Re={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},oe=Object.keys(Re);M.types=oe;M.propTypes={align:e.oneOf(["start","center","end"]),allTagsModalSearchLabel:I,allTagsModalSearchPlaceholderText:I,allTagsModalTarget:e.node,allTagsModalTitle:I,className:e.string,containingElementRef:e.object,maxVisible:e.number,measurementOffset:e.number,multiline:e.bool,onOverflowTagChange:e.func,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowClassName:e.string,overflowType:e.oneOf(["default","tag"]),showAllTagsLabel:I,tags:e.arrayOf(e.shape({...k.propTypes,label:e.string.isRequired,type:e.oneOf(oe)}))};M.displayName=U;M.__docgenInfo={description:"",methods:[],displayName:"TagSet",props:{align:{required:!1,tsType:{name:"union",raw:"'start' | 'center' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'center'"},{name:"literal",value:"'end'"}]},description:"align the Tags displayed by the TagSet. Default start.",defaultValue:{value:"'start'",computed:!1},type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]}},allTagsModalSearchLabel:{required:!1,tsType:{name:"string"},description:"label text for the show all search. **Note: Required if more than 10 tags**",type:{name:"custom",raw:`isRequiredIf(
  PropTypes.string,
  ({ tags }) => tags && tags.length > allTagsModalSearchThreshold
)`}},allTagsModalSearchPlaceholderText:{required:!1,tsType:{name:"string"},description:"placeholder text for the show all search. **Note: Required if more than 10 tags**",type:{name:"custom",raw:`isRequiredIf(
  PropTypes.string,
  ({ tags }) => tags && tags.length > allTagsModalSearchThreshold
)`}},allTagsModalTarget:{required:!1,tsType:{name:"ReactNode"},description:"portal target for the all tags modal",type:{name:"node"}},allTagsModalTitle:{required:!1,tsType:{name:"string"},description:"title for the show all modal. **Note: Required if more than 10 tags**",type:{name:"custom",raw:`isRequiredIf(
  PropTypes.string,
  ({ tags }) => tags && tags.length > allTagsModalSearchThreshold
)`}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},containingElementRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement>",elements:[{name:"HTMLElement"}]},description:`Optional ref for custom resize container to measure available space
Default will measure the available space of the TagSet container itself.`,type:{name:"object"}},maxVisible:{required:!1,tsType:{name:"number"},description:"maximum visible tags",type:{name:"number"}},measurementOffset:{required:!1,tsType:{name:"number"},description:"Specify offset amount for measure available space, only used when `containingElementSelector`\nis also provided",defaultValue:{value:"0",computed:!1},type:{name:"number"}},multiline:{required:!1,tsType:{name:"boolean"},description:"display tags in multiple lines",type:{name:"bool"}},onOverflowTagChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ReactNode) => void",signature:{arguments:[{type:{name:"ReactNode"},name:"value"}],return:{name:"void"}}},description:"Handler to get overflow tags",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip. Default center.",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowClassName:{required:!1,tsType:{name:"string"},description:"overflowClassName for the tooltip popup",type:{name:"string"}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:`label for the overflow show all tags link.

**Note:** Required if more than 10 tags`,type:{name:"custom",raw:`isRequiredIf(
  PropTypes.string,
  ({ tags }) => tags && tags.length > allTagsModalSearchThreshold
)`}},tags:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
} & TagBaseProps`,elements:[{name:"signature",type:"object",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"unknown",required:!1}}]}},{name:"TagBaseProps"}]}],raw:"TagType[]"},description:`The tags to be shown in the TagSet. Each tag is specified as an object
with properties: **label**\\* (required) to supply the tag content, and
other properties will be passed to the Carbon Tag component, such as
**type**, **disabled**, **ref**, **className** , and any other Tag props.

See https://react.carbondesignsystem.com/?path=/docs/components-tag--default`,type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},type:{name:"enum",value:[{value:'"red"',computed:!1},{value:'"magenta"',computed:!1},{value:'"purple"',computed:!1},{value:'"blue"',computed:!1},{value:'"cyan"',computed:!1},{value:'"teal"',computed:!1},{value:'"green"',computed:!1},{value:'"gray"',computed:!1},{value:'"cool-gray"',computed:!1},{value:'"warm-gray"',computed:!1},{value:'"high-contrast"',computed:!1},{value:'"outline"',computed:!1}],required:!1}}}}}},composes:["PropsWithChildren"]};export{M as T,I as s};
