import{d as T,o as A,P as r}from"./index-CMVdkQrl.js";import{p as M,B as W,I as B}from"./settings-C3kz8lqM.js";import{e as l,r as o}from"./index-DtHxqM--.js";import{g as j}from"./devtools-CJD9WatR.js";import{u as D}from"./uuidv4-BN2rGLQG.js";import{u as H}from"./usePreviousValue-CuNkkQo9.js";import{u as G}from"./usePresence-DE1zreM1.js";import{u as J}from"./useWindowResize-CR2_9WVc.js";import{T as K}from"./TagSet-CWLdioTv.js";const L=(m,g,c=!0)=>{let s;return(...u)=>{s&&clearTimeout(s),c&&!s&&m(...u),s=setTimeout(()=>{s=null,c||m(...u)},g)}},a=`${M.prefix}--filter-summary`,_=l.forwardRef(({className:m="",clearFiltersText:g="Clear filters",clearFilters:c,filters:s,renderLabel:u,overflowType:b="default",clearButtonInline:R=!0,...q},x)=>{var S,F;const E=`${a}__${D()}`,k=s.map(({key:n,value:i,...p})=>({...p,type:"gray",label:(u==null?void 0:u(n,i))??`${n}: ${i}`})),f=o.useRef(null),d=o.useRef(null),e=o.useRef(null)||x,[y,C]=o.useState(0),[t,v]=o.useState(!1),h=H({multiline:t})||{},V=()=>{if(y===0){v(!1);return}v(n=>!n)},z=typeof((S=d==null?void 0:d.current)==null?void 0:S.offsetWidth)>"u"?0:y>0?48:0,I=(((F=f==null?void 0:f.current)==null?void 0:F.offsetWidth)||0)+z,O="filter-summary-enter",{shouldRender:P}=G(!0,e,O),w=n=>P?l.createElement("div",{key:n},l.createElement(K,{allTagsModalSearchLabel:"Search all tags",allTagsModalSearchPlaceholderText:"Search all tags",allTagsModalTitle:"All tags",showAllTagsLabel:"View all tags",tags:k,overflowType:b,className:T({[`${a}__clear-button-inline`]:R}),containingElementRef:e,measurementOffset:I,onOverflowTagChange:i=>C(i==null?void 0:i.length),multiline:t})):null;return J(()=>{L(()=>{var p,N;t&&((p=e==null?void 0:e.current)!=null&&p.offsetHeight)&&((N=e==null?void 0:e.current)==null?void 0:N.offsetHeight)<=50&&v(!1)},500)()},[h==null?void 0:h.multiline,t]),l.createElement("div",{...j($),id:E,...q,ref:e,className:T([a,m],{[`${a}__expanded`]:t})},!t&&w("single"),t&&w("multiline"),l.createElement(W,{kind:"ghost",size:"sm",onClick:c,ref:f,className:`${a}__clear-all-button`},g),(y>0||t)&&l.createElement("div",{className:`${a}__view-all--wrapper`},l.createElement(B,{ref:d,kind:"ghost",label:"View all",className:`${a}__view-all--trigger`,align:"left",onClick:V,size:"sm"},l.createElement(A,{className:T(`${a}__view-all--chevron`,{[`${a}__view-all--chevron-multiline`]:t})}))))}),$="FilterSummary";_.displayName=$;_.propTypes={className:r.string,clearButtonInline:r.bool,clearFilters:r.func.isRequired,clearFiltersText:r.string,filters:r.arrayOf(r.object).isRequired,overflowType:r.oneOf(["default","tag"]),renderLabel:r.func};_.__docgenInfo={description:"",methods:[],displayName:"FilterSummary",props:{className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1},type:{name:"string"}},clearButtonInline:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},clearFilters:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",type:{name:"func"}},clearFiltersText:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Clear filters'",computed:!1},type:{name:"string"}},filters:{required:!0,tsType:{name:"Array",elements:[{name:"Filter"}],raw:"Filter[]"},description:"",type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},renderLabel:{required:!1,tsType:{name:"signature",type:"function",raw:"(key, value) => void",signature:{arguments:[{name:"key"},{name:"value"}],return:{name:"void"}}},description:"",type:{name:"func"}}}};export{_ as F,L as d};
