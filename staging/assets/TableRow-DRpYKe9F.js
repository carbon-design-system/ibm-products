import{b as H,d as w,l as B,_ as A,P as e,c as V}from"./index-C360Eztx.js";import{r as $,e as n}from"./index-DtHxqM--.js";import{u as P}from"./index-BopFi8TB.js";import{bf as F}from"./settings-CFkY3W_8.js";import{w as U}from"./wrapComponent-6jMLBNvx.js";import{aF as Z}from"./bucket-0-CylTshg8.js";import{b as G}from"./bucket-1-PuAqHexT.js";const C={NONE:"NONE",DESC:"DESC",ASC:"ASC"},J=$.createContext({titleId:void 0,descriptionId:void 0}),M=(r,t)=>{var m,p,S,N;if(r.children.length>0)return!1;const a=window.getComputedStyle(r);t.font=a.font?a.font:`${a.fontSize}" "${a.fontFamily}`;let i=(t==null?void 0:t.measureText(r.textContent??"")).width??0;const f=(m=a.letterSpacing)==null?void 0:m.split("px");f&&f.length&&!isNaN(Number(f[0]))&&(i+=Number(f[0])*(((p=r.textContent)==null?void 0:p.length)??0));const d=(S=a.paddingLeft)==null?void 0:S.split("px");d&&d.length&&!isNaN(Number(d[0]))&&(i+=Number(d[0]));const u=(N=a.paddingLeft)==null?void 0:N.split("px");return u&&u.length&&!isNaN(Number(u[0]))&&(i+=Number(u[0])),i>r.getBoundingClientRect().width},Q=({className:r,children:t,useZebraStyles:a,size:b="lg",isSortable:i=!1,useStaticWidth:f,stickyHeader:d,overflowMenuOnHover:u=!0,experimentalAutoAlign:m=!1,tabIndex:p,...S})=>{var k;const{titleId:N,descriptionId:E}=$.useContext(J),l=H(),[x,s]=$.useState(!1),o=$.useRef(null),I=w(`${l}--data-table`,r,{[`${l}--data-table--${b}`]:b,[`${l}--data-table--sort`]:i,[`${l}--data-table--zebra`]:a,[`${l}--data-table--static`]:f,[`${l}--data-table--sticky-header`]:d,[`${l}--data-table--visible-overflow-menu`]:!u}),T=$.useCallback((h=!1)=>{var c,g;h?(c=o.current)==null||c.classList.add(`${l}--data-table--top-aligned-body`):(g=o.current)==null||g.classList.remove(`${l}--data-table--top-aligned-body`)},[l]),y=$.useCallback((h=!1)=>{var c,g;h?(c=o.current)==null||c.classList.add(`${l}--data-table--top-aligned-header`):(g=o.current)==null||g.classList.remove(`${l}--data-table--top-aligned-header`)},[l]),v=$.useCallback(()=>{if(m){const c=document.createElement("canvas").getContext("2d");if(o.current&&c){const g=Array.from(o.current.querySelectorAll("td")).some(R=>M(R,c)),O=Array.from(o.current.querySelectorAll("th")).some(R=>{const q=R.querySelector(`.${l}--table-header-label`);return q&&M(q,c)});T(g),y(O)}}else T(!1),y(!1)},[m,T,y,l]),D=F(v,100);P("resize",D);const L=$.useCallback(()=>{var g,O;const h=(g=o==null?void 0:o.current)==null?void 0:g.parentNode,c=(O=o==null?void 0:o.current)==null?void 0:O.firstChild;(c==null?void 0:c.scrollWidth)>(h==null?void 0:h.clientWidth)?s(!0):s(!1)},[]),W=F(L,100);P("resize",W),B(()=>{L()},[L]),typeof document<"u"&&((k=document==null?void 0:document.fonts)!=null&&k.status)&&document.fonts.status!=="loaded"&&document.fonts.ready.then(()=>{v()}),B(()=>{v()},[v,b]);const _=n.createElement("div",{className:`${l}--data-table-content`,tabIndex:p??(x?0:void 0)},n.createElement("table",A({"aria-labelledby":N,"aria-describedby":E},S,{className:I,ref:o}),t));return d?n.createElement("section",{className:`${l}--data-table_inner-container`},_):_};Q.propTypes={children:e.node,className:e.string,experimentalAutoAlign:e.bool,isSortable:e.bool,overflowMenuOnHover:e.bool,size:e.oneOf(["xs","sm","md","lg","xl"]),stickyHeader:e.bool,useStaticWidth:e.bool,useZebraStyles:e.bool,tabIndex:e.number};const X=({children:r,className:t,...a})=>n.createElement("tbody",A({"aria-live":a["aria-live"]??"polite",className:t},a),r);X.propTypes={"aria-live":e.oneOf(["polite","assertive","off"]),children:e.node,className:e.string};const Y=$.forwardRef,j=Y((r,t)=>{const{children:a,className:b,hasAILabelHeader:i,colSpan:f,...d}=r,u=H(),m=w(b,{[`${u}--table-cell--column-slug`]:i});return n.createElement("td",A({className:m||void 0,ref:t,colSpan:f},d),a)});j.displayName="TableCell";j.propTypes={children:e.node,className:e.string,colSpan:e.number,hasAILabelHeader:e.bool,headers:e.string};const be=U({name:"TableHead",type:"thead"}),ee="col",K={buttonDescription:"carbon.table.header.icon.description"},te=(r,t)=>t&&r===K.buttonDescription?t.isSortHeader&&C?t.sortDirection===C.NONE?`Click to sort rows by ${t.header} header in ascending order`:t.sortDirection===C.ASC?`Click to sort rows by ${t.header} header in descending order`:`Click to unsort rows by ${t.header} header`:`Click to sort rows by ${t.header} header in ascending order`:"",ae={[C.NONE]:"none",[C.ASC]:"ascending",[C.DESC]:"descending"},z=n.forwardRef(function({className:t,children:a,colSpan:b,decorator:i,isSortable:f=!1,isSortHeader:d,onClick:u,scope:m=ee,sortDirection:p,translateWithId:S=te,slug:N,id:E,...l},x){var h;const s=H(),o=V("table-sort"),I=$.useRef(null);let T,y=n.isValidElement(N??i)?N??i:null;y&&((h=y.type)==null?void 0:h.displayName)==="AILabel"&&(T=!0,y=n.cloneElement(y,{size:"mini",ref:I}));const v=w({[`${s}--table-header-label`]:!0,[`${s}--table-header-label--slug ${s}--table-header-label--ai-label`]:T,[`${s}--table-header-label--decorator`]:i});if(!f)return n.createElement("th",A({},l,{id:E,className:t,scope:m,colSpan:b,ref:x}),a?n.createElement("div",{className:v},a,n.createElement("div",{className:`${s}--table-header-label--decorator-inner`},y)):null);const D=w(t,{[`${s}--table-sort`]:!0,[`${s}--table-sort--active`]:d&&p!==C.NONE,[`${s}--table-sort--descending`]:d&&p===C.DESC}),L=!d||!p?"none":ae[p],W=S&&S("carbon.table.header.icon.description",{header:a,sortDirection:p,isSortHeader:d,sortStates:C}),_=w(t,`${s}--table-sort__header`,{[`${s}--table-sort__header--ai-label`]:T,[`${s}--table-sort__header--decorator`]:i}),k=c=>{if(!(T&&I.current&&I.current.contains(c.target))&&u)return u(c)};return n.createElement("th",{id:E,"aria-sort":L,className:_,colSpan:b,ref:x,scope:m},n.createElement("div",{className:`${s}--table-sort__description`,id:o},W),n.createElement("button",A({type:"button","aria-describedby":o,className:D,onClick:k},l),n.createElement("span",{className:`${s}--table-sort__flex`},n.createElement("div",{className:`${s}--table-header-label`},a),n.createElement(Z,{size:20,className:`${s}--table-sort__icon`}),n.createElement(G,{size:20,className:`${s}--table-sort__icon-unsorted`}),n.createElement("div",{className:`${s}--table-header-label--decorator-inner`},y))))});z.propTypes={children:e.node,className:e.string,colSpan:e.number,id:e.string,isSortHeader:e.bool,isSortable:e.bool,onClick:e.func,scope:e.string,sortDirection:e.oneOf(Object.values(C)),translateWithId:e.func};z.translationKeys=Object.values(K);z.displayName="TableHeader";const le=n.forwardRef((r,t)=>{const a=H();let b;r!=null&&r.children&&n.Children.toArray(r.children).map(E=>{var l,x,s;(((l=E.type)==null?void 0:l.displayName)==="TableSlugRow"||((x=E.type)==null?void 0:x.displayName)==="TableDecoratorRow")&&(E.props.slug||((s=E.props.decorator)==null?void 0:s.type.displayName)==="AILabel")&&(b=!0)});const i=w(r.className,{[`${a}--data-table--selected`]:r.isSelected,[`${a}--data-table--slug-row ${a}--data-table--ai-label-row`]:b}),{ariaLabel:f,"aria-label":d,"aria-controls":u,onExpand:m,isExpanded:p,isSelected:S,...N}=r;return i&&(N.className=i),n.createElement("tr",A({ref:t},N))});le.propTypes={className:e.string,isSelected:e.bool};export{Q as T,be as a,le as b,z as c,X as d,j as e,J as f,C as s};
