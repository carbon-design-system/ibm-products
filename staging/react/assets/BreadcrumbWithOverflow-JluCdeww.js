import{u as X,r as m,e,p as A,c as p,N as x,X as j,P as o}from"./iframe-Cbdf71kV.js";import{u as R}from"./useResizeObserver-CHiKmAS_.js";import{B as z,a as b}from"./BreadcrumbItem-BT4Vz5CP.js";import{L as G}from"./Link-CCRD-roz.js";import{M as J}from"./MenuItem-Bo2vpwwn.js";import{O as S}from"./index-C0spF9CE.js";import{u as Q}from"./uuidv4-BN2rGLQG.js";import"./props-helper-DqfsKzpa.js";import{O as W}from"./bucket-12-Bk4MPs7x.js";import{T as U}from"./TooltipTrigger-CHXAXfje.js";import{c as Y}from"./bucket-0-DLaAcJTT.js";const s=`${A.prefix}--breadcrumb-with-overflow`,M="BreadcrumbWithOverflow";let h=({breadcrumbs:i,className:F,label:_,maxVisible:g,noTrailingSlash:L,overflowAriaLabel:w,overflowTooltipAlign:D,...H})=>{const q=X(),[y,T]=m.useState(3),[$,B]=m.useState([]),v=m.useRef(null),E=m.useRef(null),I=m.useRef(Q()),[O,V]=m.useState([]),K=({overflowItems:n})=>{const t=(r,l)=>{l?.props?.href&&(window.location.href=l.props.href),l?.props?.onClick?.(r)};return e.createElement(b,{key:`breadcrumb-overflow-${I.current}`},e.createElement(j,{enableV12Overflowmenu:!0},e.createElement(S,{"aria-label":w,label:w,renderIcon:r=>e.createElement(W,{size:32,...r}),className:`${s}__overflow-menu`,tooltipAlignment:D},n.map((r,l)=>e.createElement(J,{key:`breadcrumb-overflow-menu-item-${I.current}-${l}`,onClick:a=>t(a,r),label:r.props.children})))))};m.useEffect(()=>{V(e.createElement("div",{className:`${s}__breadcrumb-container ${s}__breadcrumb-container--hidden`,"aria-hidden":!0,ref:E},e.createElement(z,{"aria-label":`${_}-hidden`},e.createElement(b,{key:`${s}-hidden-overflow-${I}`},e.createElement(S,{"aria-label":w,renderIcon:n=>e.createElement(W,{size:32,...n})})),i.map(({label:n,key:t,title:r,id:l,shortTitle:a,...f})=>e.createElement(b,{key:t,...f,"data-original-id":l,title:r??n},n)))))},[i,_,w]),m.useEffect(()=>{if(i.length===0){B([]);return}const n=i.map(({className:l,key:a,label:f,shortTitle:c,title:u,...k},P)=>e.createElement(b,{key:a,className:P>0||y>1?p([l,`${s}__displayed-breadcrumb`]):l,title:P+1===i.length?u:null,...k},c||f)),t=y>1?1:0;let r=n.splice(t,i.length-y);r.length&&n.splice(t,0,e.createElement(K,{overflowItems:r,key:`displayed-breadcrumb-${I}-overflow`})),B(n)},[i,y]);const N=()=>{if(!v.current)return;const n=(t,r)=>r===0?t-1:r===1?1:t-r;if(g<=1)T(1);else{let t=0,r=v.current.offsetWidth;if(E.current){const l=E.current.querySelectorAll(`.${q}--breadcrumb-item`),a=[];for(let c of l){const u=window?window.getComputedStyle(l[0]):null,k=u?parseFloat(u.marginLeft||0,10)+parseFloat(u.marginRight||0,10):0;a.push(c.offsetWidth+k)}let f=a[0];for(let c=0;c<a.length-1;c++){const u=n(a.length,c);if(r>=a[u])r-=a[u],t+=1;else break}if(t<a.length-1)for(;t>0&&r<f;){t-=1;const c=n(a.length,t);r+=a[c]}}t<=1?T(1):T(g?Math.min(t,g):t)}};m.useEffect(()=>{N()},[O,g]);const C=()=>{N()};let d=i[i.length-1];return d.isCurrentPage&&(d=i[i.length-2]),R(E,C),R(v,C),e.createElement("div",{className:p(s,F,{[`${s}__with-items`]:$.length>1}),ref:v},e.createElement("div",{className:p([`${s}__space`])},O,e.createElement(z,{"aria-label":_,className:p(`${s}__breadcrumb-container`,{[`${s}__breadcrumb-container-with-items`]:$.length>1}),noTrailingSlash:L,...H},d?.href&&(d?.label||d?.title)&&e.createElement(b,{className:p(`${s}__breadcrumb-back`)},e.createElement(G,{href:d.href,renderIcon:()=>e.createElement(x,{align:"right",label:d.title||d.label,className:`${s}__back__button ${q}--icon-tooltip`},e.createElement(U,null,e.createElement(Y,{size:16})))})),$)))};h=A.checkComponentEnabled(h,M);h.propTypes={breadcrumbs:o.arrayOf(o.shape({href:o.string,isCurrentPage:o.bool,key:o.string.isRequired,label:o.node,shortTitle:o.string,title:o.string.isRequired.if(({label:i})=>typeof i!="string")})),className:o.string,label:o.string,maxVisible:o.number,noTrailingSlash:o.bool,overflowAriaLabel:o.string.isRequired.if(({breadcrumbs:i})=>i.length>1),overflowTooltipAlign:x.propTypes.align};h.displayName=M;h.__docgenInfo={description:"The BreadcrumbWithOverflow is used internally by the PageHeader to wrap BreadcrumbItems.",methods:[],displayName:"BreadcrumbWithOverflow",props:{breadcrumbs:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{href:{name:"string",description:"Optional string representing the link location for the BreadcrumbItem",required:!1},isCurrentPage:{name:"bool",description:"Provide if this breadcrumb item represents the current page",required:!1},key:{name:"string",description:"Key required to render array efficiently",required:!0},label:{name:"node",description:"Pass in content that will be inside of the BreadcrumbItem",required:!1},shortTitle:{name:"string",description:"An optional title label for extra long breadcrumb",required:!1},title:{name:"string",description:"A string based alternative to the children, required only if children is not of type string",required:!0}}}},required:!1},className:{description:"className",type:{name:"string"},required:!1},label:{description:"Label for the Breadcrumb component",type:{name:"string"},required:!1},maxVisible:{description:"maxVisible: maximum visible breadcrumb-items before overflow is used (values less than 1 are treated as 1)",type:{name:"number"},required:!1},noTrailingSlash:{description:"noTrailing slash - same as for Carbon",type:{name:"bool"},required:!1},overflowAriaLabel:{description:"overflowAriaLabel label for open close button overflow used for breadcrumb items that do not fit.",type:{name:"string"},required:!0},overflowTooltipAlign:{description:"overflowTooltipAlign: align tooltip position",type:{name:"custom",raw:"Tooltip.propTypes.align"},required:!1}}};export{h as B};
