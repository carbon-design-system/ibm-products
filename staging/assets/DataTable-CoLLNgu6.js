import{b as x,d as y,P as r,_ as B,a7 as Z,g as ee,bM as d,bO as te}from"./index-C360Eztx.js";import{e as b,r as H}from"./index-DtHxqM--.js";import{i as $}from"./MultiSelect-BWBLwwcY.js";import{s as S,e as z,T as se,d as ae,a as oe,c as le,b as re}from"./TableRow-DRpYKe9F.js";import{c as N}from"./events-CdfZZS3f.js";import{c as ne,b as ie,a as de,T as ce,d as pe,e as ue}from"./TableToolbar-DhEDkMsZ.js";import{r as D}from"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import{T as he}from"./TableSelectRow-Cof5LoH2.js";import{O as be}from"./OverflowMenuItem-DcI3jtQ_.js";import{T as we,a as fe}from"./TableToolbarSearch-CK8wnln9.js";import{O as ge}from"./index-CaptJhgE.js";import{U as me}from"./bucket-15-DqPvCVP_.js";const C=(n,a)=>`${n}:${a}`,_=(n,a,e="en")=>{var o,l;if(n===null&&(n=""),a===null&&(a=""),typeof n=="number"&&typeof a=="number")return n-a;if(typeof n=="string"&&typeof a=="string")return L(n,a,e);const t=(o=n==null?void 0:n.props)==null?void 0:o.children,s=(l=a==null?void 0:a.props)==null?void 0:l.children;return typeof t=="string"&&typeof s=="string"?L(t,s,e):L(String(n),String(a),e)},L=(n,a,e="en")=>{const t=!isNaN(parseFloat(n))&&!isNaN(parseFloat(a));return n.localeCompare(a,e,{numeric:t})},Te=({rowIds:n,cellsById:a,sortDirection:e,key:t,locale:s="en",sortRow:o=Se})=>n.slice().sort((l,i)=>{const p=a[C(l,t)],u=a[C(i,t)];return o(p==null?void 0:p.value,u==null?void 0:u.value,{key:t,sortDirection:e,sortStates:S,locale:s,compare:_,rowIds:[l,i]})}),Se=(n,a,{sortDirection:e,sortStates:t,locale:s})=>e===t.ASC?_(n,a,s):_(a,n,s),ye=S.NONE,xe=(n,a,e)=>n===a?e==="NONE"?S.ASC:e==="ASC"?S.DESC:S.NONE:S.ASC,W=(n,a,{key:e})=>{const{sortDirection:t,sortHeaderKey:s}=a,o=xe(e,s,t);return J(n,a,e,o)},J=(n,a,e,t)=>{const{rowIds:s,cellsById:o,initialRowOrder:l}=a,{locale:i,sortRow:p}=n,u=t!==S.NONE?Te({rowIds:s,cellsById:o,sortDirection:t,key:e,locale:i,sortRow:p}):l;return{sortHeaderKey:e,sortDirection:t,rowIds:u}},Re=(n,a,e={})=>{const{rowsById:t}=e,s=new Array(n.length),o={},l={};return n.forEach((i,p)=>{s[p]=i.id;const{id:u,isSelected:f=!1,isExpanded:h=!1,disabled:g=!1}=i;o[u]={id:u,isSelected:f,isExpanded:h,disabled:g,cells:new Array(a.length)},t&&t[i.id]!==void 0&&(o[i.id].isSelected=t[i.id].isSelected,o[i.id].isExpanded=t[i.id].isExpanded),a.forEach(({key:T,slug:R,decorator:I},P)=>{var m;const E=C(i.id,T);l[E]={id:E,value:i[T],isEditable:!1,isEditing:!1,isValid:!0,errors:null,hasAILabelHeader:!!(R||((m=I==null?void 0:I.type)==null?void 0:m.displayName)==="AILabel"),info:{header:T}},o[i.id].cells[P]=E})}),{rowIds:s,rowsById:o,cellsById:l}};var Ie=Re;const Ee=(n,a)=>{const{rowIds:e,rowsById:t,cellsById:s}=Ie(n.rows,n.headers,a),o={rowIds:e,rowsById:t,cellsById:s,sortDirection:a.sortDirection||ye,sortHeaderKey:a.sortHeaderKey||null,initialRowOrder:e.slice(),filterInputValue:a.filterInputValue||null,shouldShowBatchActions:a.shouldShowBatchActions||!1};if(a.sortDirection&&a.sortHeaderKey){const{rowIds:l}=J(n,o,a.sortHeaderKey,a.sortDirection);o.rowIds=l}return o.isExpandedAll=o.rowIds.every(l=>o.rowsById[l].isExpanded===!0),o};var O=Ee;const Ae=(n,a,e)=>n.map(t=>({...a[t],cells:a[t].cells.map(s=>e[s])}));var j=Ae;const U=({rowIds:n,headers:a,cellsById:e,inputValue:t,getCellId:s})=>{const o=t.trim().toLowerCase();return o?n.filter(l=>a.some(({key:i})=>{const p=s(l,i),u=e[p];return typeof u.value=="boolean"?!1:String(u.value).toLowerCase().includes(o)})):n},K=({className:n,decorator:a})=>{var o;const e=x(),t=y({...n&&{[n]:!0},[`${e}--table-column-decorator`]:!0,[`${e}--table-column-decorator--active`]:a});let s=b.isValidElement(a)?a:null;return s&&((o=s.type)==null?void 0:o.displayName)==="AILabel"&&(s=b.cloneElement(s,{size:"mini"})),b.createElement("td",{className:t},s)};K.displayName="TableDecoratorRow";K.propTypes={className:r.string,decorator:r.node};const Q=({["aria-controls"]:n,["aria-label"]:a,ariaLabel:e,className:t,enableExpando:s,enableToggle:o,id:l="expand",isExpanded:i,onExpand:p,expandIconDescription:u,children:f,...h})=>{const g=x(),T=y(`${g}--table-expand`,t),R=i?"collapsed":void 0;return b.createElement("th",B({scope:"col",className:T,"data-previous-value":R,id:l},h),s||o?b.createElement("button",{type:"button",className:`${g}--table-expand__button`,onClick:p,title:u,"aria-label":e||a,"aria-expanded":i,"aria-controls":n},b.createElement(Z,{className:`${g}--table-expand__svg`,"aria-label":u})):null,f)};Q.propTypes={"aria-controls":r.string,"aria-label":r.string,ariaLabel:r.string,children:r.node,className:r.string,enableExpando:ee(r.bool),enableToggle:r.bool,expandIconDescription:r.string,id:r.string,isExpanded:D("enableToggle",r.bool),onExpand:r.oneOfType([D("enableExpando",r.func),D("enableToggle",r.func)])};const V=b.forwardRef(({["aria-controls"]:n,["aria-label"]:a,ariaLabel:e,className:t,children:s,isExpanded:o,onExpand:l,expandIconDescription:i,isSelected:p,expandHeader:u="expand",...f},h)=>{const g=x();let T;const R=b.Children.toArray(s).map(m=>{var A,v,M;if(((A=m.type)==null?void 0:A.displayName)==="TableSlugRow"||((v=m.type)==null?void 0:v.displayName)==="TableDecoratorRow")return(m.props.slug||((M=m.props.decorator)==null?void 0:M.type.displayName)==="AILabel")&&(T=!0),m}),I=b.Children.toArray(s).map(m=>{var A,v;if(((A=m.type)==null?void 0:A.displayName)!=="TableSlugRow"&&((v=m.type)==null?void 0:v.displayName)!=="TableDecoratorRow")return m}),P=y({[`${g}--parent-row`]:!0,[`${g}--expandable-row`]:o,[`${g}--data-table--selected`]:p,[`${g}--data-table--slug-row ${g}--data-table--ai-label-row`]:T},t),E=o?"collapsed":void 0;return b.createElement("tr",B({},f,{ref:h,className:P,"data-parent-row":!0}),R,b.createElement(z,{className:`${g}--table-expand`,"data-previous-value":E,headers:u},b.createElement("button",{type:"button",className:`${g}--table-expand__button`,onClick:l,title:i,"aria-label":e||a,"aria-expanded":o,"aria-controls":n},b.createElement(Z,{className:`${g}--table-expand__svg`,"aria-label":i}))),I)});V.propTypes={"aria-controls":r.string,"aria-label":r.string,ariaLabel:r.string,children:r.node,className:r.string,expandHeader:r.string,expandIconDescription:r.string,isExpanded:r.bool,isSelected:r.bool,onExpand:r.func.isRequired};V.displayName="TableExpandRow";const X=({className:n,children:a,colSpan:e,...t})=>{const s=H.useRef(null),o=x(),l=y(`${o}--expandable-row`,n),i=p=>{if(s&&s.current&&s.current.previousElementSibling){const u=s.current.previousElementSibling;p==="enter"?u.classList.add(`${o}--expandable-row--hover`):u.classList.remove(`${o}--expandable-row--hover`)}};return b.createElement("tr",B({ref:s,onMouseEnter:()=>i("enter"),onMouseLeave:()=>i("leave")},t,{className:l,"data-child-row":!0}),b.createElement(z,{colSpan:e},b.createElement("div",{className:`${o}--child-row-inner-container`},a)))};X.propTypes={children:r.node,className:r.string,colSpan:r.number.isRequired};const G={};function ve(n,a){return G[n]||(G[n]=!0),n}const q=({className:n,slug:a})=>{H.useEffect(()=>{ve("TableSlugRow")},[]);const e=x(),t=y({...n&&{[n]:!0},[`${e}--table-column-slug`]:!0,[`${e}--table-column-slug--active`]:a});let s;return a&&(s=b.cloneElement(a,{size:"mini"})),b.createElement("td",{className:t},s)};q.displayName="TableSlugRow";q.propTypes={className:r.string,slug:r.node};const Ce=H.forwardRef,F=Ce((n,a)=>{const{children:e,...t}=n;return b.createElement(be,B({ref:a,itemText:e},t))});F.displayName="TableToolbarAction";F.propTypes={children:r.node,className:r.string,onClick:r.func.isRequired};const Be="Settings",Y=({className:n,renderIcon:a=me,iconDescription:e=Be,children:t,menuOptionsClass:s,...o})=>{const l=x(),i=y(n,`${l}--toolbar-action ${l}--overflow-menu`),p=y(s,`${l}--toolbar-action__menu`);return b.createElement(ge,B({"aria-label":e,renderIcon:a,className:i,title:e,iconDescription:e,menuOptionsClass:p,flipped:!0},o),t)};Y.propTypes={children:r.node.isRequired,className:r.string,iconDescription:r.string,menuOptionsClass:r.string,renderIcon:r.oneOfType([r.func,r.object])};const Ne=te(),w={expandRow:"carbon.table.row.expand",collapseRow:"carbon.table.row.collapse",expandAll:"carbon.table.all.expand",collapseAll:"carbon.table.all.collapse",selectAll:"carbon.table.all.select",unselectAll:"carbon.table.all.unselect",selectRow:"carbon.table.row.select",unselectRow:"carbon.table.row.unselect"},Oe={[w.expandAll]:"Expand all rows",[w.collapseAll]:"Collapse all rows",[w.expandRow]:"Expand current row",[w.collapseRow]:"Collapse current row",[w.selectAll]:"Select all rows",[w.unselectAll]:"Unselect all rows",[w.selectRow]:"Select row",[w.unselectRow]:"Unselect row"},k=n=>Oe[n];class c extends H.Component{constructor(a){super(a),d(this,"instanceId",void 0),d(this,"rp",void 0),d(this,"getHeaderProps",({header:e,onClick:t,isSortable:s=this.props.isSortable,...o})=>{const{sortDirection:l,sortHeaderKey:i}=this.state;return{...o,key:e.key,sortDirection:l,isSortable:s,isSortHeader:i===e.key,slug:e.slug,decorator:e.decorator,onClick:p=>{const u=W(this.props,this.state,{key:e.key});this.setState(u,()=>{t&&this.handleOnHeaderClick(t,{sortHeaderKey:e.key,sortDirection:u.sortDirection})(p)})}}}),d(this,"getExpandHeaderProps",({onClick:e,onExpand:t,...s}={})=>{const{translateWithId:o=k}=this.props,{isExpandedAll:l,rowIds:i,rowsById:p}=this.state,u=l||i.every(h=>p[h].isExpanded),f=u?w.collapseAll:w.expandAll;return{...s,"aria-label":o(f),"aria-controls":i.map(h=>`expanded-row-${h}`).join(" "),isExpanded:u,onExpand:N([this.handleOnExpandAll,t,e&&this.handleOnExpandHeaderClick(e,{isExpanded:u})])}}),d(this,"handleOnHeaderClick",(e,t)=>s=>e(s,t)),d(this,"handleOnExpandHeaderClick",(e,t)=>s=>e(s,t)),d(this,"getRowProps",({row:e,onClick:t,...s})=>{const{translateWithId:o=k}=this.props,l=e.isExpanded?w.collapseRow:w.expandRow;return{...s,key:e.id,onExpand:N([this.handleOnExpandRow(e.id),t]),isExpanded:e.isExpanded,"aria-label":o(l),"aria-controls":`expanded-row-${e.id}`,isSelected:e.isSelected,disabled:e.disabled}}),d(this,"getExpandedRowProps",({row:e,...t})=>({...t,id:`expanded-row-${e.id}`})),d(this,"getSelectionProps",({onClick:e,row:t,...s}={})=>{const{translateWithId:o=k}=this.props;if(t){const h=t.isSelected?w.unselectRow:w.selectRow;return{...s,checked:t.isSelected,onSelect:N([this.handleOnSelectRow(t.id),e]),id:`${this.getTablePrefix()}__select-row-${t.id}`,name:`select-row-${this.instanceId}`,"aria-label":o(h),disabled:t.disabled,radio:this.props.radio}}const l=this.state.rowIds.length,i=this.getSelectedRows().length,p=l>0&&i===l,u=l>0&&i>0&&i!==l,f=p||u?w.unselectAll:w.selectAll;return{...s,"aria-label":o(f),checked:p,id:`${this.getTablePrefix()}__select-all`,indeterminate:u,name:`select-all-${this.instanceId}`,onSelect:N([this.handleSelectAll,e])}}),d(this,"getToolbarProps",e=>{const{size:t}=this.props;return{...e,size:t==="xs"||t==="sm"?"sm":void 0}}),d(this,"getBatchActionProps",e=>{const{shouldShowBatchActions:t}=this.state,s=this.getSelectedRows().length;return{onSelectAll:void 0,totalCount:this.state.rowIds.length||0,...e,shouldShowBatchActions:t&&s>0,totalSelected:s,onCancel:this.handleOnCancel}}),d(this,"getTableProps",()=>{const{useZebraStyles:e,size:t="lg",isSortable:s,useStaticWidth:o,stickyHeader:l,overflowMenuOnHover:i=!1,experimentalAutoAlign:p}=this.props;return{useZebraStyles:e,size:t,isSortable:s,useStaticWidth:o,stickyHeader:l,overflowMenuOnHover:i,experimentalAutoAlign:p}}),d(this,"getTableContainerProps",()=>{const{stickyHeader:e,useStaticWidth:t}=this.props;return{stickyHeader:e,useStaticWidth:t}}),d(this,"getCellProps",({cell:{hasAILabelHeader:e,hasDecoratorHeader:t},...s})=>({...s,hasAILabelHeader:e,hasDecoratorHeader:t})),d(this,"getSelectedRows",()=>this.state.rowIds.filter(e=>{const t=this.state.rowsById[e];return t.isSelected&&!t.disabled})),d(this,"getFilteredRowIds",()=>{const{filterRows:e=U}=this.props,t=typeof this.state.filterInputValue=="string"?e({rowIds:this.state.rowIds,headers:this.props.headers,cellsById:this.state.cellsById,inputValue:this.state.filterInputValue,getCellId:C}):this.state.rowIds;return t.length==0?[]:t}),d(this,"getTablePrefix",()=>`data-table-${this.instanceId}`),d(this,"setAllSelectedState",(e,t,s)=>{const{rowIds:o}=e,l=o.length!=s.length;return{rowsById:o.reduce((i,p)=>{const u={...e.rowsById[p]};return!u.disabled&&(!l||s.includes(p))&&(u.isSelected=t),i[p]=u,i},{})}}),d(this,"handleOnCancel",()=>{this.setState(e=>({shouldShowBatchActions:!1,...this.setAllSelectedState(e,!1,this.getFilteredRowIds())}))}),d(this,"handleSelectAll",()=>{this.setState(e=>{const t=this.getFilteredRowIds(),{rowsById:s}=e,o=!(Object.values(s).filter(l=>l.isSelected&&!l.disabled).length>0);return{shouldShowBatchActions:o,...this.setAllSelectedState(e,o,t)}})}),d(this,"handleOnSelectRow",e=>()=>{this.setState(t=>{const s=t.rowsById[e];if(this.props.radio)return{shouldShowBatchActions:!1,rowsById:{...Object.entries(t.rowsById).reduce((p,u)=>{const[f,h]=u;return h.isSelected=!1,p[f]=h,p},{}),[e]:{...s,isSelected:!s.isSelected}}};const o=t.rowIds.filter(i=>t.rowsById[i].isSelected).length,l=s.isSelected?o-1:o+1;return{shouldShowBatchActions:!s.isSelected||l>0,rowsById:{...t.rowsById,[e]:{...s,isSelected:!s.isSelected}}}})}),d(this,"handleOnExpandRow",e=>()=>{this.setState(t=>{const s=t.rowsById[e],{isExpandedAll:o}=t;return{isExpandedAll:s.isExpanded?!1:o,rowsById:{...t.rowsById,[e]:{...s,isExpanded:!s.isExpanded}}}})}),d(this,"handleOnExpandAll",()=>{this.setState(e=>{const{rowIds:t,isExpandedAll:s}=e;return{isExpandedAll:!s,rowsById:t.reduce((o,l)=>({...o,[l]:{...e.rowsById[l],isExpanded:!s}}),{})}})}),d(this,"handleSortBy",e=>()=>{this.setState(t=>W(this.props,t,{key:e}))}),d(this,"handleOnInputValueChange",(e,t)=>{e.target&&this.setState({filterInputValue:e.target.value}),t&&this.setState({filterInputValue:t})}),this.state={...O(a,{}),isExpandedAll:!1},this.instanceId=Ne()}shouldComponentUpdate(a){if(this.props!==a){const e=a.rows.map(l=>l.id),t=this.props.rows.map(l=>l.id);if(!$(e,t))return this.setState(l=>O(this.props,l)),!1;const s=a.headers.map(l=>l.key),o=this.props.headers.map(l=>l.key);if(!$(s,o))return this.setState(l=>O(this.props,l)),!1;if(!$(a.rows,this.props.rows))return this.setState(l=>O(this.props,l)),!1}return!0}render(){const{children:a,filterRows:e=U,headers:t,render:s}=this.props,{filterInputValue:o,rowIds:l,rowsById:i,cellsById:p}=this.state,u=typeof o=="string"?e({rowIds:l,headers:t,cellsById:p,inputValue:o,getCellId:C}):l,f={rows:j(u,i,p),headers:this.props.headers,selectedRows:j(this.getSelectedRows(),i,p),getHeaderProps:this.getHeaderProps,getExpandHeaderProps:this.getExpandHeaderProps,getRowProps:this.getRowProps,getExpandedRowProps:this.getExpandedRowProps,getSelectionProps:this.getSelectionProps,getToolbarProps:this.getToolbarProps,getBatchActionProps:this.getBatchActionProps,getTableProps:this.getTableProps,getTableContainerProps:this.getTableContainerProps,getCellProps:this.getCellProps,onInputChange:this.handleOnInputValueChange,sortBy:h=>this.handleSortBy(h)(),selectAll:this.handleSelectAll,selectRow:h=>this.handleOnSelectRow(h)(),expandRow:h=>this.handleOnExpandRow(h)(),expandAll:this.handleOnExpandAll,radio:this.props.radio};return typeof s<"u"?s(f):typeof a<"u"?a(f):null}}d(c,"translationKeys",Object.values(w));d(c,"Table",void 0);d(c,"TableActionList",void 0);d(c,"TableBatchAction",void 0);d(c,"TableBatchActions",void 0);d(c,"TableBody",void 0);d(c,"TableCell",void 0);d(c,"TableContainer",void 0);d(c,"TableDecoratorRow",void 0);d(c,"TableExpandHeader",void 0);d(c,"TableExpandRow",void 0);d(c,"TableExpandedRow",void 0);d(c,"TableHead",void 0);d(c,"TableHeader",void 0);d(c,"TableRow",void 0);d(c,"TableSelectAll",void 0);d(c,"TableSelectRow",void 0);d(c,"TableSlugRow",void 0);d(c,"TableToolbar",void 0);d(c,"TableToolbarAction",void 0);d(c,"TableToolbarContent",void 0);d(c,"TableToolbarSearch",void 0);d(c,"TableToolbarMenu",void 0);c.Table=se;c.TableActionList=ne;c.TableBatchAction=ie;c.TableBatchActions=de;c.TableBody=ae;c.TableCell=z;c.TableContainer=ce;c.TableDecoratorRow=K;c.TableExpandHeader=Q;c.TableExpandRow=V;c.TableExpandedRow=X;c.TableHead=oe;c.TableHeader=le;c.TableRow=re;c.TableSelectAll=pe;c.TableSelectRow=he;c.TableSlugRow=q;c.TableToolbar=ue;c.TableToolbarAction=F;c.TableToolbarContent=we;c.TableToolbarSearch=fe;c.TableToolbarMenu=Y;c.propTypes={experimentalAutoAlign:r.bool,filterRows:r.func,headers:r.arrayOf(r.shape({key:r.string.isRequired,header:r.node.isRequired})).isRequired,isSortable:r.bool,locale:r.string,overflowMenuOnHover:r.bool,radio:r.bool,rows:r.arrayOf(r.shape({id:r.string.isRequired,disabled:r.bool,isSelected:r.bool,isExpanded:r.bool})).isRequired,size:r.oneOf(["xs","sm","md","lg","xl"]),sortRow:r.func,stickyHeader:r.bool,translateWithId:r.func,useStaticWidth:r.bool,useZebraStyles:r.bool};export{c as D,K as T,Q as a,V as b,X as c,q as d,F as e,Y as f};
