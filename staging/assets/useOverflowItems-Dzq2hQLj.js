import{r as h}from"./index-BOZkNhcz.js";import{u as K}from"./useResizeObserver-DcNhBpO-.js";function B(c=[],u,a,m,o){var z,H,I,M,S;const[n,f]=h.useState(0),e=h.useRef(0),p=h.useRef(null),w=h.useRef(0),x=h.useRef(0),O=h.useRef(0),k=()=>{var t;if(u!=null&&u.current){e.current=((t=a==null?void 0:a.current)==null?void 0:t.offsetWidth)||0;const r=u.current.offsetWidth-e.current;f(r)}},E=t=>{if(t&&(u!=null&&u.current)){e.current=t.offsetWidth;const r=u.current.offsetWidth-e.current;f(r)}return t};K(u,k);const W=()=>(p.current||(p.current=new Map),p.current),l=(z=c==null?void 0:c.slice(0,m))==null?void 0:z.reduce((t,r)=>t+(W().get(r.id)||0),0),F=(t,r)=>{const i=W();if(r){const d=getComputedStyle==null?void 0:getComputedStyle(r),g=r.offsetWidth+parseInt(d.marginLeft)+parseInt(d.marginRight);i.set(t,g)}return()=>{i.delete(t)}},s=(()=>{if(!u)return c;const t=W();let r=!1,i=0,d=!1;return m?d=l+(e==null?void 0:e.current)>l:d=l>n+(e==null?void 0:e.current),c.slice(0,m).reduce((g,V)=>{if(r)return g;const y=t.get(V.id)||0;let b=i+y<=n;return d||(b=i+y<=n+(e==null?void 0:e.current)),b?(i+=y,g.push(V)):r=!0,g},[])})(),q=c.slice(s==null?void 0:s.length);if((s==null?void 0:s.length)!==w.current||n!==x.current||l!==O.current){w.current=s==null?void 0:s.length,x.current=n,O.current=l;const t=((M=(I=(H=W())==null?void 0:H.keys())==null?void 0:I.next())==null?void 0:M.value)||"",r=((S=W())==null?void 0:S.get(t))||0;o==null||o({hiddenItems:q,minWidth:n,maxWidth:l+r})}return{visibleItems:s,itemRefHandler:F,hiddenItems:q,offsetRefHandler:E}}export{B as u};
