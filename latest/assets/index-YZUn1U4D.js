import{b as z,u as D,p as lt,a as ct,f as ut,q as pt,g as ft,a2 as dt,h as gt,n as G,c as F,_ as J,P as r}from"./index--clQM3eT.js";import{r as g,e as u}from"./index-BOZkNhcz.js";const B={};function bt(n,i,l){return function(d,e,o){if(d[e]!==void 0){if(!B[o]||!B[o][e]){B[o]={...B[o],[e]:!0};const f=d[e],H=l?l(f):null;i&&!i.includes(f)&&(l?`${f}${e}${o}${H}${f}`:`${f}${e}${o}${i.join(", ")}${f}`)}for(var p=arguments.length,y=new Array(p>3?p-3:0),$=3;$<p;$++)y[$-3]=arguments[$];return n(d,e,o,...y)}}}function Et(n,i,l){const s=g.useRef(null);g.useEffect(()=>{s.current=l},[l]),g.useEffect(()=>{var o;const d=p=>{s.current&&s.current(p)},e="current"in n?n.current:n;return(o=e==null?void 0:e.addEventListener)==null||o.call(e,i,d),()=>{var p;(p=e==null?void 0:e.removeEventListener)==null||p.call(e,i,d)}},[n,i])}function I(n,i){const l=g.useRef(null);g.useEffect(()=>{l.current=i},[i]),g.useEffect(()=>{function s(d){l.current&&l.current(d)}return window.addEventListener(n,s),()=>{window.removeEventListener(n,s)}},[n])}function mt(n){switch(n){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return n}}const K=u.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ht=n=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[n],yt=u.forwardRef(function(i,l){var O;let{isTabTip:s,align:d=s?"bottom-start":"bottom",as:e="span",autoAlign:o=!1,autoAlignBoundary:p,caret:y=!s,className:$,children:f,dropShadow:H=!0,highContrast:X=!1,onRequestClose:A,open:j,alignmentAxisOffset:Y,...Z}=i;const b=z(),_=g.useRef(null),m=g.useRef(null),C=g.useRef(null),v=D("enable-v12-dynamic-floating-styles")||o;let P=mt(d);I("blur",()=>{j&&(A==null||A())}),I("click",a=>{var t;j&&!((t=C==null?void 0:C.current)!=null&&t.contains(a.target))&&(A==null||A())});const tt=u.Children.toArray(f).some(a=>{var t,c,h,E;return((c=(t=a==null?void 0:a.props)==null?void 0:t.className)==null?void 0:c.includes("slug"))||((E=(h=a==null?void 0:a.props)==null?void 0:h.className)==null?void 0:E.includes("ai-label"))})?7:6,w=g.useRef({offset:10,caretHeight:tt});lt(()=>{if(y&&C.current){const a=window.getComputedStyle(C.current,null),t=a.getPropertyValue("--cds-popover-offset"),c=a.getPropertyValue("--cds-popover-caret-height");t&&(w.current.offset=t.includes("px")?Number(t.split("px",1)[0])*1:Number(t.split("rem",1)[0])*16),c&&(w.current.caretHeight=c.includes("px")?Number(c.split("px",1)[0])*1:Number(c.split("rem",1)[0])*16)}});const{refs:T,floatingStyles:L,placement:S,middlewareData:x}=ct(v?{placement:P,strategy:"fixed",middleware:[pt(s?0:{alignmentAxis:Y,mainAxis:(O=w==null?void 0:w.current)==null?void 0:O.offset}),o&&ft({fallbackPlacements:P.includes("bottom")?["bottom","bottom-start","bottom-end","right","right-start","right-end","left","left-start","left-end","top","top-start","top-end"]:["top","top-start","top-end","left","left-start","left-end","right","right-start","right-end","bottom","bottom-start","bottom-end"],fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"start",boundary:p}),dt({element:m}),o&&gt()],whileElementsMounted:ut}:{}),et=g.useMemo(()=>({floating:_,setFloating:T.setFloating,caretRef:m,autoAlign:o}),[T.setFloating,o]);s&&(["bottom-start","bottom-end"].includes(P)||(P="bottom-start")),g.useEffect(()=>{var a,t;if(v){const c={...L,visibility:(a=x.hide)!=null&&a.referenceHidden?"hidden":"visible"};if(Object.keys(c).forEach(h=>{T.floating.current&&(T.floating.current.style[h]=c[h])}),y&&x&&x.arrow&&(m!=null&&m.current)){const{x:h,y:E}=x.arrow,N={top:"bottom",right:"left",bottom:"top",left:"right"}[S.split("-")[0]];m.current.style.left=h!=null?`${h}px`:"",m.current.style.top=E!=null?`${E}px`:"",m.current.style.right="",m.current.style.bottom="",N&&(m.current.style[N]=`${-((t=w==null?void 0:w.current)==null?void 0:t.caretHeight)}px`)}}},[L,T.floating,v,x,S,y]);const rt=G([l,C]),ot=o&&S!==P?S:P,nt=F({[`${b}--popover-container`]:!0,[`${b}--popover--caret`]:y,[`${b}--popover--drop-shadow`]:H,[`${b}--popover--high-contrast`]:X,[`${b}--popover--open`]:j,[`${b}--popover--auto-align ${b}--autoalign`]:v,[`${b}--popover--${ot}`]:!0,[`${b}--popover--tab-tip`]:s},$),st=u.Children.map(f,a=>{var V,k;const t=a,c=(V=t==null?void 0:t.type)==null?void 0:V.displayName,h=(t==null?void 0:t.type)==="button",E=v&&c&&["ToggletipButton"].includes(c),N=v&&!["ToggletipContent","PopoverContent"].includes(c);if(u.isValidElement(t)&&(h||E||N)){const W=(k=t==null?void 0:t.props)==null?void 0:k.className,R=(t==null?void 0:t.props).ref,it=F(`${b}--popover--tab-tip__button`,W);return u.cloneElement(t,{className:s&&(t==null?void 0:t.type)==="button"?it:W||"",ref:q=>{var M,U;(v&&((M=t==null?void 0:t.type)==null?void 0:M.displayName)!=="PopoverContent"||v&&((U=t==null?void 0:t.type)==null?void 0:U.displayName)==="ToggletipButton")&&T.setReference(q),typeof R=="function"?R(q):R!=null&&(R.current=q)}})}else return t}),at=e;return u.createElement(K.Provider,{value:et},u.createElement(at,J({},Z,{className:nt,ref:rt}),v||s?st:f))});yt.propTypes={align:bt(r.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],ht),as:r.oneOfType([r.string,r.elementType]),autoAlign:r.bool,autoAlignBoundary:r.oneOfType([r.oneOf(["clippingAncestors"]),r.elementType,r.arrayOf(r.elementType),r.exact({x:r.number.isRequired,y:r.number.isRequired,width:r.number.isRequired,height:r.number.isRequired})]),caret:r.bool,children:r.node,className:r.string,dropShadow:r.bool,highContrast:r.bool,isTabTip:r.bool,onRequestClose:r.func,open:r.bool.isRequired};function vt(n,i){let{className:l,children:s,...d}=n;const e=z(),{setFloating:o,caretRef:p,autoAlign:y}=u.useContext(K),$=G([o,i]),f=D("enable-v12-dynamic-floating-styles")||y;return u.createElement("span",J({},d,{className:`${e}--popover`}),u.createElement("span",{className:F(`${e}--popover-content`,l),ref:$},s,f&&u.createElement("span",{className:F({[`${e}--popover-caret`]:!0,[`${e}--popover--auto-align`]:!0}),ref:p})),!f&&u.createElement("span",{className:F({[`${e}--popover-caret`]:!0}),ref:p}))}const Q=u.forwardRef(vt);Q.displayName="PopoverContent";Q.propTypes={children:r.node,className:r.string};export{yt as P,Q as a,Et as b,bt as d,mt as m,I as u};
