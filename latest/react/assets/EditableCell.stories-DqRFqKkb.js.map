{"version":3,"file":"EditableCell.stories-DqRFqKkb.js","sources":["../../src/components/Datagrid/Extensions/EditableCell/EditableCell.docs-page.js","../../src/components/Datagrid/Extensions/EditableCell/EditableCell.stories.jsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { StoryDocsPage } from '../../../../global/js/utils/StoryDocsPage';\nimport {\n  EditableCellUsageStory,\n  InlineEditUsageStory,\n} from './EditableCell.stories';\n\nexport const DocsPage = () => (\n  <StoryDocsPage\n    omitCodedExample\n    blocks={[\n      {\n        description: `The \\`Datagrid\\` supports inline editing when used with the \\`useEditableCell\\` hook (previously named \\`useInlineEdit\\` in v1) and columns are provided the required configuration. The four data types supported are strings, numbers, dates, and\n        selection (dropdown).`,\n      },\n      {\n        description: `Below are example column configurations for the supported inline edit data types:\n\nDefault/string:\n        `,\n        source: {\n          language: 'json',\n          code: `\n  {\n    Header: 'First Name',\n    accessor: 'firstName',\n    inlineEdit: {\n      type: 'text',\n      // required for including validation, this is used to set the invalid prop internally\n      validator: (n) => n.length >= 40,\n      // These props are passed to the Carbon component used for inline editing, in this case the TextInput\n      inputProps: {\n        invalidText: 'Invalid text, character count must be less than 40',\n      },\n    },\n  }\n          `,\n        },\n      },\n      {\n        description: 'Number',\n        source: {\n          language: 'json',\n          code: `\n{\n  Header: 'Age',\n  accessor: 'age',\n  width: 120,\n  inlineEdit: {\n    // required for including validation, this is used to set the invalid prop internally\n    validator: (n) => n && n < 18,\n    type: 'number',\n    // These props are passed to the Carbon component used for inline editing, in this case NumberInput\n    inputProps: {\n      invalidText: 'Invalid number, must be 18 or greater',\n    },\n  },\n},\n          `,\n        },\n      },\n      {\n        description: 'Date',\n        source: {\n          language: 'json',\n          code: `\n{\n  Header: 'Active since',\n  accessor: 'activeSince',\n  inlineEdit: {\n    type: 'date',\n    inputProps: {\n      // optionally pass props here to be passed through to Carbon's DatePicker component\n      onChange: (newDateObj, cell) => {\n        console.log(newDateObj, cell);\n      },\n      labelText: 'Change active since date',\n      // optionally pass props here to be passed through to Carbon's DatePickerInput component\n      datePickerInputProps: {\n        labelText: 'Change active since date',\n      },\n    },\n  },\n},\n          `,\n        },\n      },\n      {\n        description: 'Selection',\n        source: {\n          language: 'json',\n          code: `\n{\n  Header: 'Chart type',\n  accessor: 'chartType',\n  inlineEdit: {\n    type: 'selection',\n    inputProps: {\n      // These props are passed to the Carbon component used for inline editing\n      items: [\n        {\n          id: 'option-0',\n          icon: ChartColumnFloating16,\n          text: 'Column Chart',\n        },\n        {\n          id: 'option-1',\n          icon: ChartBubble16,\n          text: 'Bubble Chart',\n        },\n        {\n          id: 'option-2',\n          icon: ChartVennDiagram16,\n          text: 'Venn Diagram',\n        },\n      ],\n      onChange: (item) => {\n        console.log(item);\n      },\n    },\n  },\n},\n          `,\n        },\n      },\n      {\n        description: `Using the column structure outlined above, along with the use of the \\`useEditableCell\\` hook (previously named \\`useInlineEdit\\` in v1), the \\`Datagrid\\` will support inline editing. See example below:`,\n        source: {\n          code: `\nimport { Datagrid, useDatagrid, useEditableCell } from '@carbon/ibm-products';\nconst App = () => {\n  const [data, setData] = useState(makeData(10));\n  const columns = React.useMemo(() => getInlineEditColumns(), []); // These columns follow the inline edit column configuration detailed above\n  const datagridState = useDatagrid(\n    {\n      columns,\n      data,\n      onDataUpdate: setData,\n    },\n    useEditableCell\n  );\n  return <Datagrid datagridState={datagridState} />;\n};\n          `,\n        },\n        story: EditableCellUsageStory,\n      },\n      {\n        title: 'Using deprecated useInlineEdit hook',\n        description: `At this time, it is possible to still use the deprecated \\`useInlineEdit\\` hook but requires setting a feature flag. See example below:`,\n        source: {\n          code: `\nimport {\n  Datagrid,\n  useDatagrid,\n  useInlineEdit,\n  pkg,\n} from '@carbon/ibm-products';\n\nconst MyInlineEditDatagrid = () => {\n  pkg.feature['Datagrid.useInlineEdit'] = true;\n  const [data, setData] = useState(gridData);\n  const datagridState = useDatagrid(\n    {\n      columns,\n      data,\n      onDataUpdate: setData,\n    },\n    useInlineEdit\n  );\n  return <Datagrid datagridState={datagridState} />;\n};\n          `,\n        },\n        story: InlineEditUsageStory,\n      },\n      {\n        title: 'Opt out of editing at cell level',\n        description: `In some cases you may want to disable editing per cell. This is possible by providing the following structure for the cell value within your row data:`,\n        source: {\n          code: `\n{\n  value: '\\u2014', // Value displayed for static cell\n  isStaticCell: true,\n  columnId: 'lastName',\n}\n          `,\n        },\n      },\n    ]}\n  />\n);\n","/* eslint-disable react-hooks/exhaustive-deps */\n/**\n * Copyright IBM Corp. 2022, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useState } from 'react';\nimport { Edit, TrashCan } from '@carbon/react/icons';\nimport { action } from 'storybook/actions';\nimport {\n  Datagrid,\n  useDatagrid,\n  useInlineEdit,\n  useEditableCell,\n} from '../../index';\nimport { pkg } from '../../../../settings';\nimport styles from '../../_storybook-styles.scss?inline';\nimport { DocsPage } from './EditableCell.docs-page';\nimport { makeData } from '../../utils/makeData';\nimport { ARG_TYPES } from '../../utils/getArgTypes';\nimport { getInlineEditColumns } from '../../utils/getInlineEditColumns';\nimport { WithFeatureFlags } from '../../../../../.storybook/WithFeatureFlags';\nimport { ListItem, UnorderedList } from '@carbon/react';\n\nconst blockClass = `${pkg.prefix}--datagrid`;\nconst storybookBlockClass = `storybook-${blockClass}__validation-code-snippet`;\n\nexport default {\n  title: 'Deprecated/Datagrid/EditableCell',\n  component: Datagrid,\n  tags: ['autodocs'],\n  parameters: {\n    styles,\n    docs: { page: DocsPage },\n    layout: 'fullscreen',\n    argTypes: {\n      featureFlags: {\n        table: {\n          disable: true,\n        },\n      },\n    },\n  },\n};\n\nconst sharedDatagridProps = {\n  emptyStateTitle: 'Empty state title',\n  emptyStateDescription: 'Description text explaining why table is empty',\n  emptyStateSize: 'lg',\n  gridTitle: 'Data table title',\n  gridDescription: 'Additional information if needed',\n  useDenseHeader: false,\n  rowSize: 'lg',\n  rowSizes: [\n    {\n      value: 'xl',\n      labelText: 'Extra large',\n    },\n    {\n      value: 'lg',\n      labelText: 'Large',\n    },\n    {\n      value: 'md',\n      labelText: 'Medium',\n    },\n    {\n      value: 'xs',\n      labelText: 'Small',\n    },\n  ],\n  onRowSizeChange: (value) => {\n    console.log('row size changed to: ', value);\n  },\n  rowActions: [\n    {\n      id: 'edit',\n      itemText: 'Edit',\n      icon: Edit,\n      onClick: action('Clicked row action: edit'),\n    },\n\n    {\n      id: 'delete',\n      itemText: 'Delete',\n      icon: TrashCan,\n      isDelete: true,\n      onClick: action('Clicked row action: delete'),\n    },\n  ],\n};\n\nconst EditableCellUsage = ({ ...args }) => {\n  const [data, setData] = useState(\n    makeData(10, { includeNonEditableCell: true, column: 'lastName' })\n  );\n  const columns = React.useMemo(() => getInlineEditColumns(), []);\n\n  const datagridState = useDatagrid(\n    {\n      columns,\n      data,\n      onDataUpdate: setData,\n      ...args.defaultGridProps,\n    },\n    useEditableCell\n  );\n\n  return (\n    <WithFeatureFlags\n      flags={{\n        'enable-datagrid-useEditableCell': true,\n      }}\n    >\n      <Datagrid datagridState={datagridState} />\n      <UnorderedList>\n        <ListItem>\n          <p>\n            The following inline edit columns incorporate validation:\n            <code className={storybookBlockClass}>{'first_name'}</code>\n            <code className={storybookBlockClass}>{'last_name'}</code>\n            <code className={storybookBlockClass}>{'age'}</code>\n            <code className={storybookBlockClass}>{'visits'}</code>\n          </p>\n        </ListItem>\n        <ListItem>\n          <p>\n            The second row's{' '}\n            <code className={storybookBlockClass}>{'lastName'}</code> cell is an\n            example of opting out of editing on a per cell basis.\n          </p>\n        </ListItem>\n      </UnorderedList>\n    </WithFeatureFlags>\n  );\n};\n\nconst EditableCellTemplateWrapper = ({ ...args }) => {\n  return <EditableCellUsage defaultGridProps={{ ...args }} />;\n};\n\nconst InlineEditUsage = ({ ...args }) => {\n  const [data, setData] = useState(makeData(10));\n  const columns = React.useMemo(() => getInlineEditColumns(), []);\n\n  const datagridState = useDatagrid(\n    {\n      columns,\n      data,\n      onDataUpdate: setData,\n      ...args.defaultGridProps,\n    },\n    useInlineEdit\n  );\n\n  return (\n    <WithFeatureFlags>\n      <Datagrid datagridState={datagridState} />\n      <p>\n        The following inline edit columns incorporate validation:\n        <code className={storybookBlockClass}>{'first_name'}</code>\n        <code className={storybookBlockClass}>{'last_name'}</code>\n        <code className={storybookBlockClass}>{'age'}</code>\n        <code className={storybookBlockClass}>{'visits'}</code>\n      </p>\n    </WithFeatureFlags>\n  );\n};\n\nconst InlineEditTemplateWrapper = ({ ...args }) => {\n  return <InlineEditUsage defaultGridProps={{ ...args }} />;\n};\n\nconst inlineEditUsageControlProps = {\n  gridTitle: sharedDatagridProps.gridTitle,\n  gridDescription: sharedDatagridProps.gridDescription,\n  useDenseHeader: sharedDatagridProps.useDenseHeader,\n};\n\nexport const EditableCellUsageStory = EditableCellTemplateWrapper.bind({});\nEditableCellUsageStory.storyName = 'Using useEditableCell hook';\nEditableCellUsageStory.argTypes = {\n  gridTitle: ARG_TYPES.gridTitle,\n  gridDescription: ARG_TYPES.gridDescription,\n  useDenseHeader: ARG_TYPES.useDenseHeader,\n};\nEditableCellUsageStory.args = {\n  ...inlineEditUsageControlProps,\n};\n\nconst basicUsageStoryName = 'Using deprecated useInlineEdit hook';\nexport const InlineEditUsageStory = InlineEditTemplateWrapper.bind({});\nInlineEditUsageStory.storyName = basicUsageStoryName;\nInlineEditUsageStory.argTypes = {\n  gridTitle: ARG_TYPES.gridTitle,\n  gridDescription: ARG_TYPES.gridDescription,\n  useDenseHeader: ARG_TYPES.useDenseHeader,\n};\nInlineEditUsageStory.args = {\n  ...inlineEditUsageControlProps,\n};\n"],"names":["DocsPage","React","StoryDocsPage","EditableCellUsageStory","InlineEditUsageStory","action","blockClass","pkg","prefix","storybookBlockClass","EditableCell_stories","title","component","Datagrid","tags","parameters","styles","docs","page","layout","argTypes","featureFlags","table","disable","sharedDatagridProps","gridTitle","gridDescription","useDenseHeader","rowActions","id","itemText","icon","Edit","onClick","TrashCan","isDelete","EditableCellUsage","args","data","setData","useState","makeData","includeNonEditableCell","column","columns","useMemo","getInlineEditColumns","datagridState","useDatagrid","onDataUpdate","defaultGridProps","useEditableCell","WithFeatureFlags","UnorderedList","ListItem","EditableCellTemplateWrapper","InlineEditUsage","useInlineEdit","InlineEditTemplateWrapper","inlineEditUsageControlProps","bind","storyName","ARG_TYPES","basicUsageStoryName","source","originalSource"],"mappings":"qrGAcO,MAAMA,EAAW,IACtBC,EAAA,cAACC,EAAA,CACC,iBAAe,GACf,OAAQ,CACN,CACE,YAAa,8QAAA,EAGf,CACE,YAAa;AAAA;AAAA;AAAA,UAIb,OAAQ,CACN,SAAU,OACV,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,CAeR,EAEF,CACE,YAAa,SACb,OAAQ,CACN,SAAU,OACV,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,CAgBR,EAEF,CACE,YAAa,OACb,OAAQ,CACN,SAAU,OACV,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,CAoBR,EAEF,CACE,YAAa,YACb,OAAQ,CACN,SAAU,OACV,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,CAgCR,EAEF,CACE,YAAa,uMACb,OAAQ,CACN,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,EAiBR,MAAOC,CAAA,EAET,CACE,MAAO,sCACP,YAAa,wIACb,OAAQ,CACN,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,EAuBR,MAAOC,CAAA,EAET,CACE,MAAO,mCACP,YAAa,yJACb,OAAQ,CACN,KAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAA,CAOR,CACF,CACF,CACF,oEC3LF,KAAA,CAAA,OAAAC,CAASA,EAAAA,6BAgBHC,EAAa,GAAGC,EAAIC,MAAM,aAC1BC,EAAsB,aAAaH,CAAU,4BAEnDI,GAAA,CACEC,MAAO,mCACPC,UAAWC,EACXC,KAAM,CAAC,UAAU,EACjBC,WAAY,CACVC,OAAAA,EACAC,KAAM,CAAEC,KAAMlB,CAAAA,EACdmB,OAAQ,aACRC,SAAU,CACRC,aAAc,CACZC,MAAO,CACLC,QAAS,EAAA,CACX,CACF,CACF,CACD,EAGGC,EAAsB,CAI1BC,UAAW,mBACXC,gBAAiB,mCACjBC,eAAgB,GAuBhBC,WAAY,CACV,CACEC,GAAI,OACJC,SAAU,OACVC,KAAMC,EACNC,QAAS5B,EAAO,0BAA0B,CAAA,EAG5C,CACEwB,GAAI,SACJC,SAAU,SACVC,KAAMG,EACNC,SAAU,GACVF,QAAS5B,EAAO,4BAA4B,CAAA,CAC7C,CAEL,EAEM+B,EAAoBA,CAAC,CAAE,GAAGC,CAAK,IAAM,CACzC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SACtBC,EAAS,GAAI,CAAEC,uBAAwB,GAAMC,OAAQ,UAAA,CAAY,CACnE,EACMC,EAAU3C,EAAM4C,QAAQ,IAAMC,EAAAA,EAAwB,CAAA,CAAE,EAExDC,EAAgBC,EACpB,CACEJ,QAAAA,EACAN,KAAAA,EACAW,aAAcV,EACd,GAAGF,EAAKa,gBAAAA,EAEVC,CACF,EAEA,OACElD,EAAA,cAACmD,GACC,MAAO,CACL,kCAAmC,EAAA,CACrC,EAEAnD,EAAA,cAACY,EAAA,CAAS,cAAAkC,CAAA,CAA6B,kBACtCM,EAAA,KACCpD,EAAA,cAACqD,EAAA,KACCrD,EAAA,cAAC,IAAA,KAAC,4EAEC,OAAA,CAAK,UAAWQ,GAAsB,YAAa,EACpDR,EAAA,cAAC,QAAK,UAAWQ,CAAAA,EAAsB,WAAY,EACnDR,EAAA,cAAC,OAAA,CAAK,UAAWQ,CAAAA,EAAsB,KAAM,EAC7CR,EAAA,cAAC,OAAA,CAAK,UAAWQ,GAAsB,QAAS,CAClD,CACF,EACAR,EAAA,cAACqD,EAAA,qBACE,IAAA,KAAC,mBACiB,IACjBrD,EAAA,cAAC,OAAA,CAAK,UAAWQ,CAAAA,EAAsB,UAAW,EAAO,mEAE3D,CACF,CACF,CACF,CAEJ,EAEM8C,EAA8BA,CAAC,CAAE,GAAGlB,CAAK,IACtCpC,EAAA,cAACmC,GAAkB,iBAAkB,CAAE,GAAGC,CAAAA,EAAO,EAGpDmB,EAAkBA,CAAC,CAAE,GAAGnB,CAAK,IAAM,CACvC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAASC,EAAS,EAAE,CAAC,EACvCG,EAAU3C,EAAM4C,QAAQ,IAAMC,EAAAA,EAAwB,CAAA,CAAE,EAExDC,EAAgBC,EACpB,CACEJ,QAAAA,EACAN,KAAAA,EACAW,aAAcV,EACd,GAAGF,EAAKa,gBAAAA,EAEVO,CACF,EAEA,OACExD,EAAA,cAACmD,EAAA,KACCnD,EAAA,cAACY,EAAA,CAAS,cAAAkC,EAA6B,EACvC9C,EAAA,cAAC,IAAA,KAAC,4DAEAA,EAAA,cAAC,OAAA,CAAK,UAAWQ,CAAAA,EAAsB,YAAa,EACpDR,EAAA,cAAC,OAAA,CAAK,UAAWQ,CAAAA,EAAsB,WAAY,EACnDR,EAAA,cAAC,QAAK,UAAWQ,CAAAA,EAAsB,KAAM,kBAC5C,OAAA,CAAK,UAAWA,CAAAA,EAAsB,QAAS,CAClD,CACF,CAEJ,EAEMiD,EAA4BA,CAAC,CAAE,GAAGrB,CAAK,IACpCpC,EAAA,cAACuD,GAAgB,iBAAkB,CAAE,GAAGnB,CAAAA,EAAO,EAGlDsB,EAA8B,CAClClC,UAAWD,EAAoBC,UAC/BC,gBAAiBF,EAAoBE,gBACrCC,eAAgBH,EAAoBG,cACtC,EAEaxB,EAAyBoD,EAA4BK,KAAK,CAAA,CAAE,EACzEzD,EAAuB0D,UAAY,6BACnC1D,EAAuBiB,SAAW,CAChCK,UAAWqC,EAAUrC,UACrBC,gBAAiBoC,EAAUpC,gBAC3BC,eAAgBmC,EAAUnC,cAC5B,EACAxB,EAAuBkC,KAAO,CAC5B,GAAGsB,CACL,EAEA,MAAMI,EAAsB,sCACf3D,EAAuBsD,EAA0BE,KAAK,CAAA,CAAE,EACrExD,EAAqByD,UAAYE,EACjC3D,EAAqBgB,SAAW,CAC9BK,UAAWqC,EAAUrC,UACrBC,gBAAiBoC,EAAUpC,gBAC3BC,eAAgBmC,EAAUnC,cAC5B,EACAvB,EAAqBiC,KAAO,CAC1B,GAAGsB,CACL,EAACxD,EAAAY,WAAA,CAAA,GAAAZ,EAAAY,WAAAE,KAAA,CAAA,GAAAd,EAAAY,YAAAE,KAAA+C,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,GAAA9D,EAAAY,YAAAE,MAAA+C,MAAAA,CAAA,CAAA,EAAA5D,EAAAW,WAAA,CAAA,GAAAX,EAAAW,WAAAE,KAAA,CAAA,GAAAb,EAAAW,YAAAE,KAAA+C,OAAA,CAAAC,eAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAA,GAAA7D,EAAAW,YAAAE,MAAA+C,MAAAA,CAAA,CAAA"}