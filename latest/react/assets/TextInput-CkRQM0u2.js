import{e as a,u as de,r as p,k as pe,c as o,P as t,i as z}from"./iframe-DL4rv6Sk.js";import{u as ue}from"./useNormalizedInputProps-DUnwy-61.js";import{F as me}from"./FormContext-BcuiRe3h.js";import{T as h}from"./Text-BLHpolkk.js";import{A as fe}from"./index-DKpSrTTL.js";import{i as xe}from"./utils-Cs9s9lyq.js";const be=r=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":r}),$e=r=>({"aria-describedby":r}),ve=r=>({"aria-describedby":r}),_e=({sharedTextInputProps:r,invalid:c,invalidId:u,warn:d,warnId:s,hasHelper:m,helperId:i})=>({...r,...c?be(u):{},...d?$e(s):{},...m?ve(i):{}}),we=(r,c,u="character",d="characters")=>{if(typeof c>"u")return null;const s=c-r;return s<=10&&s>0?`${s} ${s===1?u:d} left.`:s<=0?`Maximum ${d} reached.`:null},D=a.forwardRef(({className:r,decorator:c,disabled:u=!1,helperText:d,hideLabel:s,id:m,inline:i=!1,invalid:j=!1,invalidText:B,labelText:I,light:E,onChange:G=()=>{},onClick:H=()=>{},placeholder:N,readOnly:v,size:f,type:J="text",warn:K=!1,warnText:Q,enableCounter:_=!1,maxCount:b,slug:w,...T},U)=>{const e=de(),{defaultValue:C,value:y}=T,P=p.useRef(null),X=pe([U,P]);function R(){return(C||y||P.current?.value||"").toString().length}const[A,L]=p.useState(R());p.useEffect(()=>{L(R())},[y,C,_]);const n=ue({id:m,readOnly:v,disabled:u,invalid:j,invalidText:B,warn:K,warnText:Q}),Y=o(`${e}--text-input`,{[`${e}--text-input--light`]:E,[`${e}--text-input--invalid`]:n.invalid,[`${e}--text-input--warning`]:n.warn,[`${e}--text-input--${f}`]:f,[`${e}--layout--size-${f}`]:f}),F={id:m,onChange:l=>{n.disabled||(L(l.target.value?.length),G(l))},onClick:l=>{n.disabled||H(l)},placeholder:N,type:J,ref:X,className:Y,title:N,disabled:n.disabled,readOnly:v,"aria-describedby":d&&n.helperId,...T};_&&(F.maxLength=b);const Z=o([o(`${e}--form-item`,r)],`${e}--text-input-wrapper`,{[`${e}--text-input-wrapper--readonly`]:v,[`${e}--text-input-wrapper--light`]:E,[`${e}--text-input-wrapper--inline`]:i,[`${e}--text-input-wrapper--inline--invalid`]:i&&n.invalid}),ee=o(`${e}--label`,{[`${e}--visually-hidden`]:s,[`${e}--label--disabled`]:n.disabled,[`${e}--label--inline`]:i,[`${e}--label--inline--${f}`]:i&&!!f}),te=o(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:n.disabled,[`${e}--form__helper-text--inline`]:i}),ne=o(`${e}--text-input__field-outer-wrapper`,{[`${e}--text-input__field-outer-wrapper--inline`]:i}),ae=o(`${e}--text-input__field-wrapper`,{[`${e}--text-input__field-wrapper--warning`]:n.warn,[`${e}--text-input__field-wrapper--slug`]:w,[`${e}--text-input__field-wrapper--decorator`]:c}),re=o({[`${e}--text-input__invalid-icon`]:n.invalid||n.warn,[`${e}--text-input__invalid-icon--warning`]:n.warn}),ie=o(`${e}--label`,{[`${e}--label--disabled`]:u,[`${e}--text-input__label-counter`]:!0}),le=_&&b?a.createElement(h,{as:"div",className:ie},`${A}/${b}`):null,se=I?a.createElement(h,{as:"label",htmlFor:m,className:ee},I):null,V=a.createElement("div",{className:`${e}--text-input__label-wrapper`},se,le),W=d?a.createElement(h,{as:"div",id:n.helperId,className:te},d):null,oe=a.createElement("input",_e({sharedTextInputProps:F,invalid:n.invalid,invalidId:n.invalidId,warn:n.warn,warnId:n.warnId})),{isFluid:$}=p.useContext(me),k=p.useRef(null),[O,ce]=p.useState(""),x=we(A,b);p.useEffect(()=>{if(x&&x!==O){const l=k.current;if(l){l.textContent="";const M=setTimeout(()=>{l&&(l.textContent=x,ce(x))},1e3);return()=>{M&&clearTimeout(M)}}}},[x,O]);const S=n.icon,g=w??c,q=xe(g,fe)?p.cloneElement(g,{size:"mini"}):g;return a.createElement("div",{className:Z},i?a.createElement("div",{className:`${e}--text-input__label-helper-wrapper`},V,!$&&(n.validation||W)):V,a.createElement("div",{className:ne},a.createElement("div",{className:ae,"data-invalid":n.invalid||null},S&&a.createElement(S,{className:re}),oe,w?q:c?a.createElement("div",{className:`${e}--text-input__field-inner-wrapper--decorator`},q):"",a.createElement("span",{className:`${e}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:k},x),$&&a.createElement("hr",{className:`${e}--text-input__divider`}),$&&!i&&n.validation),!$&&!i&&(n.validation||W)))});D.displayName="TextInput";D.propTypes={className:t.string,decorator:t.node,defaultValue:t.oneOfType([t.string,t.number]),disabled:t.bool,enableCounter:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node.isRequired,light:z(t.bool),maxCount:t.number,onChange:t.func,onClick:t.func,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:z(t.node),type:t.string,value:t.oneOfType([t.string,t.number]),warn:t.bool,warnText:t.node};export{D as T,_e as a,we as g};
