import{j as a,ej as L,r as m,e,B as h,al as I}from"./iframe-Cff_uvRq.js";import{useMDXComponents as z}from"./index-BL0W-UKo.js";import{P as q,a as x}from"./ProgressIndicator-D1fbOwMl.js";import{T as R,R as g}from"./TileGroup-ByuLiG-E.js";import{T as E}from"./TextInput-DBrN7AWx.js";import{S as y,H as b}from"./index-zgZhWPlI.js";import{T as X}from"./Tearsheet-D1bEoRx4.js";import{H as J,a as U}from"./HeaderName-CMBRYkS-.js";import{H as V}from"./HeaderContainer-dcWpFxop.js";import{L as K}from"./index-BbMc6LY2.js";import{S as Q}from"./SidePanel-BqGuwctZ.js";import"./Text-BeripsbQ.js";import"./bucket-19-rzwpXw_n.js";import"./bucket-9-BZBYuukz.js";import"./index-A0BY4CbF.js";import"./bucket-18-DKBL0two.js";import"./utils-DxZkHSRU.js";import"./bucket-14-BS7hPKin.js";import"./useNormalizedInputProps-BM2ZcbR9.js";import"./FormContext-Bz91-0Aj.js";import"./TearsheetShell-BlQlb1Y3.js";import"./useResizeObserver-BVjEDJaE.js";import"./getNodeTextContent-C8IeKkUQ.js";import"./props-helper-BGCgvcot.js";import"./ComposedModal-CLMfRped.js";import"./index-BEhuL1MR.js";import"./ButtonSet-BsWxyNA0.js";import"./InlineLoading-Xj1uHorY.js";import"./bucket-6-Bvs71sA4.js";import"./mergeRefs-D4pwfk3t.js";import"./requiredIfGivenPropIsTruthy-VsRXdxiC.js";import"./wrapFocus-C0YgiTtk.js";import"./Wrap-CquFYBfG.js";import"./usePortalTarget-Bg_OfAIC.js";import"./index-DfVNWw9q.js";import"./useFocus-D1ADdBuI.js";import"./usePreviousValue-CRGd6dk3.js";import"./useIsomorphicEffect-Dc9ng1CU.js";import"./ActionSet-Dwek2kBo.js";import"./devtools-CBto78fy.js";import"./Link-BpD8MZeg.js";import"./LayerContext-aHU3kOUM.js";import"./clamp--00YEiB8.js";import"./index-DYQz9bQ1.js";import"./usePrefersReducedMotion-DdXGT2yu.js";import"./usePresence-DoPIX10u.js";import"./bucket-0-BHUvdcmU.js";function k(n){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...z(),...n.components};return a.jsxs(a.Fragment,{children:[a.jsx(t.h1,{id:"step-flows",children:"Step flows"}),`
`,a.jsx(t.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,a.jsxs(t.ul,{children:[`
`,a.jsx(t.li,{children:a.jsx(t.a,{href:"#overview",children:"Overview"})}),`
`,a.jsx(t.li,{children:a.jsx(t.a,{href:"#example-usage",children:"Example usage"})}),`
`]}),`
`,a.jsx(t.h2,{id:"overview",children:"Overview"}),`
`,a.jsxs(t.p,{children:[`The step flow utility can be used to compose stepping experiences across any
variation of components. This utility allows for stepping as commonly seen in
the `,a.jsx(t.code,{children:"CreateTearsheet"})," and ",a.jsx(t.code,{children:"CreateFullPage"}),` components, but through a more
composable and headless delivery. This allows for the flexibility to incorporate
stepped experiences within any component.`]}),`
`,a.jsx(t.p,{children:"Included assets:"}),`
`,a.jsxs(t.ul,{children:[`
`,a.jsx(t.li,{children:a.jsx(t.code,{children:"StepProvider"})}),`
`,a.jsx(t.li,{children:a.jsx(t.code,{children:"useStepContext"})}),`
`,a.jsxs(t.li,{children:[a.jsx(t.code,{children:"StepGroup"}),", handles rendering of step components so ",a.jsx(t.em,{children:"only"}),` the current step
is in the DOM`]}),`
`]}),`
`,a.jsx(t.h2,{id:"example-usage",children:"Example usage"}),`
`,a.jsxs(t.p,{children:["Wrap your stepped component in the ",a.jsx(t.code,{children:"StepProvider"}),` from the utility. Use
`,a.jsx(t.code,{children:"<StepGroup>"}),` and step components with your new step enabled tearsheet
component. Any content outside of the `,a.jsx(t.code,{children:"<StepGroup>"})," will render on every step."]}),`
`,a.jsx(t.pre,{children:a.jsx(t.code,{className:"language-tsx",children:`const Example = () => {
  return <StepProvider>
    <Tearsheet>
      <StepGroup>
        <Step1 />
        <Step2 />
        {someCondition && <ConditionalStep />}
      </StepGroup>
    <Tearsheet>
  </StepProvider>
}
`})}),`
`,a.jsxs(t.p,{children:["Any component inside of the step enabled component (",a.jsx(t.code,{children:"StepProvider"}),`) can use
`,a.jsx(t.code,{children:"useStepContext()"}),` to retrieve the step context state, giving the ability to get
and set the state.`]}),`
`,a.jsx(t.pre,{children:a.jsx(t.code,{className:"language-tsx",children:`const Step1 = () => {
  const { setFormState, formState } = useStepContext();
  const { email } = formState ?? {};
  return (
    <TextInput
      labelText="Email"
      value={email ?? ''}
      onChange={(e) => {
        setFormState?.((prev: object) => ({
          ...prev,
          email: e.target.value,
        }));
      }}
    />
  );
};
`})}),`
`,a.jsxs(t.p,{children:["Step state (returned from ",a.jsx(t.code,{children:"useStepContext"}),"):"]}),`
`,a.jsx(t.pre,{children:a.jsx(t.code,{className:"language-ts",children:`// This interface should be extended by the consumer to match
// their own unique use case given the fields within their
// own stepped experience
interface formStateType {
  [key: string]: any;
}

export interface StepState {
  formState: formStateType;
  setFormState: Dispatch<SetStateAction<formStateType>>;
  totalSteps: number | undefined;
  setTotalSteps: Dispatch<SetStateAction<number | undefined>>;
  currentStep: number;
  handleGoToStep: (a: number) => void;
  handleNext: () => void;
  handlePrevious: () => void;
}
`})}),`
`,a.jsx(L,{of:M})]})}function Y(n={}){const{wrapper:t}={...z(),...n.components};return t?a.jsx(t,{...n,children:a.jsx(k,{...n})}):k(n)}const Z=".c4p--side-panel .custom-intro-tile{block-size:120px;inline-size:200px}.step-container{inline-size:50%;min-inline-size:320px}.my-custom-action-set{display:grid;grid-auto-rows:minmax(auto,auto);grid-template-columns:repeat(6,1fr)}.step-action-button{inline-size:100%}.step-action-button__cancel{grid-column:span 4}.cds--tile-group div{display:flex;flex-wrap:wrap;gap:1rem}.custom-intro-tile{block-size:240px;inline-size:280px}.selected-intro-option{padding-block-end:1.5rem;text-transform:capitalize}.step-form-items{display:flex;container-type:size}.step-form-items #city{margin-inline-end:1.5rem}.c4p--tearsheet__content{position:relative;display:flex;flex-direction:column;padding:1.5rem 1.5rem 0}.c4p--step-actions__button-container.my-custom-action-set{position:fixed;background-color:var(--cds-background, #ffffff);border-block-start:1px solid var(--cds-border-subtle-01, #c6c6c6);inline-size:100%;inset-block-end:0;inset-inline-start:0;margin-block-start:auto;max-block-size:120px}.c4p--step-actions__button-container.my-custom-action-set button{inline-size:100%;max-inline-size:none}.c4p--tearsheet__influencer{padding:1.5rem 2rem}.c4p--tearsheet .c4p--tearsheet__influencer+.c4p--tearsheet__right .c4p--step-actions__button-container.my-custom-action-set{inset-inline-start:257px;inline-size:calc(100% - 257px)}.step-heading{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);padding-block-end:1.5rem}#root{display:flex;align-items:center;justify-content:center;min-block-size:100vh}",O=m.createContext(void 0),w=({children:n})=>{const[t,l]=m.useState(),[r,s]=m.useState(1),[o,d]=m.useState({}),f={formState:o,setFormState:d,totalSteps:t,setTotalSteps:l,currentStep:r,handleGoToStep:p=>s(p),handleNext:()=>s(p=>p+1),handlePrevious:()=>s(p=>p-1)};return e.createElement(O.Provider,{value:f},n)},u=()=>{const n=m.useContext(O);if(n===void 0)throw new Error("Context hook used outside of Step provider");return n};w.__docgenInfo={description:"",methods:[],displayName:"StepProvider",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""}}};const D=({children:n,open:t,onClose:l,influencer:r,title:s,hasCloseIcon:o,closeIconDescription:d="Close",selectorPrimaryFocus:f,...p})=>{const c=u(),i=r?.(c)||null;return e.createElement(X,{...p,influencer:i,open:t,onClose:l,title:s,hasCloseIcon:o,closeIconDescription:d,selectorPrimaryFocus:f},n)};D.__docgenInfo={description:"",methods:[],displayName:"StepTearsheet",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},influencer:{required:!1,tsType:{name:"union",raw:"((a: StepState) => ReactNode) | null",elements:[{name:"unknown"},{name:"null"}]},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"ReactNode"},description:""},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:""},closeIconDescription:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Close'",computed:!1}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:""}}};const j=({children:n})=>{const t=u(),l=n?.filter(Boolean),r=e.Children.count(l);m.useEffect(()=>{const{setTotalSteps:d}=t;d(r)});const{currentStep:s}=t;return e.Children.toArray(l)[s-1]},_=({buttonRenderer:n})=>{const t=u();return n(t)};_.displayName="StepActions";const P=!0,B=n=>{m.useEffect(()=>{document?.querySelector(n)?.focus()},[n])};function ee(){const{setFormState:n,formState:t}=u(),{email:l}=t??{};return B("#email"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 1"),e.createElement(E,{id:"email",onChange:r=>{n?.(s=>({...s,email:r.target.value}))},labelText:"Email",value:l??""}))}function te(){const{setFormState:n,formState:t}=u(),{city:l,state:r}=t||{};return B("#city"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 2"),e.createElement("div",{className:"step-form-items"},e.createElement(E,{id:"city",onChange:s=>{n(o=>({...o,city:s.target.value}))},labelText:"City",value:l??""}),e.createElement(E,{id:"state",onChange:s=>{n(o=>({...o,state:s.target.value}))},labelText:"State",value:r??""})))}function ne(){const{formState:n}=u();return e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 3"),e.createElement("div",null,"Form state",e.createElement(I,{type:"multi"},JSON.stringify(n,null,2))))}const ae=({currentStep:n,handleGoToStep:t},l,r,s)=>r?null:e.createElement("div",{className:"tearsheet-stories__dummy-content-block"},e.createElement("h6",{className:"selected-intro-option"},s),e.createElement(q,{vertical:!0,onChange:o=>t(o+1)},e.createElement(x,{complete:n>1,current:n===1,label:"Step 1",secondaryLabel:"Optional label"}),e.createElement(x,{complete:n>2,current:n===2,label:"Step 2"}),e.createElement(x,{current:n===3,label:"Step 3",complete:n>3}),s==="plus"&&e.createElement(x,{current:n===4,label:"Plus only step"}))),se=()=>e.createElement(e.Fragment,null,"This step only renders for plus flows."),G=()=>{const n=m.useRef(null),[t,l]=m.useState(!1),[r,s]=m.useState(!0),[o,d]=m.useState("standard"),f=(c,i)=>r?!1:!c?.email&&i===1||(!c?.city||!c?.state)&&i===2,p=c=>!!r;return e.createElement(w,null,e.createElement("div",{ref:n},e.createElement(h,{onClick:()=>l(!0)},t?"Close":"Open"),e.createElement(D,{influencer:r?null:c=>ae(c,P,r,o),open:t,onClose:()=>l(!1),title:"Tearsheet title",hasCloseIcon:!1,selectorPrimaryFocus:"#email"},r&&e.createElement(R,{valueSelected:o,defaultSelected:"standard",legend:"Choose create flow",name:"radio tile group",onChange:c=>d(c)},e.createElement(g,{className:"custom-intro-tile",id:"radio-tile-1",value:"standard"},"Standard"),e.createElement(g,{className:"custom-intro-tile",id:"radio-tile-2",value:"premium"},"Premium"),e.createElement(g,{className:"custom-intro-tile",id:"radio-tile-3",value:"plus"},"Plus")),!r&&e.createElement(j,null,e.createElement(ee,null),e.createElement(te,null),e.createElement(ne,null),o==="plus"&&e.createElement(se,null)),e.createElement("div",{className:"c4p--step-actions__button-container my-custom-action-set"},e.createElement(_,{buttonRenderer:({currentStep:c,handleNext:i,totalSteps:S,handleGoToStep:v,setFormState:C,handlePrevious:N,formState:T})=>e.createElement(e.Fragment,null,e.createElement(h,{className:"step-action-button step-action-button__cancel",kind:"ghost",onClick:()=>{l(!1),s(!0)},size:"xl"},"Cancel"),e.createElement(h,{className:"step-action-button",kind:"secondary",onClick:()=>{if(c===1&&P){s(!0);return}N()},disabled:p(),size:"xl"},"Back"),e.createElement(h,{disabled:f(T,c),size:"xl",className:"step-action-button",onClick:()=>{if(r){s(!1);return}c===S?(l(!1),v(1),C({}),s(!0)):i()}},c===S?"Submit":"Next"))})))))};G.__docgenInfo={description:"",methods:[],displayName:"Example"};const H=({subtitle:n,children:t,open:l,onClose:r,title:s,selectorPrimaryFocus:o,size:d="md",...f})=>{const p=u(),c=n?.(p)||null;return e.createElement(Q,{size:d,open:l,onRequestClose:r,title:s,selectorPrimaryFocus:o,subtitle:c,...f},e.createElement(K,null,t))};H.__docgenInfo={description:"",methods:[],displayName:"StepSidePanel",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},subtitle:{required:!1,tsType:{name:"union",raw:"((a: StepState) => ReactNode) | null",elements:[{name:"unknown"},{name:"null"}]},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"string"},description:""},hasCloseIcon:{required:!1,tsType:{name:"boolean"},description:""},closeIconDescription:{required:!1,tsType:{name:"string"},description:""},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"},{name:"literal",value:"'xl'"},{name:"literal",value:"'2xl'"}]},description:"",defaultValue:{value:"'md'",computed:!1}}}};const F=!0,$=n=>{m.useEffect(()=>{document?.querySelector(n)?.focus()},[n])};function re(){const{setFormState:n,formState:t}=u(),{email:l}=t??{};return $("#email"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 1"),e.createElement(E,{id:"email",onChange:r=>{n?.(s=>({...s,email:r.target.value}))},labelText:"Email",value:l??""}))}function le(){const{setFormState:n,formState:t}=u(),{city:l,state:r}=t||{};return $("#city"),e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 2"),e.createElement("div",{className:"step-form-items"},e.createElement(E,{id:"city",onChange:s=>{n(o=>({...o,city:s.target.value}))},labelText:"City",value:l??""}),e.createElement(E,{id:"state",onChange:s=>{n(o=>({...o,state:s.target.value}))},labelText:"State",value:r??""})))}function oe(){const{formState:n}=u();return e.createElement(y,{className:"step-container"},e.createElement(b,{className:"step-heading"},"Step 3"),e.createElement("div",null,"Form state",e.createElement(I,{type:"multi"},JSON.stringify(n,null,2))))}const ie=({currentStep:n,handleGoToStep:t},l,r,s)=>r?null:e.createElement("div",{className:"tearsheet-stories__dummy-content-block"},e.createElement("h6",{className:"selected-intro-option"},s),e.createElement(q,{onChange:o=>t(o+1)},e.createElement(x,{complete:n>1,current:n===1,label:"Step 1"}),e.createElement(x,{complete:n>2,current:n===2,label:"Step 2"}),e.createElement(x,{current:n===3,label:"Step 3",complete:n>3}),s==="plus"&&e.createElement(x,{current:n===4,label:"Plus only step"}))),ce=()=>e.createElement(e.Fragment,null,"This step only renders for plus flows."),A=()=>{const n=m.useRef(null),[t,l]=m.useState(!1),[r,s]=m.useState(!0),[o,d]=m.useState("standard"),f=(i,S)=>r?!1:!i?.email&&S===1||(!i?.city||!i?.state)&&S===2,p=i=>!!r,c=()=>e.createElement(V,{render:()=>e.createElement(J,{"aria-label":"IBM [Product]"},e.createElement(U,{href:"/",prefix:"IBM"},"[Product]"))});return e.createElement(e.Fragment,null,c(),e.createElement(w,null,e.createElement("div",{ref:n},e.createElement(h,{onClick:()=>l(i=>!i)},t?"Close":"Open"),e.createElement(H,{subtitle:r?null:i=>ie(i,F,r,o),open:t,onClose:()=>l(!1),title:"Side panel title",selectorPrimaryFocus:"#email"},r&&e.createElement(R,{valueSelected:o,defaultSelected:"standard create flow",legend:"Choose create flow",name:"radio tile group",onChange:i=>d(i)},e.createElement(g,{className:"custom-intro-tile",id:"radio-tile-1",value:"standard create flow"},"Standard"),e.createElement(g,{className:"custom-intro-tile",id:"radio-tile-2",value:"premium create flow"},"Premium"),e.createElement(g,{className:"custom-intro-tile",id:"radio-tile-3",value:"plus create flow"},"Plus")),!r&&e.createElement(j,null,e.createElement(re,null),e.createElement(le,null),e.createElement(oe,null),o==="plus"&&e.createElement(ce,null)),e.createElement("div",{className:"c4p--step-actions__button-container my-custom-action-set"},e.createElement(_,{buttonRenderer:({currentStep:i,handleNext:S,totalSteps:v,handleGoToStep:C,setFormState:N,handlePrevious:T,formState:W})=>e.createElement(e.Fragment,null,e.createElement(h,{className:"step-action-button step-action-button__cancel",kind:"ghost",onClick:()=>{l(!1),s(!0)},size:"xl"},"Cancel"),e.createElement(h,{className:"step-action-button",kind:"secondary",onClick:()=>{if(i===1&&F){s(!0);return}T()},disabled:p(),size:"xl"},"Back"),e.createElement(h,{disabled:f(W,i),size:"xl",className:"step-action-button",onClick:()=>{if(r){s(!1);return}i===v?(l(!1),C(1),N({}),s(!0)):S()}},i===v?"Submit":"Next"))}))))))};A.__docgenInfo={description:"",methods:[],displayName:"Example"};const st={title:"Patterns/Step flows",component:j,tags:["autodocs"],parameters:{styles:Z,docs:{page:Y}}},M=G.bind({});M.args={};const me=A.bind({});me.args={};const rt=["tearsheetWithSteps","sidePanelWithSteps"];export{rt as __namedExportsOrder,st as default,me as sidePanelWithSteps,M as tearsheetWithSteps};
