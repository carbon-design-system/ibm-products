import{P as i,b as le,i as it,d as V,_ as nt,k as De,Z as rt,Y as st,g as Fe}from"./index-4poXP75K.js";import{e as p,r as y}from"./index-DtHxqM--.js";import{u as at}from"./useNormalizedInputProps-OpqrZ34r.js";import{F as lt}from"./FormContext-C4Nuixum.js";import{c as ot}from"./clamp--00YEiB8.js";import{u as ut}from"./useControllableState-P5wT7SAH.js";import"./documentLang-E105Y72C.js";import{A as Pe}from"./index-CVEmjZFv.js";import{i as mt}from"./utils--12iVJsW.js";import{T as Me}from"./Text-Cjos7Soh.js";import{a3 as ct}from"./bucket-16-B0VO6oot.js";import{c as dt}from"./bucket-0-C0XwVn_F.js";let ne=new Map,se=!1;try{se=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let G=!1;try{G=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ae={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class ae{format(t){let e="";if(!se&&this.options.signDisplay!=null?e=ft(this.numberFormatter,this.options.signDisplay,t):e=this.numberFormatter.format(t),this.options.style==="unit"&&!G){var n;let{unit:a,unitDisplay:l="short",locale:o}=this.resolvedOptions();if(!a)return e;let m=(n=Ae[a])===null||n===void 0?void 0:n[l];e+=m[o]||m.default}return e}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,e){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,e);if(e<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(e)}`}formatRangeToParts(t,e){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,e);if(e<t)throw new RangeError("End date must be >= start date");let n=this.numberFormatter.formatToParts(t),a=this.numberFormatter.formatToParts(e);return[...n.map(l=>({...l,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...a.map(l=>({...l,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!se&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!G&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,e={}){this.numberFormatter=pt(t,e),this.options=e}}function pt(r,t={}){let{numberingSystem:e}=t;if(e&&r.includes("-nu-")&&(r.includes("-u-")||(r+="-u-"),r+=`-nu-${e}`),t.style==="unit"&&!G){var n;let{unit:o,unitDisplay:m="short"}=t;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((n=Ae[o])===null||n===void 0)&&n[m]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${m}`);t={...t,style:"decimal"}}let a=r+(t?Object.entries(t).sort((o,m)=>o[0]<m[0]?-1:1).join():"");if(ne.has(a))return ne.get(a);let l=new Intl.NumberFormat(r,t);return ne.set(a,l),l}function ft(r,t,e){if(t==="auto")return r.format(e);if(t==="never")return r.format(Math.abs(e));{let n=!1;if(t==="always"?n=e>0||Object.is(e,0):t==="exceptZero"&&(Object.is(e,-0)||Object.is(e,0)?e=Math.abs(e):n=e>0),n){let a=r.format(-e),l=r.format(e),o=a.replace(l,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),a.replace(l,"!!!").replace(o,"+").replace("!!!",l)}else return r.format(e)}}const bt=new RegExp("^.*\\(.*\\).*$"),gt=["latn","arab","hanidec","deva","beng"];class Le{parse(t){return re(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,n){return re(this.locale,this.options,t).isValidPartialNumber(t,e,n)}getNumberingSystem(t){return re(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const Ee=new Map;function re(r,t,e){let n=Ie(r,t);if(!r.includes("-nu-")&&!n.isValidPartialNumber(e)){for(let a of gt)if(a!==n.options.numberingSystem){let l=Ie(r+(r.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(l.isValidPartialNumber(e))return l}}return n}function Ie(r,t){let e=r+(t?Object.entries(t).sort((a,l)=>a[0]<l[0]?-1:1).join():""),n=Ee.get(e);return n||(n=new ht(r,t),Ee.set(e,n)),n}class ht{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=W(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let o=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let m=e.indexOf(".");m===-1&&(m=e.length),e=e.replace(".",""),m-2===0?e=`0.${e}`:m-2===-1?e=`0.0${e}`:m-2===-2?e="0.00":e=`${e.slice(0,m-2)}.${e.slice(m-2)}`,o>-1&&(e=`-${e}`)}let n=e?+e:NaN;if(isNaN(n))return NaN;if(this.options.style==="percent"){var a,l;let o={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((l=this.options.maximumFractionDigits)!==null&&l!==void 0?l:0)+2,20)};return new Le(this.locale,o).parse(new ae(this.locale,o).format(n))}return this.options.currencySign==="accounting"&&bt.test(t)&&(n=-1*n),n}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=W(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&this.symbols.group&&(t=W(t," ",this.symbols.group),t=W(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,n=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&n>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=W(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=$t(t,this.formatter,this.options,e);var n,a;this.options.style==="percent"&&(((n=this.options.minimumFractionDigits)!==null&&n!==void 0?n:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const _e=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),yt=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $t(r,t,e,n){var a,l,o,m;let g=new Intl.NumberFormat(r,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),v=g.formatToParts(-10000.111),j=g.formatToParts(10000.111),z=yt.map(c=>g.formatToParts(c));var E;let I=(E=(a=v.find(c=>c.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&E!==void 0?E:"-",D=(l=j.find(c=>c.type==="plusSign"))===null||l===void 0?void 0:l.value;!D&&((n==null?void 0:n.signDisplay)==="exceptZero"||(n==null?void 0:n.signDisplay)==="always")&&(D="+");let Y=(o=new Intl.NumberFormat(r,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(c=>c.type==="decimal"))===null||o===void 0?void 0:o.value,q=(m=v.find(c=>c.type==="group"))===null||m===void 0?void 0:m.value,H=v.filter(c=>!_e.has(c.type)).map(c=>Ce(c.value)),J=z.flatMap(c=>c.filter(b=>!_e.has(b.type)).map(b=>Ce(b.value))),x=[...new Set([...H,...J])].sort((c,b)=>b.length-c.length),R=x.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${x.join("|")}|[\\p{White_Space}]`,"gu"),_=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),N=new Map(_.map((c,b)=>[c,b])),M=new RegExp(`[${_.join("")}]`,"g");return{minusSign:I,plusSign:D,decimal:Y,group:q,literals:R,numeral:M,index:c=>String(N.get(c))}}function W(r,t,e){return r.replaceAll?r.replaceAll(t,e):r.split(t).join(e)}function Ce(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const vt=i.shape({localeMatcher:i.oneOf(["best fit","lookup"]),style:i.oneOf(["decimal","currency","percent","unit"]),currency:i.string,currencyDisplay:i.oneOf(["symbol","narrowSymbol","code","name"]),currencySign:i.oneOf(["standard","accounting"]),unit:i.string,unitDisplay:i.oneOf(["short","narrow","long"]),notation:i.oneOf(["standard","scientific","engineering","compact"]),compactDisplay:i.oneOf(["short","long"]),signDisplay:i.oneOf(["auto","never","always","exceptZero"]),minimumIntegerDigits:i.number,minimumFractionDigits:i.number,maximumFractionDigits:i.number,minimumSignificantDigits:i.number,maximumSignificantDigits:i.number,useGrouping:i.oneOfType([i.bool,i.oneOf(["always","auto","min2"])]),numberingSystem:i.string,roundingIncrement:i.number,roundingMode:i.oneOf(["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"]),trailingZeroDisplay:i.oneOf(["auto","stripIfInteger"])});var Oe,Te;const Ve={"increment.number":"increment.number","decrement.number":"decrement.number"},wt={[Ve["increment.number"]]:"Increment number",[Ve["decrement.number"]]:"Decrement number"},xt=p.forwardRef(function(t,e){const{allowEmpty:n=!1,className:a,decorator:l,disabled:o=!1,disableWheel:m=!1,defaultValue:g=0,formatOptions:v,helperText:j="",hideLabel:z=!1,hideSteppers:E,iconDescription:I,id:D,inputMode:oe,invalid:Y=!1,invalidText:q,label:H,light:J,locale:x="en-US",max:R,min:_,onChange:N,onClick:M,onKeyUp:ue,pattern:c="[0-9]*",readOnly:b,size:me="md",slug:A,step:C=1,translateWithId:ce=s=>wt[s],type:$="number",warn:ze=!1,warnText:ke="",value:w,...h}=t,u=le(),{isFluid:O}=y.useContext(lt),[Ke,de]=y.useState(!1),[k,K]=y.useState(()=>w!==void 0?w:g!==void 0?g:n?"":0),[Ze,Be]=y.useState(w),F=y.useMemo(()=>new Le(x,v),[x,v]),[Z,pe,Ue]=ut({name:"NumberInput",defaultValue:typeof g=="string"?F.parse(g):g,value:typeof w=="string"?F.parse(w):w}),[B,X]=p.useState(()=>isNaN(Z)?"":new ae(x,v).format(Z)),fe=y.useMemo(()=>F.getNumberingSystem(B),[F,B]),be=y.useMemo(()=>new ae(x,{...v,numberingSystem:fe}),[x,v,fe]),ge=y.useCallback(s=>isNaN(s)||s===null?"":be.format(s),[be]),P=y.useRef(null),Ge=it([e,P]),Ye=V({[`${u}--number`]:!0,[`${u}--number--helpertext`]:!0,[`${u}--number--readonly`]:b,[`${u}--number--light`]:J,[`${u}--number--nolabel`]:z,[`${u}--number--nosteppers`]:E,[`${u}--number--${me}`]:me}),qe=Nt({allowEmpty:n,invalid:Y,value:$==="number"?k:Z,max:R,min:_}),d=at({id:D,readOnly:b,disabled:o,invalid:!qe,invalidText:q,warn:ze,warnText:ke}),[he,ye]=[ce("increment.number"),ce("decrement.number")],He=V(`${u}--number__input-wrapper`,{[`${u}--number__input-wrapper--warning`]:d.warn,[`${u}--number__input-wrapper--slug`]:A,[`${u}--number__input-wrapper--decorator`]:l}),Je=V({[`${u}--number__invalid`]:d.invalid||d.warn,[`${u}--number__invalid--warning`]:d.warn});w!==Ze&&(K(w),Be(w));let U;d.invalid&&(U=d.invalidId),d.warn&&(U=d.warnId),d.validation||(U=j?d.helperId:void 0);function Xe(s){if(!o){if($==="number"){const f={value:n&&s.target.value===""?"":Number(s.target.value),direction:k<s.target.value?"up":"down"};K(f.value),N&&N(s,f);return}if($==="text"){const f=n&&s.target.value===""?"":s.target.value;pe(F.parse(f)),X(f)}}}const $e=s=>{"type"in s.target&&s.target.type==="button"?de(!1):de(s.type==="focus")},Qe=V(`${u}--form-item`,{[a]:!!a,[`${u}--number-input--fluid--invalid`]:O&&d.invalid,[`${u}--number-input--fluid--focus`]:O&&Ke,[`${u}--number-input--fluid--disabled`]:O&&o}),ve=d.icon,we=s=>{const f=s.toString().split(".");return f[1]?f[1].length:0},Q=(s,f)=>{if(P.current){const S=$==="number"?Number(P.current.value):F.parse(P.current.value),te=f==="up"?S+C:S-C,et=Math.max(we(S),we(C)),tt=parseFloat(te.toFixed(et)),ie=ot(tt,_??-1/0,R??1/0);let L;if($==="number"&&(L={value:n&&P.current.value===""&&C===0?"":ie,direction:f},K(L.value)),$==="text"){const Se=ge(ie);L={value:n&&P.current.value===""&&C===0?"":Se,direction:f},pe(ie),X(Se)}return N&&N(s,L),L}},xe=(s,f)=>{if(P.current){const{state:S}=Q(s,f);M&&M(s,S)}},Ne=A??l,T=mt(Ne,Pe)?y.cloneElement(Ne,{size:"mini"}):null;let ee;return(T==null?void 0:T.type)===Pe&&(ee=T.props.revertActive),y.useEffect(()=>{!ee&&A&&g&&K(g)},[g,ee,A]),p.createElement("div",{className:Qe,onFocus:O?$e:void 0,onBlur:O?$e:void 0},p.createElement("div",{className:Ye,"data-invalid":d.invalid?!0:void 0},p.createElement(We,{disabled:d.disabled,hideLabel:z,id:D,label:H}),p.createElement("div",{className:He},p.createElement("input",nt({},h,{"data-invalid":d.invalid?!0:void 0,"aria-invalid":d.invalid,"aria-describedby":U,"aria-readonly":b,disabled:d.disabled,ref:Ge,id:D,max:R,min:_,onClick:M,onChange:Xe,onKeyUp:ue,onKeyDown:s=>{$==="text"&&(De(s,rt)&&Q(s,"up"),De(s,st)&&Q(s,"down")),h!=null&&h.onKeyDown&&(h==null||h.onKeyDown(s))},onFocus:s=>{m&&s.target.addEventListener("wheel",Re),h.onFocus&&h.onFocus(s)},onBlur:s=>{if(m&&s.target.removeEventListener("wheel",Re),$==="text"){const f=Ue?F.parse(B):Z,S=isNaN(f)?"":ge(f);if(X(S),N){const te={value:S,direction:k<s.target.value?"up":"down"};N(s,te)}}h.onBlur&&h.onBlur(s)},pattern:c,inputMode:oe,readOnly:b,step:C,type:$,value:$==="number"?k:B})),A?T:l?p.createElement("div",{className:`${u}--number__input-inner-wrapper--decorator`},T):"",ve?p.createElement(ve,{className:Je}):null,!E&&p.createElement("div",{className:`${u}--number__controls`},p.createElement("button",{"aria-label":ye||I,className:`${u}--number__control-btn down-icon`,disabled:o||b,onClick:s=>xe(s,"down"),tabIndex:-1,title:ye||I,type:"button"},Oe||(Oe=p.createElement(ct,{className:"down-icon"}))),p.createElement("div",{className:`${u}--number__rule-divider`}),p.createElement("button",{"aria-label":he||I,className:`${u}--number__control-btn up-icon`,disabled:o||b,onClick:s=>xe(s,"up"),tabIndex:-1,title:he||I,type:"button"},Te||(Te=p.createElement(dt,{className:"up-icon"}))),p.createElement("div",{className:`${u}--number__rule-divider`}))),O&&p.createElement("hr",{className:`${u}--number-input__divider`}),d.validation?d.validation:p.createElement(je,{id:d.helperId,disabled:o,description:j})))});xt.propTypes={allowEmpty:i.bool,className:i.string,decorator:i.node,defaultValue:i.oneOfType([i.number,i.string]),disableWheel:i.bool,disabled:i.bool,formatOptions:vt,helperText:i.node,hideLabel:i.bool,hideSteppers:i.bool,iconDescription:i.string,id:i.string.isRequired,inputMode:i.oneOf(["none","text","tel","url","email","numeric","decimal","search"]),invalid:i.bool,invalidText:i.node,label:i.node,light:Fe(i.bool),locale:i.string,max:i.number,min:i.number,onChange:i.func,onClick:i.func,onKeyUp:i.func,pattern:i.string,readOnly:i.bool,size:i.oneOf(["sm","md","lg"]),slug:Fe(i.node),step:i.number,translateWithId:i.func,type:i.oneOf(["number","text"]),value:i.oneOfType([i.number,i.string]),warn:i.bool,warnText:i.node};const We=({disabled:r,id:t,hideLabel:e,label:n})=>{const a=le(),l=V({[`${a}--label`]:!0,[`${a}--label--disabled`]:r,[`${a}--visually-hidden`]:e});return n?p.createElement(Me,{as:"label",htmlFor:t,className:l},n):null};We.propTypes={disabled:i.bool,hideLabel:i.bool,id:i.string,label:i.node};function je({disabled:r,description:t,id:e}){const n=le(),a=V(`${n}--form__helper-text`,{[`${n}--form__helper-text--disabled`]:r});return t?p.createElement(Me,{as:"div",id:e,className:a},t):null}je.propTypes={description:i.node,disabled:i.bool,id:i.string};function Nt({allowEmpty:r,invalid:t,value:e,max:n,min:a}){return t?!1:e===""?r:!(e>n||e<a)}function Re(r){r.preventDefault()}export{xt as N,vt as a};
