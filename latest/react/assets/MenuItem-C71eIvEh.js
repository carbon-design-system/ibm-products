import{a as ee,O as te,e as ne,Q as ae,R as se,U as re,b as v,i as oe,d as M,V as le,_ as S,C as ce,k as $,W as ie,E as ue,S as me,P as e}from"./index-4poXP75K.js";import{r as a,e as n}from"./index-DtHxqM--.js";import{u as V}from"./useControllableState-P5wT7SAH.js";import{M as T,u as fe,a as de}from"./useAttachedMenu-DN6VGMKt.js";import{T as pe}from"./Text-Cjos7Soh.js";import{C as ge,a as he}from"./bucket-2-D37RcJvy.js";var G,U,L;const D=a.forwardRef(function({children:l,className:u,disabled:s,kind:m="default",label:r,onClick:d,renderIcon:c,shortcut:I,...o},y){const[i,b]=a.useState(!1),[x,k]=a.useState(!1),{refs:p,floatingStyles:f,context:R}=ee({open:i,onOpenChange:b,placement:x?"left-start":"right-start",whileElementsMounted:ne,middleware:[te({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:F,getFloatingProps:j}=ae([se(R,{delay:100,enabled:!0,handleClose:re({requireIntent:!1})})]),g=v(),C=a.useContext(T),N=a.useRef(null),B=oe([y,N,p.setReference]),h=!!l,_=s&&!h,H=m==="danger"&&!h;function Q(){C.dispatch({type:"registerItem",payload:{ref:N,disabled:!!s}})}function q(){N.current&&b(!0)}function W(){b(!1)}function K(t){_||(h?q():(C.state.requestCloseRoot(t),d&&d(t)))}const w=a.useRef(!1),O=t=>$(t,ue)||$(t,me);function z(t){h&&$(t,ie)&&(q(),requestAnimationFrame(()=>{var A;(A=p.floating.current)==null||A.focus()}),t.stopPropagation(),t.preventDefault()),w.current=O(t),o.onKeyDown&&o.onKeyDown(t)}function J(t){w.current&&O(t)&&K(t),w.current=!1}const X=M(u,`${g}--menu-item`,{[`${g}--menu-item--disabled`]:_,[`${g}--menu-item--danger`]:H}),[Y,Z]=a.useState(!1);a.useEffect(()=>{Q();const t=C.state.items;!s&&N.current&&t.length===0&&Z(!0)},[]);const{direction:P}=fe();return a.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||P==="rtl"?k(!0):k(!1)},[P]),a.useEffect(()=>{c&&!C.state.hasIcons&&C.dispatch({type:"enableIcons"})},[c,C.state.hasIcons,C]),a.useEffect(()=>{Object.keys(f).forEach(t=>{p.floating.current&&t!=="position"&&(p.floating.current.style[t]=f[t])})},[f,p.floating]),n.createElement(le,{context:R,order:["reference","floating"],modal:!1},n.createElement("li",S({role:"menuitem"},o,{ref:B,className:X,tabIndex:Y?0:-1,"aria-disabled":_??void 0,"aria-haspopup":h??void 0,"aria-expanded":h?i:void 0,onClick:K,onKeyDown:z,onKeyUp:J},F()),n.createElement("div",{className:`${g}--menu-item__selection-icon`},o["aria-checked"]&&(G||(G=n.createElement(ce,null)))),n.createElement("div",{className:`${g}--menu-item__icon`},c&&n.createElement(c,null)),n.createElement(pe,{as:"div",className:`${g}--menu-item__label`,title:r},r),I&&!h&&n.createElement("div",{className:`${g}--menu-item__shortcut`},I),h&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${g}--menu-item__shortcut`},x?U||(U=n.createElement(ge,null)):L||(L=n.createElement(he,null))),n.createElement(de,S({label:r,open:i,onClose:()=>{var t;W(),(t=N.current)==null||t.focus()},ref:p.setFloating},j()),l))))});D.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const be=a.forwardRef(function({className:l,defaultSelected:u,label:s,onChange:m,selected:r,...d},c){const I=v(),o=a.useContext(T),[y,i]=V({value:r,onChange:m,defaultValue:u??!1});function b(k){i(!y)}a.useEffect(()=>{o.state.hasSelectableItems||o.dispatch({type:"enableSelectableItems"})},[o.state.hasSelectableItems,o]);const x=M(l,`${I}--menu-item-selectable--selected`);return n.createElement(D,S({},d,{ref:c,label:s,className:x,role:"menuitemcheckbox","aria-checked":y,onClick:b}))});be.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const Ce=a.forwardRef(function({children:l,className:u,label:s,...m},r){const d=v(),c=M(u,`${d}--menu-item-group`);return n.createElement("li",{className:c,role:"none",ref:r},n.createElement("ul",S({},m,{role:"group","aria-label":s}),l))});Ce.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const Ee=E=>E.toString(),Ie=a.forwardRef(function({className:l,defaultSelectedItem:u,items:s,itemToString:m=Ee,label:r,onChange:d,selectedItem:c,...I},o){const y=v(),i=a.useContext(T),[b,x]=V({value:c,onChange:d,defaultValue:u??{}});function k(f,R){x(f)}a.useEffect(()=>{i.state.hasSelectableItems||i.dispatch({type:"enableSelectableItems"})},[i.state.hasSelectableItems,i]);const p=M(l,`${y}--menu-item-radio-group`);return n.createElement("li",{className:p,role:"none",ref:o},n.createElement("ul",S({},I,{role:"group","aria-label":r}),s.map((f,R)=>n.createElement(D,{key:R,label:m(f),role:"menuitemradio","aria-checked":f===b,onClick:F=>{k(f)}}))))});Ie.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const ye=a.forwardRef(function({className:l,...u},s){const m=v(),r=M(l,`${m}--menu-item-divider`);return n.createElement("li",S({},u,{className:r,role:"separator",ref:s}))});ye.propTypes={className:e.string};export{D as M,ye as a,Ce as b,Ie as c,be as d};
