import{a as W,g as X,o as Y,n as Z,p as ee,q as te,b as M,j as ne,c as v,r as ae,_ as k,P as e,i as $,A as se,t as oe,S as re}from"./index-CXyjPnaX.js";import{r as n,e as t}from"./index-CPiZ6Cnx.js";import{u as j}from"./useControllableState-uQXf5Mu5.js";import{M as D,u as le,a as ce}from"./useAttachedMenu-MiCadXk0.js";import{T as ie}from"./Text-vNWzJqus.js";import{c as ue,d as me,C as L}from"./bucket-2-L5Cs0C3i.js";var G,K;const q=n.forwardRef(function(u,m){let{children:r,className:f,disabled:l,kind:d="default",label:p,onClick:g,renderIcon:h,shortcut:c,...s}=u;const[o,b]=n.useState(!1),[N,R]=n.useState(!1),{refs:C,floatingStyles:i,context:S}=W({open:o,onOpenChange:b,placement:N?"left-start":"right-start",whileElementsMounted:X,middleware:[Y({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:P,getFloatingProps:B}=Z([ee(S,{delay:100,enabled:!0,handleClose:te({requireIntent:!1})})]),E=M(),x=n.useContext(D),w=n.useRef(null),V=ne([m,w,C.setReference]),I=!!r,T=l&&!I,H=d==="danger"&&!I;function U(){x.dispatch({type:"registerItem",payload:{ref:w,disabled:!!l}})}function F(){w.current&&b(!0)}function z(){b(!1)}function O(a){T||(I?F():(x.state.requestCloseRoot(a),g&&g(a)))}function J(a){I&&$(a,se)&&(F(),a.stopPropagation()),($(a,oe)||$(a,re))&&O(a),s.onKeyDown&&s.onKeyDown(a)}const Q=v(f,`${E}--menu-item`,{[`${E}--menu-item--disabled`]:T,[`${E}--menu-item--danger`]:H});n.useEffect(()=>{U()},[]);const{direction:A}=le();n.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||A==="rtl"?R(!0):R(!1)},[A]);const _=x.state.mode==="basic"||s.role==="menuitemcheckbox"||s.role==="menuitemradio";return n.useEffect(()=>{_&&h&&!x.state.hasIcons&&x.dispatch({type:"enableIcons"})},[_,h,x.state.hasIcons,x]),n.useEffect(()=>{Object.keys(i).forEach(a=>{C.floating.current&&a!=="position"&&(C.floating.current.style[a]=i[a])})},[i,C.floating]),t.createElement(ae,{context:S,order:["reference","floating"],modal:!1},t.createElement("li",k({role:"menuitem"},s,{ref:V,className:Q,tabIndex:-1,"aria-disabled":T??void 0,"aria-haspopup":I??void 0,"aria-expanded":I?o:void 0,onClick:O,onKeyDown:J},P()),t.createElement("div",{className:`${E}--menu-item__icon`},_&&h&&t.createElement(h,null)),t.createElement(ie,{as:"div",className:`${E}--menu-item__label`,title:p},p),c&&!I&&t.createElement("div",{className:`${E}--menu-item__shortcut`},c),I&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${E}--menu-item__shortcut`},N?G||(G=t.createElement(ue,null)):K||(K=t.createElement(me,null))),t.createElement(ce,k({label:p,open:o,onClose:()=>{var a;z(),(a=w.current)==null||a.focus()},ref:C.setFloating},B()),r))))});q.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const fe=n.forwardRef(function(u,m){let{className:r,defaultSelected:f,label:l,onChange:d,selected:p,...g}=u;const h=M(),c=n.useContext(D);c.state.mode;const[s,o]=j({value:p,onChange:d,defaultValue:f??!1});function b(R){o(!s)}n.useEffect(()=>{c.state.hasIcons||c.dispatch({type:"enableIcons"})},[c.state.hasIcons,c]);const N=v(r,`${h}--menu-item-selectable--selected`);return t.createElement(q,k({},g,{ref:m,label:l,className:N,role:"menuitemcheckbox","aria-checked":s,renderIcon:s?L:void 0,onClick:b}))});fe.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const de=n.forwardRef(function(u,m){let{children:r,className:f,label:l,...d}=u;const p=M(),g=v(f,`${p}--menu-item-group`);return t.createElement("li",{className:g,role:"none",ref:m},t.createElement("ul",k({},d,{role:"group","aria-label":l}),r))});de.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const pe=y=>y.toString(),ge=n.forwardRef(function(u,m){let{className:r,defaultSelectedItem:f,items:l,itemToString:d=pe,label:p,onChange:g,selectedItem:h,...c}=u;const s=M(),o=n.useContext(D);o.state.mode;const[b,N]=j({value:h,onChange:g,defaultValue:f});function R(i,S){N(i)}n.useEffect(()=>{o.state.hasIcons||o.dispatch({type:"enableIcons"})},[o.state.hasIcons,o]);const C=v(r,`${s}--menu-item-radio-group`);return t.createElement("li",{className:C,role:"none",ref:m},t.createElement("ul",k({},c,{role:"group","aria-label":p}),l.map((i,S)=>t.createElement(q,{key:S,label:d(i),role:"menuitemradio","aria-checked":i===b,renderIcon:i===b?L:void 0,onClick:P=>{R(i)}}))))});ge.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const he=n.forwardRef(function(u,m){let{className:r,...f}=u;const l=M(),d=v(r,`${l}--menu-item-divider`);return t.createElement("li",k({},f,{className:d,role:"separator",ref:m}))});he.propTypes={className:e.string};export{q as M};
