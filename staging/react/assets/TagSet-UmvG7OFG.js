import{r as a,e as t,c as S,p as D,P as e,L as be,N as Te}from"./iframe-BfCV3bOI.js";import{T as W}from"./Tag-NIrrbvG7.js";import{D as Z}from"./DismissibleTag-DaGnLvfq.js";import{C as we,M as Se,a as Ce}from"./ComposedModal-DDr7rI1V.js";import{S as _e}from"./Search-DoApKEoI.js";import{p as Ne}from"./props-helper-B1pqY6OD.js";import{u as $e}from"./usePortalTarget-DJLB0SuP.js";import{L as qe}from"./Link-DwEnb7bw.js";import{O as ee}from"./OperationalTag-C6Zst86w.js";import{u as Ee}from"./useClickOutside-KpiYEaiC.js";import{g as ke}from"./devtools-mGs0wnY2.js";import{u as te}from"./useResizeObserver-7trOekg4.js";const Ae="TagSetModal",z=`${D.prefix}--tag-set-modal`,ae={modalAriaLabel:"List of all tags",searchLabel:""},I=({allTags:m,className:q,title:V,modalAriaLabel:R=ae.modalAriaLabel,onClose:h,open:C,portalTarget:n,searchLabel:y=ae.searchLabel,searchPlaceholder:L,...p})=>{const[v,x]=a.useState([]),[_,N]=a.useState(""),b=$e(n);a.useEffect(()=>{let s=[];if(C)if(_===""&&m)s=m?.slice(0);else{const f=_.toLocaleLowerCase();m?.forEach(d=>{const u=d["data-search"]?.toLocaleLowerCase()?.indexOf(f),g=d.label?.toLocaleLowerCase()?.indexOf(f);(u>-1||g>-1)&&s.push(d)})}x(s)},[m,C,_]);const o=s=>{N(s.target.value||"")};return b(t.createElement(we,{...p,containerClassName:`${z}__container`,className:S(q,`${z}`),size:"sm",open:C,onClose:h},t.createElement(Se,{className:`${z}__header`,closeModal:h,title:V},t.createElement(_e,{"data-modal-primary-focus":!0,className:`${z}__search`,labelText:y,placeholder:L,onChange:o,size:"lg"})),t.createElement(Ce,{className:`${z}__body`,hasForm:!0,hasScrollingContent:!0,"aria-label":R},v.map(({label:s,...f},d)=>t.createElement(W,{...f,key:`all-tags-${d}`},s)),t.createElement("div",{className:`${z}__fade`}))))};I.propTypes={allTags:e.arrayOf(e.shape({...Ne(W.propTypes,"filter"),label:e.string.isRequired})),className:e.string,onClose:e.func,open:e.bool,portalTarget:e.node,searchLabel:e.string,searchPlaceholder:e.string,title:e.string};I.displayName=Ae;const Oe="TagSetOverflow",i=`${D.prefix}--tag-set-overflow`,Me={allTagsModalSearchThreshold:10},B=t.forwardRef(({allTagsModalSearchThreshold:m=Me.allTagsModalSearchThreshold,onOverflowClick:q,className:V,onShowAllClick:R,overflowAlign:h="bottom",overflowAutoAlign:C,overflowTags:n,overflowType:y,showAllTagsLabel:L,popoverOpen:p=!1,setPopoverOpen:v,size:x,..._},N)=>{const b=a.useRef(null),o=a.useRef(null);Ee(N||b,()=>{p&&v(!1)});const s=u=>{u.stopPropagation(),u.preventDefault(),v(!1),R()},f=u=>{const{key:g}=u;g==="Escape"&&v(!1)},d=()=>{q?q(n):v(!p)};return q?t.createElement("span",{..._,"aria-hidden":n.length===0,className:S(`${i}`,{[`${i}--hidden`]:n.length===0}),ref:N||b},t.createElement(ee,{onClick:()=>d(),className:`${i}__popover-trigger`,size:x,text:`+${n.length}`})):t.createElement("span",{..._,"aria-hidden":n.length===0,className:S(`${i}`,{[`${i}--hidden`]:n.length===0}),ref:N||b},t.createElement(be,{align:h,className:S(V,`${i}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:f,open:p,autoAlign:C},t.createElement(ee,{onClick:()=>v(!p),className:S(`${i}__popover-trigger`),size:x,text:`+${n.length}`,"aria-expanded":p,"aria-controls":`${D.prefix}-overflow-content`}),t.createElement(Te,{id:`${D.prefix}-overflow-content`,"aria-hidden":!p},t.createElement("div",{ref:o,className:`${i}__content`},t.createElement("ul",{className:`${i}__tag-list`},n.filter((u,g)=>n.length>m?g<m:g<=m).map((u,g)=>{const T={};if(y==="tag"&&(T.type="high-contrast"),y==="default"&&(T.filter=!1),t.isValidElement(u))return t.createElement("li",{className:S(`${i}__tag-item`,{[`${i}__tag-item--default`]:y==="default",[`${i}__tag-item--tag`]:y==="tag"}),key:g},t.cloneElement(u,T))})),n.length>m&&t.createElement(qe,{className:`${i}__show-all-tags-link`,href:"",onClick:s,role:"button"},L)))))});B.displayName=Oe;B.propTypes={allTagsModalSearchThreshold:e.number,className:e.string,onOverflowClick:e.func,onShowAllClick:e.func.isRequired,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowTags:e.arrayOf(e.object).isRequired,overflowType:e.oneOf(["default","tag"]),popoverOpen:e.bool,setPopoverOpen:e.func.isRequired,showAllTagsLabel:e.string,size:e.string};B.__docgenInfo={description:"",methods:[],displayName:"TagSetOverflow",props:{allTagsModalSearchThreshold:{required:!1,tsType:{name:"number"},description:"count of overflowTags over which a modal is offered",defaultValue:{value:"10",computed:!1},type:{name:"number"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},onOverflowClick:{required:!1,tsType:{name:"union",raw:"((overFlowTags: ReactNode[]) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"An optional click handler that overrides the default functionality of displaying all tags in a modal",type:{name:"func"}},onShowAllClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"function to execute on clicking show all",type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowTags:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:`@type {Array<any>}
tags shown in overflow`,type:{name:"arrayOf",value:{name:"object"}}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},popoverOpen:{required:!1,tsType:{name:"boolean"},description:"Open state of the popover",defaultValue:{value:"false",computed:!1},type:{name:"bool"}},setPopoverOpen:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:"Setter function for the popoverOpen state value",type:{name:"func"}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link",type:{name:"string"}},size:{required:!1,tsType:{name:"string"},description:"Size of the overflow tag",type:{name:"string"}}}};const oe="TagSet",w=`${D.prefix}--tag-set`,Re=10,le={measurementOffset:0,onOverflowTagChange:()=>{}},G=t.forwardRef(({align:m="start",allTagsModalTarget:q,className:V,maxVisible:R,multiline:h,overflowAutoAlign:C,overflowAlign:n="bottom",overflowClassName:y,overflowType:L="default",allTagsModalAriaLabel:p,allTagsModalTitle:v="All tags",allTagsModalSearchLabel:x="Search all tags",allTagsModalSearchPlaceholderText:_="Search all tags",showAllTagsLabel:N="View all tags",onOverflowClick:b,tags:o,containingElementRef:s,measurementOffset:f=le.measurementOffset,onOverflowTagChange:d=le.onOverflowTagChange,...u},g)=>{const[T,U]=a.useState(3),[se,re]=a.useState([]),[ie,ue]=a.useState([]),[me,K]=a.useState(!1),ce=a.useRef(null),j=g||ce,Y=a.useRef(null),pe=a.useRef(null),[E,fe]=a.useState([]),F=a.useRef(null),[P,de]=a.useState(0),[J,Q]=a.useState(!1),ge=()=>{K(!0)};a.useEffect(()=>{const l=R||o?.length||0;de(l)},[R,o]),a.useEffect(()=>{const l=[];ue(o&&o.length>0?o.map(({label:r,id:k,filter:c,onClose:$,...A},O)=>t.createElement("div",{key:O,className:`${w}__sizing-tag`,ref:M=>{M!=null&&(l[O]=M)}},typeof $=="function"||c?t.createElement(Z,{...A,"data-original-id":k,text:r}):t.createElement(W,{...A,"data-original-id":k},r))):[]),fe(l)},[o]);const X=a.useCallback((l,r)=>{l?.(),r<=T-1&&Q(!1)},[T]);a.useEffect(()=>{let l="md",r=o&&o.length>0?o.map(({label:c,onClose:$,filter:A,...O},M)=>(M==o.length-1&&O.size&&(l=O.size),typeof $=="function"||A?t.createElement(Z,{...O,key:`displayed-tag-${M}`,onClose:()=>X($,M),text:c}):t.createElement(W,{...O,key:`displayed-tag-${M}`},c))):[];const k=r.splice(T,r.length-T);r=r.map((c,$)=>t.createElement("div",{key:$,className:`${w}__displayed-tag`},c)),r.push(t.createElement(B,{allTagsModalSearchThreshold:Re,overflowAutoAlign:C,className:y,onShowAllClick:ge,overflowTags:k,overflowAlign:n,overflowType:L,showAllTagsLabel:N,size:l,key:"displayed-tag-overflow",ref:F,popoverOpen:J,onOverflowClick:b,setPopoverOpen:Q})),d?.(k),re(r)},[T,n,y,L,N,b,o,d,J,X,C]);const H=a.useCallback(()=>{if(h)return U(P);let l=0;if(E.length>0){const r=typeof s!="function"&&s?.current,k=typeof f=="number"?f:0;let c=r?r.offsetWidth-k:j?.current.offsetWidth;for(const $ in E){const A=E[$]?.offsetWidth||0;if(c>=A)c-=A,l+=1;else break}if(l<E.length&&F.current)for(;l>0&&c<F.current.offsetWidth;)l-=1,c+=E[l].offsetWidth}l<1?U(0):U(P?Math.min(l,P):l)},[P,h,E,j,f,s]);a.useEffect(()=>{H()},[H,P,h,E]);const he=()=>{H()},ye=()=>{H()},ve=()=>{K(!1);const l=F.current?.querySelector("button");setTimeout(()=>l?.focus(),0)};return te(Y,ye),te(s||j,he),t.createElement("div",{...u,className:S([w,V]),ref:j,...ke(oe)},t.createElement("div",{className:S([`${w}__space`,`${w}__space--align-${m}`])},t.createElement("div",{className:`${w}__tag-container ${w}__tag-container--hidden`,"aria-hidden":!0,ref:Y},ie),t.createElement("div",{className:S([`${w}__tag-container`,h&&`${w}__tag-container--multiline`]),ref:pe},se)),!b&&t.createElement(I,{allTags:o,open:me,title:v,onClose:ve,modalAriaLabel:p,searchLabel:x,searchPlaceholder:_,portalTarget:q}))}),Le={red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"},ne=Object.keys(Le);G.types=ne;G.propTypes={align:e.oneOf(["start","center","end"]),allTagsModalAriaLabel:e.string,allTagsModalSearchLabel:e.string,allTagsModalSearchPlaceholderText:e.string,allTagsModalTarget:e.node,allTagsModalTitle:e.string,className:e.string,containingElementRef:e.object,maxVisible:e.number,measurementOffset:e.number,multiline:e.bool,onOverflowClick:e.func,onOverflowTagChange:e.func,overflowAlign:e.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:e.bool,overflowClassName:e.string,overflowType:e.oneOf(["default","tag"]),showAllTagsLabel:e.string,tags:e.arrayOf(e.shape({...W.propTypes,label:e.string.isRequired,type:e.oneOf(ne)}))};G.displayName=oe;G.__docgenInfo={description:"",methods:[],displayName:"TagSet",props:{align:{required:!1,tsType:{name:"union",raw:"'start' | 'center' | 'end'",elements:[{name:"literal",value:"'start'"},{name:"literal",value:"'center'"},{name:"literal",value:"'end'"}]},description:"align the Tags displayed by the TagSet. Default start.",defaultValue:{value:"'start'",computed:!1},type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]}},allTagsModalAriaLabel:{required:!1,tsType:{name:"string"},description:"aria label for all tags modal with hasScrollingContent",type:{name:"string"}},allTagsModalSearchLabel:{required:!1,tsType:{name:"string"},description:"label text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalSearchPlaceholderText:{required:!1,tsType:{name:"string"},description:"placeholder text for the show all search.",defaultValue:{value:"'Search all tags'",computed:!1},type:{name:"string"}},allTagsModalTarget:{required:!1,tsType:{name:"ReactNode"},description:"portal target for the all tags modal",type:{name:"node"}},allTagsModalTitle:{required:!1,tsType:{name:"string"},description:"title for the show all modal.",defaultValue:{value:"'All tags'",computed:!1},type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"className",type:{name:"string"}},containingElementRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLElement>",elements:[{name:"HTMLElement"}]},description:`Optional ref for custom resize container to measure available space
Default will measure the available space of the TagSet container itself.`,type:{name:"object"}},maxVisible:{required:!1,tsType:{name:"number"},description:"maximum visible tags",type:{name:"number"}},measurementOffset:{required:!1,tsType:{name:"number"},description:"Specify offset amount for measure available space, only used when `containingElementSelector`\nis also provided",defaultValue:{value:"0",computed:!1},type:{name:"number"}},multiline:{required:!1,tsType:{name:"boolean"},description:"display tags in multiple lines",type:{name:"bool"}},onOverflowClick:{required:!1,tsType:{name:"union",raw:"((overFlowTags: ReactNode[]) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:"An optional click handler that overrides the default functionality of displaying all tags in a modal",type:{name:"func"}},onOverflowTagChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: ReactNode) => void",signature:{arguments:[{type:{name:"ReactNode"},name:"value"}],return:{name:"void"}}},description:"Handler to get overflow tags",defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},overflowAlign:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'top-left'
| 'top-right'
| 'bottom'
| 'bottom-left'
| 'bottom-right'
| 'left'
| 'left-bottom'
| 'left-top'
| 'right'
| 'right-bottom'
| 'right-top'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-left'"},{name:"literal",value:"'top-right'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-left'"},{name:"literal",value:"'bottom-right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'left-bottom'"},{name:"literal",value:"'left-top'"},{name:"literal",value:"'right'"},{name:"literal",value:"'right-bottom'"},{name:"literal",value:"'right-top'"}]},description:"overflowAlign from the standard tooltip. Default center.",defaultValue:{value:"'bottom'",computed:!1},type:{name:"enum",value:[{value:"'top'",computed:!1},{value:"'top-left'",computed:!1},{value:"'top-right'",computed:!1},{value:"'bottom'",computed:!1},{value:"'bottom-left'",computed:!1},{value:"'bottom-right'",computed:!1},{value:"'left'",computed:!1},{value:"'left-bottom'",computed:!1},{value:"'left-top'",computed:!1},{value:"'right'",computed:!1},{value:"'right-bottom'",computed:!1},{value:"'right-top'",computed:!1}]}},overflowAutoAlign:{required:!1,tsType:{name:"boolean"},description:"Will auto-align the popover on first render if it is not visible. This prop is currently experimental and is subject to future changes.",type:{name:"bool"}},overflowClassName:{required:!1,tsType:{name:"string"},description:"overflowClassName for the tooltip popup",type:{name:"string"}},overflowType:{required:!1,tsType:{name:"union",raw:"'default' | 'tag'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'tag'"}]},description:"Type of rendering displayed inside of the tag overflow component",defaultValue:{value:"'default'",computed:!1},type:{name:"enum",value:[{value:"'default'",computed:!1},{value:"'tag'",computed:!1}]}},showAllTagsLabel:{required:!1,tsType:{name:"string"},description:"label for the overflow show all tags link.",defaultValue:{value:"'View all tags'",computed:!1},type:{name:"string"}},tags:{required:!1,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
  /**
   * @deprecated Use the \`onClose\` function instead to render as a DismissibleTag
   */
  filter?: boolean;
} & TagBaseProps`,elements:[{name:"signature",type:"object",raw:`{
  label: string;
  type?: keyof typeof tagTypes;
  /**
   * @deprecated Use the \`onClose\` function instead to render as a DismissibleTag
   */
  filter?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"unknown",required:!1}},{key:"filter",value:{name:"boolean",required:!1},description:"@deprecated Use the `onClose` function instead to render as a DismissibleTag"}]}},{name:"TagBaseProps"}]}],raw:"TagType[]"},description:`The tags to be shown in the TagSet. Each tag is specified as an object
with properties: **label**\\* (required) to supply the tag content, and
other properties will be passed to the Carbon Tag component, such as
**type**, **disabled**, **ref**, **className** , and any other Tag props.

See https://react.carbondesignsystem.com/?path=/docs/components-tag--default`,type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!0},type:{name:"enum",value:[{value:'"red"',computed:!1},{value:'"magenta"',computed:!1},{value:'"purple"',computed:!1},{value:'"blue"',computed:!1},{value:'"cyan"',computed:!1},{value:'"teal"',computed:!1},{value:'"green"',computed:!1},{value:'"gray"',computed:!1},{value:'"cool-gray"',computed:!1},{value:'"warm-gray"',computed:!1},{value:'"high-contrast"',computed:!1},{value:'"outline"',computed:!1}],required:!1}}}}}},composes:["PropsWithChildren"]};export{G as T};
