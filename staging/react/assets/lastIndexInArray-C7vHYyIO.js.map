{"version":3,"file":"lastIndexInArray-C7vHYyIO.js","sources":["../../src/global/js/hooks/useCreateComponentFocus.js","../../src/global/js/hooks/useCreateComponentStepChange.js","../../src/global/js/utils/getNumberOfHiddenSteps.js","../../src/global/js/hooks/useRetrieveStepData.js","../../src/global/js/hooks/useValidCreateStepCount.js","../../src/components/CreateInfluencer/CreateInfluencer.tsx","../../src/global/js/utils/lastIndexInArray.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2021, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect } from 'react';\nimport wait from '../utils/wait';\n\n// Focus the first focusable element and call the onMount prop for the current step if one is provided\nexport const useCreateComponentFocus = ({\n  previousState,\n  currentStep,\n  blockClass,\n  onMount,\n  firstFocusElement,\n}) => {\n  useEffect(() => {\n    if (typeof onMount === 'function') {\n      onMount();\n    }\n  }, [onMount]);\n  useEffect(() => {\n    // because of how handleStackChange.claimFocus in TearsheetShell works a timeout is required to focus on specific elements\n    const awaitFocus = async (elm) => {\n      await wait(10);\n      elm.focus();\n    };\n    // FUNCTION TO ENSURE THE ELEMENT TARGETED IS NOT CONTAINED IN AN ELEMENT MARKED 'INERT'\n    const isNotContainedInInert = (elm) => {\n      if (!elm) return false;\n      const inertParent = elm.closest('[inert]');\n      return (\n        !inertParent || (!inertParent.hasAttribute('inert') && !elm.disabled)\n      );\n    };\n\n    const getActiveStep = () => {\n      const allSteps = Array.from(document.querySelectorAll(blockClass));\n      return allSteps.find((el) => {\n        let currentStep = el;\n        while (currentStep) {\n          if (currentStep.hasAttribute('inert')) return false;\n          currentStep = currentStep.parentElement;\n        }\n        return true;\n      });\n    };\n\n    const getFocusableElement = (containingElement) => {\n      const focusElementQuery = `button, input[type=\"button\"], input, select, textarea, a[href]`;\n      // PREFER THE USER DEFINED firstFocusElement IF IT EXISTS\n      const firstFocusEl = containingElement.querySelector(firstFocusElement);\n      if (\n        firstFocusEl &&\n        isNotContainedInInert(firstFocusEl) &&\n        !firstFocusEl.disabled\n      ) {\n        return firstFocusEl;\n      }\n      // BACKUP TO INTERACTIVE ELEMENT LIST\n      const bakFocusEl = Array.from(\n        containingElement.querySelectorAll(focusElementQuery)\n      );\n      return bakFocusEl.find((el) => isNotContainedInInert(el) && !el.disabled);\n    };\n\n    if (previousState?.currentStep !== currentStep && currentStep > 0) {\n      // GET THE CURRENT STEP ELEMENT\n      const activeStepElement = getActiveStep();\n      if (activeStepElement && isNotContainedInInert(activeStepElement)) {\n        const focusEl = getFocusableElement(activeStepElement);\n        if (focusEl) {\n          awaitFocus(focusEl);\n        }\n      }\n    }\n  }, [currentStep, previousState, blockClass, onMount, firstFocusElement]);\n};\n","/**\n * Copyright IBM Corp. 2021, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useCallback, useEffect } from 'react';\n\nexport const useCreateComponentStepChange = ({\n  firstIncludedStep,\n  lastIncludedStep,\n  stepData,\n  onPrevious,\n  onNext,\n  isSubmitDisabled,\n  setCurrentStep,\n  setIsSubmitting,\n  setLoadingPrevious = null,\n  loadingPrevious = false,\n  onClose,\n  onRequestSubmit,\n  componentName,\n  currentStep,\n  backButtonText,\n  cancelButtonText,\n  submitButtonText,\n  nextButtonText,\n  isSubmitting,\n  componentBlockClass,\n  setCreateComponentActions,\n  setModalIsOpen,\n  experimentalSecondarySubmit,\n  experimentalSecondarySubmitText,\n}) => {\n  const continueToNextStep = useCallback(() => {\n    setIsSubmitting(false);\n    setCurrentStep((prev) => {\n      // Find next included step to render\n      // There will always be a next step otherwise we will\n      // have reach the onSubmit\n      do {\n        prev++;\n      } while (!stepData[prev - 1]?.shouldIncludeStep);\n      return prev;\n    });\n  }, [setCurrentStep, setIsSubmitting, stepData]);\n\n  const moveToPreviousStep = useCallback(() => {\n    if (componentName !== 'CreateFullPage') {\n      setLoadingPrevious(false);\n    }\n    setCurrentStep((prev) => {\n      // Find previous included step to render\n      // There will always be a previous step otherwise we will\n      // have disabled the back button since we have reached the first visible step\n      do {\n        prev--;\n      } while (!stepData[prev - 1]?.shouldIncludeStep);\n      return prev;\n    });\n  }, [setCurrentStep, stepData, setLoadingPrevious, componentName]);\n\n  // useEffect to handle multi step logic\n  useEffect(() => {\n    const onUnmount = () => {\n      if (componentName !== 'CreateFullPage') {\n        setCurrentStep(1);\n      }\n      setIsSubmitting(false);\n      onClose();\n    };\n    const handleOnRequestSubmit = async () => {\n      // check if onRequestSubmit returns a promise\n      try {\n        const options = await onRequestSubmit();\n        // if onRequestSubmit returns an object with the preventClose property, then check if\n        if (!options?.preventClose) {\n          onUnmount();\n        }\n      } catch (error) {\n        setIsSubmitting(false);\n        console.warn(`${componentName} submit error: ${error}`);\n      }\n    };\n    const handlePrevious = async () => {\n      setLoadingPrevious?.(true);\n      if (typeof onPrevious === 'function') {\n        try {\n          await onPrevious();\n          moveToPreviousStep();\n        } catch (error) {\n          console.warn(`${componentName} onBack error: ${error}`);\n        }\n      } else {\n        moveToPreviousStep();\n      }\n    };\n    const handleNext = async () => {\n      setIsSubmitting(true);\n      if (typeof onNext === 'function') {\n        try {\n          await onNext();\n          continueToNextStep();\n        } catch (error) {\n          setIsSubmitting(false);\n          console.warn(`${componentName} onNext error: ${error}`);\n        }\n      } else {\n        continueToNextStep();\n      }\n    };\n    const handleSubmit = async () => {\n      setIsSubmitting(true);\n      // last step should have onNext as well\n      if (typeof onNext === 'function') {\n        try {\n          await onNext();\n          await handleOnRequestSubmit();\n        } catch (error) {\n          setIsSubmitting(false);\n          console.warn(`${componentName} onNext error: ${error}`);\n        }\n      } else {\n        await handleOnRequestSubmit();\n      }\n    };\n    const handleExperimentalSecondarySubmit = () => {\n      if (typeof experimentalSecondarySubmit?.onClick === 'function') {\n        experimentalSecondarySubmit.onClick();\n      }\n    };\n    if (stepData?.length > 0) {\n      const buttons = [];\n      if (stepData?.length > 1) {\n        buttons.push({\n          key: 'create-action-button-back',\n          label: backButtonText,\n          onClick: handlePrevious,\n          kind: 'secondary',\n          disabled: currentStep === firstIncludedStep,\n          loading: loadingPrevious,\n        });\n      }\n      buttons.push({\n        key: 'create-action-button-cancel',\n        label: cancelButtonText,\n        onClick:\n          componentName === 'CreateFullPage'\n            ? () => setModalIsOpen(true)\n            : onUnmount,\n        kind: 'ghost',\n      });\n      if (\n        experimentalSecondarySubmitText &&\n        !experimentalSecondarySubmit?.hideSecondarySubmit\n      ) {\n        buttons.push({\n          key: 'create-action-button-experimentalSecondarySubmit',\n          label: experimentalSecondarySubmitText,\n          onClick: handleExperimentalSecondarySubmit,\n          kind: 'secondary',\n          disabled: experimentalSecondarySubmit?.disabled,\n        });\n      }\n      buttons.push({\n        key: 'create-action-button-submit',\n        label:\n          currentStep < lastIncludedStep ? nextButtonText : submitButtonText,\n        onClick: currentStep < lastIncludedStep ? handleNext : handleSubmit,\n        disabled: isSubmitDisabled,\n        kind: 'primary',\n        loading: isSubmitting,\n        className: `${componentBlockClass}__create-button`,\n      });\n\n      setCreateComponentActions(buttons);\n    }\n  }, [\n    firstIncludedStep,\n    lastIncludedStep,\n    stepData,\n    onNext,\n    isSubmitDisabled,\n    backButtonText,\n    cancelButtonText,\n    currentStep,\n    onClose,\n    nextButtonText,\n    submitButtonText,\n    onRequestSubmit,\n    isSubmitting,\n    componentBlockClass,\n    componentName,\n    continueToNextStep,\n    setCurrentStep,\n    setCreateComponentActions,\n    setIsSubmitting,\n    setModalIsOpen,\n    moveToPreviousStep,\n    onPrevious,\n    setLoadingPrevious,\n    loadingPrevious,\n    experimentalSecondarySubmit,\n    experimentalSecondarySubmitText,\n  ]);\n};\n","/**\n * Copyright IBM Corp. 2022, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const getNumberOfHiddenSteps = (stepData, initialStep) => {\n  let numberOfHiddenSteps = 0;\n  stepData.forEach((step, stepIndex) => {\n    if (stepIndex + 1 > initialStep) {\n      return;\n    }\n    if (step.shouldIncludeStep === false) {\n      numberOfHiddenSteps += 1;\n    }\n  });\n  return numberOfHiddenSteps;\n};\n","/**\n * Copyright IBM Corp. 2022, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect } from 'react';\n\n/**\n * This useEffect makes sure that every CreateTearsheetStep/CreateFullPageStep reports back it's\n * title, secondaryLabel, introStep, invalid and shouldIncludeStep data so that it can be sent to the CreateInfluencer.\n * @param {object} useResetCreateComponent\n * @param {object} useResetCreateComponent.stepsContext\n * @param {number} useResetCreateComponent.stepNumber\n * @param {boolean | undefined} useResetCreateComponent.introStep\n * @param {boolean | undefined} useResetCreateComponent.invalid\n * @param {boolean | undefined} useResetCreateComponent.shouldIncludeStep\n * @param {string | undefined } useResetCreateComponent.secondaryLabel\n * @param {string | React.ReactNode} useResetCreateComponent.title\n */\nexport const useRetrieveStepData = ({\n  stepsContext,\n  stepNumber,\n  introStep,\n  invalid,\n  shouldIncludeStep,\n  secondaryLabel,\n  title,\n}) => {\n  useEffect(() => {\n    if (stepsContext) {\n      stepsContext.setStepData((prev) => {\n        const stepItem = {\n          title,\n          secondaryLabel,\n          introStep,\n          invalid,\n          shouldIncludeStep,\n        };\n        const previousItem = prev[stepNumber - 1];\n        if (\n          previousItem?.title !== stepItem.title ||\n          previousItem?.secondaryLabel !== stepItem.secondaryLabel ||\n          previousItem?.introStep !== stepItem.introStep ||\n          previousItem?.shouldIncludeStep !== stepItem.shouldIncludeStep ||\n          previousItem?.invalid !== stepItem.invalid\n        ) {\n          const clone = [...prev];\n          clone[stepNumber - 1] = stepItem;\n          return clone;\n        }\n        return prev;\n      });\n    }\n  }, [\n    shouldIncludeStep,\n    title,\n    secondaryLabel,\n    introStep,\n    invalid,\n    stepsContext,\n    stepNumber,\n  ]);\n};\n","/**\n * Copyright IBM Corp. 2021, 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect } from 'react';\n\n/**\n * Logs a warning to console if an invalid number of steps are used with the given CreateComponent\n * @param {number} stepCount\n * @param {string} componentName\n */\nexport const useValidCreateStepCount = (stepCount, componentName) => {\n  useEffect(() => {\n    if (stepCount === 1) {\n      console.warn(\n        `${componentName}: ${componentName}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`\n      );\n    }\n  }, [stepCount, componentName]);\n};\n","/**\n * Copyright IBM Corp. 2021, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Import portions of React that are needed.\nimport React, { PropsWithChildren, ReactNode } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport {\n  Heading,\n  ProgressIndicator,\n  ProgressStep,\n  Section,\n} from '@carbon/react';\nimport '../../global/js/utils/props-helper';\n\nimport { pkg } from '../../settings';\n\n// The block part of our conventional BEM class names (blockClass__E--M).\nconst blockClass = `${pkg.prefix}--create-influencer`;\nconst componentName = 'CreateInfluencer';\n\ninterface Step {\n  introStep?: boolean;\n  secondaryLabel?: string;\n  shouldIncludeStep?: boolean;\n  title?: ReactNode;\n}\ninterface CreateInfluencerProps {\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className?: string;\n  /**\n   * Provide the current step number.\n   */\n  currentStep: number;\n  /**\n   * onChange event for Progress Indicator\n   */\n  onClickStep?: (step: number) => void;\n  /**\n   * Provide the Set Data.\n   */\n  stepData: Step[];\n  /**\n   * Title.\n   */\n  title?: string | undefined;\n}\n\nexport const CreateInfluencer = ({\n  className,\n  currentStep,\n  onClickStep,\n  stepData,\n  title,\n}: PropsWithChildren<CreateInfluencerProps>) => {\n  const getNumberOfDynamicStepsBeforeCurrentStep = (array, key) => {\n    const dynamicSteps: any[] = [];\n    array.forEach((item, index) => {\n      if (array[index]?.[key] === false && index <= currentStep - 1) {\n        dynamicSteps.push(item);\n      }\n    });\n    return dynamicSteps.length;\n  };\n\n  // renders the step progression components in the left influencer area\n  const renderProgressSteps = () => {\n    const extractedSteps = stepData?.filter((item) => !item?.introStep);\n    const progressSteps = extractedSteps?.filter(\n      (item) => item?.shouldIncludeStep\n    );\n\n    // To get the ProgressIndicator's `currentIndex`, accounting for dynamic steps,\n    // we need to subtract the number of !shouldIncludeStep/s before the current step\n    // which we get from `getNumberOfDynamicStepsBeforeCurrentStep()`\n    const totalDynamicSteps =\n      getNumberOfDynamicStepsBeforeCurrentStep(stepData, 'shouldIncludeStep') ||\n      0;\n\n    return (\n      <Section className={`${blockClass}__left-nav`}>\n        {title && <Heading className={`${blockClass}__title`}>{title}</Heading>}\n        {currentStep === 1 && stepData[0]?.introStep ? null : (\n          <ProgressIndicator\n            currentIndex={\n              stepData[0]?.introStep\n                ? currentStep - totalDynamicSteps - 2 // minus 2 because we need to account for the intro step in addition to `currentIndex` being 0 index based and our steps being 1 index based\n                : currentStep - totalDynamicSteps - 1 // minus 1 because ProgressIndicator currentIndex prop is 0 index based, but our steps are 1 index based\n            }\n            spaceEqually\n            vertical\n            className={cx(`${blockClass}__progress-indicator`)}\n            onChange={onClickStep}\n          >\n            {progressSteps.map((step: Step, stepIndex: number) => {\n              return (\n                <ProgressStep\n                  label={step?.title as string}\n                  key={stepIndex}\n                  secondaryLabel={step.secondaryLabel || undefined}\n                  invalid={(step as any).invalid}\n                />\n              );\n            })}\n          </ProgressIndicator>\n        )}\n      </Section>\n    );\n  };\n\n  return (\n    <div className={cx(blockClass, className)}>{renderProgressSteps()}</div>\n  );\n};\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nCreateInfluencer.displayName = componentName;\n\nCreateInfluencer.propTypes = {\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n  /**\n   * Used to mark the current step on the ProgressIndicator component\n   */\n  currentStep: PropTypes.number.isRequired,\n\n  /**\n   * onChange event for Progress Indicator\n   */\n  onClickStep: PropTypes.func,\n\n  /**\n   * The step data that renders the progress items\n   */\n  stepData: PropTypes.arrayOf(\n    PropTypes.shape({\n      introStep: PropTypes.bool,\n      secondaryLabel: PropTypes.string,\n      shouldIncludeStep: PropTypes.bool,\n      title: PropTypes.node,\n    })\n  ),\n\n  /**\n   * The main title of the full page, displayed in the influencer area.\n   */\n  title: PropTypes.string,\n};\n","/**\n * Copyright IBM Corp. 2022, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * This utility will return the index of the last instance of an\n * item in the given array of objects whose key is equal to the value\n * parameter. If there are no matches, -1 is returned as similar to findIndex\n * @param {Array<Object.*>} array\n * @param {string} key\n * @param {string|boolean|number} value\n */\nexport const lastIndexInArray = (array, key, value) => {\n  for (let i = array.length - 1; i >= 0; i--) {\n    if (array[i]?.[key] === value) {\n      return i + 1;\n    }\n  }\n  return -1;\n};\n"],"names":["useCreateComponentFocus","previousState","currentStep","blockClass","onMount","firstFocusElement","useEffect","awaitFocus","elm","wait","isNotContainedInInert","inertParent","getActiveStep","el","getFocusableElement","containingElement","focusElementQuery","firstFocusEl","activeStepElement","focusEl","useCreateComponentStepChange","firstIncludedStep","lastIncludedStep","stepData","onPrevious","onNext","isSubmitDisabled","setCurrentStep","setIsSubmitting","setLoadingPrevious","loadingPrevious","onClose","onRequestSubmit","componentName","backButtonText","cancelButtonText","submitButtonText","nextButtonText","isSubmitting","componentBlockClass","setCreateComponentActions","setModalIsOpen","experimentalSecondarySubmit","experimentalSecondarySubmitText","continueToNextStep","useCallback","prev","moveToPreviousStep","onUnmount","handleOnRequestSubmit","error","handlePrevious","handleNext","handleSubmit","handleExperimentalSecondarySubmit","buttons","getNumberOfHiddenSteps","initialStep","numberOfHiddenSteps","step","stepIndex","useRetrieveStepData","stepsContext","stepNumber","introStep","invalid","shouldIncludeStep","secondaryLabel","title","stepItem","previousItem","clone","useValidCreateStepCount","stepCount","pkg","CreateInfluencer","className","onClickStep","getNumberOfDynamicStepsBeforeCurrentStep","array","key","dynamicSteps","item","index","renderProgressSteps","progressSteps","totalDynamicSteps","React","Section","Heading","ProgressIndicator","cx","ProgressStep","PropTypes","lastIndexInArray","value","i"],"mappings":"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"}