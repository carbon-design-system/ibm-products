import{P as i,e as f,u as ge,r as $,k as at,c as R,_ as st,n as Oe,a2 as lt,a1 as ot,i as Te}from"./iframe-BM8UuOT_.js";import{u as ut}from"./useNormalizedInputProps-D8lHUjCQ.js";import{F as mt}from"./FormContext-BxAlDPBq.js";import{T as Be}from"./Text-Bp2pW92U.js";import{c as ct}from"./clamp--00YEiB8.js";import{u as dt}from"./useControllableState-_39iz1-m.js";import"./documentLang-E105Y72C.js";import{A as Re}from"./index-B2-UkdcH.js";import{i as Ae}from"./utils-DEU5vRWz.js";import{b as ft}from"./bucket-16-29qTRgTN.js";import{A as pt}from"./bucket-0-CgecAV-v.js";let de=new Map,pe=!1;try{pe=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Q=!1;try{Q=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ue={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class be{format(t){let e="";if(!pe&&this.options.signDisplay!=null?e=gt(this.numberFormatter,this.options.signDisplay,t):e=this.numberFormatter.format(t),this.options.style==="unit"&&!Q){var r;let{unit:a,unitDisplay:s="short",locale:m}=this.resolvedOptions();if(!a)return e;let o=(r=Ue[a])===null||r===void 0?void 0:r[s];e+=o[m]||o.default}return e}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,e){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,e);if(e<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(e)}`}formatRangeToParts(t,e){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,e);if(e<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),a=this.numberFormatter.formatToParts(e);return[...r.map(s=>({...s,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...a.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!pe&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!Q&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,e={}){this.numberFormatter=bt(t,e),this.options=e}}function bt(n,t={}){let{numberingSystem:e}=t;if(e&&n.includes("-nu-")&&(n.includes("-u-")||(n+="-u-"),n+=`-nu-${e}`),t.style==="unit"&&!Q){var r;let{unit:m,unitDisplay:o="short"}=t;if(!m)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Ue[m])===null||r===void 0)&&r[o]))throw new Error(`Unsupported unit ${m} with unitDisplay = ${o}`);t={...t,style:"decimal"}}let a=n+(t?Object.entries(t).sort((m,o)=>m[0]<o[0]?-1:1).join():"");if(de.has(a))return de.get(a);let s=new Intl.NumberFormat(n,t);return de.set(a,s),s}function gt(n,t,e){if(t==="auto")return n.format(e);if(t==="never")return n.format(Math.abs(e));{let r=!1;if(t==="always"?r=e>0||Object.is(e,0):t==="exceptZero"&&(Object.is(e,-0)||Object.is(e,0)?e=Math.abs(e):r=e>0),r){let a=n.format(-e),s=n.format(e),m=a.replace(s,"").replace(/\u200e|\u061C/,"");return[...m].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),a.replace(s,"!!!").replace(m,"+").replace("!!!",s)}else return n.format(e)}}const ht=new RegExp("^.*\\(.*\\).*$"),yt=["latn","arab","hanidec","deva","beng"];class Ze{parse(t){return fe(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,r){return fe(this.locale,this.options,t).isValidPartialNumber(t,e,r)}getNumberingSystem(t){return fe(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const Me=new Map;function fe(n,t,e){let r=We(n,t);if(!n.includes("-nu-")&&!r.isValidPartialNumber(e)){for(let a of yt)if(a!==r.options.numberingSystem){let s=We(n+(n.includes("-u-")?"-nu-":"-u-nu-")+a,t);if(s.isValidPartialNumber(e))return s}}return r}function We(n,t){let e=n+(t?Object.entries(t).sort((a,s)=>a[0]<s[0]?-1:1).join():""),r=Me.get(e);return r||(r=new $t(n,t),Me.set(e,r)),r}class $t{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=G(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let m=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let o=e.indexOf(".");o===-1&&(o=e.length),e=e.replace(".",""),o-2===0?e=`0.${e}`:o-2===-1?e=`0.0${e}`:o-2===-2?e="0.00":e=`${e.slice(0,o-2)}.${e.slice(o-2)}`,m>-1&&(e=`-${e}`)}let r=e?+e:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var a,s;let m={...this.options,style:"decimal",minimumFractionDigits:Math.min(((a=this.options.minimumFractionDigits)!==null&&a!==void 0?a:0)+2,20),maximumFractionDigits:Math.min(((s=this.options.maximumFractionDigits)!==null&&s!==void 0?s:0)+2,20)};return new Ze(this.locale,m).parse(new be(this.locale,m).format(r))}return this.options.currencySign==="accounting"&&ht.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=G(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&this.symbols.group&&(t=G(t," ",this.symbols.group),t=G(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=G(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=vt(t,this.formatter,this.options,e);var r,a;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const Le=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),Nt=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function vt(n,t,e,r){var a,s,m,o;let b=new Intl.NumberFormat(n,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),E=b.formatToParts(-10000.111),K=b.formatToParts(10000.111),C=Nt.map(u=>b.formatToParts(u));var _;let ee=(_=(a=E.find(u=>u.type==="minusSign"))===null||a===void 0?void 0:a.value)!==null&&_!==void 0?_:"-",A=(s=K.find(u=>u.type==="plusSign"))===null||s===void 0?void 0:s.value;!A&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(A="+");let te=(m=new Intl.NumberFormat(n,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(u=>u.type==="decimal"))===null||m===void 0?void 0:m.value,re=(o=E.find(u=>u.type==="group"))===null||o===void 0?void 0:o.value,D=E.filter(u=>!Le.has(u.type)).map(u=>je(u.value)),N=C.flatMap(u=>u.filter(x=>!Le.has(x.type)).map(x=>je(x.value))),g=[...new Set([...D,...N])].sort((u,x)=>x.length-u.length),O=g.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${g.join("|")}|[\\p{White_Space}]`,"gu"),F=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),M=new Map(F.map((u,x)=>[u,x])),ie=new RegExp(`[${F.join("")}]`,"g");return{minusSign:ee,plusSign:A,decimal:te,group:re,literals:O,numeral:ie,index:u=>String(M.get(u))}}function G(n,t,e){return n.replaceAll?n.replaceAll(t,e):n.split(t).join(e)}function je(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const wt=i.shape({localeMatcher:i.oneOf(["best fit","lookup"]),style:i.oneOf(["decimal","currency","percent","unit"]),currency:i.string,currencyDisplay:i.oneOf(["symbol","narrowSymbol","code","name"]),currencySign:i.oneOf(["standard","accounting"]),unit:i.string,unitDisplay:i.oneOf(["short","narrow","long"]),notation:i.oneOf(["standard","scientific","engineering","compact"]),compactDisplay:i.oneOf(["short","long"]),signDisplay:i.oneOf(["auto","never","always","exceptZero"]),minimumIntegerDigits:i.number,minimumFractionDigits:i.number,maximumFractionDigits:i.number,minimumSignificantDigits:i.number,maximumSignificantDigits:i.number,useGrouping:i.oneOfType([i.bool,i.oneOf(["always","auto","min2"])]),numberingSystem:i.string,roundingIncrement:i.number,roundingMode:i.oneOf(["ceil","floor","expand","trunc","halfCeil","halfFloor","halfExpand","halfTrunc","halfEven"]),trailingZeroDisplay:i.oneOf(["auto","stripIfInteger"])});var ze,ke;const Ge={"increment.number":"increment.number","decrement.number":"decrement.number"},xt={[Ge["increment.number"]]:"Increment number",[Ge["decrement.number"]]:"Decrement number"},St=n=>xt[n],Dt=n=>{const r=new Intl.NumberFormat(n).format(123456789e-2).match(/(\D+)\d{3}(\D+)\d{2}$/);if(r){const a=r[1],s=r[2];return{groupSeparator:a,decimalSeparator:s}}else return{groupSeparator:null,decimalSeparator:null}},Gt=(n,t)=>{if(n===""||Number.isNaN(n))return!0;const{groupSeparator:e,decimalSeparator:r}=Dt(t);if(!r)return!isNaN(Number(n));const a=E=>E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let s="";e&&(e.trim()===""?s="[\\u00A0\\u202F\\s]":s=a(e));const m=a(r);if(!new RegExp(`^-?\\d{1,3}(${s}\\d{3})*(${m}\\d*)?$|^-?\\d+(${m}\\d*)?$`).test(n))return!1;let b=n;return e&&(e.trim()===""?b=b?.replace(/[\u00A0\u202F\s]/g,""):b=b?.split(e).join("")),b=b?.replace(r,"."),!isNaN(Number(b))},Ft=f.forwardRef((n,t)=>{const{allowEmpty:e=!1,className:r,decorator:a,disabled:s=!1,disableWheel:m=!1,formatOptions:o,helperText:b="",hideLabel:E=!1,hideSteppers:K,iconDescription:C,id:_,inputMode:ee="decimal",invalid:A=!1,invalidText:he,label:te,light:re,locale:D="en-US",max:N,min:g,onBlur:O,onChange:F,onClick:M,onKeyUp:ie,pattern:ye="[0-9]*",readOnly:u,size:x="md",slug:W,step:B=1,translateWithId:$e=St,type:h="number",defaultValue:P=h==="number"?0:NaN,validate:U,warn:Ye=!1,warnText:qe="",stepStartValue:ne=0,value:v,...L}=n,c=ge(),{isFluid:T}=$.useContext(mt),[He,Ne]=$.useState(!1),[ae,j]=$.useState(()=>v!==void 0?v:P!==void 0?P:e?"":0),[_t,Je]=$.useState(v),I=$.useMemo(()=>new Ze(D,o),[D,o]),[y,se,ve]=dt({name:"NumberInput",defaultValue:typeof P=="string"?I.parse(P):P,value:typeof v=="string"?I.parse(v):v}),[z,le]=$.useState(y),[k,Z]=f.useState(()=>isNaN(y)?"":new be(D,o).format(y)),we=$.useMemo(()=>I.getNumberingSystem(k),[I,k]),xe=$.useMemo(()=>new be(D,{...o,numberingSystem:we}),[D,o,we]),oe=$.useCallback(l=>isNaN(l)||l===null?"":xe.format(l),[xe]);ve&&!(isNaN(z)&&isNaN(y))&&z!==y&&(Z(oe(y)),le(y));const Y=$.useRef(null),Xe=at([t,Y]),Qe=R({[`${c}--number`]:!0,[`${c}--number--helpertext`]:!0,[`${c}--number--readonly`]:u,[`${c}--number--light`]:re,[`${c}--number--nolabel`]:E,[`${c}--number--nosteppers`]:K,[`${c}--number--${x}`]:x}),et=It({allowEmpty:e,invalid:A,value:U?k:h==="number"?ae:y,max:N,min:g,validate:U,locale:D}),d=ut({id:_,readOnly:u,disabled:s,invalid:!et,invalidText:he,warn:Ye,warnText:qe}),[Se,De]=[$e("increment.number"),$e("decrement.number")],tt=R(`${c}--number__input-wrapper`,{[`${c}--number__input-wrapper--warning`]:d.warn,[`${c}--number__input-wrapper--slug`]:W,[`${c}--number__input-wrapper--decorator`]:a}),rt=R({[`${c}--number__invalid`]:d.invalid||d.warn,[`${c}--number__invalid--warning`]:d.warn});$.useEffect(()=>{h==="number"&&v!==void 0&&(j(e&&v===""?"":v),Je(v))},[v,h,e]);let q;d.invalid&&(q=d.invalidId),d.warn&&(q=d.warnId),d.validation||(q=b?d.helperId:void 0);function it(l){if(!s){if(h==="number"){const p={value:e&&l.target.value===""?"":Number(l.target.value),direction:ae<l.target.value?"up":"down"};j(p.value),F&&F(l,p);return}if(h==="text"){const p=e&&l.target.value===""?"":l.target.value;se(I.parse(p)),Z(p)}}}const Fe=l=>{"type"in l.target&&l.target.type==="button"?Ne(!1):Ne(l.type==="focus")},nt=R(`${c}--form-item`,{[r]:!!r,[`${c}--number-input--fluid--invalid`]:T&&d.invalid,[`${c}--number-input--fluid--focus`]:T&&He,[`${c}--number-input--fluid--disabled`]:T&&s}),Ee=d.icon,Pe=l=>{const p=l.toString().split(".");return p[1]?p[1].length:0},ue=(l,p)=>{if(Y.current){const S=h==="number"?Number(Y.current.value):y;let w;Number.isNaN(S)||!S?typeof ne=="number"&&ne?w=ne:g&&g<0&&N&&N>0||!N&&!g||N?(p==="up"&&(w=1),p==="down"&&(w=-1)):g&&g>0&&N&&N>0||g?w=g:w=0:p==="up"?w=S+B:w=S-B;const J=Math.max(Pe(S),Pe(B)),V=parseFloat(Number(w).toFixed(J)),X=ct(V,g??-1/0,N??1/0),ce={value:X,direction:p};if(h==="number"&&j(ce.value),h==="text"){const Ve=oe(X),Ce=I.parse(Ve);se(Ce),Z(Ve),le(Ce)}return F&&F(l,ce),ce}},Ie=(l,p)=>{if(Y.current){const S=ue(l,p);M&&M(l,S)}},me=W??a,H=Ae(me,Re)?$.cloneElement(me,{size:"mini"}):me,_e=Ae(H,Re)?H.props.revertActive:void 0;return $.useEffect(()=>{!_e&&W&&P&&j(P)},[P,_e,W]),f.createElement("div",{className:nt,onFocus:T?Fe:void 0,onBlur:T?Fe:void 0},f.createElement("div",{className:Qe,"data-invalid":d.invalid?!0:void 0},f.createElement(Et,{disabled:d.disabled,hideLabel:E,id:_,label:te}),f.createElement("div",{className:tt},f.createElement("input",st({},L,{"data-invalid":d.invalid?!0:void 0,"aria-invalid":d.invalid,"aria-describedby":q,"aria-readonly":u,disabled:d.disabled,ref:Xe,id:_,max:N,min:g,onClick:M,onChange:it,onKeyUp:ie,onKeyDown:l=>{h==="text"&&(Oe(l,lt)&&ue(l,"up"),Oe(l,ot)&&ue(l,"down")),L?.onKeyDown&&L?.onKeyDown(l)},onFocus:l=>{m&&l.target.addEventListener("wheel",Ke),L.onFocus&&L.onFocus(l)},onBlur:l=>{if(m&&l.target.removeEventListener("wheel",Ke),h==="text"){const p=ve?I.parse(k):y,S=isNaN(p)?"":oe(p),w=l.target.value,J=U?U(w,D):!0;Z(J?S:w);const V=I.parse(S);if(F&&J){const X={value:V,direction:z<V?"up":"down"};isNaN(z)&&isNaN(V)||F(l,X)}isNaN(z)&&isNaN(y)||le(y),isNaN(y)&&isNaN(V)||se(V)}O&&O(l)},pattern:ye,inputMode:ee,readOnly:u,step:B,type:h,value:h==="number"?ae:k})),W?H:a?f.createElement("div",{className:`${c}--number__input-inner-wrapper--decorator`},H):"",Ee?f.createElement(Ee,{className:rt}):null,!K&&f.createElement("div",{className:`${c}--number__controls`},f.createElement("button",{"aria-label":De||C,className:`${c}--number__control-btn down-icon`,disabled:s||u,onClick:l=>Ie(l,"down"),onBlur:O,tabIndex:-1,title:De||C,type:"button"},ze||(ze=f.createElement(ft,{className:"down-icon"}))),f.createElement("div",{className:`${c}--number__rule-divider`}),f.createElement("button",{"aria-label":Se||C,className:`${c}--number__control-btn up-icon`,disabled:s||u,onClick:l=>Ie(l,"up"),onBlur:O,tabIndex:-1,title:Se||C,type:"button"},ke||(ke=f.createElement(pt,{className:"up-icon"}))),f.createElement("div",{className:`${c}--number__rule-divider`}))),T&&f.createElement("hr",{className:`${c}--number-input__divider`}),d.validation?d.validation:f.createElement(Pt,{id:d.helperId,disabled:s,description:b})))});Ft.propTypes={allowEmpty:i.bool,className:i.string,decorator:i.node,defaultValue:i.oneOfType([i.number,i.string]),disableWheel:i.bool,disabled:i.bool,formatOptions:wt,helperText:i.node,hideLabel:i.bool,hideSteppers:i.bool,iconDescription:i.string,id:i.string.isRequired,inputMode:i.oneOf(["none","text","tel","url","email","numeric","decimal","search"]),invalid:i.bool,invalidText:i.node,label:i.node,light:Te(i.bool),locale:i.string,max:i.number,min:i.number,stepStartValue:i.number,onBlur:i.func,onChange:i.func,onClick:i.func,onKeyUp:i.func,pattern:i.string,readOnly:i.bool,size:i.oneOf(["sm","md","lg"]),slug:Te(i.node),step:i.number,translateWithId:i.func,type:i.oneOf(["number","text"]),value:i.oneOfType([i.number,i.string]),warn:i.bool,warnText:i.node,validate:i.func};const Et=({disabled:n,id:t,hideLabel:e,label:r})=>{const a=ge(),s=R({[`${a}--label`]:!0,[`${a}--label--disabled`]:n,[`${a}--visually-hidden`]:e});return r?f.createElement(Be,{as:"label",htmlFor:t,className:s},r):null},Pt=({disabled:n,description:t,id:e})=>{const r=ge(),a=R(`${r}--form__helper-text`,{[`${r}--form__helper-text--disabled`]:n});return t?f.createElement(Be,{as:"div",id:e,className:a},t):null};function It({allowEmpty:n,invalid:t,value:e,max:r,min:a,validate:s,locale:m}){return typeof s=="function"&&s(e,m)===!1||t?!1:e===""?n:!(e>r||e<a)}function Ke(n){n.preventDefault()}export{Ft as N,wt as a,Gt as v};
//# sourceMappingURL=NumberInput-DARi5QNl.js.map
