import{b as oe,d as o,P as t,g as z}from"./index-C360Eztx.js";import{e as a,r as $}from"./index-DtHxqM--.js";import{u as pe}from"./useNormalizedInputProps-cPzcHHVT.js";import{F as de}from"./FormContext-C4Nuixum.js";import{T as E}from"./Text-DKfZ87L_.js";const ce=i=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":i}),ue=i=>({"aria-describedby":i}),me=i=>({"aria-describedby":i}),fe=({sharedTextInputProps:i,invalid:c,invalidId:p,warn:d,warnId:r,hasHelper:v,helperId:x})=>({...i,...c?ce(p):{},...d?ue(r):{},...v?me(x):{}}),xe=(i,c,p="character",d="characters")=>{if(typeof c>"u")return null;const r=c-i;return r<=10&&r>0?`${r} ${r===1?p:d} left.`:r<=0?`Maximum ${d} reached.`:null},D=a.forwardRef(function({className:c,decorator:p,disabled:d=!1,helperText:r,hideLabel:v,id:x,inline:l=!1,invalid:M=!1,invalidText:V,labelText:I,light:T,onChange:j=()=>{},onClick:B=()=>{},placeholder:C,readOnly:h,size:u,type:G="text",warn:H=!1,warnText:J,enableCounter:P=!1,maxCount:_,slug:w,...A},K){var q;const e=oe(),{defaultValue:N,value:y}=A,[R,Q]=$.useState((N==null?void 0:N.toString().length)||(y==null?void 0:y.toString().length)||0),n=pe({id:x,readOnly:h,disabled:d,invalid:M,invalidText:V,warn:H,warnText:J}),U=o(`${e}--text-input`,{[`${e}--text-input--light`]:T,[`${e}--text-input--invalid`]:n.invalid,[`${e}--text-input--warning`]:n.warn,[`${e}--text-input--${u}`]:u,[`${e}--layout--size-${u}`]:u}),F={id:x,onChange:s=>{var b;n.disabled||(Q((b=s.target.value)==null?void 0:b.length),j(s))},onClick:s=>{n.disabled||B(s)},placeholder:C,type:G,ref:K,className:U,title:C,disabled:n.disabled,readOnly:h,"aria-describedby":r&&n.helperId,...A};P&&(F.maxLength=_);const X=o([o(`${e}--form-item`,c)],`${e}--text-input-wrapper`,{[`${e}--text-input-wrapper--readonly`]:h,[`${e}--text-input-wrapper--light`]:T,[`${e}--text-input-wrapper--inline`]:l,[`${e}--text-input-wrapper--inline--invalid`]:l&&n.invalid}),Y=o(`${e}--label`,{[`${e}--visually-hidden`]:v,[`${e}--label--disabled`]:n.disabled,[`${e}--label--inline`]:l,[`${e}--label--inline--${u}`]:l&&!!u}),Z=o(`${e}--form__helper-text`,{[`${e}--form__helper-text--disabled`]:n.disabled,[`${e}--form__helper-text--inline`]:l}),ee=o(`${e}--text-input__field-outer-wrapper`,{[`${e}--text-input__field-outer-wrapper--inline`]:l}),te=o(`${e}--text-input__field-wrapper`,{[`${e}--text-input__field-wrapper--warning`]:n.warn,[`${e}--text-input__field-wrapper--slug`]:w,[`${e}--text-input__field-wrapper--decorator`]:p}),ne=o({[`${e}--text-input__invalid-icon`]:n.invalid||n.warn,[`${e}--text-input__invalid-icon--warning`]:n.warn}),ae=o(`${e}--label`,{[`${e}--label--disabled`]:d,[`${e}--text-input__label-counter`]:!0}),re=P&&_?a.createElement(E,{as:"div",className:ae},`${R}/${_}`):null,ie=I?a.createElement(E,{as:"label",htmlFor:x,className:Y},I):null,S=a.createElement("div",{className:`${e}--text-input__label-wrapper`},ie,re),W=r?a.createElement(E,{as:"div",id:n.helperId,className:Z},r):null,le=a.createElement("input",fe({sharedTextInputProps:F,invalid:n.invalid,invalidId:n.invalidId,warn:n.warn,warnId:n.warnId})),{isFluid:g}=$.useContext(de),L=$.useRef(null),[O,se]=$.useState(""),m=xe(R,_);$.useEffect(()=>{if(m&&m!==O){const s=L.current;if(s){s.textContent="";const b=setTimeout(()=>{s&&(s.textContent=m,se(m))},1e3);return()=>{b&&clearTimeout(b)}}}},[m,O]);const k=n.icon;let f=a.isValidElement(w??p)?w??p:null;return f&&((q=f.type)==null?void 0:q.displayName)==="AILabel"&&(f=a.cloneElement(f,{size:"mini"})),a.createElement("div",{className:X},l?a.createElement("div",{className:`${e}--text-input__label-helper-wrapper`},S,!g&&(n.validation||W)):S,a.createElement("div",{className:ee},a.createElement("div",{className:te,"data-invalid":n.invalid||null},k&&a.createElement(k,{className:ne}),le,w?f:p?a.createElement("div",{className:`${e}--text-input__field-inner-wrapper--decorator`},f):"",a.createElement("span",{className:`${e}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:L},m),g&&a.createElement("hr",{className:`${e}--text-input__divider`}),g&&!l&&n.validation),!g&&!l&&(n.validation||W)))});D.displayName="TextInput";D.propTypes={className:t.string,decorator:t.node,defaultValue:t.oneOfType([t.string,t.number]),disabled:t.bool,enableCounter:t.bool,helperText:t.node,hideLabel:t.bool,id:t.string.isRequired,inline:t.bool,invalid:t.bool,invalidText:t.node,labelText:t.node.isRequired,light:z(t.bool),maxCount:t.number,onChange:t.func,onClick:t.func,placeholder:t.string,readOnly:t.bool,size:t.oneOf(["sm","md","lg"]),slug:z(t.node),type:t.string,value:t.oneOfType([t.string,t.number]),warn:t.bool,warnText:t.node};export{D as T,xe as g,fe as t};
