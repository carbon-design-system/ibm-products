import{r as p,e as o}from"./index-DxDX2vOa.js";import{z as d,P as k}from"./index-B_euquWE.js";import{G as g}from"./index-Df9so8jS.js";import{F as T}from"./index-DYXyeV2p.js";import{A as L}from"./index-CJ0Gdo6o.js";const{STORY_CHANGED:b,SELECT_STORY:F}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:C,addons:f}=__STORYBOOK_MODULE_PREVIEW_API__,{global:v}=__STORYBOOK_MODULE_GLOBAL__;var D="links",{document:m,HTMLElement:R}=v;function K(e){let t={},a=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let n=0;n<a.length;n++){let r=a[n].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}var u=e=>f.getChannel().emit(F,e),A=(e,t)=>new Promise(a=>{let{location:n}=m,r=K(n.search).id,s=e||r.split("--",2)[0],i=`/story/${g(s,t)}`,c=n.pathname.replace(/iframe\.html$/,""),O=`${n.origin+c}?${Object.entries({path:i}).map(h=>`${h[0]}=${h[1]}`).join("&")}`;a(O)}),_=e=>{let{target:t}=e;if(!(t instanceof R))return;let a=t,{sbKind:n,sbStory:r}=a.dataset;(n||r)&&(e.preventDefault(),u({kind:n,story:r}))},l=!1,P=()=>{l||(l=!0,m.addEventListener("click",_))},S=()=>{l&&(l=!1,m.removeEventListener("click",_))};C({name:"withLinks",parameterName:D,wrapper:(e,t)=>(P(),f.getChannel().once(b,S),e(t))});var U=0,$=e=>e.button===U&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,j=(e,t=a=>{})=>{$(e)&&(e.preventDefault(),t(e))},E=class extends p.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:e,title:t=e,story:a,name:n=a}=this.props;if(t&&n){let r=await A(t,n);this.setState({href:r})}},this.handleClick=()=>{let{kind:e,title:t=e,story:a,name:n=a}=this.props;t&&n&&u({title:t,name:n})}}componentDidMount(){this.updateHref()}componentDidUpdate(e){let{kind:t,title:a,story:n,name:r}=this.props;(e.kind!==t||e.story!==n||e.title!==a||e.name!==r)&&this.updateHref()}render(){let{kind:e,title:t=e,story:a,name:n=a,children:r,...s}=this.props,{href:i}=this.state;return o.createElement("a",{href:i,onClick:c=>j(c,this.handleClick),...s},r)}};E.defaultProps={children:void 0};var B=E;const y=({flags:e,children:t})=>{const[a,n]=p.useState(),r=Object.fromEntries(Array.from(d.flags.keys()).map(s=>[s,!0]));return p.useEffect(()=>{if(e||n(r),e){for(const[s,i]of Object.entries(e))d.flags.set(s,i);n(d.flags)}},[e]),o.createElement(T,{flags:a??r},o.createElement(L,{type:"feature-flags",text:o.createElement("span",null,"This story is rendered with"," ",o.createElement(B,{title:"IBM Products/Components/FeatureFlags",name:"Docs"},e?Object.keys(e).map((s,i)=>Object.keys(e).length>1?i===Object.keys(e).length-1?s:`${s}, `:s):"all available feature flags")," ","enabled")},t))};y.propTypes={children:k.node};y.__docgenInfo={description:"",methods:[],displayName:"WithFeatureFlags",props:{children:{description:"",type:{name:"node"},required:!1}}};export{y as W};
