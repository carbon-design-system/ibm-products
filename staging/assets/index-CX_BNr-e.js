import{r as p,R as o}from"./index-BwDkhjyp.js";import{P as k}from"./index-Dk74W0Oi.js";import{y as d}from"./index-CQ0F2wkl.js";import{N as g}from"./index-C2eUe6cH.js";import{F as T}from"./index-C2GlWzJb.js";import{A as L}from"./index-DznJAQiH.js";const{global:b}=__STORYBOOK_MODULE_GLOBAL__,{makeDecorator:F,addons:f}=__STORYBOOK_MODULE_PREVIEW_API__,{STORY_CHANGED:C,SELECT_STORY:R}=__STORYBOOK_MODULE_CORE_EVENTS__;var v="links",{document:m,HTMLElement:D}=b;function K(e){let t={},r=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let a=0;a<r.length;a++){let n=r[a].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return t}var u=e=>f.getChannel().emit(R,e),A=(e,t)=>new Promise(r=>{let{location:a}=m,n=K(a.search).id,s=e||n.split("--",2)[0],i=`/story/${g(s,t)}`,c=a.pathname.replace(/iframe\.html$/,""),O=`${a.origin+c}?${Object.entries({path:i}).map(h=>`${h[0]}=${h[1]}`).join("&")}`;r(O)}),_=e=>{let{target:t}=e;if(!(t instanceof D))return;let r=t,{sbKind:a,sbStory:n}=r.dataset;(a||n)&&(e.preventDefault(),u({kind:a,story:n}))},l=!1,P=()=>{l||(l=!0,m.addEventListener("click",_))},S=()=>{l&&(l=!1,m.removeEventListener("click",_))};F({name:"withLinks",parameterName:v,wrapper:(e,t)=>(P(),f.getChannel().once(C,S),e(t))});var U=0,$=e=>e.button===U&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,j=(e,t=r=>{})=>{$(e)&&(e.preventDefault(),t(e))},E=class extends p.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:e,title:t=e,story:r,name:a=r}=this.props;if(t&&a){let n=await A(t,a);this.setState({href:n})}},this.handleClick=()=>{let{kind:e,title:t=e,story:r,name:a=r}=this.props;t&&a&&u({title:t,name:a})}}componentDidMount(){this.updateHref()}componentDidUpdate(e){let{kind:t,title:r,story:a,name:n}=this.props;(e.kind!==t||e.story!==a||e.title!==r||e.name!==n)&&this.updateHref()}render(){let{kind:e,title:t=e,story:r,name:a=r,children:n,...s}=this.props,{href:i}=this.state;return o.createElement("a",{href:i,onClick:c=>j(c,this.handleClick),...s},n)}};E.defaultProps={children:void 0};var B=E;const y=({flags:e,children:t})=>{const[r,a]=p.useState(),n=Object.fromEntries(Array.from(d.flags.keys()).map(s=>[s,!0]));return p.useEffect(()=>{if(e||a(n),e){for(const[s,i]of Object.entries(e))d.flags.set(s,i);a(d.flags)}},[e]),o.createElement(T,{flags:r??n},o.createElement(L,{type:"feature-flags",text:o.createElement("span",null,"This story is rendered with"," ",o.createElement(B,{title:"IBM Products/Components/FeatureFlags",name:"Docs"},e?Object.keys(e).map((s,i)=>Object.keys(e).length>1?i===Object.keys(e).length-1?s:`${s}, `:s):"all available feature flags")," ","enabled")},t))};y.propTypes={children:k.node};y.__docgenInfo={description:"",methods:[],displayName:"WithFeatureFlags",props:{children:{description:"",type:{name:"node"},required:!1}}};export{y as W};
