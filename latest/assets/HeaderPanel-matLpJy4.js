import{b as v,i as R,d as T,_ as b,k,l as E,P as n}from"./index-CMVdkQrl.js";import{e as P,r as o}from"./index-DtHxqM--.js";import{u as B}from"./index-BLvAv8yb.js";const C=()=>{},w=P.forwardRef(function(H,y){let{children:p,className:f,expanded:t,addFocusListeners:N=!0,onHeaderPanelFocus:c=C,href:u,..._}=H;const s=v(),r=o.useRef(null),$=R([r,y]),g=o.useRef(t!==void 0).current,[F,d]=o.useState(t),L=g?t:F,[i,m]=o.useState(null),S=T(`${s}--header-panel`,{[`${s}--header-panel--expanded`]:L,[f]:!!f}),l={};return N&&(l.onBlur=e=>{var a;!e.currentTarget.contains(e.relatedTarget)&&!((a=i==null?void 0:i.classList)!=null&&a.contains(`${s}--switcher__item-link`))&&(d(!1),m(null),t&&c())},l.onKeyDown=e=>{k(e,E)&&(d(!1),c(),u&&(window.location.href=u))}),B("click",()=>{var h,x;const e=document.activeElement;m(e);const a=p;((h=a==null?void 0:a.type)==null?void 0:h.displayName)==="Switcher"&&!(e!=null&&e.closest(`.${s}--header-panel--expanded`))&&!(e!=null&&e.closest(`.${s}--header__action`))&&!((x=r==null?void 0:r.current)!=null&&x.classList.contains(`${s}--switcher`))&&t&&(d(!1),c())}),P.createElement("div",b({},_,{className:S,ref:$},l),p)});w.propTypes={addFocusListeners:n.bool,children:n.node,className:n.string,expanded:n.bool,href:n.string,onHeaderPanelFocus:n.func};w.displayName="HeaderPanel";export{w as H};
