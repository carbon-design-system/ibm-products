{"version":3,"file":"carousel-XJ-VQo61.js","sources":["../../src/global/js/utils/carousel/swipeEvents.ts","../../src/global/js/utils/carousel/carousel.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nexport const registerSwipeEvents = (\n  carousel: HTMLElement,\n  next: () => void,\n  prev: () => void,\n  destroy: boolean\n) => {\n  const minSwipeDistance = 50;\n\n  // Touch support\n  let touchStartX: number | null = null;\n  let touchEndX: number | null = null;\n\n  let lastScrollTime = 0;\n  const scrollCoolDown = 400;\n\n  let isMouseDown = false;\n  let mouseStartX: number | null = null;\n  let mouseEndX: number | null = null;\n\n  //handlers\n  const touchStartHandler = (e: TouchEvent) => {\n    touchStartX = e.touches[0].clientX;\n  };\n  const touchMoveHandler = (e: TouchEvent) => {\n    touchEndX = e.touches[0].clientX;\n  };\n  const touchEndHandler = () => {\n    if (touchStartX !== null && touchEndX !== null) {\n      const distance = touchStartX - touchEndX;\n      if (Math.abs(distance) > minSwipeDistance) {\n        if (distance > 0) {\n          next();\n        } else {\n          prev();\n        }\n      }\n    }\n    touchStartX = null;\n    touchEndX = null;\n  };\n  const mouseDownHandler = (e: MouseEvent) => {\n    isMouseDown = true;\n    mouseStartX = e.clientX;\n  };\n  const mouseMoveHandler = (e: MouseEvent) => {\n    if (!isMouseDown) {\n      return;\n    }\n    mouseEndX = e.clientX;\n  };\n  const mouseUpHandler = () => {\n    if (isMouseDown && mouseStartX !== null && mouseEndX !== null) {\n      const distance = mouseStartX - mouseEndX;\n      if (Math.abs(distance) > minSwipeDistance) {\n        if (distance > 0) {\n          next();\n        } else {\n          prev();\n        }\n      }\n    }\n    isMouseDown = false;\n    mouseStartX = null;\n    mouseEndX = null;\n  };\n  const wheelHandler = (e: WheelEvent) => {\n    const now = Date.now();\n    if (Math.abs(e.deltaX) > Math.abs(e.deltaY) && Math.abs(e.deltaX) > 20) {\n      e.preventDefault(); // Prevent page from scrolling\n      if (now - lastScrollTime < scrollCoolDown) {\n        return;\n      }\n\n      if (e.deltaX > 0) {\n        next();\n      } else {\n        prev();\n      }\n      lastScrollTime = now;\n    }\n  };\n\n  if (destroy) {\n    carousel.removeEventListener('touchstart', touchStartHandler);\n    carousel.removeEventListener('touchmove', touchMoveHandler);\n    carousel.removeEventListener('touchend', touchEndHandler);\n    carousel.removeEventListener('mousedown', mouseDownHandler);\n    carousel.removeEventListener('mousemove', mouseMoveHandler);\n    carousel.removeEventListener('mouseup', mouseUpHandler);\n    carousel.removeEventListener('wheel', wheelHandler);\n  }\n\n  carousel.addEventListener('touchstart', touchStartHandler);\n\n  carousel.addEventListener('touchmove', touchMoveHandler);\n\n  carousel.addEventListener('touchend', touchEndHandler);\n\n  // Mouse drag support\n\n  carousel.addEventListener('mousedown', mouseDownHandler);\n\n  carousel.addEventListener('mousemove', mouseMoveHandler);\n\n  carousel.addEventListener('mouseup', mouseUpHandler);\n\n  // Wheel gesture support\n\n  carousel.addEventListener('wheel', wheelHandler);\n};\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  InitCarousel,\n  CarouselResponse,\n  CarouselStackHistory,\n  Config,\n} from './types';\nimport { registerSwipeEvents } from './swipeEvents';\n\n/**\n * Initializes a carousel with the given configuration.\n * @param carouselContainer - The HTMLElement representing the carousel container.\n * @param config - Optional configuration object.\n * @returns An object containing methods to control the carousel.\n */\nexport const initCarousel = (\n  carouselContainer: HTMLElement,\n  config?: Config\n): InitCarousel => {\n  const prefix = 'carousel';\n  let viewIndexStack = [0];\n  let previousViewIndexStack = [0];\n  const refs: Record<number, HTMLElement | null> = {};\n\n  const minHeight = 4; // 10 rem\n\n  const {\n    onViewChangeStart,\n    onViewChangeEnd,\n    excludeSwipeSupport,\n    useMaxHeight,\n  } = config || {};\n\n  /**\n   * Registers an HTMLElement at a specific index in the refs array.\n   *\n   * @param {number} index - The index at which to register the HTMLElement.\n   * @param {HTMLElement} ref - The HTMLElement to register.\n   *\n   * @example\n   * registerRef(0, document.getElementById('myElement'));\n   */\n  const registerRef = (index: number, ref: HTMLElement) => {\n    refs[index] = ref;\n  };\n\n  /**\n   * Wraps all child elements of a given container into a new div with the specified class.\n   * If an element with the specified class already exists as a child of the container, the function does nothing.\n   *\n   * @param {HTMLElement} container - The container element to wrap child elements of.\n   * @param {string} wrapperClass - The class name to apply to the new wrapper div.\n   * @returns {void}\n   */\n  const wrapAllItems = (container: HTMLElement, wrapperClass: string) => {\n    if (container.querySelector(`.${wrapperClass}`)) {\n      return;\n    }\n\n    const wrapper = document.createElement('div');\n    wrapper.classList.add(`${wrapperClass}`);\n    while (container.firstChild) {\n      wrapper.appendChild(container.firstChild);\n    }\n    container.appendChild(wrapper);\n  };\n\n  const getHistory = () => {\n    return viewIndexStack.map((id) => ({\n      id,\n      elem: refs[id],\n    }));\n  };\n  /**\n   * Retrieves the current carousel response based on the view index stack and reference objects.\n   * @returns {CarouselResponse} - An object containing carousel response details.\n   */\n  const getCallbackResponse = (): CarouselResponse => {\n    const totalRefs = Object.keys(refs).length;\n    const lastElementRef = refs[totalRefs - 1];\n    const historicalData = getHistory();\n    return {\n      currentIndex: viewIndexStack[0],\n      lastIndex: parseInt(\n        lastElementRef?.dataset.index || viewIndexStack[0].toString(),\n        10\n      ),\n      totalViews: totalRefs,\n      historyStack: historicalData as CarouselStackHistory[],\n    };\n  };\n\n  /**\n   * Handles the start of a transition in the application.\n   * This function is responsible for capturing the current state of the view index stack\n   * and invoking a callback function if it exists.\n   *\n   * @function handleTransitionStart\n   * @returns {void}\n   */\n  const handleTransitionStart = () => {\n    previousViewIndexStack = [...viewIndexStack];\n    const callbackData = getCallbackResponse();\n    onViewChangeStart?.(callbackData);\n  };\n\n  /**\n   * Handles the 'transitionend' event for a given element.\n   * This function checks if the element has a 'data-index' attribute and if its value matches the current view index.\n   * If both conditions are met, it calls the 'onViewChangeEnd' callback with the response from 'getCallbackResponse'.\n   *\n   * @param {HTMLElement | null} el - The element to handle the 'transitionend' event for.\n   * @returns {void}\n   */\n  const handleTransitionEnd = (el?: HTMLElement | null) => {\n    if (!el) {\n      return;\n    }\n    const tmpElementIndex = el.dataset.index;\n    if (\n      tmpElementIndex &&\n      viewIndexStack[0] === parseInt(tmpElementIndex, 10)\n    ) {\n      const callbackData = getCallbackResponse();\n      onViewChangeEnd?.(callbackData);\n    }\n  };\n\n  /**\n   * A utility function to sanitize an index value.\n   * This function ensures the index stays within the bounds of the refs array.\n   *\n   * @param {number} idx - The index to be sanitized.\n   * @returns {number} - The sanitized index.\n   */\n  const sanitizeIndex = (idx: number) => {\n    const floorVal = 0;\n    const ceilVal = Object.keys(refs).length - 1;\n    return Math.max(floorVal, Math.min(idx, ceilVal));\n  };\n\n  /**\n   * Handles the 'transitionend' event for a given element.\n   * This function checks if the element has a 'data-index' attribute and if its value matches the current view index.\n   * If both conditions are met, it calls the 'onViewChangeEnd' callback with the response from 'getCallbackResponse'.\n   * @returns {void}\n   */\n  const transitionToViewIndex = (idx: number): void => {\n    const sanitizedIndex = sanitizeIndex(idx);\n    if (viewIndexStack[0] !== sanitizedIndex) {\n      handleTransitionStart();\n      viewIndexStack = [sanitizedIndex, ...viewIndexStack];\n      performAnimation(false);\n    }\n  };\n\n  const transitionComplete = (ref: HTMLElement) => {\n    handleTransitionEnd(ref);\n  };\n  /**\n   * Attaches class names to an HTMLElement based on given conditions.\n   *\n   * @param {HTMLElement} viewItem - The HTML element to which class names will be added.\n   * @param {boolean} isInViewStack - Indicates if the view item is in the view stack.\n   * @param {boolean} isActive - Indicates if the view item is active.\n   * @param {boolean} isBeingRecycledOut - Indicates if the view item is being recycled out.\n   * @param {boolean} isBeingRecycledIn - Indicates if the view item is being recycled in.\n   * @returns {void}\n   */\n  const attachClassNames = (\n    viewItem: HTMLElement,\n    isInViewStack: boolean,\n    isActive: boolean,\n    isBeingRecycledOut: boolean,\n    isBeingRecycledIn: boolean\n  ) => {\n    viewItem.classList.add(`${prefix}__view`);\n\n    viewItem.classList.toggle(\n      `${prefix}__view-in-stack`,\n      isInViewStack && !isActive\n    );\n    viewItem.classList.toggle(\n      `${prefix}__view-active`,\n      isInViewStack && isActive\n    );\n\n    if (isBeingRecycledIn && !isBeingRecycledOut) {\n      viewItem.classList.add(`${prefix}__view-recycle-in`);\n    }\n    if (!isBeingRecycledIn && isBeingRecycledOut) {\n      viewItem.classList.add(`${prefix}__view-recycle-out`);\n    }\n  };\n\n  const removeReCycleClasses = (viewItem: HTMLElement) => {\n    viewItem.classList.remove(\n      `${prefix}__view-recycle-in`,\n      `${prefix}__view-recycle-out`\n    );\n  };\n\n  const remToPx = (rem: number) => {\n    return (\n      rem * parseFloat(getComputedStyle(document.documentElement).fontSize)\n    );\n  };\n\n  /**\n   * Updates the height of the items wrapper in a carousel based on the smallest item height and a threshold height.\n   * This function ensures that the items wrapper does not have a height smaller than the threshold, adjusting the item height if necessary.\n   *\n   * @param {number} itemHeightSmallest - The smallest height of an item in pixels.\n   */\n  const updateHeightForWrapper = (itemHeightSmallest: number) => {\n    const thresholdHeight = remToPx(minHeight);\n    const containerHeight = carouselContainer.clientHeight;\n\n    if (containerHeight < thresholdHeight) {\n      if (itemHeightSmallest < thresholdHeight) {\n        itemHeightSmallest = thresholdHeight;\n      }\n\n      const itemsWrapper = carouselContainer.querySelector(\n        `.${prefix}__itemsWrapper`\n      ) as HTMLElement;\n      if (itemsWrapper) {\n        itemsWrapper.style.blockSize = `${itemHeightSmallest}px`;\n      }\n    }\n  };\n\n  /**\n   * Performs animation on view items based on their state in the view index stack.\n   * @param {boolean} isInitial - A flag indicating if this is the initial animation.\n   */\n  const performAnimation = (isInitial: boolean) => {\n    let itemHeightSmallest = 0;\n    let itemHeightMaximum = 0;\n\n    Array.from(viewItems).forEach((viewItem: HTMLElement, index) => {\n      const stackIndex = viewIndexStack.findIndex((idx) => idx === index);\n      const stackIndexInstanceCount = previousViewIndexStack.filter(\n        (viIdx) => viIdx === index\n      ).length;\n\n      const isBeingRecycledOut =\n        previousViewIndexStack.length > viewIndexStack.length &&\n        previousViewIndexStack[0] === index &&\n        stackIndexInstanceCount > 0;\n\n      const isBeingRecycledIn =\n        previousViewIndexStack.length < viewIndexStack.length &&\n        viewIndexStack[0] === index &&\n        stackIndexInstanceCount > 0;\n\n      const isInViewStack = stackIndex > -1;\n      const isActive = index === viewIndexStack[0];\n\n      attachClassNames(\n        viewItem,\n        isInViewStack,\n        isActive,\n        isBeingRecycledOut,\n        isBeingRecycledIn\n      );\n\n      if (isInitial) {\n        registerRef(index, viewItem);\n\n        setTimeout(() => {\n          if (useMaxHeight) {\n            const heights: number[] = Array.from(viewItems).map(\n              (viewItem) => viewItem.scrollHeight\n            );\n            itemHeightMaximum = Math.max(...heights);\n\n            viewItem.style.position = 'absolute';\n            updateHeightForWrapper(itemHeightMaximum);\n          } else {\n            if (\n              !itemHeightSmallest ||\n              (viewItem.offsetHeight < itemHeightSmallest &&\n                itemHeightSmallest > remToPx(minHeight))\n            ) {\n              itemHeightSmallest = viewItem.offsetHeight;\n            }\n            viewItem.style.position = 'absolute';\n            updateHeightForWrapper(itemHeightSmallest);\n          }\n        });\n\n        const listener = (e: Event) => {\n          removeReCycleClasses(viewItem);\n          if (e.target === refs[viewIndexStack[0]]) {\n            //transitionend will trigger twice for pervious card and current card\n            transitionComplete(viewItem);\n          }\n        };\n        // store reference on the element for later removal\n        (viewItem as any)._carouselListener = listener;\n\n        viewItem.addEventListener('animationend', listener);\n        viewItem.addEventListener('transitionend', listener);\n\n        viewItem.setAttribute('data-index', index.toString());\n      }\n    });\n\n    if (isInitial) {\n      handleTransitionEnd(Array.from(viewItems)[0]);\n    }\n  };\n\n  /**\n   * A utility function to navigate to the next view in the stack.\n   * This function increments the current view index and transitions to the new index.\n   *\n   * @returns {void} - This function does not return any value.\n   */\n  const navigateNext = () => {\n    const targetViewIndex = viewIndexStack[0] + 1;\n    transitionToViewIndex(targetViewIndex);\n  };\n  /**\n   * Navigates to the previous view in the view stack.\n   * @function navigatePrev\n   * @description This function checks if there is a previous view in the stack. If so, it triggers a transition start, removes the current view from the stack, and performs an animation to transition to the previous view.\n   * @returns {void} - This function does not return a value.\n   */\n  const navigatePrev = () => {\n    if (viewIndexStack.length - 1 >= 1) {\n      handleTransitionStart();\n      viewIndexStack = viewIndexStack.slice(1);\n      performAnimation(false);\n    }\n  };\n\n  /**\n   * A function that transitions the view to a specified index.\n   *\n   * @param {number} index - The index to transition to.\n   * @returns {void} - This function does not return a value.\n   */\n  const goToIndex = (index: number) => {\n    transitionToViewIndex(index);\n  };\n\n  /**\n   * Retrieves the currently active item and its index from the view index stack and references.\n   * @returns An object containing the index and the corresponding item reference.\n   */\n  const getActiveItem = () => {\n    return {\n      index: viewIndexStack[0],\n      item: refs[viewIndexStack[0]],\n    };\n  };\n\n  /**\n   * Resets the view index stack and performs an animation.\n   *\n   * @returns {void}\n   */\n  const reset = () => {\n    viewIndexStack = [0];\n    performAnimation(false);\n  };\n\n  /**\n   * Removes event listeners for 'animationend' and 'transitionend' events from all elements with references stored in the `refs` object.\n   * Also registers swipe events if `excludeSwipeSupport` is false.\n   */\n  const destroyEvents = () => {\n    Object.values(refs).forEach((el) => {\n      if (el && (el as any)._carouselListener) {\n        el.removeEventListener('animationend', (el as any)._carouselListener);\n        el.removeEventListener('transitionend', (el as any)._carouselListener);\n      }\n    });\n    if (!excludeSwipeSupport) {\n      registerSwipeEvents(carouselContainer, navigateNext, navigatePrev, true);\n    }\n  };\n  /**\n   * Retrieves carousel items from a given container element.\n   * If the container has a 'slot' element, it fetches all elements assigned to that slot.\n   * Otherwise, it fetches all direct children of the container.\n   *\n   * @param {HTMLElement} container - The container element from which to extract carousel items.\n   * @returns {HTMLElement[]} An array of HTMLElements representing the carousel items.\n   *\n   * @example\n   * const carouselContainer = document.querySelector('.carousel-container');\n   * const carouselItems = getCarouselItems(carouselContainer);\n   * console.log(carouselItems); // Logs the carousel items as HTMLElements\n   */\n  const getCarouselItems = (container: HTMLElement): HTMLElement[] => {\n    const slot = container.querySelector('slot') as HTMLSlotElement | null;\n    return slot\n      ? (slot.assignedElements({ flatten: true }) as HTMLElement[])\n      : (Array.from(container.children) as HTMLElement[]);\n  };\n\n  // initialize\n  wrapAllItems(carouselContainer, `${prefix}__itemsWrapper`);\n  const wrapper = carouselContainer.querySelector(`.${prefix}__itemsWrapper`);\n  const viewItems = getCarouselItems(wrapper as HTMLElement);\n\n  carouselContainer.classList.add(`${prefix}__view-stack`);\n  performAnimation(true);\n\n  if (!excludeSwipeSupport) {\n    registerSwipeEvents(carouselContainer, navigateNext, navigatePrev, false);\n  }\n\n  return {\n    next: navigateNext,\n    prev: navigatePrev,\n    reset,\n    goToIndex,\n    getActiveItem,\n    destroyEvents,\n    allViews: refs,\n  };\n};\n"],"names":["registerSwipeEvents","carousel","next","prev","destroy","touchStartX","touchEndX","lastScrollTime","scrollCoolDown","isMouseDown","mouseStartX","mouseEndX","touchStartHandler","e","touchMoveHandler","touchEndHandler","distance","mouseDownHandler","mouseMoveHandler","mouseUpHandler","wheelHandler","now","initCarousel","carouselContainer","config","prefix","viewIndexStack","previousViewIndexStack","refs","minHeight","onViewChangeStart","onViewChangeEnd","excludeSwipeSupport","useMaxHeight","registerRef","index","ref","wrapAllItems","container","wrapperClass","wrapper","getHistory","id","getCallbackResponse","totalRefs","lastElementRef","historicalData","handleTransitionStart","callbackData","handleTransitionEnd","el","tmpElementIndex","sanitizeIndex","idx","ceilVal","transitionToViewIndex","sanitizedIndex","performAnimation","transitionComplete","attachClassNames","viewItem","isInViewStack","isActive","isBeingRecycledOut","isBeingRecycledIn","removeReCycleClasses","remToPx","rem","updateHeightForWrapper","itemHeightSmallest","thresholdHeight","itemsWrapper","isInitial","itemHeightMaximum","viewItems","stackIndex","stackIndexInstanceCount","viIdx","heights","listener","navigateNext","targetViewIndex","navigatePrev","goToIndex","getActiveItem","reset","destroyEvents","getCarouselItems","slot"],"mappings":"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"}