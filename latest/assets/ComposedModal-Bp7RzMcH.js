import{b as q,c as B,_ as D,C as le,l as ce,u as ie,i as J,E as ue,T as de}from"./index-CQ0F2wkl.js";import{R as n,r as y}from"./index-BwDkhjyp.js";import{r as Q}from"./index-DcAOwtUU.js";import{P as e}from"./index-Dk74W0Oi.js";import{L as V}from"./index-CvBNEhOa.js";import{I as me,B as _,n as L,k as fe}from"./settings-xiNX1vM3.js";import{B as pe}from"./ButtonSet-UZItGUcq.js";import{I as ye}from"./InlineLoading-Dllsw8qU.js";import{m as ge}from"./mergeRefs-CTUecegF.js";import{r as be}from"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import{w as Ce,e as he,a as Ne}from"./wrapFocus-0D7LLA53.js";import{c as Ee}from"./events-OVwOsPzJ.js";const X=n.forwardRef(function(o,i){let{buttonOnClick:u,children:m,className:$,closeClassName:C,closeIconClassName:h,closeModal:l,iconDescription:d="Close",label:f,labelClassName:p,title:s,titleClassName:F,...N}=o;const a=q();function S(I){l==null||l(I),u==null||u(I)}const T=B(`${a}--modal-header`,$),x=B(`${a}--modal-header__label ${a}--type-delta`,p),k=B(`${a}--modal-header__heading ${a}--type-beta`,F),c=B(`${a}--modal-close`,C),E=B(`${a}--modal-close__icon`,h);return n.createElement("div",D({className:T},N,{ref:i}),f&&n.createElement("h2",{className:x},f),s&&n.createElement("h2",{className:k},s),m,n.createElement("div",{className:`${a}--modal-close-button`},n.createElement(me,{className:c,label:d,onClick:S,"aria-label":d,align:"left"},n.createElement(le,{size:20,"aria-hidden":"true",tabIndex:"-1",className:E}))))});X.propTypes={buttonOnClick:e.func,children:e.node,className:e.string,closeClassName:e.string,closeIconClassName:e.string,closeModal:e.func,iconDescription:e.string,label:e.node,labelClassName:e.string,title:e.node,titleClassName:e.string};function Y(r){let{secondaryButtons:o,secondaryButtonText:i,secondaryClassName:u,closeModal:m,onRequestClose:$,disabled:C}=r;function h(l){m(l),$(l)}return Array.isArray(o)&&o.length<=2?o.map((l,d)=>{let{buttonText:f,onClick:p}=l;return n.createElement(_,{key:`${f}-${d}`,className:u,kind:"secondary",onClick:p||h},f)}):i?n.createElement(_,{disabled:C,className:u,onClick:h,kind:"secondary"},i):null}Y.propTypes={closeModal:e.func,disabled:e.bool,onRequestClose:e.func,secondaryButtonText:e.string,secondaryButtons:(r,o,i)=>{if(r.secondaryButtons){if(!Array.isArray(r.secondaryButtons)||r.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const u={buttonText:e.node,onClick:e.func};r[o].forEach(m=>{e.checkPropTypes(u,m,o,i)})}return null},secondaryClassName:e.string};const Z=n.forwardRef(function(o,i){let{children:u,className:m,closeModal:$=L,danger:C,inputref:h,onRequestClose:l=L,onRequestSubmit:d=L,primaryButtonDisabled:f,primaryButtonText:p,primaryClassName:s,secondaryButtonText:F,secondaryButtons:N,secondaryClassName:a,loadingStatus:S="inactive",loadingDescription:T,loadingIconDescription:x,onLoadingSuccess:k=L,...c}=o;const E=q(),I=B(`${E}--modal-footer`,m,Array.isArray(N)&&N.length===2?`${E}--modal-footer--three-button`:null),A=B(s,S!=="inactive"?`${E}--btn--loading`:null),v=S!=="inactive",g={closeModal:$,secondaryButtons:N,secondaryButtonText:F,secondaryClassName:a,onRequestClose:l,disabled:v};return n.createElement(pe,D({className:I},c,{ref:i,"aria-busy":v}),n.createElement(Y,g),p&&n.createElement(_,{onClick:d,className:A,disabled:v||f,kind:C?"danger":"primary",ref:h},S==="inactive"?p:n.createElement(ye,{status:S,description:T,iconDescription:x,className:`${E}--inline-loading--btn`,onSuccess:k})),u)});Z.propTypes={children:e.node,className:e.string,closeModal:e.func,danger:e.bool,inputref:e.oneOfType([e.func,e.shape({current:e.any})]),loadingDescription:e.string,loadingIconDescription:e.string,loadingStatus:e.oneOf(["inactive","active","finished","error"]),onLoadingSuccess:e.func,onRequestClose:e.func,onRequestSubmit:e.func,primaryButtonDisabled:e.bool,primaryButtonText:e.string,primaryClassName:e.string,secondaryButtonText:e.string,secondaryButtons:(r,o,i)=>{if(r.secondaryButtons){if(!Array.isArray(r.secondaryButtons)||r.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const u={buttonText:e.node,onClick:e.func};r[o].forEach(m=>{e.checkPropTypes(u,m,o,i)})}return null},secondaryClassName:e.string};function U(r,o,i){r.classList.contains(o)===!i&&r.classList[i?"add":"remove"](o)}const Be=n.forwardRef(function(o,i){let{className:u,children:m,hasForm:$,hasScrollingContent:C,...h}=o;const l=q(),d=y.useRef(null),[f,p]=y.useState(!1),s=B({[`${l}--modal-content`]:!0,[`${l}--modal-content--with-form`]:$,[`${l}--modal-scroll-content`]:C||f},u);ce(()=>{d.current&&p(d.current.scrollHeight>d.current.clientHeight);function N(){d.current&&p(d.current.scrollHeight>d.current.clientHeight)}const a=fe(N,200);return window.addEventListener("resize",a),()=>{a.cancel(),window.removeEventListener("resize",a)}},[]);const F=C||f?{tabIndex:0,role:"region"}:{};return n.createElement(V,D({className:s},F,h,{ref:ge(d,i)}),m)});Be.propTypes={"aria-label":be("hasScrollingContent",e.string),children:e.node,className:e.string,hasForm:e.bool,hasScrollingContent:e.bool};const $e=n.forwardRef(function(o,i){var G;let{["aria-labelledby"]:u,["aria-label"]:m,children:$,className:C,containerClassName:h,danger:l,isFullWidth:d,onClose:f,onKeyDown:p,open:s,preventCloseOnClickOutside:F,selectorPrimaryFocus:N="[data-modal-primary-focus]",selectorsFloatingMenus:a,size:S,launcherButtonRef:T,slug:x,...k}=o;const c=q(),[E,I]=y.useState(!!s),[A,v]=y.useState(!!s),g=y.useRef(null),H=y.useRef(null),z=y.useRef(null),W=y.useRef(null),O=ie("enable-experimental-focus-wrap-without-sentinels");y.useEffect(()=>{s!==A&&(I(!!s),v(!!s),U(document.body,`${c}--body--with-modal-open`,!!s))},[s,A,c]),y.useEffect(()=>()=>{U(document.body,`${c}--body--with-modal-open`,!1)},[]);function ee(t){t.stopPropagation(),J(t,ue)&&P(t),O&&s&&J(t,de)&&g.current&&Ce({containerNode:g.current,currentActiveNode:t.target,event:t}),p==null||p(t)}function te(t){const b=t.target;t.stopPropagation(),!F&&!he(b,a)&&g.current&&!g.current.contains(b)&&P(t)}function ne(t){let{target:b,relatedTarget:M}=t;if(s&&M&&b&&g.current){const{current:R}=g,{current:w}=z,{current:re}=W;Ne({bodyNode:R,startTrapNode:w,endTrapNode:re,currentActiveNode:M,oldActiveNode:b,selectorsFloatingMenus:a==null?void 0:a.filter(Boolean)})}}function P(t){(!f||f(t)!==!1)&&I(!1)}const oe=B(`${c}--modal`,{"is-visible":E,[`${c}--modal--danger`]:l,[`${c}--modal--slug`]:x},C),se=B(`${c}--modal-container`,S&&`${c}--modal-container--${S}`,d&&`${c}--modal-container--full-width`,h);let j;const ae=n.Children.toArray($).map(t=>{switch(!0){case(Q.isElement(t)&&t.type===n.createElement(X).type):{const b=t;return j=b.props.label,n.cloneElement(b,{closeModal:P})}case(Q.isElement(t)&&t.type===n.createElement(Z).type):{const b=t;return n.cloneElement(b,{closeModal:P,inputref:H,danger:l})}default:return t}});y.useEffect(()=>{!s&&T&&setTimeout(()=>{var t;(t=T==null?void 0:T.current)==null||t.focus()})},[s,T]),y.useEffect(()=>{const t=M=>{const R=M||g.current,w=R?R.querySelector(l?`.${c}--btn--secondary`:N):null;return w||H&&H.current};s&&E&&(M=>{const R=t(M),w=M.querySelector(`.${c}--modal-close`);R?R.focus():!R&&w&&(w==null||w.focus())})(g.current)},[s,N,E]);let K;return x&&((G=x.type)==null?void 0:G.displayName)==="AILabel"&&(K=n.cloneElement(x,{size:"sm"})),n.createElement(V,D({},k,{level:0,role:"presentation",ref:i,"aria-hidden":!s,onBlur:O?()=>{}:ne,onClick:Ee([k==null?void 0:k.onClick,te]),onKeyDown:ee,className:oe}),n.createElement("div",{className:se,role:"dialog","aria-modal":"true","aria-label":m||j,"aria-labelledby":u},!O&&n.createElement("button",{type:"button",ref:z,className:`${c}--visually-hidden`},"Focus sentinel"),n.createElement("div",{ref:g,className:`${c}--modal-container-body`},K,ae),!O&&n.createElement("button",{type:"button",ref:W,className:`${c}--visually-hidden`},"Focus sentinel")))});$e.propTypes={"aria-label":e.string,"aria-labelledby":e.string,children:e.node,className:e.string,containerClassName:e.string,danger:e.bool,isFullWidth:e.bool,launcherButtonRef:e.oneOfType([e.func,e.shape({current:e.any})]),onClose:e.func,onKeyDown:e.func,open:e.bool,preventCloseOnClickOutside:e.bool,selectorPrimaryFocus:e.string,selectorsFloatingMenus:e.arrayOf(e.string.isRequired),size:e.oneOf(["xs","sm","md","lg"]),slug:e.node};export{$e as C,X as M,Be as a,Z as b};
