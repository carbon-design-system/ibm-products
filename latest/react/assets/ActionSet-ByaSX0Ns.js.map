{"version":3,"file":"ActionSet-ByaSX0Ns.js","sources":["../../src/components/ActionSet/ActionSet.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2021, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Carbon and package components we use.\nimport { Button, ButtonSet, InlineLoading } from '@carbon/react';\n// Import portions of React that are needed.\nimport React, { ComponentProps, PropsWithChildren } from 'react';\nimport { allPropTypes, prepareProps } from '../../global/js/utils/props-helper';\n\nimport { ButtonProps } from '@carbon/react';\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pkg } from '../../settings';\nimport { ButtonKind } from '@carbon/react';\nimport pconsole from '../../global/js/utils/pconsole';\n\nconst blockClass = `${pkg.prefix}--action-set`;\nconst componentName = 'ActionSet';\n\nexport const ButtonSizes = ['sm', 'md', 'lg', 'xl', '2xl'] as const;\n\nexport type ButtonSize = (typeof ButtonSizes)[number];\n\ntype ActionSetButtonProps = ComponentProps<typeof Button>;\n\nconst ActionSetButton = React.forwardRef(\n  (\n    {\n      // The component props, in alphabetical order (for consistency).\n      className,\n      disabled,\n      kind,\n      label,\n      loading,\n      isExpressive = true,\n      // Collect any other property values passed in.\n      ...rest\n    }: PropsWithChildren<ActionSetButtonProps>,\n    ref\n  ) => (\n    <Button\n      {\n        // Pass through any other property values as HTML attributes.\n        ...rest\n      }\n      isExpressive={isExpressive}\n      className={cx(className, [\n        `${blockClass}__action-button`,\n        {\n          [`${blockClass}__action-button--ghost`]:\n            kind === 'ghost' || kind === 'danger--ghost',\n          [`${blockClass}__action-button--expressive`]: isExpressive,\n        },\n      ])}\n      disabled={disabled || loading || false}\n      {...{ kind, ref }}\n    >\n      {label}\n      {loading && <InlineLoading />}\n    </Button>\n  )\n);\n\nActionSetButton.displayName = 'ActionSetButton';\n\nActionSetButton.propTypes = {\n  /**@ts-ignore*/\n  ...Button.PropTypes,\n  kind: PropTypes.oneOf([\n    'ghost',\n    'danger--ghost',\n    'secondary',\n    'danger',\n    'primary',\n  ]),\n  label: PropTypes.string,\n  loading: PropTypes.bool,\n};\n\nconst defaultKind = 'primary';\n\nconst willStack = (size, numberOfActions) =>\n  size === 'sm' || (size === 'md' && numberOfActions > 2);\n\n// Default values for props\nconst defaults = {\n  size: 'md',\n};\n\nexport interface ActionSetProps {\n  /**\n   * The action buttons to show. Each action is specified as an object\n   * representation of a Carbon button.\n   *\n   * See https://react.carbondesignsystem.com/?path=/docs/components-button--default#component-api\n   */\n  actions: ButtonProps<React.ElementType>[];\n\n  /**\n   * The size of buttons to use for the actions. The allowed values are\n   * those for the size prop of carbon Button. If this prop is specified, all\n   * the buttons will be set to this size, overriding any 'size' values (if any)\n   * supplied in the actions array (if any).\n   */\n  buttonSize?: ButtonSize;\n  /**\n   * An optional class or classes to be added to the outermost element.\n   */\n  className?: string;\n\n  /**\n   * The size of the action set. Different button arrangements are used at\n   * different sizes, to make best use of the available space.\n   */\n  size?: ButtonSize;\n}\n\nexport const validateActionSetProps = ({ actions, size }) => {\n  if (actions && actions.length) {\n    const problems = [] as string[];\n\n    const stacking = willStack(size, actions.length);\n\n    const countActions = (kind: ButtonKind) =>\n      actions.filter(\n        (action: ButtonProps<React.ElementType>) =>\n          (action.kind || defaultKind) === kind\n      ).length;\n\n    const primaryActions = countActions('primary');\n    const secondaryActions = countActions('secondary');\n    const dangerActions = countActions('danger');\n    const ghostActions = countActions('ghost') + countActions('danger--ghost');\n\n    if (stacking && actions.length > 3) {\n      problems.push(\n        `you cannot have more than three actions in this size of ${componentName}`\n      );\n    }\n\n    if (actions.length > 4) {\n      problems.push(\n        `you cannot have more than four actions in a ${componentName}`\n      );\n    }\n    if (primaryActions > 1) {\n      problems.push(\n        `you cannot have more than one 'primary' action in a ${componentName}`\n      );\n    }\n\n    if (ghostActions > 1) {\n      problems.push(\n        `you cannot have more than one 'ghost' action in a ${componentName}`\n      );\n    }\n\n    if (stacking && actions.length > 1 && ghostActions > 0) {\n      problems.push(\n        `you cannot have a 'ghost' button in conjunction with other action types in this size of ${componentName}`\n      );\n    }\n\n    if (\n      actions.length >\n      primaryActions + secondaryActions + dangerActions + ghostActions\n    ) {\n      problems.push(\n        `you can only have 'primary', 'danger', 'secondary', 'ghost' and 'danger--ghost' buttons in a ${componentName}`\n      );\n    }\n    return problems.length > 0\n      ? pconsole.error(\n          `Invalid prop \\`actions\\` supplied to \\`${componentName}\\`: ${problems.join(\n            ', and '\n          )}.`\n        )\n      : null;\n  }\n};\n\n/**\n * An ActionSet presents a set of action buttons, constructed from bundles\n * of prop values and applying some layout rules. When the size is 'sm'\n * the buttons are stacked, and should only include primary and secondary\n * kinds. When the size is 'md' the buttons are stacked if there are three or\n * more. When the size is 'md' or 'lg', two buttons share the horizontal space.\n * When the size is 'lg', three or more buttons use a quarter of the available\n * horizontal space, and if the size is 'xlg' or 'max' the buttons always use\n * a quarter of the available horizontal space. If there is a ghost button,\n * it appears at the left side. If there is a primary button it appears at the\n * right.\n */\nexport const ActionSet = React.forwardRef<HTMLDivElement, ActionSetProps>(\n  (props, ref) => {\n    const {\n      actions,\n      buttonSize,\n      className,\n      size = defaults.size as ButtonSize,\n      ...rest\n    } = props;\n    validateActionSetProps({ actions, size });\n    const buttons = (actions && actions.slice?.(0)) || [];\n\n    // We stack the buttons in a sm set, or if there are three or more in a md set.\n    const stacking = willStack(size, buttons.length);\n\n    // Order of button kinds: ghost first, then danger--ghost, then most other types,\n    // then danger, and finally primary\n    const buttonOrder = (kind) =>\n      ({\n        ghost: 1,\n        'danger--ghost': 2,\n        danger: 4,\n        primary: 5,\n      })[kind] ?? 3;\n\n    // order the actions with ghost/ghost-danger buttons first and primary/danger buttons last\n    // (or the opposite way if we're stacking)\n    buttons.sort(\n      (action1, action2) =>\n        (buttonOrder(action1.kind || defaultKind) -\n          buttonOrder(action2.kind || defaultKind)) *\n        (stacking ? -1 : 1)\n    );\n\n    return (\n      <ButtonSet\n        {\n          // Pass through any other property values as HTML attributes.\n          ...rest\n        }\n        className={cx(\n          blockClass,\n          className,\n          {\n            [`${blockClass}--row-single`]: !stacking && buttons.length === 1,\n            [`${blockClass}--row-double`]: !stacking && buttons.length === 2,\n            [`${blockClass}--row-triple`]: !stacking && buttons.length === 3,\n            [`${blockClass}--row-quadruple`]: !stacking && buttons.length >= 4,\n            [`${blockClass}--stacking`]: stacking,\n          },\n          `${blockClass}--${size}`\n        )}\n        ref={ref}\n        role=\"presentation\"\n        stacked={stacking}\n      >\n        {buttons.map((action, index) => {\n          const actionProps = prepareProps(action, ['key']);\n          return (\n            <ActionSetButton\n              key={action.key || index}\n              {...actionProps}\n              size={buttonSize}\n            />\n          );\n        })}\n      </ButtonSet>\n    );\n  }\n);\n\nActionSet.displayName = componentName;\n\n/**\n * A validator function to help validate the actions supplied for a particular\n * size of component. When the size is sm, or md with three actions, the\n * buttons will be stacked and a maximum of three buttons is applied with no\n * ghosts unless the ghost is the only button. Otherwise a maximum of four\n * buttons with a maximum of one ghost is applied. In either case, a maximum\n * of one primary button is allowed.\n * @param sizeFn An optional function which will be passed all the props and\n * returns the size that the component should be treated as being: if not\n * provided, a 'size' prop is used to determine the size of the component.\n * @returns null if the actions meet the requirements, or an Error object with\n * an explanatory message.\n */\n\nActionSet.propTypes = {\n  /**\n   * The action buttons to show. Each action is specified as an\n   * object with optional fields 'label' to supply the button label, 'kind'\n   * to select the button kind (must be 'primary', 'secondary' or 'ghost'),\n   * 'loading' to display a loading indicator, and 'onClick' to receive\n   * notifications when the button is clicked. Additional fields in the object\n   * will be passed to the Button component, and these can include 'disabled',\n   * 'ref', 'className', and any other Button props. Any other fields in the\n   * object will be passed through to the button element as HTML attributes.\n   *\n   * See https://react.carbondesignsystem.com/?path=/docs/components-button--default#component-api\n   */\n  actions: allPropTypes([\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        /**@ts-ignore*/\n        ...Button.propTypes,\n        kind: PropTypes.oneOf([\n          'ghost',\n          'danger--ghost',\n          'secondary',\n          'danger',\n          'primary',\n        ]),\n        label: PropTypes.string,\n        loading: PropTypes.bool,\n        // we duplicate this Button prop to improve the DocGen here\n        /**@ts-ignore*/\n        onClick: Button.propTypes.onClick,\n      })\n    ),\n  ]),\n\n  /**\n   * The size of buttons to use for the actions. The allowed values are\n   * those for the size prop of carbon Button. If this prop is specified, all\n   * the buttons will be set to this size, overriding any 'size' values (if any)\n   * supplied in the actions array (if any).\n   */\n  /**@ts-ignore*/\n  buttonSize: Button.propTypes.size,\n\n  /**\n   * An optional class or classes to be added to the outermost element.\n   */\n  className: PropTypes.string,\n\n  /**\n   * The size of the action set. Different button arrangements are used at\n   * different sizes, to make best use of the available space.\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg', 'xl', '2xl']),\n};\n"],"names":["blockClass","pkg","componentName","ActionSetButton","React","className","disabled","kind","label","loading","isExpressive","rest","ref","Button","cx","InlineLoading","PropTypes","defaultKind","willStack","size","numberOfActions","defaults","validateActionSetProps","actions","problems","stacking","countActions","action","primaryActions","secondaryActions","dangerActions","ghostActions","pconsole","ActionSet","props","buttonSize","buttons","buttonOrder","action1","action2","ButtonSet","index","actionProps","prepareProps","allPropTypes"],"mappings":"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"}