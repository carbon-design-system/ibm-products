import{r as C,e as q}from"./index-DtHxqM--.js";import{w as K}from"./wait-CTNFjQS8.js";import{d as V,P as y}from"./index-CGLP8AGt.js";import{P as Q,a as W}from"./ProgressIndicator-DMwJbKL-.js";import{S as X,H as Y}from"./index-BgSYd2Cc.js";import"./props-helper-CgskTpCX.js";import{p as Z}from"./settings-xxMXFJdE.js";const x=({previousState:o,currentStep:n,blockClass:l,onMount:a,firstFocusElement:c})=>{C.useEffect(()=>{typeof a=="function"&&a()},[a]),C.useEffect(()=>{const w=async i=>{await K(10),i.focus()};if((o==null?void 0:o.currentStep)!==n&&n>0&&c){const i=document.querySelector(c);i&&w(i)}},[n,o,l,a,c])},ee=({firstIncludedStep:o,lastIncludedStep:n,stepData:l,onPrevious:a,onNext:c,isSubmitDisabled:w,setCurrentStep:i,setIsSubmitting:s,setLoadingPrevious:f=null,loadingPrevious:r=!1,onClose:u,onRequestSubmit:g,componentName:e,currentStep:$,backButtonText:O,cancelButtonText:T,submitButtonText:H,nextButtonText:F,isSubmitting:R,componentBlockClass:A,setCreateComponentActions:N,setModalIsOpen:U,experimentalSecondarySubmit:t,experimentalSecondarySubmitText:b})=>{const p=C.useCallback(()=>{s(!1),i(h=>{var k;do h++;while(!((k=l[h-1])!=null&&k.shouldIncludeStep));return h})},[i,s,l]),_=C.useCallback(()=>{e!=="CreateFullPage"&&f(!1),i(h=>{var k;do h--;while(!((k=l[h-1])!=null&&k.shouldIncludeStep));return h})},[i,l,f,e]);C.useEffect(()=>{const h=()=>{e!=="CreateFullPage"&&i(1),s(!1),u()},k=async()=>{try{const d=await g();d!=null&&d.preventClose||h()}catch(d){s(!1),console.warn(`${e} submit error: ${d}`)}},j=async()=>{if(f==null||f(!0),typeof a=="function")try{await a(),_()}catch(d){console.warn(`${e} onBack error: ${d}`)}else _()},z=async()=>{if(s(!0),typeof c=="function")try{await c(),p()}catch(d){s(!1),console.warn(`${e} onNext error: ${d}`)}else p()},G=async()=>{if(s(!0),typeof c=="function")try{await c(),await k()}catch(d){s(!1),console.warn(`${e} onNext error: ${d}`)}else await k()},J=()=>{typeof(t==null?void 0:t.onClick)=="function"&&t.onClick()};if((l==null?void 0:l.length)>0){const d=[];(l==null?void 0:l.length)>1&&d.push({key:"create-action-button-back",label:O,onClick:j,kind:"secondary",disabled:$===o,loading:r}),d.push({key:"create-action-button-cancel",label:T,onClick:e==="CreateFullPage"?()=>U(!0):h,kind:"ghost"}),b&&!(t!=null&&t.hideSecondarySubmit)&&d.push({key:"create-action-button-experimentalSecondarySubmit",label:b,onClick:J,kind:"secondary",disabled:t==null?void 0:t.disabled}),d.push({key:"create-action-button-submit",label:$<n?F:H,onClick:$<n?z:G,disabled:w,kind:"primary",loading:R,className:`${A}__create-button`}),N(d)}},[o,n,l,c,w,O,T,$,u,F,H,g,R,A,e,p,i,N,s,U,_,a,f,r,t,b])},ne=(o,n)=>{let l=0;return o.forEach((a,c)=>{c+1>n||a.shouldIncludeStep===!1&&(l+=1)}),l},re=({stepsContext:o,stepNumber:n,introStep:l,invalid:a,shouldIncludeStep:c,secondaryLabel:w,title:i})=>{C.useEffect(()=>{o&&o.setStepData(s=>{const f={title:i,secondaryLabel:w,introStep:l,invalid:a,shouldIncludeStep:c},r=s[n-1];if((r==null?void 0:r.title)!==f.title||(r==null?void 0:r.secondaryLabel)!==f.secondaryLabel||(r==null?void 0:r.introStep)!==f.introStep||(r==null?void 0:r.shouldIncludeStep)!==f.shouldIncludeStep||(r==null?void 0:r.invalid)!==f.invalid){const u=[...s];return u[n-1]=f,u}return s})},[c,i,w,l,a,o,n])},le=(o,n)=>{C.useEffect(()=>{o===1&&console.warn(`${n}: ${n}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`)},[o,n])},E=`${Z.prefix}--create-influencer`,I="CreateInfluencer",P=({className:o,currentStep:n,onClickStep:l,stepData:a,title:c})=>{const w=(s,f)=>{const r=[];return s.forEach((u,g)=>{var e;((e=s[g])==null?void 0:e[f])===!1&&g<=n-1&&r.push(u)}),r.length},i=()=>{var u,g;const s=a==null?void 0:a.filter(e=>!(e!=null&&e.introStep)),f=s==null?void 0:s.filter(e=>e==null?void 0:e.shouldIncludeStep),r=w(a,"shouldIncludeStep")||0;return q.createElement(X,{className:`${E}__left-nav`},c&&q.createElement(Y,{className:`${E}__title`},c),n===1&&((u=a[0])!=null&&u.introStep)?null:q.createElement(Q,{currentIndex:(g=a[0])!=null&&g.introStep?n-r-2:n-r-1,spaceEqually:!0,vertical:!0,className:V(`${E}__progress-indicator`),onChange:l},f.map((e,$)=>q.createElement(W,{label:e==null?void 0:e.title,key:$,secondaryLabel:e.secondaryLabel||void 0,invalid:e.invalid}))))};return q.createElement("div",{className:V(E,o)},i())};P.displayName=I;P.propTypes={className:y.string,currentStep:y.number.isRequired,onClickStep:y.func,stepData:y.arrayOf(y.shape({introStep:y.bool,secondaryLabel:y.string,shouldIncludeStep:y.bool,title:y.node})),title:y.string};P.__docgenInfo={description:"",methods:[],displayName:"CreateInfluencer",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},currentStep:{required:!0,tsType:{name:"number"},description:"Provide the current step number.",type:{name:"number"}},onClickStep:{required:!1,tsType:{name:"signature",type:"function",raw:"(step: number) => void",signature:{arguments:[{type:{name:"number"},name:"step"}],return:{name:"void"}}},description:"onChange event for Progress Indicator",type:{name:"func"}},stepData:{required:!1,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:"Provide the Set Data.",type:{name:"arrayOf",value:{name:"shape",value:{introStep:{name:"bool",required:!1},secondaryLabel:{name:"string",required:!1},shouldIncludeStep:{name:"bool",required:!1},title:{name:"node",required:!1}}}}},title:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Title.",type:{name:"string"}}}};const ae=(o,n,l)=>{var a;for(let c=o.length-1;c>=0;c--)if(((a=o[c])==null?void 0:a[n])===l)return c+1;return-1};export{P as C,le as a,ee as b,re as c,ne as g,ae as l,x as u};
