import{u as D,c as B,_ as q,C as le,h as ce,b as J,E as ie,T as ue}from"./floating-ui.react-C-lGofMW.js";import{R as n,r as y}from"./index-BwDkhjyp.js";import{r as Q}from"./index-DcAOwtUU.js";import{P as e}from"./index-Dk74W0Oi.js";import{L as V}from"./index-CUiOlLtv.js";import{I as de,B as _,n as L,k as me}from"./settings-CljJQLyl.js";import{B as fe}from"./ButtonSet--6H_yrng.js";import{I as pe}from"./InlineLoading-CCyGWQ0L.js";import{m as ye}from"./mergeRefs-CTUecegF.js";import{r as ge}from"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import{w as be,e as Ce,a as he}from"./wrapFocus-DMN3GZJC.js";import{u as Ne}from"./index-xbyQ_51k.js";import{c as Ee}from"./events-B5D95Jtx.js";const X=n.forwardRef(function(o,l){let{buttonOnClick:c,children:m,className:$,closeClassName:C,closeIconClassName:h,closeModal:i,iconDescription:u="Close",label:f,labelClassName:p,title:s,titleClassName:k,...N}=o;const a=D();function S(R){i==null||i(R),c==null||c(R)}const T=B(`${a}--modal-header`,$),w=B(`${a}--modal-header__label ${a}--type-delta`,p),x=B(`${a}--modal-header__heading ${a}--type-beta`,k),d=B(`${a}--modal-close`,C),E=B(`${a}--modal-close__icon`,h);return n.createElement("div",q({className:T},N,{ref:l}),f&&n.createElement("h2",{className:w},f),s&&n.createElement("h3",{className:x},s),m,n.createElement("div",{className:`${a}--modal-close-button`},n.createElement(de,{className:d,label:u,onClick:S,"aria-label":u,align:"left"},n.createElement(le,{size:20,"aria-hidden":"true",tabIndex:"-1",className:E}))))});X.propTypes={buttonOnClick:e.func,children:e.node,className:e.string,closeClassName:e.string,closeIconClassName:e.string,closeModal:e.func,iconDescription:e.string,label:e.node,labelClassName:e.string,title:e.node,titleClassName:e.string};function Y(r){let{secondaryButtons:o,secondaryButtonText:l,secondaryClassName:c,closeModal:m,onRequestClose:$,disabled:C}=r;function h(i){m(i),$(i)}return Array.isArray(o)&&o.length<=2?o.map((i,u)=>{let{buttonText:f,onClick:p}=i;return n.createElement(_,{key:`${f}-${u}`,className:c,kind:"secondary",onClick:p||h},f)}):l?n.createElement(_,{disabled:C,className:c,onClick:h,kind:"secondary"},l):null}Y.propTypes={closeModal:e.func,disabled:e.bool,onRequestClose:e.func,secondaryButtonText:e.string,secondaryButtons:(r,o,l)=>{if(r.secondaryButtons){if(!Array.isArray(r.secondaryButtons)||r.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const c={buttonText:e.node,onClick:e.func};r[o].forEach(m=>{e.checkPropTypes(c,m,o,l)})}return null},secondaryClassName:e.string};const Z=n.forwardRef(function(o,l){let{children:c,className:m,closeModal:$=L,danger:C,inputref:h,onRequestClose:i=L,onRequestSubmit:u=L,primaryButtonDisabled:f,primaryButtonText:p,primaryClassName:s,secondaryButtonText:k,secondaryButtons:N,secondaryClassName:a,loadingStatus:S="inactive",loadingDescription:T,loadingIconDescription:w,onLoadingSuccess:x=L,...d}=o;const E=D(),R=B(`${E}--modal-footer`,m,Array.isArray(N)&&N.length===2?`${E}--modal-footer--three-button`:null),v=B(s,S!=="inactive"?`${E}--btn--loading`:null),M=S!=="inactive",g={closeModal:$,secondaryButtons:N,secondaryButtonText:k,secondaryClassName:a,onRequestClose:i,disabled:M};return n.createElement(fe,q({className:R},d,{ref:l,"aria-busy":M}),n.createElement(Y,g),p&&n.createElement(_,{onClick:u,className:v,disabled:M||f,kind:C?"danger":"primary",ref:h},S==="inactive"?p:n.createElement(pe,{status:S,description:T,iconDescription:w,className:`${E}--inline-loading--btn`,onSuccess:x})),c)});Z.propTypes={children:e.node,className:e.string,closeModal:e.func,danger:e.bool,inputref:e.oneOfType([e.func,e.shape({current:e.any})]),loadingDescription:e.string,loadingIconDescription:e.string,loadingStatus:e.oneOf(["inactive","active","finished","error"]),onLoadingSuccess:e.func,onRequestClose:e.func,onRequestSubmit:e.func,primaryButtonDisabled:e.bool,primaryButtonText:e.string,primaryClassName:e.string,secondaryButtonText:e.string,secondaryButtons:(r,o,l)=>{if(r.secondaryButtons){if(!Array.isArray(r.secondaryButtons)||r.secondaryButtons.length!==2)return new Error(`${o} needs to be an array of two button config objects`);const c={buttonText:e.node,onClick:e.func};r[o].forEach(m=>{e.checkPropTypes(c,m,o,l)})}return null},secondaryClassName:e.string};function U(r,o,l){r.classList.contains(o)===!l&&r.classList[l?"add":"remove"](o)}const Be=n.forwardRef(function(o,l){let{className:c,children:m,hasForm:$,hasScrollingContent:C,...h}=o;const i=D(),u=y.useRef(null),[f,p]=y.useState(!1),s=B({[`${i}--modal-content`]:!0,[`${i}--modal-content--with-form`]:$,[`${i}--modal-scroll-content`]:C||f},c);ce(()=>{u.current&&p(u.current.scrollHeight>u.current.clientHeight);function N(){u.current&&p(u.current.scrollHeight>u.current.clientHeight)}const a=me(N,200);return window.addEventListener("resize",a),()=>{a.cancel(),window.removeEventListener("resize",a)}},[]);const k=C||f?{tabIndex:0,role:"region"}:{};return n.createElement(V,q({className:s},k,h,{ref:ye(u,l)}),m)});Be.propTypes={"aria-label":ge("hasScrollingContent",e.string),children:e.node,className:e.string,hasForm:e.bool,hasScrollingContent:e.bool};const $e=n.forwardRef(function(o,l){var G;let{["aria-labelledby"]:c,["aria-label"]:m,children:$,className:C,containerClassName:h,danger:i,isFullWidth:u,onClose:f,onKeyDown:p,open:s,preventCloseOnClickOutside:k,selectorPrimaryFocus:N="[data-modal-primary-focus]",selectorsFloatingMenus:a,size:S,launcherButtonRef:T,slug:w,...x}=o;const d=D(),[E,R]=y.useState(!!s),[v,M]=y.useState(!!s),g=y.useRef(null),H=y.useRef(null),z=y.useRef(null),W=y.useRef(null),A=Ne("enable-experimental-focus-wrap-without-sentinels");y.useEffect(()=>{s!==v&&(R(!!s),M(!!s),U(document.body,`${d}--body--with-modal-open`,!!s))},[s,v,d]),y.useEffect(()=>()=>{U(document.body,`${d}--body--with-modal-open`,!1)},[]);function ee(t){t.stopPropagation(),J(t,ie)&&O(t),A&&s&&J(t,ue)&&g.current&&be({containerNode:g.current,currentActiveNode:t.target,event:t}),p==null||p(t)}function te(t){const b=t.target;t.stopPropagation(),!k&&!Ce(b,a)&&g.current&&!g.current.contains(b)&&O(t)}function ne(t){let{target:b,relatedTarget:I}=t;if(s&&I&&b&&g.current){const{current:F}=g,{current:P}=z,{current:re}=W;he({bodyNode:F,startTrapNode:P,endTrapNode:re,currentActiveNode:I,oldActiveNode:b,selectorsFloatingMenus:a==null?void 0:a.filter(Boolean)})}}function O(t){(!f||f(t)!==!1)&&R(!1)}const oe=B(`${d}--modal`,{"is-visible":E,[`${d}--modal--danger`]:i,[`${d}--modal--slug`]:w},C),se=B(`${d}--modal-container`,S&&`${d}--modal-container--${S}`,u&&`${d}--modal-container--full-width`,h);let j;const ae=n.Children.toArray($).map(t=>{switch(!0){case(Q.isElement(t)&&t.type===n.createElement(X).type):{const b=t;return j=b.props.label,n.cloneElement(b,{closeModal:O})}case(Q.isElement(t)&&t.type===n.createElement(Z).type):{const b=t;return n.cloneElement(b,{closeModal:O,inputref:H})}default:return t}});y.useEffect(()=>{!s&&T&&setTimeout(()=>{var t;(t=T==null?void 0:T.current)==null||t.focus()})},[s,T]),y.useEffect(()=>{const t=I=>{const F=I||g.current,P=F?F.querySelector(N):null;return P||H&&H.current};s&&E&&(I=>{const F=t(I);F&&F.focus()})(g.current)},[s,N,E]);let K;return w&&((G=w.type)==null?void 0:G.displayName)==="AILabel"&&(K=n.cloneElement(w,{size:"sm"})),n.createElement(V,q({},x,{level:0,role:"presentation",ref:l,"aria-hidden":!s,onBlur:A?()=>{}:ne,onClick:Ee([x==null?void 0:x.onClick,te]),onKeyDown:ee,className:oe}),n.createElement("div",{className:se,role:"dialog","aria-modal":"true","aria-label":m||j,"aria-labelledby":c},!A&&n.createElement("button",{type:"button",ref:z,className:`${d}--visually-hidden`},"Focus sentinel"),n.createElement("div",{ref:g,className:`${d}--modal-container-body`},K,ae),!A&&n.createElement("button",{type:"button",ref:W,className:`${d}--visually-hidden`},"Focus sentinel")))});$e.propTypes={"aria-label":e.string,"aria-labelledby":e.string,children:e.node,className:e.string,containerClassName:e.string,danger:e.bool,isFullWidth:e.bool,launcherButtonRef:e.oneOfType([e.func,e.shape({current:e.any})]),onClose:e.func,onKeyDown:e.func,open:e.bool,preventCloseOnClickOutside:e.bool,selectorPrimaryFocus:e.string,selectorsFloatingMenus:e.arrayOf(e.string.isRequired),size:e.oneOf(["xs","sm","md","lg"]),slug:e.node};export{$e as C,X as M,Be as a,Z as b};
