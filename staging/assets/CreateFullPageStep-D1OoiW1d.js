import{e as n,r}from"./index-DtHxqM--.js";import{d as K,P as e}from"./index-CMVdkQrl.js";import{p as A,B as U,T as ge,a as ye}from"./settings-C3kz8lqM.js";import{F as Te}from"./FormGroup-BRiLUXWl.js";import{G as J}from"./Grid-BLDZi_lT.js";import{C as S}from"./Column-DAwp7jN5.js";import{S as ve,H as Se}from"./index-BUpfIj5_.js";import{C as qe,M as we,a as Ce,b as Ne}from"./ComposedModal-DK_gDe0c.js";import{F as Pe}from"./Form-B9aRNkwu.js";import{S as xe,o as Ee}from"./SimpleHeader-BQHD75O4.js";import{g as _e}from"./devtools-CJD9WatR.js";import{l as Fe,g as Ie,u as ke,a as Ae,b as Oe,C as Re,c as $e}from"./lastIndexInArray-BWLIekNC.js";import{u as Q}from"./usePreviousValue-CuNkkQo9.js";import{A as Be}from"./ActionSet-CwOjg9U4.js";const s=`${A.prefix}--create-full-page`,c="CreateFullPage",W=r.createContext(null),X=r.createContext(-1);let q=n.forwardRef(({breadcrumbsOverflowAriaLabel:p,breadcrumbs:w,backButtonText:C,cancelButtonText:m,children:N,className:P,initialStep:i,maxVisibleBreadcrumbs:O,modalDangerButtonText:b,modalDescription:R,modalSecondaryButtonText:$,modalTitle:h,nextButtonText:x,onClickInfluencerStep:E,onClose:_,onRequestSubmit:B,firstFocusElement:L,submitButtonText:t,noTrailingSlash:l,title:g,secondaryTitle:M,breadcrumbOverflowTooltipAlign:u="right",...f},V)=>{const[F,Z]=r.useState([]),[ee,te]=r.useState(!1),[y,D]=r.useState(1),[ne,re]=r.useState(!1),[H,j]=r.useState(!1),ae=Q({currentStep:y}),[se,ie]=r.useState(!1),[oe,le]=r.useState(),[ue,de]=r.useState(),[ce,pe]=r.useState(),[a,me]=r.useState([]),[G,fe]=r.useState(1),[z,be]=r.useState(),I=r.useRef(!1);r.useEffect(()=>{const o=a.findIndex(v=>v==null?void 0:v.shouldIncludeStep)+1,T=Fe(a,"shouldIncludeStep",!0);if(o!==G&&fe(o),T!==z&&be(T),i){const v=Ie(a,i);D(Number(i+v))}},[a,G,z,i,H]),r.useEffect(()=>{I!=null&&I.current||he()},[i,a]),ke({previousState:ae,currentStep:y,blockClass:s,onMount:ce,firstFocusElement:L}),Ae(a.length,c),Oe({firstIncludedStep:G,lastIncludedStep:z,stepData:a,onPrevious:oe,onNext:ue,isSubmitDisabled:se,setCurrentStep:D,setIsSubmitting:re,setShouldViewAll:te,onClose:_,onRequestSubmit:B,componentName:c,currentStep:y,shouldViewAll:ee,backButtonText:C,cancelButtonText:m,submitButtonText:t,nextButtonText:x,isSubmitting:ne,componentBlockClass:s,setCreateComponentActions:Z,setModalIsOpen:j});const he=()=>{(i&&(a!=null&&a.length)&&Number(i)>Number(a==null?void 0:a.length)||Number(i)<=0)&&(I.current=!0,D(1),console.warn(`${c}: An invalid \`initialStep\` prop was supplied. The \`initialStep\` prop should be a number that is greater than 0 or less than or equal to the number of steps your ${c} has.`))};return n.createElement("div",{...f,ref:V,className:K(s,P),..._e(c)},(g||w)&&n.createElement(xe,{title:g,breadcrumbs:w,noTrailingSlash:l,overflowAriaLabel:p,maxVisible:O,className:`${s}__header`,overflowTooltipAlign:u}),n.createElement("div",{className:`${s}__influencer-and-body-container`},n.createElement("div",{className:`${s}__influencer`},n.createElement(Re,{stepData:a,currentStep:y,title:M,onClickStep:E})),n.createElement("div",{className:`${s}__body`},n.createElement("div",{className:`${s}__main`},n.createElement("div",{className:`${s}__content`},n.createElement(Pe,{className:`${s}__form`,"aria-label":g},n.createElement(W.Provider,{value:{currentStep:y,setIsDisabled:ie,setOnPrevious:o=>le(()=>o),setOnNext:o=>de(()=>o),setOnMount:o=>pe(()=>o),setStepData:me,stepData:a}},n.Children.toArray(N).filter(Boolean).map((o,T)=>n.createElement(X.Provider,{value:T+1,key:T},o))))),n.createElement(Be,{className:`${s}__buttons`,actions:F,buttonSize:"2xl",size:"2xl"}))),n.createElement(qe,{className:`${s}__modal`,size:"sm",open:H,"aria-label":h,onClose:()=>{j(!1)}},n.createElement(we,{title:h}),n.createElement(Ce,null,n.createElement("p",null,R)),n.createElement(Ne,null,n.createElement(U,{type:"button",kind:"secondary",onClick:()=>{j(!H)},"data-modal-primary-focus":!0},$),n.createElement(U,{type:"button",kind:"danger",onClick:_},b)))))});q=A.checkComponentEnabled(q,c);q.displayName=c;q.propTypes={backButtonText:e.string.isRequired,breadcrumbOverflowTooltipAlign:ge.propTypes.align,breadcrumbs:e.arrayOf(e.shape({key:e.string.isRequired,label:e.string.isRequired,href:e.string,title:e.string,isCurrentPage:e.bool})),breadcrumbsOverflowAriaLabel:Ee,cancelButtonText:e.string.isRequired,children:e.node,className:e.string,firstFocusElement:e.string,initialStep:e.number,maxVisibleBreadcrumbs:e.number,modalDangerButtonText:e.string.isRequired,modalDescription:e.string,modalSecondaryButtonText:e.string.isRequired,modalTitle:e.string.isRequired,nextButtonText:e.string.isRequired,noTrailingSlash:e.bool,onClickInfluencerStep:e.func,onClose:e.func,onRequestSubmit:e.func.isRequired,secondaryTitle:e.string,sideNavAriaLabel:e.string,submitButtonText:e.string.isRequired,title:e.string};q.__docgenInfo={description:`Use with creations that must be completed in order for a service to be usable.

### Grid

The \`CreateFullPage\` component utilizes Carbons' grid system in the inner
content of the main section inside of the component. You can read more guidance
on the Carbon's grid system
[here](https://www.carbondesignsystem.com/guidelines/2x-grid/overview). You can
include \`<Row>\` and \`<Column>\` components inside of each \`CreateFullPageStep\`
component to get the desired affect.`,methods:[],displayName:"CreateFullPage",props:{backButtonText:{required:!0,tsType:{name:"string"},description:"The back button text",type:{name:"string"}},cancelButtonText:{required:!0,tsType:{name:"string"},description:"The cancel button text",type:{name:"string"}},children:{required:!1,tsType:{name:"ReactNode"},description:"The main content of the full page",type:{name:"node"}},className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},firstFocusElement:{required:!1,tsType:{name:"string"},description:"Specifies elements to focus on first on render.",type:{name:"string"}},initialStep:{required:!1,tsType:{name:"number"},description:`This can be used to open the component to a step other than the first step.
For example, a create flow was previously in progress, data was saved, and
is now being completed.`,type:{name:"number"}},maxVisibleBreadcrumbs:{required:!1,tsType:{name:"number"},description:"Maximum visible breadcrumb-items before overflow is used (values less than 1 are treated as 1)",type:{name:"number"}},modalDangerButtonText:{required:!0,tsType:{name:"string"},description:"The primary 'danger' button text in the modal",type:{name:"string"}},modalDescription:{required:!1,tsType:{name:"string"},description:"The description located below the title in the modal",type:{name:"string"}},modalSecondaryButtonText:{required:!0,tsType:{name:"string"},description:"The secondary button text in the modal",type:{name:"string"}},modalTitle:{required:!0,tsType:{name:"string"},description:"The title located in the header of the modal",type:{name:"string"}},nextButtonText:{required:!0,tsType:{name:"string"},description:"The next button text",type:{name:"string"}},noTrailingSlash:{required:!1,tsType:{name:"boolean"},description:"A prop to omit the trailing slash for the breadcrumbs",type:{name:"bool"}},onClickInfluencerStep:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: number) => void",signature:{arguments:[{type:{name:"number"},name:"data"}],return:{name:"void"}}},description:`onChange event for Progress Indicator in the Influencer
@param data step index`,type:{name:"func"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`An optional handler that is called when the user closes the full page (by
clicking the secondary button, located in the modal, which triggers after
clicking the ghost button in the modal`,type:{name:"func"}},onRequestSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => { preventClose?: boolean } | void",signature:{arguments:[],return:{name:"union",raw:"{ preventClose?: boolean } | void",elements:[{name:"signature",type:"object",raw:"{ preventClose?: boolean }",signature:{properties:[{key:"preventClose",value:{name:"boolean",required:!1}}]}},{name:"void"}]}}},description:`Specify a handler for submitting the multi step full page (final step).
This function can _optionally_ return a promise that is either resolved or rejected and the CreateFullPage will handle the submitting state of the create button.

@returns Object - if you want to prevent the modal from closing, return an object with the property preventClose set to true`,type:{name:"func"}},secondaryTitle:{required:!1,tsType:{name:"string"},description:"A secondary title of the full page, displayed in the influencer area",type:{name:"string"}},sideNavAriaLabel:{required:!1,tsType:{name:"string"},description:`@ignore
The aria label to be used for the UI Shell SideNav Carbon component`,type:{name:"string"}},submitButtonText:{required:!0,tsType:{name:"string"},description:"The submit button text",type:{name:"string"}},title:{required:!1,tsType:{name:"string"},description:"The main title of the full page, displayed in the header area",type:{name:"string"}},breadcrumbOverflowTooltipAlign:{defaultValue:{value:"'right'",computed:!1},description:"align breadcrumb overflow tooltip",type:{name:"custom",raw:"Tooltip.propTypes.align"},required:!1},breadcrumbs:{description:"The header breadcrumbs",type:{name:"arrayOf",value:{name:"shape",value:{key:{name:"string",description:"breadcrumb item key",required:!0},label:{name:"string",description:"breadcrumb item label",required:!0},href:{name:"string",description:"breadcrumb item link",required:!1},title:{name:"string",description:"breadcrumb item title tooltip",required:!1},isCurrentPage:{name:"bool",description:"Provide if this breadcrumb item represents the current page",required:!1}}}},required:!1},breadcrumbsOverflowAriaLabel:{description:"Label for open/close overflow button used for breadcrumb items that do not fit",type:{name:"custom",raw:`isRequiredIf(
  PropTypes.string,
  (props) => props.breadcrumbs?.length > 0
)`},required:!1}}};const Y="CreateFullPageStep",d=`${A.prefix}--create-full-page__step`,Le={includeStep:!0};let k=r.forwardRef(({children:p,className:w,subtitle:C,description:m,disableSubmit:N,includeStep:P=Le.includeStep,introStep:i,invalid:O,title:b,hasFieldset:R,fieldsetLegendText:$,onNext:h,onPrevious:x,onMount:E,secondaryLabel:_,...B},L)=>{const t=r.useContext(W),l=r.useContext(X),[g,M]=r.useState(),u=Q({currentStep:t==null?void 0:t.currentStep});$e({invalid:O,stepsContext:t,stepNumber:l,introStep:i,shouldIncludeStep:g,secondaryLabel:_,title:b}),r.useEffect(()=>{l===(t==null?void 0:t.currentStep)&&(u==null?void 0:u.currentStep)!==(t==null?void 0:t.currentStep)&&(t==null||t.setOnMount(E))},[E,t,l,u==null?void 0:u.currentStep]),r.useEffect(()=>{M(P)},[P,t,b]),r.useEffect(()=>{l===(t==null?void 0:t.currentStep)&&(t.setIsDisabled(N),t==null||t.setOnNext(h),t==null||t.setOnPrevious(x))},[t,l,N,h,x]);const f={span:50},V=()=>{if(m){const F={children:m,className:`${d}-description`,...f};if(typeof m=="string")return n.createElement(S,{...F,as:"p"});if(r.isValidElement(m))return n.createElement(S,{...F,as:"div"})}return null};return t?n.createElement(ve,{...B,className:K(d,w,{[`${d}__step--hidden-step`]:l!==(t==null?void 0:t.currentStep),[`${d}__step--visible-step`]:l===(t==null?void 0:t.currentStep)}),ref:L},n.createElement(J,null,n.createElement(S,{...f},n.createElement(J,null,n.createElement(S,{className:`${d}-title`,as:Se,...f},b),C&&n.createElement(S,{className:`${d}-subtitle`,as:"p",...f},C),V()))),R?n.createElement(Te,{legendText:$,className:`${d}-fieldset`},p):p):ye.warn(`You have tried using a ${Y} component outside of a CreateFullPage. This is not allowed. ${Y}s should always be children of the CreateFullPage`)});k=A.checkComponentEnabled(k,Y);k.propTypes={children:e.node,className:e.string,description:e.node,disableSubmit:e.bool,fieldsetLegendText:e.string.isRequired.if(({hasFieldset:p})=>p===!0),hasFieldset:e.bool,includeStep:e.bool,introStep:e.bool,invalid:e.bool,onMount:e.func,onNext:e.func,onPrevious:e.func,secondaryLabel:e.string,subtitle:e.string,title:e.node.isRequired};k.__docgenInfo={description:"",methods:[],displayName:"CreateFullPageStep",props:{className:{required:!1,tsType:{name:"string"},description:"Sets an optional className to be added to the CreateFullPage step",type:{name:"string"}},description:{required:!1,tsType:{name:"ReactNode"},description:"Sets an optional description on the progress step component",type:{name:"node"}},disableSubmit:{required:!1,tsType:{name:"boolean"},description:"This will conditionally disable the submit button in the multi step CreateFullPage",type:{name:"bool"}},hasFieldset:{required:!1,tsType:{name:"boolean"},description:"This optional prop will render your form content inside of a fieldset html element",type:{name:"bool"}},includeStep:{required:!1,tsType:{name:"boolean"},description:"This prop is used to help track dynamic steps. If this value is `false` then the step is not included in the visible steps or the ProgressIndicator\nsteps. If this value is `true` then the step will be included in the list of visible steps, as well as being included in the ProgressIndicator step list",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},introStep:{required:!1,tsType:{name:"boolean"},description:"This prop can be used on the first step to mark it as an intro step, which will not render the progress indicator steps",type:{name:"bool"}},invalid:{required:!1,tsType:{name:"boolean"},description:"This optional prop will indicate an error icon on the progress indicator step item",type:{name:"bool"}},onMount:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`Optional function to be called on initial mount of a step.
For example, this can be used to fetch data that is required on a particular step.`,type:{name:"func"}},onNext:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | Promise<any>",signature:{arguments:[],return:{name:"union",raw:"void | Promise<any>",elements:[{name:"void"},{name:"Promise",elements:[{name:"any"}],raw:"Promise<any>"}]}}},description:`Optional function to be called on a step change.
For example, this can be used to validate input fields before proceeding to the next step.
This function can _optionally_ return a promise that is either resolved or rejected and the CreateFullPage will handle the submitting state of the next button.`,type:{name:"func"}},onPrevious:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Optional function to be called when you move to the previous step.",type:{name:"func"}},secondaryLabel:{required:!1,tsType:{name:"string"},description:"Sets the optional secondary label on the progress step component",type:{name:"string"}},subtitle:{required:!1,tsType:{name:"string"},description:"Sets an optional subtitle on the progress step component",type:{name:"string"}},title:{required:!0,tsType:{name:"ReactNode"},description:"Sets the title text for a create full page step",type:{name:"node"}},children:{description:"Content that shows in the CreateFullPage step",type:{name:"node"},required:!1},fieldsetLegendText:{description:"This is the legend text that appears above a fieldset html element for accessibility purposes. It is required when the optional `hasFieldset` prop is provided to a FullPageStep.",type:{name:"string"},required:!0}},composes:["PropsWithChildren"]};export{q as C,k as a};
