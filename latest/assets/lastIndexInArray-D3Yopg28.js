import{r as k,e as $}from"./index-CPiZ6Cnx.js";import{w as K}from"./wait-CTNFjQS8.js";import{c as j,P as w}from"./index-CXyjPnaX.js";import{P as Q,a as W}from"./ProgressIndicator-D8Oipw1Q.js";import"./props-helper-Dlg0HCIz.js";import{p as X}from"./settings-iwZeeh4T.js";const D=({previousState:c,currentStep:e,blockClass:n,onMount:r,firstFocusElement:a})=>{k.useEffect(()=>{typeof r=="function"&&r()},[r]),k.useEffect(()=>{const d=async f=>{await K(10),f.focus()};if((c==null?void 0:c.currentStep)!==e&&e>0&&a){const f=document.querySelector(a);f&&d(f)}},[e,c,n,r,a])},x=({firstIncludedStep:c,lastIncludedStep:e,stepData:n,onPrevious:r,onNext:a,isSubmitDisabled:d,setCurrentStep:f,setIsSubmitting:o,setLoadingPrevious:u=null,loadingPrevious:s=!1,onClose:y,onRequestSubmit:b,componentName:l,currentStep:C,backButtonText:P,cancelButtonText:T,submitButtonText:F,nextButtonText:H,isSubmitting:R,componentBlockClass:A,setCreateComponentActions:U,setModalIsOpen:V,experimentalSecondarySubmit:i,experimentalSecondarySubmitText:E})=>{const _=k.useCallback(()=>{o(!1),f(t=>{var g;do t++;while(!((g=n[t-1])!=null&&g.shouldIncludeStep));return t})},[f,o,n]),N=k.useCallback(()=>{l!=="CreateFullPage"&&u(!1),f(t=>{var g;do t--;while(!((g=n[t-1])!=null&&g.shouldIncludeStep));return t})},[f,n,u,l]);k.useEffect(()=>{const t=()=>{l!=="CreateFullPage"&&f(1),o(!1),y()},g=async()=>{try{await b(),t()}catch(h){o(!1),console.warn(`${l} submit error: ${h}`)}},m=async()=>{if(u==null||u(!0),typeof r=="function")try{await r(),N()}catch(h){console.warn(`${l} onBack error: ${h}`)}else N()},z=async()=>{if(o(!0),typeof a=="function")try{await a(),_()}catch(h){o(!1),console.warn(`${l} onNext error: ${h}`)}else _()},G=async()=>{if(o(!0),typeof a=="function")try{await a(),await g()}catch(h){o(!1),console.warn(`${l} onNext error: ${h}`)}else await g()},J=()=>{typeof(i==null?void 0:i.onClick)=="function"&&i.onClick()};if((n==null?void 0:n.length)>0){const h=[];(n==null?void 0:n.length)>1&&h.push({key:"create-action-button-back",label:P,onClick:m,kind:"secondary",disabled:C===c,loading:s}),h.push({key:"create-action-button-cancel",label:T,onClick:l==="CreateFullPage"?()=>V(!0):t,kind:"ghost"}),E&&!(i!=null&&i.hideSecondarySubmit)&&h.push({key:"create-action-button-experimentalSecondarySubmit",label:E,onClick:J,kind:"secondary",disabled:i==null?void 0:i.disabled}),h.push({key:"create-action-button-submit",label:C<e?H:F,onClick:C<e?z:G,disabled:d,kind:"primary",loading:R,className:`${A}__create-button`}),U(h)}},[c,e,n,a,d,P,T,C,y,H,F,b,R,A,l,_,f,U,o,V,N,r,u,s,i,E])},Y=(c,e)=>{let n=0;return c.forEach((r,a)=>{a+1>e||r.shouldIncludeStep===!1&&(n+=1)}),n},S=({firstIncludedStep:c,previousState:e,open:n,setCurrentStep:r,stepData:a,initialStep:d,totalSteps:f,componentName:o})=>{k.useEffect(()=>{if(!(e!=null&&e.open)&&n){if(d&&f&&Number(d)<=Number(f)&&Number(d)>0){const u=Y(a,d);r(Number(d+u))}else r(c);(d&&f&&Number(d)>Number(f)||Number(d)<=0)&&console.warn(`${o}: An invalid \`initialStep\` prop was supplied. The \`initialStep\` prop should be a number that is greater than 0 or less than or equal to the number of steps your ${o} has.`)}},[c,n,e,r,a,d,f,o])},ee=({stepsContext:c,stepNumber:e,introStep:n,invalid:r,shouldIncludeStep:a,secondaryLabel:d,title:f})=>{k.useEffect(()=>{c&&c.setStepData(o=>{const u={title:f,secondaryLabel:d,introStep:n,invalid:r,shouldIncludeStep:a},s=o[e-1];if((s==null?void 0:s.title)!==u.title||(s==null?void 0:s.secondaryLabel)!==u.secondaryLabel||(s==null?void 0:s.introStep)!==u.introStep||(s==null?void 0:s.shouldIncludeStep)!==u.shouldIncludeStep||(s==null?void 0:s.invalid)!==u.invalid){const y=[...o];return y[e-1]=u,y}return o})},[a,f,d,n,r,c,e])},re=(c,e)=>{k.useEffect(()=>{c===1&&console.warn(`${e}: ${e}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`)},[c,e])},q=`${X.prefix}--create-influencer`,Z="CreateInfluencer",O=({className:c,currentStep:e,onClickStep:n,stepData:r,title:a})=>{const d=(o,u)=>{const s=[];return o.forEach((y,b)=>{var l;((l=o[b])==null?void 0:l[u])===!1&&b<=e-1&&s.push(y)}),s.length},f=()=>{var y,b;const o=r==null?void 0:r.filter(l=>!(l!=null&&l.introStep)),u=o==null?void 0:o.filter(l=>l==null?void 0:l.shouldIncludeStep),s=d(r,"shouldIncludeStep")||0;return $.createElement("div",{className:`${q}__left-nav`},a&&$.createElement("h3",{className:`${q}__title`},a),e===1&&((y=r[0])!=null&&y.introStep)?null:$.createElement(Q,{currentIndex:(b=r[0])!=null&&b.introStep?e-s-2:e-s-1,spaceEqually:!0,vertical:!0,className:j(`${q}__progress-indicator`),onChange:n},u.map((l,C)=>$.createElement(W,{label:l==null?void 0:l.title,key:C,secondaryLabel:l.secondaryLabel||void 0,invalid:l.invalid}))))};return $.createElement("div",{className:j(q,c)},f())};O.displayName=Z;O.propTypes={className:w.string,currentStep:w.number.isRequired,onClickStep:w.func,stepData:w.arrayOf(w.shape({introStep:w.bool,secondaryLabel:w.string,shouldIncludeStep:w.bool,title:w.node})),title:w.string};O.__docgenInfo={description:"",methods:[],displayName:"CreateInfluencer",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},currentStep:{required:!0,tsType:{name:"number"},description:"Provide the current step number.",type:{name:"number"}},onClickStep:{required:!1,tsType:{name:"signature",type:"function",raw:"(step: number) => void",signature:{arguments:[{type:{name:"number"},name:"step"}],return:{name:"void"}}},description:"onChange event for Progress Indicator",type:{name:"func"}},stepData:{required:!1,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:"Provide the Set Data.",type:{name:"arrayOf",value:{name:"shape",value:{introStep:{name:"bool",required:!1},secondaryLabel:{name:"string",required:!1},shouldIncludeStep:{name:"bool",required:!1},title:{name:"node",required:!1}}}}},title:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Title.",type:{name:"string"}}}};const ne=(c,e,n)=>{var r;for(let a=c.length-1;a>=0;a--)if(((r=c[a])==null?void 0:r[e])===n)return a+1;return-1};export{O as C,re as a,S as b,x as c,ee as d,Y as g,ne as l,D as u};
