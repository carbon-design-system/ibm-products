{"version":3,"file":"Tearsheet-JjlXuDmN.js","sources":["../../src/components/Tearsheet/next/context.ts","../../src/components/Tearsheet/next/TearsheetHeader.tsx","../../src/components/Tearsheet/next/TearsheetHeaderContent.tsx","../../src/global/js/hooks/useCollapsible.ts","../../src/components/Tearsheet/next/TearsheetBody.tsx","../../src/components/Tearsheet/next/TearsheetHeaderActions.tsx","../../src/components/Tearsheet/next/StackContext.tsx","../../src/global/js/hooks/useMatchMedia.ts","../../src/components/Tearsheet/next/Tearsheet.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { createContext, RefObject, useContext } from 'react';\nimport { pkg } from '../../../settings';\n\n/**\n * -------------\n * Context setup\n * -------------\n */\n\ninterface TearsheetContextType {\n  hasCloseIcon: boolean;\n  setHasCloseIcon?: (value: boolean) => void;\n  fullyCollapsed: boolean;\n  setFullyCollapsed?: (value: boolean) => void;\n  refs?: any;\n  onClose?: () => void;\n  disableHeaderCollapse?: boolean;\n  setDisableHeaderCollapse?: (value: boolean) => void;\n  variant: 'wide' | 'narrow';\n  isSm: boolean;\n}\nexport const TearsheetContext = createContext<TearsheetContextType>({\n  hasCloseIcon: true,\n  fullyCollapsed: false,\n  disableHeaderCollapse: false,\n  variant: 'wide',\n  isSm: false,\n});\n\nexport const blockClass = `${pkg.prefix}--tearsheet__next`;\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { IconButton, IconButtonProps, ModalHeader } from '@carbon/react';\nimport React, {\n  ReactNode,\n  RefObject,\n  useContext,\n  useEffect,\n  useRef,\n} from 'react';\nimport cx from 'classnames';\nimport { blockClass, TearsheetContext } from './context';\nimport classNames from 'classnames';\nimport { ChevronUp } from '@carbon/react/icons';\n\n/**\n * ----------------\n * TearsheetHeader\n * ----------------\n */\n\nexport interface TearsheetHeaderProps {\n  /**\n   * Provide the optional content for header section and will be render after header titles and before progress indicator.\n   * People can make use of this if they want to have custom header.\n   */\n  children?: React.ReactNode;\n\n  /**\n   * The accessibility title for the close icon (if shown).\n   *\n   * **Note:** This prop is only required if a close icon is shown, i.e. if\n   * there are a no navigation actions and/or hasCloseIcon is true.\n   */\n  closeIconDescription?: string;\n  /**\n   * Enable a close icon ('x') in the header area of the tearsheet. By default,\n   * (when this prop is omitted, or undefined or null) a tearsheet does not\n   * display a close icon if there are navigation actions (\"transactional\n   * tearsheet\") and displays one if there are no navigation actions (\"passive\n   * tearsheet\"), and that behavior can be overridden if required by setting\n   * this prop to either true or false.\n   */\n  hideCloseButton?: boolean;\n\n  className?: string;\n\n  /**\n   * Default header collapse/expand while scrolling the main content can bd disabled  by setting this\n   */\n  disableHeaderCollapse?: boolean;\n}\n\nconst TearsheetHeader = React.forwardRef<HTMLDivElement, TearsheetHeaderProps>(\n  (props, ref) => {\n    const {\n      children,\n      closeIconDescription,\n      hideCloseButton = false,\n      className,\n      disableHeaderCollapse,\n      ...rest\n    } = props;\n    const {\n      setHasCloseIcon,\n      fullyCollapsed,\n      onClose,\n      setDisableHeaderCollapse,\n    } = useContext(TearsheetContext);\n    const localRef = useRef(undefined);\n    const headerRef = (ref || localRef) as RefObject<HTMLDivElement>;\n\n    useEffect(() => {\n      setHasCloseIcon?.(!!hideCloseButton);\n    }, [hideCloseButton, setHasCloseIcon]);\n    useEffect(() => {\n      setDisableHeaderCollapse?.(!!disableHeaderCollapse);\n    }, [disableHeaderCollapse, setDisableHeaderCollapse]);\n\n    return (\n      <ModalHeader\n        ref={headerRef}\n        className={cx(`${blockClass}__header`, {\n          [`${className}`]: true,\n          [`${blockClass}__header--with-close-icon`]: !!hideCloseButton,\n          [`${blockClass}__header-collapsed`]: fullyCollapsed,\n        })}\n        closeClassName={cx({\n          [`${blockClass}__header--no-close-icon`]: hideCloseButton,\n        })}\n        closeModal={onClose}\n        iconDescription={closeIconDescription}\n        {...rest}\n      >\n        {children}\n      </ModalHeader>\n    );\n  }\n);\n\nexport default TearsheetHeader;\n\n/**\n * ----------------\n * TearsheetNavigationBar\n * ----------------\n */\n\nexport interface TearsheetNavigationBarProps {\n  children: ReactNode;\n  scroller?: React.ReactNode;\n  className?: string;\n}\nexport const TearsheetNavigationBar = React.forwardRef<\n  HTMLDivElement,\n  TearsheetNavigationBarProps\n>((props, ref) => {\n  const { children, scroller, className, ...rest } = props;\n\n  return (\n    <div className={`${blockClass}__navigation-bar  ${className}`} {...rest}>\n      {children}\n\n      {scroller}\n    </div>\n  );\n});\n\n/**\n * ----------------\n * TearsheetScrollButton\n * ----------------\n */\n\nexport interface TearsheetScrollButtonProps extends IconButtonProps {\n  collapseText?: string;\n  expandText?: string;\n  className?: string;\n}\n\nexport const TearsheetScrollButton = React.forwardRef<\n  HTMLDivElement,\n  TearsheetScrollButtonProps\n>(function PageHeaderExpander(\n  {\n    className,\n    children,\n    label,\n    onClick,\n    collapseText = 'Collapse',\n    expandText = 'Expand',\n    ...other\n  }: TearsheetScrollButtonProps,\n  ref\n) {\n  const { fullyCollapsed, setFullyCollapsed } =\n    React.useContext(TearsheetContext);\n\n  const handleScroller = (isFullyCollapsed: boolean) => {\n    setFullyCollapsed?.(!isFullyCollapsed);\n  };\n\n  return (\n    <span className={`${blockClass}__scroller-container  ${className}`}>\n      <IconButton\n        ref={ref}\n        label={fullyCollapsed ? expandText : collapseText}\n        size=\"md\"\n        kind=\"ghost\"\n        autoAlign\n        {...other}\n        onClick={(event) => {\n          onClick?.(event);\n          handleScroller(!!fullyCollapsed);\n        }}\n        className={classNames(className, `${blockClass}__scroller-button`)}\n      >\n        <ChevronUp\n          className={classNames(`${blockClass}__scroller-button-icon`, {\n            [`${blockClass}__scroller-button-icon-collapsed`]: fullyCollapsed,\n          })}\n        />\n      </IconButton>\n    </span>\n  );\n});\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { ReactNode, useContext } from 'react';\nimport cx from 'classnames';\nimport { blockClass } from './context';\nimport { TruncatedText } from '../../TruncatedText';\n\nexport interface TearsheetHeaderContentProps {\n  /**\n   * Provide the optional content for header section and will be render after header titles and before progress indicator.\n   * People can make use of this if they want to have custom header.\n   */\n  children?: React.ReactNode;\n  /**\n   * The main title of the tearsheet.\n   */\n  title: string;\n  /**\n   * A label for the tearsheet, displayed above the title\n   * to maintain context for the tearsheet (e.g. as the title changes from page\n   * to page of a multi-page task).\n   */\n  label?: ReactNode;\n  /**\n   * A description of the flow, displayed in the header area of the tearsheet.\n   */\n  description?: ReactNode;\n  /**\n   * This can be used to render a content just before the title like an icon\n   */\n  titleStart?: ReactNode;\n  /**\n   * This can be used to render a content just after the title like an icon\n   */\n  titleEnd?: ReactNode;\n  /**\n   * The PageHeaderContent's page actions\n   */\n  headerActions?: React.ReactNode;\n}\n\nconst TearsheetHeaderContent = React.forwardRef<\n  HTMLDivElement,\n  TearsheetHeaderContentProps\n>((props, ref) => {\n  const {\n    children,\n    label,\n    title,\n    description,\n    headerActions,\n    titleStart,\n    titleEnd,\n    ...rest\n  } = props;\n\n  return (\n    <div className={`${blockClass}__header-content-wrapper`} ref={ref}>\n      <div className={`${blockClass}__header-content`}>\n        {label ? (\n          <div className={`${blockClass}__header-label`}>{label}</div>\n        ) : null}\n        <div className={`${blockClass}__content__title-wrapper`}>\n          <h2 className={cx(`${blockClass}__header-title`)}>\n            {titleStart ? (\n              <span className={`${blockClass}__title-start`}>{titleStart}</span>\n            ) : null}\n            <TruncatedText\n              id={`${blockClass}__header-title__truncatedText`}\n              className={`${blockClass}__content__title`}\n              align=\"bottom\"\n              autoAlign={true}\n              value={title}\n            />\n            {titleEnd ? (\n              <span className={`${blockClass}__title-end`}>{titleEnd}</span>\n            ) : null}\n          </h2>\n        </div>\n\n        <div className={`${blockClass}__header-description`}>{description}</div>\n        {children && (\n          <div className={`${blockClass}__header-content--extra`}>\n            {children}\n          </div>\n        )}\n      </div>\n      {headerActions && (\n        <div className={`${blockClass}__header-actions`}>{headerActions}</div>\n      )}\n    </div>\n  );\n});\n\nexport default TearsheetHeaderContent;\n","/**\n * Copyright IBM Corp. 2025, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect } from 'react';\n\ninterface UseCollapsibleHeaderOptions {\n  container: HTMLDivElement | null;\n  triggerCollapse: (collapsed: boolean) => void;\n  disableHeaderCollapse?: boolean;\n}\n\n/**\n * Custom hook to manage collapsible header behavior based on scroll and drag gestures.\n *\n * This avoids relying solely on scroll events because collapsing the header can\n * remove scrollable space, preventing further scroll events from firing.\n */\nexport function useCollapsible({\n  container,\n  triggerCollapse,\n  disableHeaderCollapse = false,\n}: UseCollapsibleHeaderOptions) {\n  useEffect(() => {\n    if (!container || disableHeaderCollapse) {\n      return;\n    }\n\n    let startY: number | null = null;\n    let isDragging = false;\n\n    const onPointerDown = (e: PointerEvent) => {\n      startY = e.clientY;\n      isDragging = true;\n    };\n\n    const onPointerMove = (e: PointerEvent) => {\n      if (!isDragging || startY === null) {\n        return;\n      }\n\n      const diffY = startY - e.clientY;\n      if (diffY > 5) {\n        triggerCollapse(true);\n      } else if (diffY < -5) {\n        triggerCollapse(false);\n      }\n    };\n\n    const onPointerUp = () => {\n      isDragging = false;\n      startY = null;\n      document.body.style.cursor = 'default';\n    };\n\n    const onWheel = (e: WheelEvent) => {\n      if (e.deltaY > 0) {\n        triggerCollapse(true);\n      } else if (e.deltaY < 0) {\n        triggerCollapse(false);\n      }\n    };\n\n    container.addEventListener('pointerdown', onPointerDown);\n    container.addEventListener('pointermove', onPointerMove);\n    container.addEventListener('pointerup', onPointerUp);\n    container.addEventListener('wheel', onWheel);\n\n    return () => {\n      container.removeEventListener('pointerdown', onPointerDown);\n      container.removeEventListener('pointermove', onPointerMove);\n      container.removeEventListener('pointerup', onPointerUp);\n      container.removeEventListener('wheel', onWheel);\n    };\n  }, [container, triggerCollapse, disableHeaderCollapse]);\n}\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, {\n  ForwardedRef,\n  forwardRef,\n  ReactNode,\n  useContext,\n  useRef,\n} from 'react';\nimport cx from 'classnames';\n\nimport { blockClass, TearsheetContext } from './context';\nimport { SidePanel } from '../../SidePanel';\nimport { Layer } from '@carbon/react';\nimport { useCollapsible } from '../../../global/js/hooks/useCollapsible';\n/**\n * ----------------\n * TearsheetBody\n * ----------------\n */\n\nexport interface TearsheetBodyProps {\n  /**\n   * Optional static content for body\n   */\n  children?: ReactNode;\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className?: string;\n  /**\n   *You can provide content either through a callback (contentRenderer) or as static children—but not both.\n   * If both are provided, contentRenderer always takes precedence. This optional callback should return the content\n   * to be rendered in the body section, which can be either a single element or an array of elements based on your needs.\n   * If internal state access isn’t required, you can simply use static children instead\n   */\n}\n\nconst TearsheetBody = forwardRef<HTMLDivElement, TearsheetBodyProps>(\n  ({ children, className }, ref: ForwardedRef<HTMLDivElement>) => {\n    return (\n      <div className={`${blockClass}__body ${className}`} ref={ref}>\n        {children}\n      </div>\n    );\n  }\n);\n\nexport interface MainContentProps {\n  children: ReactNode;\n  className?: string;\n  /** this can be set take full width without any padding */\n  isFlush?: boolean;\n}\n/**\n * ----------------\n * MainContent\n * ----------------\n */\nexport const MainContent = forwardRef<HTMLDivElement, MainContentProps>(\n  (\n    { children, className, isFlush, ...rest },\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const localRef = useRef<HTMLDivElement>(null);\n    const mainContentRef = ref || localRef;\n\n    const { setFullyCollapsed, disableHeaderCollapse } =\n      useContext(TearsheetContext);\n\n    const container =\n      typeof mainContentRef === 'function'\n        ? null\n        : (mainContentRef?.current ?? null);\n\n    const collapseHeader = (collapse: boolean) => {\n      if (container) {\n        if (collapse) {\n          const canScroll = container.scrollHeight > container.clientHeight; // collapse header only when there is scroll\n\n          if (canScroll) {\n            setFullyCollapsed?.(true);\n          }\n        } else if (container.scrollTop === 0) {\n          // expand header when scroll reaches top\n          setFullyCollapsed?.(false);\n        }\n      }\n    };\n\n    useCollapsible({\n      container,\n      triggerCollapse: collapseHeader,\n      disableHeaderCollapse,\n    });\n\n    return (\n      <Layer\n        withBackground\n        className={cx(`${blockClass}__main-content`, className, {\n          [`${blockClass}__flush`]: isFlush,\n        })}\n        ref={mainContentRef}\n        {...rest}\n      >\n        {children}\n      </Layer>\n    );\n  }\n);\n\n/**\n * ----------------\n * SummaryContent\n * ----------------\n */\nexport interface SummaryContentProps {\n  children: ReactNode;\n  className?: string;\n  /**\n   * In mobile screens right side details section wont be visible by default. This prop can be toggled to open/close right panel in this case.\n   */\n  summaryPanelOpen?: boolean;\n  /**\n   * Specify a handler for closing the side panel.\n   * This handler closes the modal, e.g. changing `open` prop.\n   */\n  onSummaryPanelClose?(): void;\n  /** this can be set take full width without any padding */\n  isFlush?: boolean;\n}\nexport const SummaryContent = forwardRef<HTMLDivElement, SummaryContentProps>(\n  (\n    {\n      children,\n      className,\n      summaryPanelOpen = false,\n      onSummaryPanelClose,\n      isFlush,\n    },\n    ref\n  ) => {\n    const { isSm } = useContext(TearsheetContext);\n\n    return !isSm ? (\n      <div\n        className={cx(`${blockClass}__summary-content`, className, {\n          [`${blockClass}__flush`]: isFlush,\n        })}\n        ref={ref}\n      >\n        <aside>{children}</aside>\n      </div>\n    ) : (\n      <SidePanel\n        size=\"sm\"\n        open={summaryPanelOpen}\n        onRequestClose={onSummaryPanelClose}\n        className={className}\n      >\n        {children}\n      </SidePanel>\n    );\n  }\n);\n\nexport interface InfluencerProps {\n  children: ReactNode;\n  className?: string;\n  /**\n   * In mobile screens right side details section wont be visible by default. This prop can be toggled to open/close right panel in this case.\n   */\n  influencerPanelOpen?: boolean;\n  /**\n   * Specify a handler for closing the side panel.\n   * This handler closes the modal, e.g. changing `open` prop.\n   */\n  onInfluencerPanelClose?(): void;\n  /** this can be set take full width without any padding */\n  isFlush?: boolean;\n}\nexport const Influencer = forwardRef<HTMLDivElement, InfluencerProps>(\n  (\n    {\n      children,\n      className,\n      influencerPanelOpen = false,\n      onInfluencerPanelClose,\n      isFlush,\n    },\n    ref\n  ) => {\n    const { isSm } = useContext(TearsheetContext);\n\n    return !isSm ? (\n      <aside\n        className={cx(`${blockClass}__influencer`, className, {\n          [`${blockClass}__flush`]: isFlush,\n        })}\n        ref={ref}\n      >\n        {children}\n      </aside>\n    ) : (\n      <SidePanel\n        size=\"sm\"\n        open={influencerPanelOpen}\n        onRequestClose={onInfluencerPanelClose}\n        placement=\"left\"\n        className={className}\n      >\n        {children}\n      </SidePanel>\n    );\n  }\n);\n\nexport default TearsheetBody;\n","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { MenuButton, MenuButtonProps, MenuItem } from '@carbon/react';\nimport React, { ReactElement, ReactNode, useRef, useState } from 'react';\nimport { useIsomorphicEffect } from '../../../global/js/hooks';\nimport { blockClass } from './context';\nimport { createOverflowHandler } from '@carbon/utilities';\nimport cx from 'classnames';\n/**\n * ----------------\n * TearsheetHeaderActions\n * ----------------\n */\ntype EnhancedChild = React.ReactElement<{ id: string; menuItemLabel: string }>;\nexport interface TearsheetHeaderActionsProps {\n  /**\n   * Provide child elements to be rendered inside TearsheetHeaderActions.\n   */\n  children: EnhancedChild[];\n  /**\n   * Specify an optional className to be added to your TearsheetHeaderActions\n   */\n  className?: string;\n  /**\n   * The PageHeaderContent's page actions collapsible Menu button label\n   */\n  menuButtonProps?: MenuButtonProps;\n}\nexport const TearsheetHeaderActions = ({\n  className,\n  children,\n  menuButtonProps,\n}: TearsheetHeaderActionsProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const offsetRef = useRef<HTMLDivElement>(null);\n  const [menuButtonVisibility, setMenuButtonVisibility] = useState(false);\n  const [hiddenItems, setHiddenItems] = useState<ReactElement[]>([]);\n\n  const hasOtherChildType = useRef(false);\n\n  // need to set the grid columns width based on the menu button's width\n  // to avoid overlapping when resizing\n  useIsomorphicEffect(() => {\n    if (menuButtonVisibility && offsetRef.current) {\n      const width = offsetRef.current.offsetWidth;\n      document.documentElement.style.setProperty(\n        '--tearsheet-header-title-grid-width',\n        `${width}px`\n      );\n    }\n  }, [menuButtonVisibility]);\n\n  const items = React.Children.toArray(children).filter((child) => {\n    if (\n      React.isValidElement(child) &&\n      child.type !== TearsheetHeaderActionItem\n    ) {\n      hasOtherChildType.current = true;\n    }\n    return React.isValidElement(child);\n  });\n  useIsomorphicEffect(() => {\n    //Menu button will be rendered only if they pass the items in TearsheetHeaderActionItem\n    if (!containerRef.current || hasOtherChildType.current) {\n      return;\n    }\n    createOverflowHandler({\n      container: containerRef.current,\n      onChange: (visible, hidden) => {\n        setHiddenItems(items?.slice(visible.length));\n        if (hidden.length > 0) {\n          setMenuButtonVisibility(true);\n        }\n      },\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [containerRef.current]);\n\n  return (\n    <div\n      className={`${blockClass}__content__header-actions  ${className}`}\n      ref={containerRef}\n    >\n      {children}\n\n      {!hasOtherChildType.current && (\n        <span\n          data-offset\n          data-hidden\n          ref={offsetRef}\n          className={cx(`${blockClass}__header-actions-menuButton`, {\n            [`${blockClass}__header-actions-menuButton--hidden`]:\n              hiddenItems.length === 0,\n          })}\n        >\n          <MenuButton size=\"sm\" {...menuButtonProps}>\n            {hiddenItems.map((item) => {\n              if (!React.isValidElement(item)) {\n                return null;\n              }\n\n              const childProps = item.props as {\n                id: string;\n                overflowItemLabel: string;\n                children?: {\n                  props?: {\n                    renderIcon?: React.ReactNode;\n                    onClick?: () => void;\n                  };\n                };\n              };\n              return (\n                <MenuItem\n                  renderIcon={\n                    childProps?.children?.props?.renderIcon ?? undefined\n                  }\n                  key={childProps.id}\n                  onClick={childProps?.children?.props?.onClick}\n                  label={childProps.overflowItemLabel}\n                />\n              );\n            })}\n          </MenuButton>\n        </span>\n      )}\n    </div>\n  );\n};\n\n/**\n * ----------------\n * TearsheetHeaderActionsItem\n * ----------------\n */\n\nexport interface TearsheetHeaderActionItemProps {\n  /**\n   * Provide child elements to be rendered inside TearsheetHeaderActions.\n   */\n  children: ReactNode;\n  /**\n   * Specify an optional className to be added to your TearsheetHeaderActions\n   */\n  className?: string;\n  /**\n   * The PageHeaderContent's page actions collapsible Menu button label\n   */\n  overflowItemLabel?: string;\n\n  id?: string;\n}\nexport const TearsheetHeaderActionItem = ({\n  children,\n  className,\n}: TearsheetHeaderActionItemProps) => {\n  return (\n    <div className={`${blockClass}__header-action-item  ${className}`}>\n      {children}\n    </div>\n  );\n};\n","/**\n * Copyright IBM Corp. 2025, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  useContext,\n  createContext,\n  ReactNode,\n  useState,\n  useCallback,\n  useRef,\n} from 'react';\n\nimport { useResizeObserver } from '../../../global/js/hooks/useResizeObserver';\n\nexport interface StackContextType {\n  stack: string[];\n  notifyStack: (id: string, open: boolean, container: HTMLDivElement) => void;\n  getScaleFactor: (id: string) => number | null;\n  getBlockSizeChange: (id: string) => string | null;\n  getDepth: (id: string) => number | null;\n}\n\nconst StackContext = createContext<StackContextType | undefined>(undefined);\n\ninterface StepProviderProps {\n  children: ReactNode;\n  stackStepSize?: 'sm' | 'md' | 'lg';\n}\n\nexport const StackProvider: React.FC<StepProviderProps> = ({\n  children,\n  stackStepSize = 'lg',\n}) => {\n  const [stack, setStack] = useState<string[]>([]);\n  const _containerRef = useRef<HTMLDivElement>(null);\n\n  const bufferMap = {\n    sm: 0.5,\n    md: 0.75,\n    lg: 1,\n  };\n\n  const { width } = useResizeObserver(_containerRef);\n\n  // this method will register/ unregister tearsheet ids in a simple array based on open status\n  const notifyStack = useCallback(\n    (id: string, open: boolean, container: HTMLDivElement | null) => {\n      _containerRef.current = container;\n      setStack((prev) => {\n        if (open) {\n          // move to top if already exists\n          if (prev.includes(id)) {\n            return [...prev.filter((i) => i !== id), id];\n          }\n          return [...prev, id];\n        } else {\n          // remove from stack\n          return prev.filter((i) => i !== id);\n        }\n      });\n    },\n    []\n  );\n\n  // method that calculates spacing factor for the stacked items\n  const getScaleFactor = (id: string) => {\n    const depth = getDepth(id);\n    const buffer = bufferMap[stackStepSize];\n    const bufferInPx = remToPx(buffer);\n\n    const scale = depth > -1 ? (width - bufferInPx * 2 * depth) / width : 1;\n    return scale;\n  };\n\n  const remToPx = (rem: number) => {\n    return (\n      rem * parseFloat(getComputedStyle(document.documentElement).fontSize)\n    );\n  };\n\n  const getDepth = useCallback(\n    (id: string) => {\n      const index = stack.indexOf(id);\n      if (index === -1) {\n        return -1;\n      }\n      return stack.length - 1 - index; // topmost → 0\n    },\n    [stack]\n  );\n\n  const getBlockSizeChange = (id: string) => {\n    const depth = getDepth(id);\n\n    const buffer = bufferMap[stackStepSize]; //to be changed\n    const bufferInPx = remToPx(buffer);\n    return `${bufferInPx * depth}px`;\n  };\n\n  const context: StackContextType = {\n    stack,\n    notifyStack,\n    getScaleFactor,\n    getBlockSizeChange,\n    getDepth,\n  };\n\n  return (\n    <StackContext.Provider value={context}>{children}</StackContext.Provider>\n  );\n};\n\nexport const useStackContext = (): StackContextType => {\n  const context = useContext<StackContextType | undefined>(StackContext);\n\n  if (context === undefined) {\n    return {\n      notifyStack: () => {},\n      stack: [],\n      getDepth: () => -1,\n      getScaleFactor: () => 1,\n      getBlockSizeChange: () => null,\n    };\n  }\n  return context;\n};\n","/**\n * Copyright IBM Corp. 2025, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useState, useEffect } from 'react';\n\n/**\n * Listens to changes in a media query and returns whether it matches.\n * @param mediaQuery - The media query to listen to. For example, `(min-width: 600px)`.\n * @param defaultState - The initial state to return before the media query is evaluated. Defaults to `false`.\n * @returns Whether the media query matches.\n */\nexport const useMatchMedia = (mediaQuery: string, defaultState = false) => {\n  const [matches, setMatches] = useState(defaultState);\n\n  useEffect(() => {\n    const listener = (event: MediaQueryListEvent) => {\n      setMatches(event.matches);\n    };\n\n    const mediaQueryList = window.matchMedia(mediaQuery);\n\n    mediaQueryList.addEventListener('change', listener);\n\n    setMatches(mediaQueryList.matches);\n\n    return () => {\n      mediaQueryList.removeEventListener('change', listener);\n    };\n  }, [mediaQuery]);\n\n  return matches;\n};\n","/**\n * Copyright IBM Corp. 2025, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, {\n  useState,\n  useRef,\n  RefObject,\n  forwardRef,\n  ReactNode,\n  ForwardedRef,\n  FC,\n  useEffect,\n} from 'react';\nimport { useIsomorphicEffect } from '../../../global/js/hooks';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport {\n  ComposedModal,\n  ComposedModalProps,\n  unstable_FeatureFlags as FeatureFlags,\n  Layer,\n  ModalBody,\n  usePrefix,\n} from '@carbon/react';\nimport { blockClass, TearsheetContext } from './context';\nimport TearsheetHeader, {\n  TearsheetHeaderProps,\n  TearsheetNavigationBar,\n  TearsheetNavigationBarProps,\n  TearsheetScrollButton,\n  TearsheetScrollButtonProps,\n} from './TearsheetHeader';\nimport TearsheetHeaderContent, {\n  TearsheetHeaderContentProps,\n} from './TearsheetHeaderContent';\nimport TearsheetBody, {\n  Influencer,\n  InfluencerProps,\n  MainContent,\n  MainContentProps,\n  SummaryContent,\n  SummaryContentProps,\n  TearsheetBodyProps,\n} from './TearsheetBody';\n\nimport {\n  TearsheetHeaderActionItem,\n  TearsheetHeaderActionItemProps,\n  TearsheetHeaderActions,\n  TearsheetHeaderActionsProps,\n} from './TearsheetHeaderActions';\nimport { breakpoints } from '@carbon/layout';\nimport { usePortalTarget } from '../../../global/js/hooks/usePortalTarget';\nimport { useStackContext } from './StackContext';\nimport { useMatchMedia } from '../../../global/js/hooks/useMatchMedia';\nimport { useId } from '../../../global/js/utils/useId';\n\n/**\n * ----------\n * Tearsheet\n * ----------\n */\n\nexport interface TearsheetProps extends ComposedModalProps {\n  children?: React.ReactNode;\n\n  /**\n   * Specifies whether the tearsheet is currently open.\n   */\n  open?: boolean;\n\n  /**\n   * User can pass any class names to add to the modal wrapper\n   */\n  className?: string;\n  /**\n   * User can pass any class names that will added to the modal container, rather than the wrapper\n   */\n  containerClassName?: string;\n  /**\n   * the defines the gap from top of the view port. Defaulted to 3rem\n   */\n  verticalGap?: string;\n  /**\n   * Default influencer takes 256px, this allow to override eg: 300px , 20rem\n   */\n  influencerWidth?: string;\n  /**\n   * Default rightContent takes 256px, this allow to override eg: 300px , 20rem\n   */\n  summaryContentWidth?: string;\n  /**\n   * Default to wide variant. Pass in narrow for narrow tearsheet\n   */\n  variant?: 'wide' | 'narrow';\n  /**\n   * Optional prop that allows you to pass any component.\n   */\n  decorator?: ReactNode;\n\n  /**\n   * Specify the CSS selectors that match the floating menus.\n   *\n   * See https://react.carbondesignsystem.com/?path=/docs/components-composedmodal--overview#focus-management\n   */\n  selectorsFloatingMenus?: string[];\n\n  /**\n   * The aria label applied to the tearsheet\n   */\n  ariaLabel?: string;\n\n  /**\n   * An optional handler that is called when the user closes the tearsheet (by\n   * clicking the close button, if enabled, or clicking outside, if enabled).\n   * Returning `false` here prevents the modal from closing.\n   */\n  onClose?: () => void;\n  /**\n   * Specify a CSS selector that matches the DOM element that should be\n   * focused when the Modal opens.\n   */\n  selectorPrimaryFocus?: PropTypes.string;\n  /**\n   * The DOM element that the tearsheet should be rendered within. Defaults to document.body.\n   */\n  portalTarget?: HTMLElement;\n}\n\nexport type TearsheetComponentType = React.ForwardRefExoticComponent<\n  TearsheetProps & React.RefAttributes<HTMLDivElement>\n> & {\n  Header: FC<TearsheetHeaderProps>;\n  HeaderContent: FC<TearsheetHeaderContentProps>;\n  Influencer: FC<InfluencerProps>;\n  NavigationBar: FC<TearsheetNavigationBarProps>;\n  ScrollButton: FC<TearsheetScrollButtonProps>;\n  HeaderActions: FC<TearsheetHeaderActionsProps>;\n  HeaderActionItem: FC<TearsheetHeaderActionItemProps>;\n  MainContent: FC<MainContentProps>;\n  SummaryContent: FC<SummaryContentProps>;\n  Body: FC<TearsheetBodyProps>;\n  Footer: FC<FooterProps>;\n};\n\nexport const Tearsheet = forwardRef<HTMLDivElement, TearsheetProps>(\n  (\n    {\n      children,\n      variant = 'wide',\n      selectorsFloatingMenus = [],\n      className,\n      influencerWidth,\n      summaryContentWidth,\n      ariaLabel,\n      onClose,\n      selectorPrimaryFocus,\n      open = false,\n      portalTarget,\n      verticalGap,\n      containerClassName,\n      ...rest\n    },\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const carbonPrefix = usePrefix();\n    const localRef = useRef(undefined);\n    const bodyRef = useRef<HTMLDivElement>(null);\n    const modalRef = (ref || localRef) as RefObject<HTMLDivElement>;\n    const smMediaQuery = `(max-width: ${breakpoints.md.width})`;\n    const isSm = useMatchMedia(smMediaQuery) || variant === 'narrow';\n\n    const [hasCloseIcon, setHasCloseIcon] = useState(true);\n    const [fullyCollapsed, setFullyCollapsed] = useState(false);\n    const [disableHeaderCollapse, setDisableHeaderCollapse] = useState(false);\n\n    const arr = React.Children.toArray(children);\n    const header = arr.find((child: any) => child.type === TearsheetHeader);\n    const influencer = arr.find((child: any) => child.type === Influencer);\n    const body = arr.find((child: any) => child.type === TearsheetBody);\n    const footer = arr.find((child: any) => child.type === Footer);\n\n    const uniqueId = useRef(useId());\n    const { notifyStack, stack, getDepth, getScaleFactor, getBlockSizeChange } =\n      useStackContext();\n\n    const [depth, setDepth] = useState(0);\n\n    const renderPortalUse = usePortalTarget(portalTarget);\n\n    useIsomorphicEffect(() => {\n      const AILabelWidth =\n        modalRef.current?.querySelector(`.${carbonPrefix}--ai-label`)\n          ?.clientWidth ?? 0;\n      const headerActionMarginRight = AILabelWidth + 24 + (isSm ? 8 : 0); // 24 is to compeNsate for close button\n      document.documentElement.style.setProperty(\n        '--tearsheet-header-action-offset',\n        `${headerActionMarginRight}px`\n      );\n\n      if (influencerWidth) {\n        document.documentElement.style.setProperty(\n          '--tearsheet-influencer-width',\n          `${influencerWidth}`\n        );\n      }\n      if (summaryContentWidth) {\n        document.documentElement.style.setProperty(\n          '--tearsheet-summary-content-width',\n          `${summaryContentWidth}`\n        );\n      }\n      if (verticalGap) {\n        document.documentElement.style.setProperty(\n          '--tearsheet-vertical-gap',\n          `${verticalGap}`\n        );\n      }\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n      isSm,\n      rest.decorator,\n      influencerWidth,\n      summaryContentWidth,\n      verticalGap,\n    ]);\n\n    useIsomorphicEffect(() => {\n      if (bodyRef.current) {\n        notifyStack?.(uniqueId.current, open, bodyRef.current);\n      }\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [open]);\n\n    useEffect(() => {\n      if (stack?.length > 0) {\n        const stackDepth = getDepth?.(uniqueId.current),\n          blockSizeChange = getBlockSizeChange?.(uniqueId.current),\n          scaleFactor = getScaleFactor?.(uniqueId.current);\n\n        setDepth(stackDepth as number);\n\n        modalRef.current.style.setProperty('--stack-depth', stackDepth + '');\n        modalRef.current.style.setProperty(\n          '--block-size-change',\n          blockSizeChange\n        );\n        modalRef.current.style.setProperty('--scale-factor', scaleFactor + '');\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [stack]);\n\n    return renderPortalUse(\n      <TearsheetContext.Provider\n        value={{\n          hasCloseIcon,\n          setHasCloseIcon,\n          fullyCollapsed,\n          setFullyCollapsed,\n          onClose,\n          disableHeaderCollapse,\n          setDisableHeaderCollapse,\n          variant,\n          isSm,\n        }}\n      >\n        <FeatureFlags enableExperimentalFocusWrapWithoutSentinels>\n          <ComposedModal\n            {...rest}\n            aria-label={ariaLabel}\n            className={cx(blockClass, className, {\n              [`${blockClass}--wide`]: variant === 'wide',\n              [`${blockClass}--narrow`]: variant === 'narrow',\n              [`${blockClass}--stacked`]: depth > 0,\n              [`${blockClass}--stack-activated`]: stack.length > 1,\n              [`${blockClass}--has-ai-label`]:\n                !!rest.decorator &&\n                rest.decorator['type']?.displayName === 'AILabel',\n              [`${blockClass}--has-decorator`]:\n                !!rest.decorator &&\n                rest.decorator['type']?.displayName !== 'AILabel',\n              [`${blockClass}--has-close`]: hasCloseIcon,\n            })}\n            containerClassName={cx(\n              `${blockClass}__container`,\n              containerClassName\n            )}\n            {...{ onClose, open, selectorPrimaryFocus }}\n            ref={modalRef}\n            selectorsFloatingMenus={[\n              `.${carbonPrefix}--overflow-menu-options`,\n              `.${carbonPrefix}--tooltip`,\n              '.flatpickr-calendar',\n              `.${blockClass}__container`,\n              `.${carbonPrefix}--menu`,\n              ...selectorsFloatingMenus,\n            ]}\n            isFullWidth={true}\n            size={variant === 'narrow' ? 'sm' : ''}\n          >\n            {header}\n            <ModalBody className={`${blockClass}__body-layout`} ref={bodyRef}>\n              {influencer}\n\n              {body}\n\n              {footer}\n            </ModalBody>\n          </ComposedModal>\n        </FeatureFlags>\n      </TearsheetContext.Provider>\n    );\n  }\n) as TearsheetComponentType;\n\nexport interface FooterProps {\n  children: ReactNode;\n  className?: string;\n}\nconst Footer = forwardRef<HTMLDivElement, FooterProps>(({ children }, ref) => {\n  return (\n    <footer className={`${blockClass}__footer`} ref={ref}>\n      {children}\n    </footer>\n  );\n});\n\nTearsheet.Header = TearsheetHeader;\nTearsheet.HeaderContent = TearsheetHeaderContent;\nTearsheet.Body = TearsheetBody;\nTearsheet.Influencer = Influencer;\nTearsheet.MainContent = MainContent;\nTearsheet.SummaryContent = SummaryContent;\nTearsheet.Footer = Footer;\nTearsheet.NavigationBar = TearsheetNavigationBar;\nTearsheet.ScrollButton = TearsheetScrollButton;\nTearsheet.HeaderActions = TearsheetHeaderActions;\nTearsheet.HeaderActionItem = TearsheetHeaderActionItem;\n"],"names":["TearsheetContext","createContext","blockClass","pkg","TearsheetHeader","React","props","ref","children","closeIconDescription","hideCloseButton","className","disableHeaderCollapse","rest","setHasCloseIcon","fullyCollapsed","onClose","setDisableHeaderCollapse","useContext","localRef","useRef","headerRef","useEffect","ModalHeader","cx","TearsheetNavigationBar","scroller","TearsheetScrollButton","label","onClick","collapseText","expandText","other","setFullyCollapsed","handleScroller","isFullyCollapsed","IconButton","event","classNames","ChevronUp","TearsheetHeaderContent","title","description","headerActions","titleStart","titleEnd","TruncatedText","useCollapsible","container","triggerCollapse","startY","isDragging","onPointerDown","e","onPointerMove","diffY","onPointerUp","onWheel","TearsheetBody","forwardRef","MainContent","isFlush","mainContentRef","collapse","Layer","SummaryContent","summaryPanelOpen","onSummaryPanelClose","isSm","SidePanel","Influencer","influencerPanelOpen","onInfluencerPanelClose","TearsheetHeaderActions","menuButtonProps","containerRef","offsetRef","menuButtonVisibility","setMenuButtonVisibility","useState","hiddenItems","setHiddenItems","hasOtherChildType","useIsomorphicEffect","width","items","child","TearsheetHeaderActionItem","createOverflowHandler","visible","hidden","MenuButton","item","childProps","MenuItem","StackContext","StackProvider","stackStepSize","stack","setStack","_containerRef","bufferMap","useResizeObserver","notifyStack","useCallback","id","open","prev","i","getScaleFactor","depth","getDepth","buffer","bufferInPx","remToPx","rem","index","context","useStackContext","useMatchMedia","mediaQuery","defaultState","matches","setMatches","listener","mediaQueryList","Tearsheet","variant","selectorsFloatingMenus","influencerWidth","summaryContentWidth","ariaLabel","selectorPrimaryFocus","portalTarget","verticalGap","containerClassName","carbonPrefix","usePrefix","bodyRef","modalRef","smMediaQuery","breakpoints","hasCloseIcon","arr","header","influencer","body","footer","Footer","uniqueId","useId","getBlockSizeChange","setDepth","renderPortalUse","usePortalTarget","headerActionMarginRight","stackDepth","blockSizeChange","scaleFactor","FeatureFlags","ComposedModal","ModalBody"],"mappings":"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"}