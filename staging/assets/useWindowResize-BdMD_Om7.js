import{a as J,g as U,A as Z,B as ee,D as te,G as ne,b as $,j as se,c as v,H as ae,_ as M,i as W,J as oe,o as re,S as ie,u as le,d as ce,s as ue,t as de,f as me}from"./index-C8rbkH0g.js";import{P as e}from"./index-Dk74W0Oi.js";import{r as t,R as n}from"./index-BwDkhjyp.js";import{u as Q}from"./useControllableState-DwpxGhsf.js";import{M as j,u as fe,a as X,b as pe}from"./useAttachedMenu-DeIo1fst.js";import{T as ge}from"./Text-DZylbEPL.js";import{c as he,d as be,C as Y}from"./bucket-2-BgPkDhJt.js";import{B as ye}from"./settings-DI4GKhuL.js";import{m as Ee}from"./mergeRefs-CTUecegF.js";var K,V;const G=t.forwardRef(function(l,o){let{children:a,className:c,disabled:r,kind:s="default",label:p,onClick:y,renderIcon:u,shortcut:g,...m}=l;const[f,I]=t.useState(!1),[x,E]=t.useState(!1),{refs:h,floatingStyles:d,context:w}=J({open:f,onOpenChange:I,placement:x?"left-start":"right-start",whileElementsMounted:U,middleware:[Z({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:_,getFloatingProps:z}=ee([te(w,{delay:100,enabled:!0,handleClose:ne({requireIntent:!1})})]),N=$(),k=t.useContext(j),C=t.useRef(null),D=se([o,C,h.setReference]),R=!!a,T=r&&!R,A=s==="danger"&&!R;function B(){k.dispatch({type:"registerItem",payload:{ref:C,disabled:!!r}})}function O(){C.current&&I(!0)}function F(){I(!1)}function S(i){T||(R?O():(k.state.requestCloseRoot(i),y&&y(i)))}function q(i){R&&W(i,oe)&&(O(),i.stopPropagation()),(W(i,re)||W(i,ie))&&S(i),m.onKeyDown&&m.onKeyDown(i)}const L=v(c,`${N}--menu-item`,{[`${N}--menu-item--disabled`]:T,[`${N}--menu-item--danger`]:A});t.useEffect(()=>{B()},[]);const{direction:H}=fe();t.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||H==="rtl"?E(!0):E(!1)},[H]);const P=k.state.mode==="basic"||m.role==="menuitemcheckbox"||m.role==="menuitemradio";return t.useEffect(()=>{P&&u&&!k.state.hasIcons&&k.dispatch({type:"enableIcons"})},[P,u,k.state.hasIcons,k]),t.useEffect(()=>{Object.keys(d).forEach(i=>{h.floating.current&&i!=="position"&&(h.floating.current.style[i]=d[i])})},[d,h.floating]),n.createElement(ae,{context:w,order:["reference","floating"],modal:!1},n.createElement("li",M({role:"menuitem"},m,{ref:D,className:L,tabIndex:-1,"aria-disabled":T??void 0,"aria-haspopup":R??void 0,"aria-expanded":R?f:void 0,onClick:S,onKeyDown:q},_()),n.createElement("div",{className:`${N}--menu-item__icon`},P&&u&&n.createElement(u,null)),n.createElement(ge,{as:"div",className:`${N}--menu-item__label`,title:p},p),g&&!R&&n.createElement("div",{className:`${N}--menu-item__shortcut`},g),R&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${N}--menu-item__shortcut`},x?K||(K=n.createElement(he,null)):V||(V=n.createElement(be,null))),n.createElement(X,M({label:p,open:f,onClose:()=>{var i;F(),(i=C.current)==null||i.focus()},ref:h.setFloating},z()),a))))});G.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const we=t.forwardRef(function(l,o){let{className:a,defaultSelected:c,label:r,onChange:s,selected:p,...y}=l;const u=$(),g=t.useContext(j);g.state.mode;const[m,f]=Q({value:p,onChange:s,defaultValue:c??!1});function I(E){f(!m),s&&s(E)}t.useEffect(()=>{g.state.hasIcons||g.dispatch({type:"enableIcons"})},[g.state.hasIcons,g]);const x=v(a,`${u}--menu-item-selectable--selected`);return n.createElement(G,M({},y,{ref:o,label:r,className:x,role:"menuitemcheckbox","aria-checked":m,renderIcon:m?Y:void 0,onClick:I}))});we.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const Ce=t.forwardRef(function(l,o){let{children:a,className:c,label:r,...s}=l;const p=$(),y=v(c,`${p}--menu-item-group`);return n.createElement("li",{className:y,role:"none",ref:o},n.createElement("ul",M({},s,{role:"group","aria-label":r}),a))});Ce.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const Ie=b=>b.toString(),xe=t.forwardRef(function(l,o){let{className:a,defaultSelectedItem:c,items:r,itemToString:s=Ie,label:p,onChange:y,selectedItem:u,...g}=l;const m=$(),f=t.useContext(j);f.state.mode;const[I,x]=Q({value:u,onChange:y,defaultValue:c});function E(d,w){x(d)}t.useEffect(()=>{f.state.hasIcons||f.dispatch({type:"enableIcons"})},[f.state.hasIcons,f]);const h=v(a,`${m}--menu-item-radio-group`);return n.createElement("li",{className:h,role:"none",ref:o},n.createElement("ul",M({},g,{role:"group","aria-label":p}),r.map((d,w)=>n.createElement(G,{key:w,label:s(d),role:"menuitemradio","aria-checked":d===I,renderIcon:d===I?Y:void 0,onClick:_=>{E(d)}}))))});xe.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Re=t.forwardRef(function(l,o){let{className:a,...c}=l;const r=$(),s=v(a,`${r}--menu-item-divider`);return n.createElement("li",M({},c,{className:s,role:"separator",ref:o}))});Re.propTypes={className:e.string};const Ne=["primary","tertiary","ghost"],ke="primary",ve=t.forwardRef(function(l,o){let{children:a,className:c,disabled:r,kind:s=ke,label:p,size:y="lg",menuAlignment:u="bottom",tabIndex:g=0,menuTarget:m,...f}=l;const I=le("enable-v12-dynamic-floating-styles"),x=ce("MenuButton"),E=$(),h=t.useRef(null);let d=[];I||(d=[me({crossAxis:!1})]),(u==="bottom"||u==="top")&&d.push(ue({apply(S){let{rects:q,elements:L}=S;Object.assign(L.floating.style,{width:`${q.reference.width}px`})}}));const{refs:w,floatingStyles:_,placement:z,middlewareData:N}=J({placement:u,strategy:"fixed",middleware:d,whileElementsMounted:U}),k=Ee(o,h),{open:C,handleClick:D,handleMousedown:R,handleClose:T}=pe(h);t.useLayoutEffect(()=>{Object.keys(_).forEach(S=>{w.floating.current&&(w.floating.current.style[S]=_[S])})},[_,w.floating,N,z,C]);function A(){h.current&&D()}const B=v(`${E}--menu-button__container`,c),O=v(`${E}--menu-button__trigger`,{[`${E}--menu-button__trigger--open`]:C}),F=v(`${E}--menu-button__${u}`);return n.createElement("div",M({},f,{ref:k,"aria-owns":C?x:void 0,className:B}),n.createElement(ye,{ref:w.setReference,className:O,size:y,tabIndex:g,kind:s,renderIcon:de,disabled:r,"aria-haspopup":!0,"aria-expanded":C,onClick:A,onMouseDown:R,"aria-controls":C?x:void 0},p),n.createElement(X,{containerRef:h,menuAlignment:u,className:F,ref:w.setFloating,id:x,legacyAutoalign:!1,label:p,mode:"basic",size:y,open:C,onClose:T,target:m},a))});ve.propTypes={children:e.node.isRequired,className:e.string,disabled:e.bool,kind:e.oneOf(Ne),label:e.string.isRequired,menuAlignment:e.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:e.oneOf(["sm","md","lg"]),tabIndex:e.number,menuTarget:e.instanceOf(typeof Element<"u"?Element:Object)};const Se=typeof window<"u",Me=()=>{if(!Se)return{innerHeight:0,innerWidth:0,outerHeight:0,outerWidth:0};const{innerHeight:b,innerWidth:l,outerHeight:o,outerWidth:a}={...window};return{innerHeight:b,innerWidth:l,outerHeight:o,outerWidth:a}},qe=(b,l,o=0)=>{const a=t.useRef({}),c=t.useRef(null),r=()=>{const s={previous:a.current,current:Me()};b(s),a.current=s.current,c.current=null};t.useLayoutEffect(()=>{const s=()=>{o?c.current===null&&(c.current=setTimeout(r,o)):r()};return window.addEventListener("resize",s),r(),()=>window.removeEventListener("resize",s)},l)};export{ve as M,G as a,qe as u};
