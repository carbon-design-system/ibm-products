{"version":3,"file":"WebTerminalContentWrapper-BGn75QAD.js","sources":["../../src/components/WebTerminal/hooks/index.tsx","../../src/components/WebTerminal/WebTerminal.tsx","../../src/components/WebTerminal/WebTerminalContentWrapper.tsx"],"sourcesContent":["//\n// Copyright IBM Corp. 2022, 2022\n//\n// This source code is licensed under the Apache-2.0 license found in the\n// LICENSE file in the root directory of this source tree.\n//\n\nimport React, { useState, useCallback, createContext, ReactNode } from 'react';\nimport { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { pkg } from '../../../settings';\n\nexport interface WebTerminalContextType {\n  open?: boolean;\n  openWebTerminal?: () => void;\n  closeWebTerminal?: () => void;\n  toggleWebTerminal?: () => void;\n}\n\nexport const WebTerminalContext = createContext<WebTerminalContextType>({});\n\nconst componentName = 'WebTerminalProvider';\n\ninterface WebTerminalProviderProps {\n  /**\n   * Provide your own terminal component as children to show up in the web terminal\n   */\n  children: ReactNode | ReactNode[];\n}\n\nexport const WebTerminalProvider: React.FC<WebTerminalProviderProps> = ({\n  children,\n}) => {\n  const [open, setOpen] = useState(false);\n\n  const openWebTerminal = useCallback(() => setOpen(true), []);\n  const closeWebTerminal = useCallback(() => setOpen(false), []);\n  const toggleWebTerminal = useCallback(() => setOpen(!open), [open]);\n\n  return (\n    <WebTerminalContext.Provider\n      value={{ open, openWebTerminal, closeWebTerminal, toggleWebTerminal }}\n    >\n      {children}\n    </WebTerminalContext.Provider>\n  );\n};\n\nWebTerminalProvider.propTypes = {\n  /**\n   * Provide your own terminal component as children to show up in the web terminal\n   */\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n};\n\n// Custom hook that exposes the provided value from context\nexport const useWebTerminal = () => {\n  return useContext(WebTerminalContext);\n};\n","/**\n * Copyright IBM Corp. 2020, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { Button, OverflowMenu, OverflowMenuItem, Theme } from '@carbon/react';\n// Carbon and package components we use.\nimport { Close, Help } from '@carbon/react/icons';\n// Import portions of React that are needed.\nimport React, {\n  ForwardedRef,\n  MutableRefObject,\n  PropsWithChildren,\n  ReactNode,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\nimport { pkg } from '../../settings';\nimport { useWebTerminal } from './hooks';\nimport { usePrefersReducedMotion } from '../../global/js/hooks';\n\n// The block part of our conventional BEM class names (blockClass__E--M).\nconst componentName = 'WebTerminal';\nconst blockClass = `${pkg.prefix}--web-terminal`;\n\n// Default values for props\nconst defaults = {\n  actions: Object.freeze([]),\n  documentationLinks: Object.freeze([]),\n  documentationLinksIconDescription: 'Show documentation links',\n  isInitiallyOpen: false,\n  webTerminalAriaLabel: 'Web terminal header',\n};\n\ninterface Action {\n  renderIcon?: React.ElementType;\n  onClick: () => void;\n  iconDescription: string;\n}\n\nexport interface WebTerminalProps extends PropsWithChildren {\n  /**\n   * Provide your own terminal component as children to show up in the web terminal\n   */\n  children: ReactNode;\n  /**\n   * An array of actions to be displayed in the web terminal header bar\n   */\n  actions?: readonly Action[];\n\n  /**\n   * Custom classname for additional styling of the web terminal\n   */\n  className?: string;\n\n  /**\n   * Icon description for the close button\n   */\n  closeIconDescription: string;\n\n  /**\n   * Array of objects for each documentation link. Each documentation link uses the prop types of OverflowMenuItems. See more: https://react.carbondesignsystem.com/?path=/docs/components-overflowmenu--default\n   */\n  documentationLinks?: readonly (typeof OverflowMenuItem)[];\n\n  /**\n   * Description for the documentation link overflow menu tooltip\n   */\n  documentationLinksIconDescription?: string;\n\n  /**\n   * Optionally pass if the web terminal should be open by default\n   */\n  isInitiallyOpen?: boolean;\n\n  /**\n   * Specifies aria label for Web terminal\n   */\n  webTerminalAriaLabel?: string;\n}\n\ninterface HTMLElementStyled extends HTMLDivElement {\n  style: CSSStyleDeclaration;\n}\n\n/**\n * The `WebTerminal` is prompted by the user and is persistent until dismissed. The purpose of a web terminal is to provide users with the ability to type commands manually instead of using the GUI.\n */\nexport const WebTerminal = React.forwardRef(\n  (\n    {\n      // The component props, in alphabetical order (for consistency).\n\n      actions = defaults.actions,\n      children,\n      className,\n      closeIconDescription,\n      documentationLinks = defaults.documentationLinks,\n      documentationLinksIconDescription = defaults.documentationLinksIconDescription,\n      isInitiallyOpen = defaults.isInitiallyOpen,\n      webTerminalAriaLabel = defaults.webTerminalAriaLabel,\n      // Collect any other property values passed in.\n      ...rest\n    }: WebTerminalProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const localRef = useRef<HTMLDivElement>(null);\n    const webTerminalRef = (ref ??\n      localRef) as MutableRefObject<HTMLElementStyled>;\n\n    const { open, closeWebTerminal, openWebTerminal } = useWebTerminal();\n\n    const [shouldRender, setRender] = useState(open);\n    const shouldReduceMotion = usePrefersReducedMotion();\n\n    const showDocumentationLinks = useMemo(\n      () => documentationLinks.length > 0,\n      [documentationLinks]\n    );\n\n    useEffect(() => {\n      if (open) {\n        setRender(true);\n      }\n    }, [open]);\n\n    /**\n      On render, check if user want's the web terminal to be open by default\n    */\n    useEffect(() => {\n      if (isInitiallyOpen) {\n        openWebTerminal?.();\n      }\n    }, []); // eslint-disable-line\n\n    /**\n      When the web terminal slide in animation is complete, sets render to false.\n    */\n    const onAnimationEnd = () => {\n      if (!open) {\n        setRender(false);\n      }\n    };\n\n    const handleCloseTerminal = () => {\n      /**\n        If the user prefers reduced motion, we have to manually set render to false\n        because onAnimationEnd will never be called.\n      */\n      if (shouldReduceMotion) {\n        setRender(false);\n      }\n      closeWebTerminal?.();\n    };\n\n    return shouldRender ? (\n      <div\n        {...{\n          // Pass through any other property values as HTML attributes.\n          ...rest,\n          ...getDevtoolsProps(componentName),\n        }}\n        ref={webTerminalRef}\n        className={cx([\n          blockClass,\n          className,\n          {\n            [`${blockClass}--open`]: open,\n            [`${blockClass}--closed`]: !open,\n          },\n        ])}\n        onAnimationEnd={onAnimationEnd}\n      >\n        <header\n          aria-label={webTerminalAriaLabel}\n          className={`${blockClass}__bar`}\n        >\n          <div className={`${blockClass}__actions`}>\n            {showDocumentationLinks && (\n              <OverflowMenu\n                renderIcon={(props) => <Help size={16} {...props} />}\n                iconDescription={documentationLinksIconDescription}\n                aria-label={documentationLinksIconDescription}\n                menuOptionsClass={`${blockClass}__documentation-overflow`}\n                size=\"lg\"\n              >\n                {documentationLinks.map(({ ...rest }, i) => (\n                  <OverflowMenuItem key={i} {...rest} />\n                ))}\n              </OverflowMenu>\n            )}\n            {actions.map(({ renderIcon, onClick, iconDescription }) => (\n              <Button\n                key={iconDescription}\n                hasIconOnly\n                renderIcon={renderIcon}\n                onClick={onClick}\n                iconDescription={iconDescription}\n                kind=\"ghost\"\n                aria-label={iconDescription}\n              />\n            ))}\n          </div>\n          <Button\n            hasIconOnly\n            renderIcon={(props) => <Close size={16} {...props} />}\n            kind=\"ghost\"\n            iconDescription={closeIconDescription}\n            onClick={handleCloseTerminal}\n            onAnimationEnd={(event) => event.stopPropagation()}\n          />\n        </header>\n        <Theme theme=\"g100\">\n          <div className={`${blockClass}__body`}>{children}</div>\n        </Theme>\n      </div>\n    ) : null;\n  }\n);\n\n// Return a placeholder if not released and not enabled by feature flag\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nWebTerminal.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nWebTerminal.propTypes = {\n  /**\n   * An array of actions to be displayed in the web terminal header bar\n   */\n  /**@ts-ignore */\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      renderIcon: PropTypes.func.isRequired,\n      onClick: PropTypes.func.isRequired,\n      iconDescription: PropTypes.string.isRequired,\n    })\n  ),\n\n  /**\n   * Provide your own terminal component as children to show up in the web terminal\n   */\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n\n  /**\n   * Custom classname for additional styling of the web terminal\n   */\n  className: PropTypes.string,\n\n  /**\n   * Icon description for the close button\n   */\n  closeIconDescription: PropTypes.string.isRequired,\n\n  /**\n   * Array of objects for each documentation link. Each documentation link uses the prop types of OverflowMenuItems. See more: https://react.carbondesignsystem.com/?path=/docs/components-overflowmenu--default\n   */\n  /**@ts-ignore */\n  documentationLinks: PropTypes.arrayOf(\n    PropTypes.shape({\n      ...OverflowMenuItem.propTypes,\n    })\n  ),\n\n  /**\n   * Description for the documentation link overflow menu tooltip\n   */\n  documentationLinksIconDescription: PropTypes.string,\n\n  /**\n   * Optionally pass if the web terminal should be open by default\n   */\n  isInitiallyOpen: PropTypes.bool,\n\n  /**\n   * Specifies aria label for Web terminal\n   */\n  webTerminalAriaLabel: PropTypes.string,\n};\n","/**\n * Copyright IBM Corp. 2022, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Import portions of React that are needed.\nimport React, { ReactNode } from 'react';\n\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { pkg } from '../../settings';\nimport { useWebTerminal } from './hooks';\n\n// The block part of our conventional BEM class names (blockClass__E--M).\nconst componentName = 'WebTerminalContentWrapper';\nconst blockClass = `${pkg.prefix}--web-terminal-content-wrapper`;\n\nexport interface WebTerminalContentWrapperProps {\n  /**\n   * Pass in content as children.\n   */\n  children: ReactNode;\n}\nexport const WebTerminalContentWrapper = React.forwardRef<\n  HTMLDivElement,\n  WebTerminalContentWrapperProps\n>(\n  (\n    {\n      // The component props, in alphabetical order (for consistency).\n      children,\n\n      // Collect any other property values passed in.\n      ...rest\n    }: WebTerminalContentWrapperProps,\n    ref\n  ) => {\n    const { open } = useWebTerminal();\n    return (\n      <div\n        ref={ref}\n        className={cx([blockClass, { [`${blockClass}--open`]: open }])}\n        {...rest}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nWebTerminalContentWrapper.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nWebTerminalContentWrapper.propTypes = {\n  /**\n   * Pass in content as children.\n   */\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n};\n"],"names":["WebTerminalContext","createContext","WebTerminalProvider","children","open","setOpen","useState","openWebTerminal","useCallback","closeWebTerminal","toggleWebTerminal","React","PropTypes","useWebTerminal","useContext","componentName","blockClass","pkg","defaults","WebTerminal","actions","className","closeIconDescription","documentationLinks","documentationLinksIconDescription","isInitiallyOpen","webTerminalAriaLabel","rest","ref","localRef","useRef","webTerminalRef","shouldRender","setRender","shouldReduceMotion","usePrefersReducedMotion","showDocumentationLinks","useMemo","useEffect","onAnimationEnd","handleCloseTerminal","getDevtoolsProps","cx","OverflowMenu","props","Help","i","OverflowMenuItem","renderIcon","onClick","iconDescription","Button","Close","event","Theme","WebTerminalContentWrapper"],"mappings":"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"}