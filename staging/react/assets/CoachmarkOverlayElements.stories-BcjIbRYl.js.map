{"version":3,"file":"CoachmarkOverlayElements.stories-BcjIbRYl.js","sources":["../../src/patterns/CoachmarkOverlayElements/CoachmarkOverlayElements.mdx","../../src/patterns/CoachmarkOverlayElements/assets/sample-image.png","../../src/patterns/CoachmarkOverlayElements/CoachmarkOverlayElements.stories.jsx"],"sourcesContent":["import { Story, Controls, Source, Canvas } from '@storybook/addon-docs/blocks';\nimport { CodesandboxLink } from '../../global/js/utils/story-helper';\nimport * as CoachmarkOverlayElementsStories from './CoachmarkOverlayElements.stories';\nimport { stackblitzPrefillConfig } from '../../../previewer/codePreviewer';\n\n# CoachmarkOverlayElements\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Example usage](#example-usage)\n\n## Overview\n\nThe CoachmarkOverlayElements pattern acts as a container element for onboarding\nand should only be used within the scope of a Coachmark.\n\nTo build this pattern, we recommend including the following components:\n\n- [Coachmark](https://carbon-for-ibm-products.netlify.app/?path=/docs/preview-onboarding-coachmark--overview)\n- [Button](https://react.carbondesignsystem.com/?path=/docs/components-button)\n- [Carousel utility](https://github.com/carbon-design-system/carbon/blob/main/packages/utilities/src/carousel/README.md)\n\n## About Onboarding\n\n[Onboarding](https://pages.github.ibm.com/security/security-design/department/end-to-end-experiences/onboarding/overview/)\nis a continuous learning methodology and framework that aims to orient, onboard,\nexplain, educate, and cultivate novice users into high-functioning power users.\n\n## Example usage\n\n{/* TODO: One example per designed use case. */}\n\n<Canvas className=\"coachmarkExample\" withSource=\"none\">\n  <div className=\"CoachmarkBaseExampleUsage\">\n    <Story of={CoachmarkOverlayElementsStories.coachmarkOverlayElements} />\n  </div>\n</Canvas>\n","export default \"__VITE_ASSET__xkVC_EC2__\"","/**\n * Copyright IBM Corp. 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Theme } from '@carbon/react';\nimport styles from './_storybook-styles.scss?inline';\nimport DocsPage from './CoachmarkOverlayElements.mdx';\nimport { Coachmark } from '../../components/Coachmark/next/Coachmark';\nimport { CoachmarkBeacon } from '../../components/Coachmark/next/Coachmark/CoachmarkBeacon';\nimport {\n  initCarousel,\n  InitCarousel,\n} from '../../global/js/utils/carousel/carousel';\nimport sampleImage from './assets/sample-image.png';\n\nexport default {\n  title: 'Patterns/Coachmark Overlay Elements',\n  component: () => {},\n  tags: ['autodocs'],\n  parameters: {\n    styles,\n    docs: {\n      page: DocsPage,\n    },\n  },\n};\n\n//fetching theme\nfunction useCarbonTheme() {\n  const [themeValue, setThemeValue] = useState(() =>\n    document.documentElement.getAttribute('data-carbon-theme')\n  );\n\n  useEffect(() => {\n    const target = document.documentElement;\n\n    // function to read the current theme\n    const readTheme = () => {\n      const newTheme = target.getAttribute('data-carbon-theme');\n      setThemeValue((prev) => (prev !== newTheme ? newTheme : prev));\n    };\n\n    const observer = new MutationObserver((mutationsList) => {\n      for (const mutation of mutationsList) {\n        if (\n          mutation.type === 'attributes' &&\n          mutation.attributeName === 'data-carbon-theme'\n        ) {\n          readTheme();\n        }\n      }\n    });\n\n    observer.observe(target, {\n      attributes: true,\n      attributeFilter: ['data-carbon-theme'],\n    });\n\n    //fallback - check readTheme in every 200ms\n    const interval = setInterval(readTheme, 200);\n\n    return () => {\n      observer.disconnect();\n      clearInterval(interval);\n    };\n  }, []);\n\n  return themeValue;\n}\n\nconst CoachmarkOverlayElements = (args) => {\n  const carbonTheme = useCarbonTheme();\n  const [isOpen, setIsOpen] = useState(true);\n\n  const [currentViewIndex, setCurrentViewIndex] = useState(-1);\n  const [lastViewIndex, setLastViewIndex] = useState(-1);\n\n  // prettier-ignore\n  const carouselContainerRef = useRef < HTMLDivElement > (null);\n  // prettier-ignore\n  const carouselInit = useRef < InitCarousel > (null);\n\n  const items = [\n    {\n      id: 1,\n      title: 'Example 1',\n      text: 'This is an example description.',\n    },\n    {\n      id: 2,\n      title: 'Example 2',\n      text: 'This is an example description.',\n    },\n  ];\n\n  const handleClose = () => {\n    setIsOpen(false);\n    carouselInit.current.reset();\n  };\n\n  const handleBeaconClick = () => {\n    setIsOpen((isOpen) => !isOpen);\n  };\n\n  useEffect(() => {\n    if (carouselContainerRef && carouselContainerRef.current) {\n      carouselInit.current = initCarousel(carouselContainerRef.current, {\n        onViewChangeStart: onViewChangeStart,\n        onViewChangeEnd: onViewChangeEnd,\n      });\n    }\n  }, [carouselInit, isOpen]);\n\n  const onViewChangeStart = () => {};\n  const onViewChangeEnd = (options) => {\n    handleViewStackUpdate(options);\n  };\n\n  const handleViewStackUpdate = useCallback(({ currentIndex, lastIndex }) => {\n    setCurrentViewIndex(currentIndex);\n    setLastViewIndex(lastIndex);\n  }, []);\n\n  const onNext = () => {\n    carouselInit.current.next();\n  };\n  const onPrev = () => {\n    carouselInit.current.prev();\n  };\n\n  return (\n    <Theme theme={carbonTheme}>\n      <Coachmark\n        position={{ x: 151, y: 155 }}\n        open={isOpen}\n        onClose={handleClose}\n        align=\"top\"\n        {...args}\n      >\n        <CoachmarkBeacon\n          label=\"Show information\"\n          buttonProps={{ onClick: handleBeaconClick, id: 'CoachmarkBtn' }}\n        ></CoachmarkBeacon>\n        <Coachmark.Content highContrast={true}>\n          <Coachmark.Content.Header closeIconDescription=\"Close\"></Coachmark.Content.Header>\n          <Coachmark.Content.Body>\n            <div>\n              <img\n                src={sampleImage}\n                style={{\n                  width: '100%',\n                  marginBottom: '1rem',\n                }}\n              />\n            </div>\n            <div ref={carouselContainerRef} className=\"exampleCarouselWrapper\">\n              {items.map((item) => (\n                <div key={item.id}>\n                  <h2>{item.title}</h2>\n                  <p>{item.text}</p>\n                </div>\n              ))}\n            </div>\n\n            <div className={'carouselControlWrapper__footer'}>\n              <div className={'carouselControlWrapper--controls-progress'}>\n                {items.map((item, index) => {\n                  if (carouselInit.current?.getActiveItem?.()?.index === index)\n                    return (\n                      <span key={item.id}>\n                        {`${carouselInit.current?.getActiveItem?.()?.index + 1} / ${items.length}`}\n                      </span>\n                    );\n                })}\n              </div>\n              <div className={'carouselControlWrapper--buttons'}>\n                {currentViewIndex !== 0 && (\n                  <Button\n                    size=\"sm\"\n                    iconDescription=\"Previous\"\n                    kind=\"ghost\"\n                    onClick={onPrev}\n                  >\n                    Back\n                  </Button>\n                )}\n\n                {lastViewIndex !== currentViewIndex ? (\n                  <Button size=\"sm\" iconDescription=\"Next\" onClick={onNext}>\n                    Next\n                  </Button>\n                ) : (\n                  <Button size=\"sm\" onClick={handleClose}>\n                    Done\n                  </Button>\n                )}\n              </div>\n            </div>\n          </Coachmark.Content.Body>\n        </Coachmark.Content>\n      </Coachmark>\n    </Theme>\n  );\n};\n\nexport const CoachmarkOverlay = CoachmarkOverlayElements.bind({});\nCoachmarkOverlay.args = {};\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Canvas","Story","CoachmarkOverlayElementsStories.coachmarkOverlayElements","MDXContent","MDXLayout","sampleImage","CoachmarkOverlayElements_stories","title","component","tags","parameters","styles","docs","page","DocsPage","useCarbonTheme","themeValue","setThemeValue","useState","document","documentElement","getAttribute","useEffect","target","readTheme","newTheme","prev","observer","MutationObserver","mutationsList","mutation","type","attributeName","observe","attributes","attributeFilter","interval","setInterval","disconnect","clearInterval","CoachmarkOverlayElements","args","carbonTheme","isOpen","setIsOpen","currentViewIndex","setCurrentViewIndex","lastViewIndex","setLastViewIndex","carouselContainerRef","useRef","carouselInit","items","id","text","handleClose","current","reset","handleBeaconClick","initCarousel","onViewChangeStart","onViewChangeEnd","options","handleViewStackUpdate","useCallback","currentIndex","lastIndex","onNext","next","onPrev","Theme","React","Coachmark","x","y","CoachmarkBeacon","onClick","width","marginBottom","map","item","index","getActiveItem","length","Button","CoachmarkOverlay","bind","source","originalSource"],"mappings":"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"}