{"version":3,"file":"useEditableCell-7-78ryj2.js","sources":["../../src/components/Datagrid/Datagrid/addons/InlineEdit/InlineEditButton/InlineEditButton.js","../../src/components/Datagrid/Datagrid/addons/InlineEdit/InlineEditCell/InlineEditCell.js","../../src/components/Datagrid/useInlineEdit.tsx","../../src/components/Datagrid/useEditableCell.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2022, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport { pkg } from '../../../../../../settings';\n\nconst blockClass = `${pkg.prefix}--datagrid`;\nexport const InlineEditButton = ({\n  label,\n  renderIcon: Icon,\n  labelIcon: LabelIcon,\n  placeholder,\n  disabledCell,\n  nonEditCell,\n  isActiveCell,\n  columnConfig,\n  type,\n}) => {\n  return (\n    <div\n      className={cx(`${blockClass}__inline-edit-button`, {\n        [`${blockClass}__inline-edit-button--disabled`]: disabledCell,\n        [`${blockClass}__inline-edit-button--with-label-icon`]: LabelIcon,\n        [`${blockClass}__inline-edit-button--non-edit`]: nonEditCell,\n        [`${blockClass}__inline-edit-button--active`]: isActiveCell,\n        [`${blockClass}__inline-edit-button--${type}`]:\n          type === 'date' || type === 'selection',\n      })}\n      tabIndex={isActiveCell ? 0 : -1}\n      data-disabled={disabledCell}\n      aria-disabled={disabledCell}\n      role=\"button\"\n    >\n      {LabelIcon && (\n        <div className={`${blockClass}__label-icon`}>\n          <LabelIcon />\n        </div>\n      )}\n      {label !== '' ? (\n        <span\n          className={cx(`${blockClass}__inline-edit-button-label`, {\n            [`${blockClass}__inline-edit-button-label-with-icon`]: !nonEditCell, // update later to some kind of renderIcon prop\n            [`${blockClass}__defaultStringRenderer--multiline`]:\n              columnConfig?.multiLineWrap,\n          })}\n        >\n          {label}\n        </span>\n      ) : (\n        <span className={`${blockClass}__placeholder`}>{placeholder}</span>\n      )}\n      {!nonEditCell && Icon && (\n        <div className={`${blockClass}__inline-edit-button-icon`}>\n          <Icon />\n        </div>\n      )}\n    </div>\n  );\n};\n\nInlineEditButton.propTypes = {\n  columnConfig: PropTypes.object,\n  disabledCell: PropTypes.bool,\n  isActiveCell: PropTypes.bool,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  labelIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n  nonEditCell: PropTypes.bool,\n  placeholder: PropTypes.string,\n  renderIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n  type: PropTypes.oneOf(['text', 'number', 'selection', 'date', 'checkbox']),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n};\n","/**\n * Copyright IBM Corp. 2022, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  useState,\n  useRef,\n  useEffect,\n  useContext,\n  useCallback,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  TextInput,\n  NumberInput,\n  Dropdown,\n  DatePicker,\n  DatePickerInput,\n  Checkbox,\n} from '@carbon/react';\nimport { Edit, CaretSort, ChevronDown, Calendar } from '@carbon/react/icons';\nimport { InlineEditButton } from '../InlineEditButton';\nimport { pkg } from '../../../../../../settings';\nimport cx from 'classnames';\nimport { InlineEditContext } from '../InlineEditContext';\nimport {\n  useIsomorphicEffect,\n  usePreviousValue,\n} from '../../../../../../global/js/hooks';\nimport { prepareProps } from '../../../../../../global/js/utils/props-helper';\n\nconst blockClass = `${pkg.prefix}--datagrid`;\nexport const InlineEditCell = ({\n  cell,\n  config,\n  disabledCell = false,\n  instance,\n  placeholder = '',\n  tabIndex,\n  value,\n  nonEditCell = false,\n  type,\n}) => {\n  const columnId = cell.column.id;\n  const columnIndex = instance.columns.findIndex((col) => col.id === columnId);\n  const rowIndex = cell.row.index;\n  const cellId = `column-${columnIndex}-row-${rowIndex}`;\n\n  const { state, dispatch } = useContext(InlineEditContext);\n  const [inEditMode, setInEditMode] = useState(false);\n  const [cellValue, setCellValue] = useState(value);\n  const [initialValue, setInitialValue] = useState();\n  const [cellLabel, setCellLabel] = useState();\n  const { activeCellId, editId } = state;\n  const previousState = usePreviousValue({ editId, activeCellId });\n  const { inputProps } = config || {};\n\n  const textInputRef = useRef(undefined);\n  const checkboxRef = useRef(undefined);\n  const numberInputRef = useRef(undefined);\n  const dropdownRef = useRef(undefined);\n  const outerButtonElement = useRef(undefined);\n\n  const { rowSize, onDataUpdate } = instance;\n  let saveCellData;\n\n  if (inEditMode) {\n    instance.cellEditing = {\n      cellId,\n      columnIndex,\n      rowIndex,\n      curCellValue: cellValue,\n    };\n  }\n\n  useEffect(() => {\n    setInitialValue(value);\n    const columnId = cell.column.id;\n    const columnLabel = instance.columns.find((item) => item.id === columnId);\n    setCellLabel(\n      typeof columnLabel.Header === 'string'\n        ? columnLabel.Header\n        : 'Inline edit cell label'\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Reverts cellValue back to initialValue when exiting edit mode via clicking outside\n  // of the cell (either on a regular cell or clicking into another inline edit cell) and the\n  // edit input is in an invalid state\n  useEffect(() => {\n    if (\n      (previousState?.editId === cellId && !editId) ||\n      (previousState?.editId === cellId && cellId !== editId)\n    ) {\n      const { validator } = config || {};\n      const isInvalid = validator?.(cellValue);\n      if (isInvalid) {\n        setCellValue(initialValue);\n        saveCellData(initialValue);\n        return;\n      }\n    }\n  }, [\n    previousState?.editId,\n    editId,\n    cellId,\n    cellValue,\n    config,\n    initialValue,\n    saveCellData,\n  ]);\n\n  // If you are in edit mode and click outside of the cell,\n  // this changes the cell back to the InlineEditButton\n  useEffect(() => {\n    if (activeCellId !== cellId || !editId) {\n      setInEditMode(false);\n    }\n\n    if (activeCellId === cellId && editId === cellId && !nonEditCell) {\n      setInEditMode(true);\n      saveCellData(cellValue);\n    }\n  }, [activeCellId, cellId, nonEditCell, editId, cellValue, saveCellData]);\n\n  const openDropdown = (type) => {\n    // *****\n    // Only added this querySelector because v11 Datepicker isn't forwarding the ref which breaks how we were handling this in v10\n    // *****\n    const datePickerInputElement = document.querySelector(\n      `#${blockClass}__inline-edit--date-picker--${cell.row.index}`\n    );\n\n    const dropdownTrigger =\n      type === 'selection' ? dropdownRef?.current : datePickerInputElement;\n    dropdownTrigger.click();\n    if (type === 'date') {\n      dropdownTrigger?.focus();\n    }\n  };\n\n  // Re-initializes initialValue if clicking outside of a cell that was previously\n  // in edit mode, otherwise `initialValue` becomes stale\n  useEffect(() => {\n    if (\n      previousState?.editId === cellId &&\n      previousState?.activeCellId === cellId &&\n      activeCellId !== cellId\n    ) {\n      const { validator } = config || {};\n      const isInvalid = validator?.(cellValue);\n      if (!isInvalid) {\n        setInitialValue(cellValue);\n      }\n    }\n  }, [previousState, cellId, cellValue, activeCellId, config]);\n\n  const handleInlineCellClick = () => {\n    if (!inEditMode) {\n      dispatch({\n        type: 'ENTER_EDIT_MODE',\n        payload: {\n          activeCellId: cellId,\n          editId: cellId,\n        },\n      });\n      setInEditMode(true);\n      setTimeout(() => {\n        if (type === 'selection' || type === 'date') {\n          openDropdown(type);\n        }\n      }, 1);\n    }\n  };\n\n  // Auto focus text input when entering edit mode\n  useEffect(() => {\n    if (inEditMode) {\n      if (type === 'text') {\n        textInputRef.current.focus();\n      }\n      if (type === 'number') {\n        numberInputRef.current.focus();\n      }\n      if (type === 'selection') {\n        dropdownRef?.current?.focus();\n      }\n    }\n  }, [inEditMode, type]);\n\n  // Saves the new cell data, onDataUpdate is a required function to be\n  // passed to useDatagrid when using useInlineEdit\n  saveCellData = useCallback(\n    (newValue) => {\n      const columnId = cell.column.id;\n      const rowIndex = cell.row.index;\n      onDataUpdate((prev) =>\n        prev.map((row, index) => {\n          if (index === rowIndex) {\n            return {\n              ...prev[rowIndex],\n              [columnId]: newValue,\n            };\n          }\n          return row;\n        })\n      );\n    },\n    [cell, onDataUpdate]\n  );\n\n  // Initialize cellValue from value prop\n  useEffect(() => {\n    setCellValue(value);\n  }, [value]);\n\n  const sendFocusBackToGrid = () => {\n    // Allows the onKeyDown listener to go back to the entire grid area\n    const inlineEditArea = document.querySelector(\n      `#${instance.tableId} .${blockClass}__table-with-inline-edit`\n    );\n    inlineEditArea.focus();\n  };\n\n  const getNewCellId = (key) => {\n    const totalRows = instance.rows.length;\n    const newCellId =\n      key === 'Enter'\n        ? `column-${columnIndex}-row-${\n            cell.row.index < totalRows - 1 && type === 'checkbox'\n              ? cell.row.index + 1\n              : cell.row.index\n          }`\n        : `column-${\n            columnIndex < instance.columns.length - 1\n              ? columnIndex + 1\n              : columnIndex\n          }-row-${cell.row.index}`;\n    return newCellId;\n  };\n\n  const handleKeyDown = (event) => {\n    const { key } = event;\n    switch (key) {\n      case 'ArrowRight':\n      case 'ArrowLeft':\n      case 'ArrowUp':\n      case 'ArrowDown':\n        if (inEditMode && event.target.type === 'checkbox') {\n          const newCellId = getNewCellId(key);\n          saveCellData(cellValue);\n          setInitialValue(cellValue);\n          dispatch({ type: 'EXIT_EDIT_MODE', payload: newCellId });\n          setInEditMode(false);\n          sendFocusBackToGrid();\n        }\n        break;\n      // Save cell contents to data\n      case 'Tab':\n      case 'Enter': {\n        if (type === 'checkbox') {\n          // Since checkbox doesn't need to click into it to enter `inEditMode` we don't need to check for it\n          const newCellId = getNewCellId(key);\n          dispatch({ type: 'EXIT_EDIT_MODE', payload: newCellId });\n          setInEditMode(false);\n          sendFocusBackToGrid();\n        }\n        if (inEditMode) {\n          // Dropdown saves are handled in the Dropdown's/DatePicker's onChange prop\n          if (type === 'selection' || type === 'date') {\n            return;\n          }\n          const { validator } = config || {};\n          const isInvalid = validator?.(cellValue);\n          // If an invalid state is detected, Tab/Enter should not do anything\n          // until the input has a valid state once again\n          if (isInvalid) {\n            return;\n          }\n          const newCellId = getNewCellId(key);\n          saveCellData(cellValue);\n          setInitialValue(cellValue);\n          dispatch({ type: 'EXIT_EDIT_MODE', payload: newCellId });\n          setInEditMode(false);\n          sendFocusBackToGrid();\n        }\n        break;\n      }\n      case 'Escape': {\n        if (inEditMode) {\n          dispatch({ type: 'EXIT_EDIT_MODE', payload: cellId });\n          setCellValue(initialValue);\n          saveCellData(initialValue);\n          setInEditMode(false);\n          sendFocusBackToGrid();\n        }\n        break;\n      }\n      default:\n        return;\n    }\n  };\n\n  const addActiveState = () => {\n    dispatch({ type: 'UPDATE_ACTIVE_CELL_ID', payload: cellId });\n  };\n\n  const renderDropdownItem = (item) => {\n    const includesIcon = !!item?.icon;\n    return includesIcon ? (\n      <>\n        {React.createElement(item.icon)}\n        <span className={cx(`${blockClass}__inline-edit--select-item`)}>\n          {item?.text}\n        </span>\n      </>\n    ) : (\n      item?.text\n    );\n  };\n\n  const handleTransformedItem = (items) => {\n    return items?.length && typeof items[0] === 'object'\n      ? (item) => renderDropdownItem(item)\n      : null;\n  };\n\n  useIsomorphicEffect(() => {\n    if (dropdownRef.current && dropdownRef.current.style) {\n      const closestElement = dropdownRef.current.closest(\n        `.${blockClass}__inline-edit--select`\n      );\n      closestElement.style.width = `${cell.column.totalWidth}px`;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dropdownRef.current, cell.column.totalWidth]);\n\n  const renderSelectCell = () => {\n    const { inputProps } = config || {};\n    return (\n      <Dropdown\n        id={cellId}\n        label={cellLabel || 'Dropdown menu options'}\n        ariaLabel={cellLabel || 'Dropdown menu options'}\n        {...inputProps}\n        hideLabel\n        className={cx(`${blockClass}__inline-edit--select`, {\n          [`${blockClass}__inline-edit--select-${rowSize}`]: rowSize,\n        })}\n        items={inputProps?.items || []}\n        initialSelectedItem={cell.value}\n        itemToElement={handleTransformedItem(inputProps?.items)}\n        renderSelectedItem={handleTransformedItem(inputProps?.items)}\n        onChange={(item) => {\n          const newCellId = getNewCellId('Enter');\n          saveCellData(item.selectedItem);\n          setCellValue(item.selectedItem);\n          dispatch({ type: 'EXIT_EDIT_MODE', payload: newCellId });\n          setInEditMode(false);\n          sendFocusBackToGrid();\n          inputProps?.onChange?.(item.selectedItem);\n        }}\n        downshiftProps={{\n          onStateChange: (downshiftState) => {\n            const { isOpen } = downshiftState || {};\n            // !isOpen does not work in this case because a state change occurs on hover of the\n            // menu items and isOpen is changed to undefined which causes dispatch to be called unexpectedly\n            if (isOpen === false) {\n              dispatch({ type: 'EXIT_EDIT_MODE', payload: cellId });\n              setInEditMode(false);\n              sendFocusBackToGrid();\n            }\n          },\n        }}\n        ref={dropdownRef}\n        autoAlign\n      />\n    );\n  };\n\n  const setRenderIcon = () => {\n    if (type === 'text') {\n      return Edit;\n    }\n    if (type === 'number') {\n      return CaretSort;\n    }\n    if (type === 'selection') {\n      return ChevronDown;\n    }\n    if (type === 'date') {\n      return Calendar;\n    }\n  };\n\n  const renderDateCell = () => {\n    const datePickerPreparedProps = prepareProps(config.inputProps, [\n      'datePickerInputProps',\n    ]);\n    const datePickerInputProps = config?.inputProps?.datePickerInputProps;\n    return (\n      <DatePicker\n        {...datePickerPreparedProps}\n        appendTo={outerButtonElement?.current?.parentElement}\n        ref={(el) => {\n          if (el && el.style) {\n            el.style.width = `${cell.column.totalWidth}px`;\n            const elementId = `${blockClass}__inline-edit--date-picker--${cell.row.index}`;\n            const element = el.querySelector(`input#${elementId}`);\n            if (element) {\n              element.style.position = 'static';\n            }\n          }\n        }}\n        datePickerType=\"single\"\n        className={cx(`${blockClass}__inline-edit--date`, {\n          [`${blockClass}__inline-edit--date-${rowSize}`]: rowSize,\n        })}\n        onChange={(newDate) => {\n          const newDateObj = newDate[0];\n          datePickerPreparedProps?.onChange?.(newDateObj, cell);\n          const newCellId = getNewCellId('Enter');\n          saveCellData(newDateObj);\n          setCellValue(newDateObj);\n          // To handle the interaction of the masked input when the DatePicker and updating\n          setTimeout(() => {\n            setInEditMode(false);\n            sendFocusBackToGrid();\n            dispatch({ type: 'EXIT_EDIT_MODE', payload: newCellId });\n          }, 1);\n        }}\n        value={cell.value}\n      >\n        <DatePickerInput\n          {...datePickerInputProps}\n          placeholder={datePickerInputProps?.placeholder || 'mm/dd/yyyy'}\n          labelText={datePickerInputProps?.labelText || cellLabel || 'Set date'}\n          id={`${blockClass}__inline-edit--date-picker--${cell.row.index}`}\n          hideLabel\n        />\n      </DatePicker>\n    );\n  };\n\n  // Ensures that months and days are all 2 digits, prefixes 0 if `num` is a single digit\n  const padTo2Digits = (num) => {\n    return num.toString().padStart(2, '0');\n  };\n\n  const buildDate = (value) => {\n    const dateFormat = config?.inputProps?.dateFormat;\n    if (value instanceof Date) {\n      const maskedFullYear = value.getFullYear();\n      const maskedMonth = padTo2Digits(value.getMonth() + 1);\n      const maskedDay = padTo2Digits(value.getDate());\n      if (dateFormat === 'm/d/Y' || value === 'm/d/y') {\n        return [maskedMonth, maskedDay, maskedFullYear].join('/');\n      }\n      if (\n        dateFormat === 'd/m/Y' ||\n        dateFormat === 'd/m/y' ||\n        dateFormat === undefined\n      ) {\n        return [maskedDay, maskedMonth, maskedFullYear].join('/');\n      }\n    } else {\n      return value;\n    }\n    return null;\n  };\n\n  const renderNumberInput = () => {\n    const { validator } = config || {};\n    return (\n      <NumberInput\n        placeholder={placeholder}\n        label={cellLabel}\n        {...inputProps}\n        id={cellId}\n        hideLabel\n        defaultValue={cellValue}\n        invalid={validator?.(cellValue)}\n        invalidText={inputProps?.invalidText || 'Provide missing invalidText'}\n        onChange={(event, { value }) => {\n          setCellValue(value);\n          if (inputProps.onChange) {\n            inputProps.onChange(value);\n          }\n        }}\n        ref={numberInputRef}\n      />\n    );\n  };\n\n  const renderCheckBoxCell = () => {\n    return (\n      <Checkbox\n        labelText={cellLabel || 'Checkbox'}\n        {...inputProps}\n        className={cx(`${blockClass}__inline-edit--outer-cell-checkbox`, {\n          [`${blockClass}__inline-edit--outer-cell-checkbox-focus`]:\n            activeCellId === cellId,\n        })}\n        id={cellId}\n        hideLabel\n        checked={cellValue}\n        onChange={(event, { checked }) => {\n          setCellValue(checked);\n          if (inputProps.onChange) {\n            inputProps.onChange(checked);\n          }\n        }}\n        ref={checkboxRef}\n      />\n    );\n  };\n\n  const renderTextInput = () => {\n    const { validator } = config || {};\n    const isInvalid = validator?.(cellValue);\n    return (\n      <TextInput\n        labelText={cellLabel}\n        placeholder={placeholder}\n        {...inputProps}\n        id={cellId}\n        hideLabel\n        defaultValue={cellValue}\n        invalid={isInvalid}\n        invalidText={inputProps?.invalidText || 'Provide missing invalidText'}\n        onChange={(event) => {\n          setCellValue(event.target.value);\n          if (inputProps.onChange) {\n            inputProps.onChange(event.target.value);\n          }\n        }}\n        ref={textInputRef}\n      />\n    );\n  };\n\n  const getLabel = () => {\n    const checkStaticCell = (val) => {\n      if (typeof val === 'object' && val?.isStaticCell) {\n        return val?.value;\n      }\n    };\n    switch (type) {\n      case 'selection':\n        checkStaticCell(value);\n        return value?.text ?? value;\n      case 'date':\n        checkStaticCell(value);\n        return buildDate(value);\n      default:\n        return checkStaticCell(value) ?? value;\n    }\n  };\n\n  return (\n    // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n    <div\n      ref={outerButtonElement}\n      data-cell-id={cellId}\n      data-column-index={columnIndex}\n      data-row-index={cell.row.index}\n      data-disabled={disabledCell || nonEditCell}\n      data-inline-type={type}\n      onClick={!nonEditCell ? handleInlineCellClick : addActiveState}\n      onKeyDown={!nonEditCell ? handleKeyDown : null}\n      className={cx(`${blockClass}__inline-edit--outer-cell-button`, {\n        [`${blockClass}__inline-edit--outer-cell-button--${rowSize}`]: rowSize,\n        [`${blockClass}__inline-edit--outer-cell-button--lg`]: !rowSize,\n        [`${blockClass}__inline-edit--outer-cell-button--invalid`]:\n          inEditMode && config?.validator?.(cellValue),\n        [`${blockClass}__static--outer-cell`]: !disabledCell,\n      })}\n    >\n      {(!inEditMode || disabledCell) && type !== 'checkbox' && (\n        <InlineEditButton\n          isActiveCell={cellId === activeCellId}\n          renderIcon={setRenderIcon()}\n          label={getLabel()}\n          disabledCell={disabledCell}\n          labelIcon={value?.icon || null}\n          placeholder={placeholder}\n          tabIndex={tabIndex}\n          nonEditCell={nonEditCell}\n          columnConfig={cell.column}\n          type={type}\n        />\n      )}\n      {type === 'checkbox' && renderCheckBoxCell()}\n      {!nonEditCell && inEditMode && cellId === activeCellId && (\n        <>\n          {type === 'text' && renderTextInput()}\n          {type === 'number' && renderNumberInput()}\n          {type === 'selection' && renderSelectCell()}\n          {type === 'date' && renderDateCell()}\n        </>\n      )}\n    </div>\n  );\n};\n\nInlineEditCell.propTypes = {\n  cell: PropTypes.object,\n  config: PropTypes.object,\n  disabledCell: PropTypes.bool,\n  instance: PropTypes.shape({\n    columns: PropTypes.arrayOf(PropTypes.object),\n    onDataUpdate: PropTypes.func,\n    rows: PropTypes.arrayOf(PropTypes.object),\n    rowSize: PropTypes.string,\n    tableId: PropTypes.string,\n    cellEditing: PropTypes.object,\n  }),\n  nonEditCell: PropTypes.bool,\n  placeholder: PropTypes.string,\n  tabIndex: PropTypes.number,\n  type: PropTypes.oneOf(['text', 'number', 'selection', 'date', 'checkbox']),\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.node,\n    PropTypes.object,\n  ]),\n};\n","/**\n * Copyright IBM Corp. 2022, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { pkg } from '../../settings';\nimport cx from 'classnames';\nimport { InlineEditCell } from './Datagrid/addons/InlineEdit/InlineEditCell';\nimport { Hooks, TableInstance } from 'react-table';\nimport { DataGridState } from './types';\n\nconst blockClass = `${pkg.prefix}--datagrid`;\n\nconst useInlineEdit = (hooks: Hooks) => {\n  const addInlineEdit = (props, { cell, instance }) => {\n    const columnInlineEditConfig = cell.column.inlineEdit;\n    const inlineEditType = cell.column?.inlineEdit?.type;\n    const isDisabled = cell.column?.isDisabled;\n    const staticCell =\n      typeof cell.value === 'object' &&\n      cell.column.id === cell.value?.columnId &&\n      cell.value?.isStaticCell;\n\n    const renderInlineEditComponent = (type) => (\n      <InlineEditCell\n        config={columnInlineEditConfig}\n        tabIndex={-1}\n        value={cell.value}\n        cell={cell}\n        disabledCell={isDisabled}\n        instance={instance}\n        type={type}\n      />\n    );\n\n    if (cell.column.id === 'spacer') {\n      return [\n        props,\n        {\n          className: cx(`${blockClass}__cell`, `${blockClass}__cell--spacer`),\n        },\n      ];\n    }\n\n    return [\n      props,\n      {\n        className: cx(`${blockClass}__cell`, `${blockClass}__cell-inline-edit`),\n        role: 'gridcell',\n        children: (\n          <>\n            {!staticCell &&\n              inlineEditType === 'text' &&\n              renderInlineEditComponent(inlineEditType)}\n            {!staticCell &&\n              inlineEditType === 'number' &&\n              renderInlineEditComponent(inlineEditType)}\n            {!staticCell &&\n              inlineEditType === 'selection' &&\n              renderInlineEditComponent(inlineEditType)}\n            {inlineEditType === 'checkbox' &&\n              renderInlineEditComponent(inlineEditType)}\n            {!staticCell &&\n              inlineEditType === 'date' &&\n              renderInlineEditComponent(inlineEditType)}\n            {/* Render default inline edit cell button, if it's column doesn't have an inline edit configuration */}\n            {staticCell && (\n              <InlineEditCell\n                config={columnInlineEditConfig}\n                tabIndex={-1}\n                value={cell.value?.value}\n                cell={cell}\n                instance={instance}\n                nonEditCell\n                type=\"text\"\n              />\n            )}\n            {!inlineEditType && (\n              <InlineEditCell\n                config={columnInlineEditConfig}\n                tabIndex={-1}\n                value={cell.value}\n                cell={cell}\n                instance={instance}\n                disabledCell={isDisabled}\n                nonEditCell\n                type=\"text\"\n              />\n            )}\n          </>\n        ),\n      },\n    ];\n  };\n  hooks.getCellProps.push(addInlineEdit);\n  hooks.useInstance.push((instance: TableInstance) => {\n    Object.assign(instance as DataGridState, {\n      withInlineEdit: true,\n    });\n  });\n};\n\nexport default useInlineEdit;\n","/**\n * Copyright IBM Corp. 2023, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport useInlineEdit from './useInlineEdit';\n\nconst useEditableCell = (hooks) => {\n  useInlineEdit(hooks, 'usingEditableCell');\n};\n\nexport default useEditableCell;\n"],"names":["blockClass","pkg","InlineEditButton","label","Icon","LabelIcon","placeholder","disabledCell","nonEditCell","isActiveCell","columnConfig","type","React","cx","PropTypes","InlineEditCell","cell","config","instance","tabIndex","value","columnId","columnIndex","col","rowIndex","cellId","state","dispatch","useContext","InlineEditContext","inEditMode","setInEditMode","useState","cellValue","setCellValue","initialValue","setInitialValue","cellLabel","setCellLabel","activeCellId","editId","previousState","usePreviousValue","inputProps","textInputRef","useRef","checkboxRef","numberInputRef","dropdownRef","outerButtonElement","rowSize","onDataUpdate","saveCellData","useEffect","columnLabel","item","validator","openDropdown","datePickerInputElement","dropdownTrigger","handleInlineCellClick","useCallback","newValue","prev","row","index","sendFocusBackToGrid","getNewCellId","key","totalRows","handleKeyDown","event","newCellId","addActiveState","renderDropdownItem","handleTransformedItem","items","useIsomorphicEffect","closestElement","renderSelectCell","Dropdown","downshiftState","isOpen","setRenderIcon","Edit","CaretSort","ChevronDown","Calendar","renderDateCell","datePickerPreparedProps","prepareProps","datePickerInputProps","DatePicker","el","elementId","element","newDate","newDateObj","DatePickerInput","padTo2Digits","num","buildDate","dateFormat","maskedFullYear","maskedMonth","maskedDay","renderNumberInput","NumberInput","renderCheckBoxCell","Checkbox","checked","renderTextInput","isInvalid","TextInput","getLabel","checkStaticCell","val","useInlineEdit","hooks","addInlineEdit","props","columnInlineEditConfig","inlineEditType","isDisabled","staticCell","renderInlineEditComponent","useEditableCell"],"mappings":"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"}