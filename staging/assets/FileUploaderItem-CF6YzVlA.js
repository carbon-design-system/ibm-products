import{b as R,t as G,_ as T,w as J,P as t,d as O,n as P,E as W,S as q,g as A}from"./index-5As4T26e.js";import{e as a,r as E}from"./index-DzvNrmz8.js";import{n as L,bi as j,T as M}from"./settings-CP9zVSjJ.js";import{c as Q}from"./events-OVwOsPzJ.js";import{L as V}from"./InlineLoading-pF8In0wu.js";import{W as X}from"./bucket-18-D-cwffHE.js";import{T as D}from"./Text-DyBNjUAs.js";var S;function z($){let{iconDescription:r="Uploading file",status:l="uploading",invalid:p,name:s,tabIndex:u=0,["aria-describedby"]:c,...m}=$;const o=R();switch(l){case"uploading":return a.createElement(V,{description:r,small:!0,withOverlay:!1,className:`${o}--file-loading`});case"edit":return a.createElement(a.Fragment,null,p&&a.createElement(X,{className:`${o}--file-invalid`}),a.createElement("button",T({"aria-label":`${r} - ${s}`,className:`${o}--file-close`,type:"button",tabIndex:u},m,{"aria-describedby":p?c:void 0}),S||(S=a.createElement(J,null))));case"complete":return a.createElement(G,T({"aria-label":r,className:`${o}--file-complete`},m,{tabIndex:-1}),r&&a.createElement("title",null,r));default:return null}}z.propTypes={"aria-describedby":t.string,iconDescription:t.string,invalid:t.bool,name:t.string,status:t.oneOf(["edit","complete","uploading"]),tabIndex:t.number};function Y($){let{accept:r=[],className:l,id:p,disabled:s,labelText:u="Add file",multiple:c=!1,name:m,onAddFiles:o=L,onClick:x,pattern:C=".[0-9a-z]+$",innerRef:F,...y}=$;const d=R(),v=E.useRef(null),{current:i}=E.useRef(p||j()),[_,N]=E.useState(!1),w=O(`${d}--file__drop-container`,`${d}--file-browse-btn`,{[`${d}--file__drop-container--drag-over`]:_,[`${d}--file-browse-btn--disabled`]:s},l);function b(e){if(!r.length)return e;const f=new Set(r);return e.reduce((g,h)=>{const{name:U,type:K=""}=h,H=new RegExp(C,"i"),[I]=U.match(H)??[];return I===void 0?g:f.has(K)||f.has(I.toLowerCase())?g.concat([h]):(h.invalidFileType=!0,g.concat([h]))},[])}function k(e){const f=[...e.target.files??[]],g=b(f);return o(e,{addedFiles:g})}function n(e){const f=[...e.dataTransfer.files],g=b(f);return o(e,{addedFiles:g})}const B=()=>{var e;s||(e=v.current)==null||e.click()};return a.createElement("div",{className:`${d}--file`,onDragOver:e=>{e.stopPropagation(),e.preventDefault(),!s&&(N(!0),e.dataTransfer.dropEffect="copy")},onDragLeave:e=>{e.stopPropagation(),e.preventDefault(),!s&&(N(!1),e.dataTransfer.dropEffect="move")},onDrop:e=>{e.stopPropagation(),e.preventDefault(),!s&&(N(!1),n(e))}},a.createElement("button",T({type:"button",className:w,ref:F,onKeyDown:e=>{var f;P(e,[W,q])&&(e.preventDefault(),(f=v.current)==null||f.click())},onClick:Q([x,B])},y),u),a.createElement("label",{htmlFor:i,className:`${d}--visually-hidden`},u),a.createElement("input",{type:"file",id:i,className:`${d}--file-input`,ref:v,tabIndex:-1,disabled:s,accept:r.join(","),name:m,multiple:c,onChange:k,onClick:e=>{e.target.value=""}}))}Y.propTypes={accept:t.arrayOf(t.string),className:t.string,disabled:t.bool,id:t.string,labelText:t.string.isRequired,multiple:t.bool,name:t.string,onAddFiles:t.func,onClick:t.func,pattern:t.string,role:A(t.number),tabIndex:A(t.number)};function Z($){let{uuid:r,name:l,status:p="uploading",iconDescription:s,onDelete:u=L,invalid:c,errorSubject:m,errorBody:o,size:x,className:C,...F}=$;const y=E.useRef(null),[d,v]=E.useState(!1),i=R(),{current:_}=E.useRef(r||j()),N=O(`${i}--file__selected-file`,C,{[`${i}--file__selected-file--invalid`]:c,[`${i}--file__selected-file--md`]:x==="md",[`${i}--file__selected-file--sm`]:x==="sm"}),w=c?`${i}--file-filename-container-wrap-invalid`:`${i}--file-filename-container-wrap`,b=n=>n==null?void 0:n.replace(/\s+/g,""),k=n=>(v(n.offsetWidth<n.scrollWidth),n.offsetWidth<n.scrollWidth);return E.useLayoutEffect(()=>{k(y.current)},[i,l]),a.createElement("span",T({className:N},F),d?a.createElement("div",{className:w},a.createElement(M,{label:l,align:"bottom",className:`${i}--file-filename-tooltip`},a.createElement("button",{className:`${i}--file-filename-button`,type:"button"},a.createElement(D,{ref:y,as:"p",title:l,className:`${i}--file-filename-button`,id:b(l)},l)))):a.createElement(D,{ref:y,as:"p",title:l,className:`${i}--file-filename`,id:b(l)},l),a.createElement("div",{className:`${i}--file-container-item`},a.createElement("span",{className:`${i}--file__state-container`},a.createElement(z,{name:l,iconDescription:s,status:p,invalid:c,"aria-describedby":c&&m?`${b(l)}-id-error`:void 0,onKeyDown:n=>{P(n,[W,q])&&p==="edit"&&(n.preventDefault(),u(n,{uuid:_}))},onClick:n=>{p==="edit"&&u(n,{uuid:_})}}))),c&&m&&a.createElement("div",{className:`${i}--form-requirement`,role:"alert",id:`${b(l)}-id-error`},a.createElement(D,{as:"div",className:`${i}--form-requirement__title`},m),o&&a.createElement(D,{as:"p",className:`${i}--form-requirement__supplement`},o)))}Z.propTypes={errorBody:t.string,errorSubject:t.string,iconDescription:t.string,invalid:t.bool,name:t.string,onDelete:t.func,size:t.oneOf(["sm","md","lg"]),status:t.oneOf(["uploading","edit","complete"]),uuid:t.string};export{Y as F,Z as a,z as b};
