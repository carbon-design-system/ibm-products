{"version":3,"file":"ConditionBuilder-CkUmWCWk.js","sources":["../../src/components/ConditionBuilder/utils/util.js","../../src/components/ConditionBuilder/ConditionBuilderContext/ConditionBuilderProvider.tsx","../../src/components/ConditionBuilder/ConditionBuilderButton/ConditionBuilderButton.tsx","../../src/components/ConditionBuilder/ConditionBuilderContext/translationObject.js","../../src/components/ConditionBuilder/utils/useTranslations.js","../../src/components/ConditionBuilder/utils/handleKeyboardEvents.js","../../src/components/ConditionBuilder/utils/useEvent.ts","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItem.tsx","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItemOption/ItemOption.tsx","../../src/components/ConditionBuilder/utils/useDataConfigs.js","../../src/components/ConditionBuilder/ConditionBuilderConnector/ConditionConnector.tsx","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItemNumber/ConditionBuilderItemNumber.tsx","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItemText/ConditionBuilderItemText.tsx","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItemDate/ConditionBuilderItemDate.tsx","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItemTime/ConditionBuilderItemTime.tsx","../../src/components/ConditionBuilder/ConditionBuilderAdd/ConditionBuilderAdd.tsx","../../src/components/ConditionBuilder/ConditionBuilderItem/ConditionBuilderItemOption/ItemOptionForValueField.tsx","../../src/components/ConditionBuilder/ConditionBlock/ConditionBlock.tsx","../../src/components/ConditionBuilder/ConditionPreview/ConditionPreview.tsx","../../src/components/ConditionBuilder/ConditionGroupBuilder/ConditionGroupBuilder.tsx","../../src/components/ConditionBuilder/ConditionBuilderConnector/GroupConnector.js","../../src/components/ConditionBuilder/ConditionBuilderActions/ConditionBuilderActions.tsx","../../src/components/ConditionBuilder/ConditionBuilderContent/ConditionBuilderContent.tsx","../../src/components/ConditionBuilder/ConditionBuilder.tsx"],"sourcesContent":["/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { pkg } from '../../../settings';\n\nexport const blockClass = `${pkg.prefix}--condition-builder`;\nexport const NON_HIERARCHICAL_VARIANT = 'Non-Hierarchical';\nexport const HIERARCHICAL_VARIANT = 'Hierarchical';\n\nexport const focusThisField = (evt, conditionBuilderRef) => {\n  if (evt) {\n    const target = evt.target;\n    const itemRow = evt.target.closest('[role=\"row\"]');\n    const buttonName = evt.target\n      .closest('[role=\"gridcell\"]')\n      ?.querySelector('button').dataset.name;\n    setTimeout(() => {\n      const selector = itemRow.querySelector(\n        `button[data-name=\"${buttonName}\"]`\n      );\n\n      manageTabIndexAndFocus(selector, conditionBuilderRef);\n      if (document.contains(target)) {\n        evt.target\n          .closest('[role=\"gridcell\"]')\n          ?.querySelector('button')\n          ?.click();\n        evt.target\n          .closest('[role=\"gridcell\"]')\n          ?.querySelector('button')\n          ?.focus();\n      }\n    }, 0);\n  }\n};\nexport const focusThisItem = (currentElement, conditionBuilderRef) => {\n  setTimeout(() => {\n    manageTabIndexAndFocus(currentElement, conditionBuilderRef);\n  }, 0);\n};\nexport const traverseClockwise = (\n  eachElem,\n  index,\n  allElements,\n  rotate,\n  trapFocus,\n  conditionBuilderRef\n) => {\n  if (eachElem == document.activeElement) {\n    if (index !== allElements.length - 1) {\n      focusThisItem(allElements[index + 1], conditionBuilderRef);\n    } else {\n      focusThisItem(\n        allElements[rotate ? 0 : allElements.length - 1],\n        conditionBuilderRef\n      );\n    }\n  } else if (\n    Array.from(allElements).indexOf(document.activeElement) == -1 &&\n    trapFocus\n  ) {\n    focusThisItem(allElements[0], conditionBuilderRef);\n  }\n};\nexport const traverseReverse = (\n  eachElem,\n  index,\n  allElements,\n  rotate,\n  trapFocus,\n  conditionBuilderRef\n) => {\n  if (eachElem == document.activeElement) {\n    if (index !== 0) {\n      focusThisItem(allElements[index - 1], conditionBuilderRef);\n    } else {\n      focusThisItem(\n        allElements[rotate ? allElements.length - 1 : 0],\n        conditionBuilderRef\n      );\n    }\n  } else if (\n    Array.from(allElements).indexOf(document.activeElement) == -1 &&\n    trapFocus\n  ) {\n    focusThisItem(allElements[allElements.length - 1], conditionBuilderRef);\n  }\n};\n\nexport const checkForHoldingKey = (evt, key) => {\n  // possible key inputs: altKey,ctrlKey,metaKey,shiftKey\n  if (key === 'cmd') {\n    return evt.metaKey || evt.ctrlKey;\n  }\n  return evt[key];\n};\n\nexport const checkIsValid = (item) => {\n  return item && item !== 'INVALID';\n};\n\nexport const manageTabIndexAndFocus = (currentElement, conditionBuilderRef) => {\n  const contentContainer =\n    currentElement?.closest(`.${blockClass}__content-container`) ??\n    currentElement?.closest(`.${blockClass}__actions-container`);\n  contentContainer &&\n    Array.from(contentContainer.querySelectorAll('[tabindex=\"0\"]')).map(\n      (element) => element?.setAttribute('tabindex', '-1')\n    );\n\n  currentElement?.setAttribute('tabindex', '0');\n  conditionBuilderRef.current\n    ?.querySelector(`.${blockClass}__statement-button`)\n    ?.setAttribute('tabindex', '1');\n  currentElement?.focus();\n};\n\nexport const getValue = (type, value, config) => {\n  if (config?.valueFormatter && ['custom'].includes(type)) {\n    return config.valueFormatter(value);\n  } else if (type === 'option') {\n    if (value && typeof value !== 'string') {\n      const selectedValues = Array.isArray(value) ? value : [value];\n      return selectedValues.map((option) => option.label).join(', ');\n    }\n\n    return value;\n  } else {\n    return value;\n  }\n};\n\n//check if the operator is configured as multiSelect in the input configuration or operator is on of\nexport const checkForMultiSelectOperator = (condition, config) => {\n  return (\n    condition?.operator === 'oneOf' ||\n    config?.operators?.find(\n      (operator) =>\n        condition?.operator === operator.id && operator.isMultiSelect\n    )\n  );\n};\n//this will close the popover on escape key on search box\nexport const onKeyDownHandlerForSearch = (\n  evt,\n  conditionBuilderRef,\n  closePopover\n) => {\n  if (!evt.currentTarget.value && evt.key === 'Escape') {\n    focusThisField(evt, conditionBuilderRef);\n    closePopover?.();\n  }\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { createContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport uuidv4 from '../../../global/js/utils/uuidv4';\nimport {\n  Action,\n  ConditionBuilderContextProps,\n  ConditionBuilderState,\n} from '../ConditionBuilder.types';\n\nexport const emptyState: ConditionBuilderState = {\n  operator: 'or',\n  groups: [\n    {\n      groupOperator: 'and',\n      statement: 'ifAll',\n      id: uuidv4(),\n      conditions: [\n        {\n          property: undefined,\n          operator: '',\n          value: '',\n          popoverToOpen: 'propertyField',\n          id: uuidv4(),\n        },\n      ],\n    },\n  ],\n};\n\nexport const ConditionBuilderContext =\n  createContext<ConditionBuilderContextProps>({\n    rootState: {\n      groups: [],\n    },\n  });\n\nexport const ConditionBuilderProvider: React.FC<\n  ConditionBuilderContextProps\n> = (props) => {\n  const [rootState, setRootState] = useState<ConditionBuilderState>({\n    groups: [],\n  });\n  const [actionState, setActionState] = useState<Action[]>([]);\n\n  const contextValue: ConditionBuilderContextProps = {\n    rootState,\n    setRootState,\n    actionState,\n    setActionState,\n    inputConfig: props.inputConfig,\n    popOverSearchThreshold: props.popOverSearchThreshold,\n    getOptions: props.getOptions,\n    variant: props.variant,\n    translateWithId: props.translateWithId,\n    conditionBuilderRef: props.conditionBuilderRef,\n    statementConfigCustom: props.statementConfigCustom,\n    onAddItem: props.onAddItem,\n    readOnly: props.readOnly,\n  };\n\n  return (\n    <ConditionBuilderContext.Provider value={contextValue}>\n      {props.children}\n    </ConditionBuilderContext.Provider>\n  );\n};\n\nConditionBuilderProvider.propTypes = {\n  /**\n   * Provide the contents of the ConditionBuilder.\n   */\n  children: PropTypes.node.isRequired,\n\n  /**\n   * ref of condition builder\n   */\n  /**@ts-ignore */\n  conditionBuilderRef: PropTypes.object,\n\n  /**\n   * This is an optional callback function that will be triggered when options array is not passed in the inputConfig against a property. \n   * This can be a asynchronous function that need  to  return a promise, so it will allow to fetch options from API call.\n   * options has to be in valid format\n   * [{\n          label: 'label',\n          id: 'id',\n        },...] \n   */\n  getOptions: PropTypes.func,\n  /**\n   * This is a mandatory prop that defines the input to the condition builder.\n    \n   */\n  /**@ts-ignore */\n  inputConfig: PropTypes.shape({\n    properties: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string.isRequired,\n        icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n        description: PropTypes.string,\n        type: PropTypes.oneOf([\n          'text',\n          'textarea',\n          'number',\n          'date',\n          'option',\n          'time',\n          'custom',\n        ]).isRequired,\n        config: PropTypes.shape({\n          options: PropTypes.arrayOf(\n            PropTypes.shape({\n              id: PropTypes.string.isRequired,\n              label: PropTypes.string.isRequired,\n              icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n            })\n          ),\n          component: PropTypes.func,\n          operators: PropTypes.arrayOf(\n            PropTypes.shape({\n              id: PropTypes.string.isRequired,\n              label: PropTypes.string.isRequired,\n            })\n          ),\n          long: PropTypes.bool,\n        }),\n      })\n    ),\n  }).isRequired,\n\n  /**\n   * Provide an mandatory numeric value that will be used to enable search option in the popovers with list.\n   */\n  popOverSearchThreshold: PropTypes.number.isRequired,\n  /**\n   * Optional prop if you want to pass translation to the texts used . Otherwise this will the defined defaults.\n   * This callback function will receive the message id and you need to return the corresponding text for that id.\n   * The message key will be one of [   \"ifText\",   \"addConditionText\",   \"addConditionGroupText\",   \"addSubgroupText\",   \"conditionText\",   \"propertyText\",   \"operatorText\",   \"valueText\",   \"connectorText\",   \"conditionRowText\",   \"removeConditionText\",   \"addConditionRowText\",   \"startText\",   \"endText\",   \"clearSearchText\",   \"actionsText\",   \"then\",   \"removeActionText\",   \"addActionText\",   \"invalidText\",   \"invalidNumberWarnText\"\n]\n   */\n  translateWithId: PropTypes.func,\n\n  /**\n   * Provide the condition builder variant: Non-Hierarchical/ Hierarchical\n   */\n  variant: PropTypes.string.isRequired,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext } from 'react';\nimport cx from 'classnames';\n\nimport PropTypes from 'prop-types';\nimport { PopoverAlignment, Tooltip } from '@carbon/react';\nimport { CarbonIconType, WarningAltFilled } from '@carbon/react/icons';\nimport { usePrefix } from '@carbon/react';\nimport { blockClass } from '../utils/util';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\n\ninterface ConditionBuilderButtonProps {\n  className?: string;\n  label: string;\n  hideLabel?: boolean;\n  tooltipAlign?: PopoverAlignment;\n  renderIcon?: CarbonIconType;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  onBlur?: React.FocusEventHandler<HTMLButtonElement>;\n  onFocus?: React.FocusEventHandler<HTMLButtonElement>;\n  onMouseEnter?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  showToolTip?: boolean;\n  wrapperProps?: object;\n  isInvalid?: boolean;\n  wrapperClassName?: string;\n  tabIndex?: number;\n  description?: string;\n}\n\nexport const ConditionBuilderButton = ({\n  className,\n  label,\n  hideLabel,\n  tooltipAlign,\n  renderIcon: Icon,\n  onClick,\n  showToolTip,\n  wrapperProps,\n  onBlur,\n  onFocus,\n  onMouseEnter,\n  onMouseLeave,\n  isInvalid,\n  wrapperClassName,\n  tabIndex,\n  description,\n  ...rest\n}: ConditionBuilderButtonProps) => {\n  const tooltipText = description || label;\n\n  const carbonPrefix = usePrefix();\n\n  const Button = () => {\n    const dataName = rest['data-name'] ?? '';\n    const { readOnly } = useContext(ConditionBuilderContext);\n    const handleClick = (e) => {\n      if (readOnly) {\n        return;\n      }\n      onClick?.(e);\n    };\n    return (\n      <button\n        tabIndex={tabIndex !== undefined ? tabIndex : -1}\n        className={cx([\n          className,\n          `${blockClass}__button`,\n          {\n            [`${blockClass}__text-ellipsis`]:\n              showToolTip && !hideLabel && !isInvalid,\n          },\n          { [`${blockClass}__invalid-input`]: isInvalid },\n        ])}\n        type=\"button\"\n        onClick={handleClick}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        data-name={dataName}\n        aria-disabled={readOnly}\n        {...rest}\n      >\n        {Icon && <Icon />}\n        {!hideLabel && <span>{label}</span>}\n        {isInvalid && <WarningAltFilled />}\n      </button>\n    );\n  };\n\n  return hideLabel || showToolTip || description ? (\n    <Tooltip\n      label={tooltipText}\n      align={tooltipAlign}\n      className={`${wrapperClassName} ${blockClass}__tooltip ${carbonPrefix}--icon-tooltip`}\n      {...wrapperProps}\n      leaveDelayMs={0}\n    >\n      {Button()}\n    </Tooltip>\n  ) : (\n    <>{Button()}</>\n  );\n};\n\nConditionBuilderButton.propTypes = {\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n\n  /**\n   * decides if label and tooltip to be hidden\n   */\n  hideLabel: PropTypes.bool,\n  /**\n   * boolean to know the updated value in not valid\n   */\n  isInvalid: PropTypes.bool,\n  /**\n   * label of the button\n   */\n  label: PropTypes.string,\n  /**\n   * mouse events callbacks\n   */\n  onBlur: PropTypes.func,\n  /**\n   * callback triggered on click of add button\n   */\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func,\n\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  /**\n   * Optional prop to allow overriding the icon rendering.\n   */\n  renderIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n\n  /**\n   */\n  /**\n   *decides if  tooltip to be shown\n   */\n  showToolTip: PropTypes.bool,\n  /**\n   * Tab index\n   */\n  tabIndex: PropTypes.number,\n  /**\n   * tooltip position\n   */\n  tooltipAlign: PropTypes.string,\n  /**\n   * classname applies to the wrapper of popover\n   */\n  wrapperClassName: PropTypes.string,\n  /**\n   * optional props for tree grid to add role and aria-label to wrapper span\n   */\n  wrapperProps: PropTypes.object,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport const translationsObject = {\n  ifText: 'if',\n  unlessText: 'unless',\n  excl_if: 'excl.if',\n  and: 'and',\n  or: 'or',\n  is: 'is',\n  ifAll: 'if all',\n  ifAny: 'if any',\n  unlessAll: 'unless all',\n  unlessAny: 'unless any',\n  greater: 'is greater than',\n  greaterEqual: 'is greater than or equal to',\n  lower: 'is lower than',\n  lowerEqual: 'is lower than or equal to',\n  startsWith: 'starts with',\n  endsWith: 'ends with',\n  contains: 'contains',\n  oneOf: 'is one of',\n  before: 'is before',\n  after: 'is after',\n  between: 'is between',\n  addConditionText: 'Add condition',\n  addConditionGroupText: 'Add condition group',\n  addSubgroupText: 'Add subgroup',\n  conditionText: 'Condition',\n  propertyText: 'Property',\n  operatorText: 'Operator',\n  valueText: 'Value',\n  connectorText: 'Connector',\n  conditionRowText: 'Condition row',\n  conditionRowGroupText: 'Condition row group',\n  removeConditionText: 'Delete condition',\n  addConditionRowText: 'Add condition row',\n  startText: 'Start',\n  endText: 'End',\n  clearSearchText: 'Clear search input',\n  actionsText: 'Actions',\n  then: 'then',\n  removeActionText: 'Remove Action',\n  addActionText: 'Add action',\n  invalidText: 'Incomplete',\n  invalidNumberWarnText: 'Invalid number, must be 0 or greater',\n  conditionBuilderText: 'Condition Builder',\n  actionSectionText: 'Action Section',\n  conditionHeadingText: 'Condition',\n  addPropertyText: 'Add property',\n  addOperatorText: 'Add operator',\n  addValueText: 'Add value',\n  conditionBuilderHierarchicalText: 'Condition Builder Hierarchical',\n};\n","/**\n * Copyright IBM Corp. 2021, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useContext } from 'react';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport { translationsObject } from '../ConditionBuilderContext/translationObject';\n\nexport const useTranslations = (translationKeys, alterTranslationKeyMap) => {\n  const { translateWithId } = useContext(ConditionBuilderContext);\n  return translationKeys.map((translationKey) => {\n    if (alterTranslationKeyMap?.[translationKey]) {\n      translationKey = alterTranslationKeyMap[translationKey];\n    }\n    if (\n      translateWithId?.(translationKey) &&\n      translateWithId?.(translationKey) !== translationKey\n    ) {\n      return translateWithId(translationKey);\n    } else if (translationsObject[translationKey]) {\n      return translationsObject[translationKey];\n    } else {\n      return translationKey;\n    }\n  });\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  blockClass,\n  checkForHoldingKey,\n  focusThisField,\n  focusThisItem,\n  HIERARCHICAL_VARIANT,\n  manageTabIndexAndFocus,\n  traverseClockwise,\n  traverseReverse,\n} from './util';\n\nexport const handleKeyDown = (evt, conditionBuilderRef, variant) => {\n  const activeElement = document.activeElement;\n\n  if (\n    !activeElement\n      .closest(`.${blockClass}__popover`)\n      ?.querySelector('[role=\"dialog\"]')\n  ) {\n    handleKeyPressForMainContent(evt, conditionBuilderRef, variant);\n  }\n};\n\nexport const handleKeyDownForPopover = (\n  evt,\n  conditionBuilderRef,\n  popoverRef,\n  closePopover\n) => {\n  if (excludeKeyPress(evt)) {\n    return;\n  }\n  handleKeyPressForPopover(\n    evt,\n    popoverRef?.current,\n    conditionBuilderRef,\n    closePopover\n  );\n};\n\n//skipping keyboard handling for date and time fields to get take carbon's\nconst excludeKeyPress = (evt) => {\n  return (\n    !['Escape'].includes(evt.key) &&\n    evt.target.closest(`.${blockClass}__item-date`)\n  );\n};\n\nconst getVisibleOptions = (parentContainer) => {\n  return Array.from(parentContainer.querySelectorAll(`[role=\"option\"]`)).filter(\n    (el) => !el.hasAttribute('aria-disabled') && !el.hasAttribute('aria-hidden')\n  );\n};\n\nconst handleKeyPressForPopover = (\n  evt,\n  parentContainer,\n  conditionBuilderRef,\n  closePopover\n) => {\n  const key = evt.key;\n  const isHoldingShiftKey = checkForHoldingKey(evt, 'shiftKey');\n  const isMultiSelect =\n    parentContainer.querySelector('ul')?.dataset.multiSelect;\n  const isOptionInput =\n    parentContainer.querySelectorAll(`[role=\"option\"]`)?.length;\n  let allItems = [];\n\n  if (key === 'Escape') {\n    //focus the corresponding field in which the popover is triggered from\n\n    closePopover?.();\n    focusThisField(evt, conditionBuilderRef);\n\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n\n  if (isOptionInput) {\n    switch (key) {\n      case 'ArrowUp':\n        evt.preventDefault();\n        //traverse through the popover options, search box, selectAll button\n        allItems = getVisibleOptions(parentContainer);\n        allItems.forEach((eachElem, index, allElements) => {\n          traverseReverse(\n            eachElem,\n            index,\n            allElements,\n            null,\n            null,\n            conditionBuilderRef\n          );\n        });\n        //scroll to top when we reach a the top of the list to make search box visible\n        if (\n          Array.from(\n            evt.target.closest('ul')?.querySelectorAll('li') ?? []\n          ).indexOf(evt.target) === 1\n        ) {\n          parentContainer.querySelector(\n            `.${blockClass}__popover-content-wrapper`\n          ).scrollTop = 0;\n        }\n\n        break;\n      case 'ArrowDown':\n        evt.preventDefault();\n        //traverse through the popover options, search box, selectAll button\n        allItems = getVisibleOptions(parentContainer);\n        allItems.forEach((eachElem, index, allElements) => {\n          traverseClockwise(\n            eachElem,\n            index,\n            allElements,\n            null,\n            null,\n            conditionBuilderRef\n          );\n        });\n\n        break;\n\n      case 'Tab':\n        allItems = [\n          ...Array.from(\n            parentContainer.querySelectorAll(\n              `.${blockClass}__selectAll-button,[role=\"searchbox\"]`\n            )\n          ),\n          getVisibleOptions(parentContainer)?.[0],\n        ];\n\n        allItems.forEach((eachElem, index, allElements) => {\n          if (isHoldingShiftKey) {\n            traverseReverse(\n              eachElem,\n              index,\n              allElements,\n              true,\n              true,\n              conditionBuilderRef\n            );\n          } else {\n            traverseClockwise(\n              eachElem,\n              index,\n              allElements,\n              true,\n              true,\n              conditionBuilderRef\n            );\n          }\n        });\n        evt.preventDefault();\n        break;\n\n      case ' ':\n        if (isMultiSelect === 'true') {\n          if (document.activeElement.type !== 'button') {\n            //for button , enter key is click which already handled by framework, for other elements trigger click\n            document.activeElement?.click();\n          }\n          evt.preventDefault();\n        }\n\n        break;\n      case 'Enter':\n        if (document.activeElement.type !== 'button') {\n          //for button , enter key is click which already handled by framework, else trigger click\n          focusThisField(evt, conditionBuilderRef);\n          document.activeElement?.click();\n        }\n\n        break;\n      default:\n        break;\n    }\n  } else {\n    if (key === 'Enter' && !isHoldingShiftKey) {\n      if (document.activeElement.type !== 'button') {\n        //for button , enter key is click which already handled by framework, else trigger click\n        closePopover?.();\n        focusThisField(evt, conditionBuilderRef);\n      }\n    }\n  }\n};\n\nconst handleKeyPressForMainContent = (evt, conditionBuilderRef, variant) => {\n  switch (evt.key) {\n    case 'ArrowRight':\n      evt.preventDefault();\n      if (variant == HIERARCHICAL_VARIANT) {\n        let allCellsInRow = Array.from(\n          evt.target\n            .closest('[role=\"row\"]')\n            ?.querySelectorAll('[role=\"gridcell\"] button')\n        );\n        if (allCellsInRow.length === 1) {\n          evt.target = evt.target.closest('[role=\"row\"]');\n          handleRowNavigationHierarchical(evt, conditionBuilderRef, variant);\n          //focus next row\n        } else if (evt.target.getAttribute('role') == 'row') {\n          //when current focus is on a row, then we need to enter inside and focus the first cell of that row\n\n          //focus first cell\n          manageTabIndexAndFocus(allCellsInRow[0], conditionBuilderRef);\n        } else {\n          //finding the next cell to be focussed\n          //next cell = current cell index + 1\n\n          let currentItemIndex = allCellsInRow.indexOf(evt.target);\n          if (currentItemIndex < allCellsInRow.length - 1) {\n            focusThisItem(\n              allCellsInRow[currentItemIndex + 1],\n              conditionBuilderRef\n            );\n          }\n        }\n      } else {\n        handleCellNavigation(evt, conditionBuilderRef);\n      }\n      break;\n    case 'ArrowLeft':\n      evt.preventDefault();\n      if (variant == HIERARCHICAL_VARIANT) {\n        if (evt.target.getAttribute('role') !== 'row') {\n          //when any cell is focussed, arrow left will select the previous cell or current row\n\n          let allCellsInRow = Array.from(\n            evt.target\n              .closest('[role=\"row\"]')\n              ?.querySelectorAll('[role=\"gridcell\"] button')\n          );\n\n          let currentItemIndex = allCellsInRow.indexOf(evt.target);\n          if (currentItemIndex > 0) {\n            focusThisItem(\n              allCellsInRow[currentItemIndex - 1],\n              conditionBuilderRef\n            );\n          } else {\n            //focus the row\n            let wrapper = evt.target.closest(`[role=\"row\"]`);\n            manageTabIndexAndFocus(wrapper, conditionBuilderRef);\n          }\n        }\n      } else {\n        handleCellNavigation(evt, conditionBuilderRef);\n      }\n\n      break;\n\n    case 'ArrowUp':\n    case 'ArrowDown':\n      evt.preventDefault();\n      if (variant == HIERARCHICAL_VARIANT) {\n        handleRowNavigationHierarchical(evt, conditionBuilderRef, variant);\n      } else {\n        handleRowNavigation(evt, conditionBuilderRef, variant);\n      }\n\n      break;\n\n    case 'Enter':\n      if (document.activeElement?.querySelectorAll(`button`)?.length === 1) {\n        document.activeElement?.querySelectorAll(`button`)[0]?.click();\n      }\n      break;\n\n    default:\n      break;\n  }\n};\nconst getRows = (conditionBuilderRef) => {\n  return Array.from(\n    conditionBuilderRef.current?.querySelectorAll('[role=\"row\"]')\n  );\n};\n\nconst getRowIndex = (element, conditionBuilderRef) => {\n  const rows = getRows(conditionBuilderRef);\n  return rows.findIndex((row) => row.contains(element));\n};\nconst handleRowNavigation = (evt, conditionBuilderRef, variant) => {\n  const rows = getRows(conditionBuilderRef);\n\n  const currentRowIndex = getRowIndex(evt.target, conditionBuilderRef);\n\n  navigateToNextRowCell(\n    evt,\n    currentRowIndex,\n    rows,\n    variant,\n    conditionBuilderRef\n  );\n};\nconst handleRowNavigationHierarchical = (evt, conditionBuilderRef, variant) => {\n  const rows = getRows(conditionBuilderRef);\n  const currentRowIndex = getRowIndex(evt.target, conditionBuilderRef);\n  let nextRowIndex = currentRowIndex;\n\n  if (evt.target.getAttribute('role') == 'row') {\n    if (['ArrowDown', 'ArrowRight'].includes(evt.key)) {\n      nextRowIndex += 1;\n    } else if (evt.key === 'ArrowUp') {\n      nextRowIndex -= 1;\n    }\n\n    //maintaining selection for first and last rows\n    if (nextRowIndex < 0) {\n      nextRowIndex = 0;\n    } else if (nextRowIndex >= rows.length) {\n      nextRowIndex = rows.length - 1;\n    }\n\n    if (nextRowIndex !== currentRowIndex) {\n      manageTabIndexAndFocus(rows[nextRowIndex], conditionBuilderRef);\n    }\n  } else {\n    navigateToNextRowCell(\n      evt,\n      currentRowIndex,\n      rows,\n      variant,\n      conditionBuilderRef\n    );\n  }\n};\nconst navigateToNextRowCell = (\n  evt,\n  currentRowIndex,\n  rows,\n  variant,\n  conditionBuilderRef\n) => {\n  //when the current focussed element is a cell of any row, arrow up/down will focus the next row same cell.\n\n  let nextRowIndex = currentRowIndex;\n  if (evt.key === 'ArrowUp') {\n    nextRowIndex = currentRowIndex == 0 ? currentRowIndex : currentRowIndex - 1;\n  }\n  if (evt.key === 'ArrowDown') {\n    nextRowIndex =\n      currentRowIndex === rows.length - 1\n        ? rows.length - 1\n        : currentRowIndex + 1;\n  }\n\n  const nextRow = rows[nextRowIndex];\n  const itemName = evt.target.dataset.name;\n  if (nextRow?.querySelector(`[data-name=\"${itemName}\"]`)) {\n    manageTabIndexAndFocus(\n      nextRow?.querySelector(`[data-name=\"${itemName}\"]`),\n      conditionBuilderRef\n    );\n  } else if (variant === HIERARCHICAL_VARIANT) {\n    //when the next row is a if statement , then that row is focused. From any cell of last row of an group , arrow down select the next row (if)\n    manageTabIndexAndFocus(nextRow, conditionBuilderRef);\n  }\n};\nconst handleCellNavigation = (evt, conditionBuilderRef) => {\n  conditionBuilderRef.current\n    .querySelectorAll(`[role=\"gridcell\"] button`)\n    .forEach((eachElem, index, allElements) => {\n      if (evt.key === 'ArrowRight') {\n        traverseClockwise(\n          eachElem,\n          index,\n          allElements,\n          null,\n          null,\n          conditionBuilderRef\n        );\n      } else {\n        traverseReverse(\n          eachElem,\n          index,\n          allElements,\n          null,\n          null,\n          conditionBuilderRef\n        );\n      }\n    });\n};\n","/**\n * Copyright IBM Corp. 2016, 2025\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { useEffect, useRef, RefObject } from 'react';\n\nexport const useEvent = <E extends keyof GlobalEventHandlersEventMap>(\n  elementOrRef: HTMLElement | RefObject<Element | null>,\n  eventName: E,\n  callback: (event: GlobalEventHandlersEventMap[E]) => void\n) => {\n  const savedCallback = useRef<\n    ((event: GlobalEventHandlersEventMap[E]) => void) | null\n  >(null);\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    const element =\n      'current' in elementOrRef ? elementOrRef.current : elementOrRef;\n    if (!element) {\n      return;\n    }\n\n    const handler = (event: GlobalEventHandlersEventMap[E]) => {\n      if (savedCallback.current) {\n        savedCallback.current(event);\n      }\n    };\n\n    element.addEventListener(eventName, handler as EventListener);\n\n    return () => {\n      element.removeEventListener(eventName, handler as EventListener);\n    };\n  }, [elementOrRef, eventName]);\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  useState,\n  useRef,\n  useEffect,\n  useContext,\n  PropsWithChildren,\n  KeyboardEvent,\n  ReactNode,\n  Ref,\n} from 'react';\n\nimport {\n  Popover,\n  PopoverContent,\n  Layer,\n  Heading,\n  Section,\n} from '@carbon/react';\nimport PropTypes from 'prop-types';\nimport { Add, CarbonIconType } from '@carbon/react/icons';\nimport { ConditionBuilderButton } from '../ConditionBuilderButton/ConditionBuilderButton';\nimport { useTranslations } from '../utils/useTranslations';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport { handleKeyDownForPopover } from '../utils/handleKeyboardEvents';\nimport {\n  Condition,\n  Action,\n  Option,\n  ConfigType,\n} from '../ConditionBuilder.types';\nimport {\n  blockClass,\n  checkForMultiSelectOperator,\n  getValue,\n} from '../utils/util';\nimport { translationsObject } from '../ConditionBuilderContext/translationObject';\nimport { useEvent } from '../utils/useEvent';\n\ninterface ConditionBuilderItemProps extends PropsWithChildren {\n  className?: string;\n\n  label?: string | Option | Option[];\n  renderIcon?: CarbonIconType;\n  title?: string;\n  showToolTip?: boolean;\n  popOverClassName?: string;\n  type?: string;\n  description?: string;\n  condition?: Action & Condition;\n  config?: ConfigType;\n  renderChildren?: (\n    ref: Ref<HTMLDivElement | null>,\n    closePopover: () => void\n  ) => ReactNode;\n  onChange?: (val: string) => void;\n  tabIndex?: number;\n  onMouseEnter?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  onFocus?: React.FocusEventHandler<HTMLButtonElement>;\n  onBlur?: React.FocusEventHandler<HTMLButtonElement>;\n}\nexport const ConditionBuilderItem = ({\n  children,\n  className,\n  label,\n  renderIcon,\n  title,\n  type,\n  showToolTip,\n  condition,\n  popOverClassName,\n  config,\n  renderChildren,\n  onChange,\n  description,\n  ...rest\n}: ConditionBuilderItemProps) => {\n  const popoverRef = useRef<HTMLDivElement | null>(null);\n  const [open, setOpen] = useState(false);\n\n  const { conditionBuilderRef, statementConfigCustom, readOnly } = useContext(\n    ConditionBuilderContext\n  );\n\n  const statementIdMap = {\n    ifAll: translationsObject.ifText,\n    ifAny: translationsObject.ifText,\n    unlessAll: translationsObject.unlessText,\n    unlessAny: translationsObject.unlessText,\n  };\n  //Appending statements from custom statement configuration if present\n  statementConfigCustom?.forEach((statement) => {\n    statementIdMap[statement.id] = statement.label;\n  });\n\n  const [\n    invalidText,\n    addConditionText,\n    addPropertyText,\n    addOperatorText,\n    addValueText,\n    labelText,\n  ] = useTranslations(\n    [\n      'invalidText',\n      'addConditionText',\n      'addPropertyText',\n      'addOperatorText',\n      'addValueText',\n      label,\n    ],\n    statementIdMap\n  );\n\n  const getCustomOperatorLabel = (propertyLabel) => {\n    return (\n      propertyLabel &&\n      config?.operators?.find((operator) => {\n        return operator.id === propertyLabel;\n      })\n    );\n  };\n\n  const getPropertyDetails = () => {\n    const { property, operator } = condition || {};\n    if (\n      label === 'INVALID' ||\n      (rest['data-name'] === 'propertyField' && property === 'INVALID') ||\n      (rest['data-name'] === 'operatorField' && operator === 'INVALID')\n    ) {\n      return {\n        propertyLabel: invalidText,\n        isInvalid: true,\n      };\n    }\n    if (rest['data-name'] == 'operatorField' && type == 'custom') {\n      return {\n        isInvalid: false,\n        propertyLabel: getCustomOperatorLabel(label)?.id,\n      };\n    }\n    const propertyId =\n      rest['data-name'] == 'valueField' && type\n        ? getValue(type, label, config)\n        : labelText;\n\n    return {\n      isInvalid: false,\n      propertyLabel: propertyId,\n    };\n  };\n  const { propertyLabel, isInvalid } = getPropertyDetails();\n\n  useEffect(() => {\n    /**\n     * rest['data-name'] holds the current field name\n     * popoverToOpen hold the next popover to be opened if required\n     */\n    if (condition) {\n      const currentField = rest['data-name'];\n      //if any condition is changed, state prop is triggered\n      if (condition.popoverToOpen && currentField !== condition.popoverToOpen) {\n        // close the previous popover\n        closePopover();\n      } else if (\n        currentField == 'valueField' &&\n        type === 'option' &&\n        !checkForMultiSelectOperator(condition, config)\n      ) {\n        //close the current popover if the field is valueField and  is a single select dropdown. For all other inputs ,popover need to be open on value changes.\n        closePopover();\n      }\n      if (condition.popoverToOpen == currentField) {\n        //current popover need to be opened\n        setTimeout(() => {\n          openPopOver();\n        });\n      }\n    } else {\n      // when we change any statement(if/ excl.if) which is not part of condition state, label change is triggered.\n      //close popOver when statement is changed.\n      closePopover();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [condition, label]);\n\n  useEffect(() => {\n    //this will focus the first input field in the popover\n    if (open && popoverRef.current) {\n      const firstFocusableElement = popoverRef?.current?.querySelector(\n        'input,textarea'\n      ) as HTMLInputElement;\n      if (firstFocusableElement) {\n        setTimeout(() => firstFocusableElement.focus(), 0);\n      }\n    }\n  }, [popoverRef, open]);\n\n  //This code is added to address the issue in ComposeModal, where popovers are not getting closed on outside click(#18872)\n  //This is added as a work around to unblock users to use conditionBuilder in Tearsheets or Compose modal\n  useEvent(popoverRef, 'focusout', (event) => {\n    const focusEvent = event as FocusEvent;\n    const relatedTarget = focusEvent.relatedTarget as Node | null;\n\n    const popoverEl = popoverRef.current;\n    if (!popoverEl) {\n      return;\n    }\n\n    const focusLeftPopover =\n      relatedTarget && !popoverEl.contains(relatedTarget);\n    const targetInsidePopover = popoverEl.contains(focusEvent.target as Node);\n\n    const targetEl = focusEvent.target as Element | null;\n    const focusMovedToDatePicker = targetEl?.closest('.flatpickr-calendar');\n\n    if ((focusLeftPopover || !targetInsidePopover) && !focusMovedToDatePicker) {\n      closePopover();\n    }\n  });\n\n  const manageInvalidSelection = () => {\n    //when the user didn't select any value , we need to show as incomplete\n    if (\n      (rest['data-name'] === 'propertyField' && !condition?.property) ||\n      (rest['data-name'] === 'operatorField' && !condition?.operator) ||\n      (rest['data-name'] === 'valueField' && !condition?.value)\n    ) {\n      onChange?.('INVALID');\n    }\n  };\n  const closePopover = () => {\n    if (open) {\n      manageInvalidSelection();\n    }\n    setOpen(false);\n  };\n  const openPopOver = () => {\n    if (readOnly) {\n      return;\n    }\n    setOpen(true);\n  };\n  const togglePopover = () => {\n    if (children || renderChildren) {\n      setOpen(!open);\n    }\n  };\n\n  const handleKeyDownHandler = (evt: KeyboardEvent) => {\n    handleKeyDownForPopover(evt, conditionBuilderRef, popoverRef, closePopover);\n    if (evt.key === 'Escape') {\n      manageInvalidSelection();\n    }\n  };\n\n  const getLabel = () => {\n    if (config?.operators && rest['data-name'] === 'operatorField') {\n      return getCustomOperatorLabel(propertyLabel)?.label ?? addOperatorText;\n    } else if (propertyLabel) {\n      return propertyLabel;\n    } else if (rest['data-name'] === 'propertyField') {\n      return addPropertyText;\n    } else if (rest['data-name'] === 'operatorField') {\n      return addOperatorText;\n    } else if (rest['data-name'] === 'valueField') {\n      return addValueText;\n    } else {\n      return addConditionText;\n    }\n  };\n\n  return (\n    <Popover\n      open={open}\n      isTabTip\n      role=\"gridcell\"\n      className={`${popOverClassName} ${blockClass}__popover`}\n      ref={popoverRef}\n      onRequestClose={closePopover}\n    >\n      <ConditionBuilderButton\n        label={getLabel()}\n        hideLabel={!label ? true : false}\n        onClick={togglePopover}\n        className={className}\n        aria-haspopup\n        aria-expanded={open}\n        renderIcon={\n          renderIcon ? renderIcon : label == undefined ? Add : undefined\n        }\n        showToolTip={showToolTip}\n        isInvalid={isInvalid}\n        description={description}\n        {...rest}\n      />\n\n      {open && (\n        <PopoverContent\n          className={`${blockClass}__popover-content-wrapper`}\n          role=\"dialog\"\n          aria-label={title}\n          onKeyDown={handleKeyDownHandler}\n        >\n          <Layer>\n            <Section>\n              <Heading className={`${blockClass}__item__title`}>\n                {title}\n              </Heading>\n              <div className={`${blockClass}__popover-content`}>\n                {renderChildren\n                  ? renderChildren(popoverRef, closePopover)\n                  : children}\n              </div>\n            </Section>\n          </Layer>\n        </PopoverContent>\n      )}\n    </Popover>\n  );\n};\n\nConditionBuilderItem.propTypes = {\n  /**\n   * provide the contents of the popover\n   */\n  children: PropTypes.node,\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n  /**\n   * current condition state object\n   */\n  condition: PropTypes.object,\n\n  /**\n   * this is the config object again the current property from inputConfig\n   */\n\n  config: PropTypes.object,\n\n  /**\n   * text to be displayed in the field\n   */\n  label: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array,\n    PropTypes.object,\n  ]),\n\n  /**\n   * callback to update the current condition of the state tree\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * class name for popover\n   */\n  popOverClassName: PropTypes.string,\n\n  /**\n   * callback prop that returns the jsx for children\n   */\n  renderChildren: PropTypes.func,\n\n  /**\n   * Optional prop to allow overriding the icon rendering.\n   */\n  renderIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n\n  /**\n   * show tool tip\n   */\n  showToolTip: PropTypes.bool,\n\n  /**\n   * title of the popover\n   */\n  title: PropTypes.string,\n  /**\n   * input type\n   */\n  type: PropTypes.string,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext, useEffect, useRef, useState } from 'react';\n\nimport { Search } from '@carbon/react';\n\nimport { Checkmark } from '@carbon/react/icons';\n\nimport PropTypes from 'prop-types';\nimport { ConditionBuilderContext } from '../../ConditionBuilderContext/ConditionBuilderProvider';\nimport { useTranslations } from '../../utils/useTranslations';\nimport {\n  ConditionGroup,\n  option,\n  Property,\n  statementConfig,\n} from '../../ConditionBuilder.types';\nimport { blockClass, onKeyDownHandlerForSearch } from '../../utils/util';\n\ninterface ItemOptionProps {\n  conditionState: {\n    label?: string;\n    value?: string;\n  };\n  config: { options?: option[] | statementConfig[] | Property[] } & {\n    isStatement?: boolean;\n  };\n  onChange: (value: string, e: Event) => void;\n  closePopover?: () => void;\n  group?: ConditionGroup;\n}\nexport const ItemOption = ({\n  conditionState = {},\n  config = {},\n  onChange,\n  closePopover,\n  group,\n}: ItemOptionProps) => {\n  const { popOverSearchThreshold } = useContext(ConditionBuilderContext);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [propertyText, clearSearchText] = useTranslations([\n    'propertyText',\n    'clearSearchText',\n  ]);\n  const { conditionBuilderRef } = useContext(ConditionBuilderContext);\n  const allOptions = config?.options;\n  const [searchValue, setSearchValue] = useState('');\n\n  const selection = conditionState.value;\n\n  const filteredItems = searchValue\n    ? allOptions?.filter((opt) =>\n        opt.label?.toLowerCase().includes(searchValue.toLowerCase())\n      )\n    : allOptions;\n\n  useEffect(() => {\n    //this will focus the first input field in the popover\n\n    if (contentRef.current) {\n      const firstFocusableElement = contentRef.current?.querySelector(\n        'input, button,li'\n      ) as HTMLInputElement;\n\n      if (firstFocusableElement) {\n        firstFocusableElement.focus();\n      }\n    }\n  }, [allOptions]);\n\n  const onClickHandler = (evt, option) => {\n    if (!evt.currentTarget.hasAttribute('aria-disabled')) {\n      onChange(option.id, evt);\n    }\n  };\n\n  const onSearchChangeHandler = (evt) => {\n    const { value } = evt.target;\n    setSearchValue(value);\n  };\n\n  const getAriaLabel = () => {\n    return conditionState.label ? conditionState.label : propertyText;\n  };\n\n  const getStatementContent = (option) => {\n    return (\n      <div className={`${blockClass}__statement_wrapper`}>\n        <div>\n          {option.label} ({option.connector})\n        </div>\n        <div>{option.secondaryLabel}</div>\n      </div>\n    );\n  };\n\n  if (!allOptions) {\n    return;\n  }\n  return (\n    <div className={`${blockClass}__item-option`} ref={contentRef}>\n      {popOverSearchThreshold && allOptions.length > popOverSearchThreshold && (\n        <div className={`${blockClass}__item-option__search`}>\n          <Search\n            size=\"sm\"\n            labelText={clearSearchText}\n            closeButtonLabelText={clearSearchText}\n            onChange={onSearchChangeHandler}\n            onKeyDown={(evt: React.KeyboardEvent<HTMLInputElement>) => {\n              onKeyDownHandlerForSearch(evt, conditionBuilderRef, closePopover);\n            }}\n          />\n        </div>\n      )}\n\n      <ul aria-label={getAriaLabel()} role=\"listbox\">\n        {filteredItems?.map((option) => {\n          const isSelected = selection === option.id;\n          const Icon = (option as option).icon;\n          const disabled = (option as Property)?.getIsDisabled?.({\n            conditionState,\n            group,\n          });\n          const hidden = (option as Property)?.getIsHidden?.({\n            conditionState,\n            group,\n          });\n\n          return (\n            <li\n              tabIndex={0}\n              key={option.id}\n              role=\"option\"\n              aria-selected={isSelected}\n              className={`${blockClass}__item-option__option`}\n              onKeyUp={() => {\n                return false;\n              }}\n              onClick={(evt) => onClickHandler(evt, option)}\n              {...(disabled ? { 'aria-disabled': 'true' } : {})}\n              {...(hidden ? { 'aria-hidden': 'true' } : {})}\n            >\n              <div className={`${blockClass}__item-option__option-content`}>\n                <span className={`${blockClass}__item-option__option-label`}>\n                  {Icon && <Icon />}\n                  {config?.isStatement\n                    ? getStatementContent(option)\n                    : option.label}\n                </span>\n                {isSelected && (\n                  <Checkmark className={`${blockClass}__checkmark`} />\n                )}\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nItemOption.propTypes = {\n  /**\n   * current condition object\n   */\n  conditionState: PropTypes.object,\n\n  /**\n   * current config object that this property is part of\n   */\n  config: PropTypes.object,\n\n  /**\n   * callback to update state oin date change\n   */\n  onChange: PropTypes.func,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { useContext } from 'react';\nimport { useTranslations } from './useTranslations';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\n\nexport const useDataConfigs = () => {\n  const [\n    ifAll,\n    ifAny,\n    unlessAll,\n    unlessAny,\n    and,\n    or,\n    is,\n    greater,\n    greaterEqual,\n    lower,\n    lowerEqual,\n    startsWith,\n    endsWith,\n    contains,\n    oneOf,\n    before,\n    after,\n    between,\n  ] = useTranslations([\n    'ifAll',\n    'ifAny',\n    'unlessAll',\n    'unlessAny',\n    'and',\n    'or',\n    'is',\n    'greater',\n    'greaterEqual',\n    'lower',\n    'lowerEqual',\n    'startsWith',\n    'endsWith',\n    'contains',\n    'oneOf',\n    'before',\n    'after',\n    'between',\n  ]);\n  const { statementConfigCustom } = useContext(ConditionBuilderContext);\n\n  const statementConfigDefault = [\n    {\n      id: 'ifAll',\n      connector: 'and',\n      label: ifAll,\n      secondaryLabel: '(a && b)',\n    },\n    {\n      id: 'ifAny',\n      connector: 'or',\n      label: ifAny,\n      secondaryLabel: '(a || b)',\n    },\n    {\n      id: 'unlessAll',\n      connector: 'and',\n      label: unlessAll,\n      secondaryLabel: '! (a && b)',\n    },\n    {\n      id: 'unlessAny',\n      connector: 'or',\n      label: unlessAny,\n      secondaryLabel: '! (a || b)',\n    },\n  ];\n\n  const connectorConfig = [\n    {\n      label: and,\n      id: 'and',\n    },\n    {\n      label: or,\n      id: 'or',\n    },\n  ];\n\n  const operatorConfig = [\n    {\n      label: is,\n      id: 'is',\n      type: 'all',\n    },\n    {\n      label: greater,\n      id: 'greater',\n      type: 'number',\n    },\n    {\n      label: greaterEqual,\n      id: 'greaterEqual',\n      type: 'number',\n    },\n    {\n      label: lower,\n      id: 'lower',\n      type: 'number',\n    },\n    {\n      label: lowerEqual,\n      id: 'lowerEqual',\n      type: 'number',\n    },\n    {\n      label: startsWith,\n      id: 'startsWith',\n      type: 'text,textarea',\n    },\n    {\n      label: endsWith,\n      id: 'endsWith',\n      type: 'text,textarea',\n    },\n    {\n      label: contains,\n      id: 'contains',\n      type: 'text,textarea',\n    },\n    {\n      label: oneOf,\n      id: 'oneOf',\n      type: 'option',\n    },\n    {\n      label: before,\n      id: 'before',\n      type: 'date,time',\n    },\n    {\n      label: after,\n      id: 'after',\n      type: 'date,time',\n    },\n    {\n      label: between,\n      id: 'between',\n      type: 'date',\n    },\n  ];\n\n  return {\n    statementConfig: statementConfigCustom ?? statementConfigDefault,\n    connectorConfig,\n    operatorConfig,\n  };\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useCallback, useContext } from 'react';\nimport { ConditionBuilderItem } from '../ConditionBuilderItem/ConditionBuilderItem';\nimport { ItemOption } from '../ConditionBuilderItem/ConditionBuilderItemOption/ItemOption';\nimport PropTypes from 'prop-types';\nimport {\n  blockClass,\n  focusThisField,\n  HIERARCHICAL_VARIANT,\n} from '../utils/util';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport { useTranslations } from '../utils/useTranslations';\nimport { useDataConfigs } from '../utils/useDataConfigs';\nimport { ConditionBuilderButton } from '../ConditionBuilderButton/ConditionBuilderButton';\n\ninterface ConditionConnectorProps {\n  operator: string;\n  className: string;\n  onChange?: (op: string) => void;\n}\nconst ConditionConnector = ({\n  operator,\n  className,\n  onChange,\n  ...rest\n}: ConditionConnectorProps) => {\n  const { variant, conditionBuilderRef } = useContext(ConditionBuilderContext);\n  const [connectorText] = useTranslations(['connectorText']);\n  const { connectorConfig } = useDataConfigs();\n\n  const handleConnectorHover = useCallback((parentGroup, isHover) => {\n    if (isHover) {\n      parentGroup.classList.add('hoveredConnector');\n    } else {\n      parentGroup.classList.remove('hoveredConnector');\n    }\n  }, []);\n  const activeConnectorHandler = (evt) => {\n    const parentGroup = evt?.currentTarget.closest('.eachGroup');\n    handleConnectorHover(parentGroup, true);\n  };\n  const inActiveConnectorHandler = (evt) => {\n    const parentGroup = evt?.currentTarget.closest('.eachGroup');\n    handleConnectorHover(parentGroup, false);\n  };\n\n  const onChangeHandler = (op, evt) => {\n    onChange?.(op);\n    focusThisField(evt, conditionBuilderRef);\n  };\n  return variant == HIERARCHICAL_VARIANT ? (\n    <span\n      className={`${className} ${blockClass}__connector ${blockClass}__connector--disabled`}\n    >\n      <ConditionBuilderButton label={operator} />\n    </span>\n  ) : (\n    <ConditionBuilderItem\n      label={operator}\n      title={connectorText}\n      data-name=\"connectorField\"\n      onMouseEnter={activeConnectorHandler}\n      onMouseLeave={inActiveConnectorHandler}\n      onFocus={activeConnectorHandler}\n      onBlur={inActiveConnectorHandler}\n      {...rest}\n      popOverClassName={`${className} ${blockClass}__connector`}\n      className={`${blockClass}__connector-button`}\n    >\n      <ItemOption\n        config={{\n          options: connectorConfig,\n        }}\n        conditionState={{\n          value: operator,\n          label: connectorText,\n        }}\n        onChange={onChangeHandler}\n      />\n    </ConditionBuilderItem>\n  );\n};\n\nexport default ConditionConnector;\nConditionConnector.propTypes = {\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n\n  /**\n   * callback to update the current condition of the state tree\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * string that defines the connector operator (and/or)\n   */\n  operator: PropTypes.string,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nimport { NumberInput } from '@carbon/react';\n\nimport PropTypes from 'prop-types';\nimport { useTranslations } from '../../utils/useTranslations';\nimport { Condition, PropertyConfigNumber } from '../../ConditionBuilder.types';\nimport { blockClass } from '../../utils/util';\n\ninterface ConditionBuilderItemNumberProps {\n  conditionState: Condition;\n  config: PropertyConfigNumber['config'];\n  onChange: (value: string) => void;\n}\nexport const ConditionBuilderItemNumber = ({\n  conditionState,\n  config,\n  onChange,\n}: ConditionBuilderItemNumberProps) => {\n  const [invalidNumberWarnText] = useTranslations(['invalidNumberWarnText']);\n  const onChangeHandler = (e, { value }) => {\n    if (value !== '' && !isNaN(value) && checkIfValid(value)) {\n      onChange(config?.unit ? `${value} ${config.unit}` : String(value));\n    } else {\n      onChange('INVALID');\n    }\n  };\n  const checkIfValid = (value) => {\n    if (!config) {\n      return true;\n    }\n\n    const { min, max } = config;\n\n    if (max !== undefined && min === undefined && value > max) {\n      return false;\n    }\n\n    if (min !== undefined && max === undefined && value < min) {\n      return false;\n    }\n\n    if (\n      min !== undefined &&\n      max !== undefined &&\n      (value < min || value > max)\n    ) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const getDefaultValue = () => {\n    return (conditionState.value as string)?.split(' ')?.[0] ?? '';\n  };\n  return (\n    <div className={`${blockClass}__item-number`}>\n      <NumberInput\n        {...config}\n        label={conditionState.property}\n        hideLabel\n        id={conditionState.property?.replace(/\\s/g, '') as string}\n        invalidText={invalidNumberWarnText}\n        allowEmpty\n        onChange={onChangeHandler}\n        defaultValue={getDefaultValue()}\n      />\n    </div>\n  );\n};\n\nConditionBuilderItemNumber.propTypes = {\n  /**\n   * current condition object\n   */\n  conditionState: PropTypes.object,\n\n  /**\n   * current config object that this property is part of\n   */\n  config: PropTypes.object,\n\n  /**\n   * callback to update state oin date change\n   */\n  onChange: PropTypes.func,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\n\nimport { TextArea, TextInput } from '@carbon/react';\n\nimport PropTypes from 'prop-types';\nimport { blockClass, checkIsValid } from '../../utils/util';\nimport {\n  Condition,\n  PropertyConfigText,\n  PropertyConfigTextArea,\n} from '../../ConditionBuilder.types';\n\ninterface ConditionBuilderItemTextProps {\n  conditionState: Condition;\n  config: PropertyConfigText | PropertyConfigTextArea;\n  onChange: (value: string) => void;\n  type: 'textarea' | 'text';\n}\nexport const ConditionBuilderItemText = ({\n  conditionState,\n  onChange,\n  config,\n  type,\n}: ConditionBuilderItemTextProps) => {\n  const inputProps = {\n    ...config,\n    hideLabel: true,\n    value: checkIsValid(conditionState.value) ? conditionState.value : '',\n    id: conditionState.property?.replace(/\\s/g, ''),\n    onChange: (evt) => {\n      onChange(evt.target.value);\n    },\n    labelText: conditionState.property,\n  };\n  return (\n    <div className={`${blockClass}__item-text`}>\n      {type == 'textarea' ? (\n        <TextArea {...(inputProps as PropertyConfigTextArea['config'])} />\n      ) : (\n        <TextInput {...(inputProps as PropertyConfigText['config'])} />\n      )}\n    </div>\n  );\n};\n\nConditionBuilderItemText.propTypes = {\n  /**\n   * current condition object\n   */\n  conditionState: PropTypes.object,\n\n  /**\n   * config of the current property\n   */\n  config: PropTypes.object,\n  /**\n   * callback to update state oin date change\n   */\n  onChange: PropTypes.func,\n  /**\n   * current input type\n   */\n  type: PropTypes.string,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  ForwardedRef,\n  useEffect,\n  useRef,\n  useContext,\n  useState,\n} from 'react';\n\nimport { DatePicker, DatePickerInput } from '@carbon/react';\n\nimport PropTypes from 'prop-types';\nimport { useTranslations } from '../../utils/useTranslations';\nimport { Condition, PropertyConfigDate } from '../../ConditionBuilder.types';\nimport {\n  blockClass,\n  checkForMultiSelectOperator,\n  focusThisField,\n} from '../../utils/util';\nimport { ConditionBuilderContext } from '../../ConditionBuilderContext/ConditionBuilderProvider';\n\ninterface ConditionBuilderItemDate {\n  conditionState: Condition;\n  onChange: (date: string) => void;\n  parentRef: ForwardedRef<HTMLDivElement>;\n  config: PropertyConfigDate;\n}\nexport const ConditionBuilderItemDate = ({\n  conditionState,\n  onChange,\n  parentRef,\n  config,\n}) => {\n  const DatePickerInputRef = useRef<HTMLDivElement>(null);\n  const [startText, endText] = useTranslations(['startText', 'endText']);\n\n  const [dateFromState, setDateFromState] = useState<Date[] | undefined>();\n\n  const dateFormat = config?.dateFormat || 'm/d/Y';\n\n  const { conditionBuilderRef } = useContext(ConditionBuilderContext);\n  const datePickerType =\n    conditionState.operator == 'between' ||\n    checkForMultiSelectOperator(conditionState, config)\n      ? 'range'\n      : 'single';\n\n  useEffect(() => {\n    if (datePickerType === 'range') {\n      setDateFromState(getParsedDate(conditionState.value) ?? undefined);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  //This method will convert the date string from the condition state to date object based on the dateFormat\n  const getParsedDate = (dateToParse: string): Date[] | null => {\n    // @ts-ignore\n    const calendarInstance = DatePickerInputRef?.current?.calendar;\n    if (!calendarInstance || !dateToParse) {\n      return null;\n    }\n\n    const [startDate, endDate] = dateToParse.split(' - ');\n    const parsedDates: Date[] = [];\n\n    if (startDate && startDate !== 'INVALID') {\n      parsedDates.push(calendarInstance.parseDate(startDate, dateFormat));\n    }\n    if (endDate && endDate !== 'INVALID') {\n      parsedDates.push(calendarInstance.parseDate(endDate, dateFormat));\n    }\n\n    return parsedDates.length ? parsedDates : null;\n  };\n\n  const onCloseHandler = (selectedDate, selectedDateStr, instance) => {\n    let formattedDate = selectedDateStr;\n\n    if (datePickerType === 'range' && selectedDate.length === 2) {\n      formattedDate = `${instance.formatDate(selectedDate[0], dateFormat)} - ${instance.formatDate(selectedDate[1], dateFormat)}`;\n    }\n\n    onChange(formattedDate || 'INVALID');\n  };\n\n  // this will close the popover on enter key press\n  //Note: has to use onKeyPress instead of onKeyDown, since core is stop propagating for onKeydown(fixEventsPlugin.js)\n  const onKeyPressHandler = (evt: KeyboardEvent) => {\n    if (evt.key === 'Enter') {\n      // @ts-ignore\n      const calendarInstance = DatePickerInputRef?.current?.calendar;\n      if (calendarInstance) {\n        onCloseHandler(\n          calendarInstance.selectedDates,\n          (evt.target as HTMLInputElement).value,\n          calendarInstance\n        );\n      }\n\n      focusThisField(evt, conditionBuilderRef);\n    }\n  };\n\n  return (\n    <div className={`${blockClass}__item-date `}>\n      {datePickerType == 'single' && (\n        <DatePicker\n          {...config}\n          locale={{ locale: config.locale ?? 'en' }}\n          ref={DatePickerInputRef}\n          datePickerType=\"single\"\n          value={conditionState.value}\n          onClose={onCloseHandler}\n          onKeyPress={onKeyPressHandler}\n          appendTo={parentRef?.current}\n        >\n          <DatePickerInput\n            id=\"datePicker\"\n            placeholder=\"dd/mm/yyyy\"\n            labelText={conditionState.property}\n          />\n        </DatePicker>\n      )}\n\n      {datePickerType == 'range' && (\n        <DatePicker\n          {...config}\n          locale={{ locale: config.locale ?? 'en' }}\n          ref={DatePickerInputRef}\n          datePickerType={datePickerType}\n          onClose={onCloseHandler}\n          onKeyPress={onKeyPressHandler}\n          value={dateFromState}\n          appendTo={parentRef?.current}\n        >\n          <DatePickerInput\n            id=\"datePickerStart\"\n            placeholder=\"dd/mm/yyyy\"\n            labelText={startText}\n          />\n          <DatePickerInput\n            id=\"datePickerEnd\"\n            placeholder=\"dd/mm/yyyy\"\n            labelText={endText}\n          />\n        </DatePicker>\n      )}\n    </div>\n  );\n};\nConditionBuilderItemDate.propTypes = {\n  /**\n   * current condition object\n   */\n  conditionState: PropTypes.object,\n\n  config: PropTypes.object,\n\n  /**\n   * callback to update state oin date change\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * reference to the popover node\n   */\n  parentRef: PropTypes.object,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { TimePicker, TimePickerSelect, SelectItem } from '@carbon/react';\nimport PropTypes from 'prop-types';\nimport { PropertyConfigTime } from '../../ConditionBuilder.types';\nimport { blockClass } from '../../utils/util';\n\ninterface ConditionBuilderItemTime {\n  onChange: (value: string | undefined) => void;\n  config: PropertyConfigTime['config'];\n  conditionState: {\n    label?: string;\n    value?: string;\n  };\n}\nexport const ConditionBuilderItemTime = ({\n  onChange,\n  config,\n  conditionState,\n}: ConditionBuilderItemTime) => {\n  const getInitialValue = (itemType: 'time' | 'dayZone' | 'timeZone') => {\n    const itemMap: Record<typeof itemType, number> = {\n      time: 0,\n      dayZone: 1,\n      timeZone: 2,\n    };\n\n    return conditionState.value !== 'INVALID'\n      ? (conditionState.value?.split(' ')[itemMap[itemType]] ?? undefined)\n      : undefined;\n  };\n\n  const initialTimeValue = getInitialValue('time');\n  const initialDayZone = getInitialValue('dayZone');\n  const initialTimeZone = getInitialValue('timeZone');\n\n  const [timeValue, setTimeValue] = useState(initialTimeValue);\n  const [dayZoneValue, setDayZoneValue] = useState(initialDayZone ?? 'AM');\n  const [timeZoneValue, setTimeZoneValue] = useState(\n    initialTimeZone ?? config?.timeZones?.[0]\n  );\n\n  useEffect(() => {\n    const timeToUpdate = `${timeValue ?? ''} ${dayZoneValue ?? ''} ${\n      timeZoneValue ?? ''\n    }`;\n    onChange(timeValue ? timeToUpdate : 'INVALID');\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timeValue, dayZoneValue, timeZoneValue]);\n\n  const setTimeZone = (evt) => {\n    setTimeZoneValue(evt.target.value);\n  };\n  const setDayZone = (evt) => {\n    setDayZoneValue(evt.target.value);\n  };\n  const setTime = (evt) => {\n    setTimeValue(evt.target.value);\n  };\n  return (\n    <div className={`${blockClass}__item-time`}>\n      <TimePicker\n        defaultValue={initialTimeValue}\n        id=\"time-picker\"\n        labelText=\"Select a time\"\n        onChange={setTime}\n      >\n        <TimePickerSelect\n          id=\"time-picker-day-zone\"\n          defaultValue={initialDayZone}\n          onChange={setDayZone}\n        >\n          <SelectItem value=\"AM\" text=\"AM\" />\n          <SelectItem value=\"PM\" text=\"PM\" />\n        </TimePickerSelect>\n        <TimePickerSelect\n          id=\"time-picker-time-zone\"\n          defaultValue={initialTimeZone}\n          onChange={setTimeZone}\n        >\n          {config?.timeZones?.map((timeZone, index) => (\n            <SelectItem key={index} value={timeZone} text={timeZone} />\n          ))}\n        </TimePickerSelect>\n      </TimePicker>\n    </div>\n  );\n};\n\nConditionBuilderItemTime.propTypes = {\n  /**\n   * current condition object\n   */\n  conditionState: PropTypes.object,\n  /**\n   * current config object that this property is part of\n   */\n  config: PropTypes.object,\n  /**\n   * callback to update state oin date change\n   */\n  onChange: PropTypes.func,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext } from 'react';\nimport cx from 'classnames';\nimport { AddAlt, TextNewLine } from '@carbon/react/icons';\nimport { ConditionBuilderButton } from '../ConditionBuilderButton/ConditionBuilderButton';\nimport PropTypes from 'prop-types';\nimport { useTranslations } from '../utils/useTranslations';\nimport { blockClass } from '../utils/util';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport {\n  ConditionBuilderState,\n  ConditionGroup,\n} from '../ConditionBuilder.types';\n\ninterface ConditionBuilderAddProps {\n  className?: string;\n  onClick: () => void;\n  addConditionSubGroupHandler?: () => void;\n  showConditionSubGroupPreviewHandler?: () => void;\n  hideConditionSubGroupPreviewHandler?: () => void;\n  showConditionPreviewHandler?: () => void;\n  hideConditionPreviewHandler?: () => void;\n  enableSubGroup?: boolean;\n  buttonLabel?: string;\n  tabIndex?: number;\n  group?: ConditionGroup;\n}\nconst ConditionBuilderAdd = ({\n  className,\n  onClick,\n  addConditionSubGroupHandler,\n  showConditionSubGroupPreviewHandler,\n  hideConditionSubGroupPreviewHandler,\n  showConditionPreviewHandler,\n  hideConditionPreviewHandler,\n  enableSubGroup,\n  buttonLabel,\n  tabIndex,\n  group,\n}: ConditionBuilderAddProps) => {\n  const [addConditionText, addConditionRowText, addSubgroupText] =\n    useTranslations([\n      'addConditionText',\n      'addConditionRowText',\n      'addSubgroupText',\n    ]);\n\n  const { onAddItem, rootState } = useContext(ConditionBuilderContext);\n\n  const onClickHandler = () => {\n    const { preventAdd } =\n      onAddItem?.({\n        type: 'condition',\n        state: rootState as ConditionBuilderState,\n        group,\n      }) ?? {};\n    if (!preventAdd) {\n      hideConditionPreviewHandler?.();\n      onClick();\n    }\n  };\n  const previewHandlers = () => {\n    return enableSubGroup\n      ? {\n          onMouseEnter: showConditionPreviewHandler,\n          onMouseLeave: hideConditionPreviewHandler,\n          onFocus: showConditionPreviewHandler,\n          onBlur: hideConditionPreviewHandler,\n        }\n      : {};\n  };\n  const previewHandlersForSubgroup = () => ({\n    onMouseEnter: showConditionSubGroupPreviewHandler,\n    onMouseLeave: hideConditionSubGroupPreviewHandler,\n    onFocus: showConditionSubGroupPreviewHandler,\n    onBlur: hideConditionSubGroupPreviewHandler,\n  });\n\n  const handleAddSubGroup = () => {\n    const { preventAdd } =\n      onAddItem?.({\n        type: 'subgroup',\n        state: rootState as ConditionBuilderState,\n        group,\n      }) ?? {};\n    if (!preventAdd) {\n      addConditionSubGroupHandler?.();\n    }\n  };\n\n  const getAriaLabel = () => {\n    return buttonLabel\n      ? buttonLabel\n      : !enableSubGroup\n        ? addConditionRowText\n        : undefined;\n  };\n\n  const wrapperProps = enableSubGroup\n    ? {\n        role: 'gridcell',\n      }\n    : {};\n  return (\n    <div\n      className={`${className} ${blockClass}__add-button-wrapper`}\n      role={!enableSubGroup ? 'gridcell' : 'none'}\n      aria-label={getAriaLabel()}\n    >\n      <ConditionBuilderButton\n        renderIcon={AddAlt}\n        onClick={onClickHandler}\n        {...previewHandlers()}\n        wrapperProps={wrapperProps}\n        className={`${blockClass}__add-button`}\n        hideLabel\n        data-name=\"addButton\"\n        label={buttonLabel ?? addConditionText}\n        tabIndex={tabIndex}\n        wrapperClassName={`${blockClass}__add-condition-wrapper`}\n      />\n      {enableSubGroup && (\n        <ConditionBuilderButton\n          renderIcon={TextNewLine}\n          onClick={handleAddSubGroup}\n          className={cx(`${blockClass}__add-condition-sub-group`)}\n          hideLabel\n          label={addSubgroupText}\n          wrapperProps={wrapperProps}\n          wrapperClassName={`${blockClass}__add-condition-sub-group-wrapper ${blockClass}__gap-left`}\n          {...previewHandlersForSubgroup()}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ConditionBuilderAdd;\n\nConditionBuilderAdd.propTypes = {\n  /**\n   * handler for hiding sub group preview\n   */\n  addConditionSubGroupHandler: PropTypes.func,\n  /**\n   * handler for hiding sub group preview\n   */ /**\n   * tooltip label for plus button\n   */\n  buttonLabel: PropTypes.string,\n\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n  /**\n   * boolean to enable sub groups for the tree variant\n   */\n  enableSubGroup: PropTypes.bool,\n  /**\n   * handler for hiding sub group preview\n   */\n  hideConditionPreviewHandler: PropTypes.func,\n  hideConditionSubGroupPreviewHandler: PropTypes.func,\n  /**\n   * handler for hiding sub group preview\n   */ /**\n   * callback triggered on click of add button\n   */\n  onClick: PropTypes.func,\n  showConditionPreviewHandler: PropTypes.func,\n  showConditionSubGroupPreviewHandler: PropTypes.func,\n  /**\n   * handler for hiding sub group preview\n   */\n  /**\n   * Tab index\n   */\n  tabIndex: PropTypes.number,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext, useEffect, useRef, useState } from 'react';\n\nimport { Search, Button } from '@carbon/react';\n\nimport {\n  Checkmark,\n  Checkbox,\n  CheckboxCheckedFilled,\n} from '@carbon/react/icons';\n/**@ts-ignore */\nimport { SelectSkeleton } from '@carbon/react';\n\nimport PropTypes from 'prop-types';\nimport { ConditionBuilderContext } from '../../ConditionBuilderContext/ConditionBuilderProvider';\nimport { useTranslations } from '../../utils/useTranslations';\nimport {\n  Condition,\n  ConditionBuilderState,\n  Option,\n  PropertyConfigOption,\n} from '../../ConditionBuilder.types';\nimport {\n  blockClass,\n  checkForMultiSelectOperator,\n  onKeyDownHandlerForSearch,\n} from '../../utils/util';\n\ninterface ItemOptionForValueFieldProps {\n  conditionState: Condition & { label?: string };\n  config: PropertyConfigOption['config'];\n  onChange: (value: any, e?: Event) => void;\n  closePopover?: () => void;\n}\nexport const ItemOptionForValueField = ({\n  conditionState = {},\n  config = {},\n  onChange,\n  closePopover,\n}: ItemOptionForValueFieldProps) => {\n  const multiSelectable = checkForMultiSelectOperator(conditionState, config);\n\n  const { popOverSearchThreshold, getOptions, rootState } = useContext(\n    ConditionBuilderContext\n  );\n  const [propertyText, clearSearchText] = useTranslations([\n    'propertyText',\n    'clearSearchText',\n  ]);\n  const { conditionBuilderRef } = useContext(ConditionBuilderContext);\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  const [allOptions, setAllOptions] = useState<Option[]>(\n    config?.options as Option[]\n  );\n  const [searchValue, setSearchValue] = useState<string>('');\n\n  const filteredItems = allOptions?.filter((opt) =>\n    opt.label.toLowerCase().includes(searchValue.toLowerCase())\n  );\n\n  const selection = Array.isArray(conditionState.value)\n    ? conditionState.value\n    : conditionState.value !== undefined\n      ? [conditionState.value]\n      : [];\n\n  useEffect(() => {\n    //this commented code is kept as intentional. Alternate approach to pass async options instead of getOptions callback.\n    // if(rest['data-name'] == 'valueField'){\n    //   const fetchData = async () => {\n    //     const response = await config.options(conditionState);\n    //     if (\n    //       response?.length > 0 &&\n    //       Object.keys(response[0]).includes('label') &&\n    //       Object.keys(response[0]).includes('id')\n    //     ) {\n    //       setAllOptions(response);\n    //       setFilteredItems(response);\n    //     }\n    //   };\n\n    //   fetchData(); // Call the async method\n    // }else{\n    //   setAllOptions(config.options);\n    //       setFilteredItems(config.options);\n    // }\n\n    if (!allOptions && getOptions) {\n      const fetchData = async () => {\n        const response = await getOptions(\n          rootState as ConditionBuilderState,\n          conditionState\n        );\n        if (\n          response?.length > 0 &&\n          Object.keys(response[0]).includes('label') &&\n          Object.keys(response[0]).includes('id')\n        ) {\n          setAllOptions(response);\n        }\n      };\n\n      fetchData(); // Call the async method\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    //this will focus the first input field in the popover\n\n    if (contentRef.current) {\n      const firstFocusableElement = contentRef.current.querySelector(\n        'input, button,li'\n      ) as HTMLUListElement | HTMLElement;\n\n      if (firstFocusableElement) {\n        firstFocusableElement?.focus();\n      }\n    }\n  }, [allOptions]);\n\n  const handleSelectAll = (evt) => {\n    if (evt.currentTarget.dataset.selectedAll == 'false') {\n      onChange(undefined);\n    } else {\n      onChange(allOptions);\n    }\n  };\n  const onSearchChangeHandler = (evt) => {\n    const { value } = evt.target;\n    setSearchValue(value);\n  };\n\n  const onClickHandler = (evt, option, isSelected) => {\n    const updatedSelections = selection.filter(\n      (item) => item !== 'INVALID'\n    ) as Option[];\n    if (multiSelectable) {\n      if (isSelected) {\n        const items = updatedSelections.filter((v) => v.id !== option.id);\n        onChange(items.length > 0 ? items : undefined);\n      } else {\n        onChange([...updatedSelections, option]);\n      }\n    } else {\n      onChange(option, evt);\n    }\n    if (evt.target instanceof SVGElement) {\n      evt.stopPropagation();\n      //stop propagate event , since this closes the popover when clicked on checkboxes which are SVGs.\n    }\n  };\n\n  const getAriaLabel = () => {\n    return conditionState.label\n      ? conditionState.label\n      : conditionState.property\n        ? conditionState.property\n        : propertyText;\n  };\n\n  if (!allOptions) {\n    return <SelectSkeleton />;\n  }\n  return (\n    <div className={`${blockClass}__item-option`} ref={contentRef}>\n      {popOverSearchThreshold && allOptions.length > popOverSearchThreshold && (\n        <div className={`${blockClass}__item-option__search`}>\n          <Search\n            size=\"sm\"\n            labelText={clearSearchText}\n            closeButtonLabelText={clearSearchText}\n            onChange={onSearchChangeHandler}\n            onKeyDown={(evt) => {\n              onKeyDownHandlerForSearch(evt, conditionBuilderRef, closePopover);\n            }}\n          />\n        </div>\n      )}\n\n      {multiSelectable && (\n        <div className={`${blockClass}__multiselectSelectionStatusContainer`}>\n          <label>\n            {selection.length}/{allOptions.length} Selected\n          </label>\n          <Button\n            kind={'ghost'}\n            size={'sm'}\n            data-selected-all={`${selection.length == 0 ? true : false}`}\n            onClick={handleSelectAll}\n            className={`${blockClass}__selectAll-button`}\n          >\n            {selection.length == 0 ? 'Select all' : 'Deselect all'}\n          </Button>\n        </div>\n      )}\n\n      <ul\n        aria-label={getAriaLabel()}\n        role=\"listbox\"\n        data-multi-select={multiSelectable}\n      >\n        {filteredItems?.map((option) => {\n          const isSelected = selection\n            .map((option) => (option as Option).id)\n            .includes(option.id);\n          const Icon = option.icon;\n\n          return (\n            <li\n              tabIndex={0}\n              key={option.id}\n              role=\"option\"\n              aria-selected={isSelected}\n              className={`${blockClass}__item-option__option`}\n              onKeyUp={() => {\n                return false;\n              }}\n              onClick={(evt) => onClickHandler(evt, option, isSelected)}\n            >\n              <div className={`${blockClass}__item-option__option-content`}>\n                {multiSelectable ? (\n                  <>\n                    <span className={`${blockClass}__option-check-box`}>\n                      {isSelected ? <CheckboxCheckedFilled /> : <Checkbox />}\n                    </span>\n\n                    <span\n                      className={`${blockClass}__item-option__option-label`}\n                    >\n                      {option.label}\n                    </span>\n                    {Icon && (\n                      <span className={`${blockClass}__option-icon`}>\n                        <Icon />\n                      </span>\n                    )}\n                  </>\n                ) : (\n                  <>\n                    <span\n                      className={`${blockClass}__item-option__option-label`}\n                    >\n                      {Icon && <Icon />}\n                      {option.label}\n                    </span>\n                    {isSelected && (\n                      <Checkmark className={`${blockClass}__checkmark`} />\n                    )}\n                  </>\n                )}\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nItemOptionForValueField.propTypes = {\n  /**\n   * current condition object\n   */\n  conditionState: PropTypes.object,\n\n  /**\n   * current config object that this property is part of\n   */\n  config: PropTypes.object,\n\n  /**\n   * callback to update state oin date change\n   */\n  onChange: PropTypes.func,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext, useState } from 'react';\nimport { Close } from '@carbon/react/icons';\nimport { ConditionBuilderItem } from '../ConditionBuilderItem/ConditionBuilderItem';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport ConditionConnector from '../ConditionBuilderConnector/ConditionConnector';\nimport { ConditionBuilderItemNumber } from '../ConditionBuilderItem/ConditionBuilderItemNumber/ConditionBuilderItemNumber';\nimport { ConditionBuilderItemText } from '../ConditionBuilderItem/ConditionBuilderItemText/ConditionBuilderItemText';\nimport { ConditionBuilderItemDate } from '../ConditionBuilderItem/ConditionBuilderItemDate/ConditionBuilderItemDate';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport { ConditionBuilderButton } from '../ConditionBuilderButton/ConditionBuilderButton';\nimport {\n  blockClass,\n  checkIsValid,\n  focusThisField,\n  HIERARCHICAL_VARIANT,\n  NON_HIERARCHICAL_VARIANT,\n} from '../utils/util';\nimport { ConditionBuilderItemTime } from '../ConditionBuilderItem/ConditionBuilderItemTime/ConditionBuilderItemTime';\nimport ConditionBuilderAdd from '../ConditionBuilderAdd/ConditionBuilderAdd';\nimport { ItemOption } from '../ConditionBuilderItem/ConditionBuilderItemOption/ItemOption';\nimport { ItemOptionForValueField } from '../ConditionBuilderItem/ConditionBuilderItemOption/ItemOptionForValueField';\nimport { useTranslations } from '../utils/useTranslations';\nimport { useDataConfigs } from '../utils/useDataConfigs';\n\nimport {\n  Condition,\n  ConditionGroup,\n  ConfigType,\n  LogicalOperator,\n  Property,\n  PropertyConfigCustom,\n} from '../ConditionBuilder.types';\n\n/**\n * This component build each block of condition consisting of property, operator value and close button.\n */\n\ninterface ConditionBlockProps {\n  condition?: Condition;\n  onRemove: (e: React.MouseEvent<HTMLButtonElement>) => void;\n  onChange: (condition: Condition) => void;\n  onConnectorOperatorChange?: (op: string) => void;\n  onStatementChange?: (v: string) => void;\n  addConditionHandler?: (conditionIndex: number) => void;\n  addConditionSubGroupHandler?: (conditionIndex: number) => void;\n  hideConditionSubGroupPreviewHandler?: () => void;\n  showConditionSubGroupPreviewHandler?: () => void;\n  hideConditionPreviewHandler?: () => void;\n  showConditionPreviewHandler?: () => void;\n  conjunction?: LogicalOperator;\n  isStatement?: boolean;\n  group: ConditionGroup;\n  conditionIndex: number;\n  aria: {\n    level: number;\n    posinset: number;\n    setsize?: number;\n  };\n  isLastCondition: (\n    index: number,\n    conditions: (ConditionGroup | Condition)[]\n  ) => void;\n}\nconst ConditionBlock = (props: ConditionBlockProps) => {\n  const {\n    onRemove,\n    onChange,\n    condition = {},\n    conjunction,\n    onConnectorOperatorChange,\n    isStatement,\n    group,\n    onStatementChange,\n    conditionIndex,\n    addConditionHandler,\n    addConditionSubGroupHandler,\n    aria,\n    hideConditionSubGroupPreviewHandler,\n    showConditionSubGroupPreviewHandler,\n    hideConditionPreviewHandler,\n    showConditionPreviewHandler,\n    isLastCondition,\n  } = props;\n  const { property, value, operator } = condition;\n  const { inputConfig, variant, conditionBuilderRef, readOnly } = useContext(\n    ConditionBuilderContext\n  );\n\n  const [showDeletionPreview, setShowDeletionPreview] = useState(false);\n  const [showAllActions, setShowAllActions] = useState(false);\n\n  const [\n    conditionRowText,\n    conditionText,\n    propertyText,\n    operatorText,\n    removeConditionText,\n  ] = useTranslations([\n    'conditionRowText',\n    'conditionText',\n    'propertyText',\n    'operatorText',\n    'removeConditionText',\n  ]);\n\n  const { statementConfig, operatorConfig } = useDataConfigs();\n\n  //filtering the current property to access its properties and config options\n  const getCurrentConfig = (property) => {\n    return (\n      inputConfig?.properties?.find(\n        (eachProperty) => eachProperty.id == property\n      ) ?? {}\n    );\n  };\n\n  const { icon, type, config, label, description }: Property = getCurrentConfig(\n    property\n  ) as Property;\n\n  //Below possible input types expected for value field.\n  const itemComponents = {\n    text: ConditionBuilderItemText,\n    number: ConditionBuilderItemNumber,\n    date: ConditionBuilderItemDate,\n    time: ConditionBuilderItemTime,\n    option: ItemOptionForValueField,\n    custom: (config as PropertyConfigCustom['config'])?.component,\n    textarea: ConditionBuilderItemText,\n  };\n  const ItemComponent = itemComponents[type];\n\n  const showAllActionsHandler = () => {\n    setShowAllActions(true);\n  };\n  const hideAllActionsHandler = () => {\n    setShowAllActions(false);\n  };\n  const onStatementChangeHandler = (v, evt) => {\n    focusThisField(evt, conditionBuilderRef);\n    onStatementChange?.(v);\n  };\n\n  const onPropertyChangeHandler = (newProperty) => {\n    onChange({\n      ...condition,\n      property: newProperty,\n      operator: undefined,\n      value: '',\n      popoverToOpen: checkIsValid(newProperty) ? 'operatorField' : '',\n    });\n  };\n  const onOperatorChangeHandler = (newOperator) => {\n    onChange({\n      ...condition,\n      operator: newOperator,\n      value: undefined,\n      popoverToOpen: checkIsValid(newOperator) ? 'valueField' : '',\n    });\n  };\n  const onValueChangeHandler = (newValue) => {\n    const currentCondition = { ...condition };\n    delete currentCondition.popoverToOpen;\n\n    onChange({\n      ...currentCondition,\n      value: newValue,\n    });\n  };\n  const handleShowDeletionPreview = () => {\n    setShowDeletionPreview(true);\n  };\n  const handleHideDeletionPreview = () => {\n    setShowDeletionPreview(false);\n  };\n  const manageActionButtons = (conditionIndex, conditions) => {\n    if (variant === HIERARCHICAL_VARIANT) {\n      return true;\n    }\n    return isLastCondition(conditionIndex, conditions);\n  };\n  const getOperators = () => {\n    if ((config as ConfigType)?.operators) {\n      return (config as ConfigType)?.operators;\n    }\n    return operatorConfig.filter(\n      (operator) => operator.type.indexOf(type) != -1 || operator.type == 'all'\n    );\n  };\n  const getAriaAttributes = () => {\n    return variant == HIERARCHICAL_VARIANT\n      ? {\n          'aria-level': aria.level,\n          'aria-posinset': aria.posinset,\n          'aria-setsize': aria.setsize,\n        }\n      : {};\n  };\n\n  const renderChildren = (popoverRef, closePopover) => {\n    return (\n      <ItemComponent\n        conditionState={{\n          property,\n          operator,\n          value,\n        }}\n        onChange={onValueChangeHandler}\n        config={config}\n        data-name=\"valueField\"\n        parentRef={popoverRef}\n        type={type}\n        closePopover={closePopover}\n      />\n    );\n  };\n  const renderItemOption = (popoverRef, closePopover) => {\n    return (\n      <ItemOption\n        conditionState={{\n          value: property,\n          label: propertyText,\n        }}\n        onChange={onPropertyChangeHandler}\n        config={{ options: inputConfig?.properties }}\n        closePopover={closePopover}\n        group={group}\n      />\n    );\n  };\n  return (\n    // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n    <div\n      className={cx(\n        `${blockClass}__condition-block`,\n        {\n          [`${blockClass}__condition__deletion-preview`]: showDeletionPreview,\n        },\n        {\n          [`${blockClass}__gap-bottom`]: variant == HIERARCHICAL_VARIANT,\n        },\n        {\n          [`${blockClass}__gap ${blockClass}__gap-bottom`]:\n            variant == NON_HIERARCHICAL_VARIANT,\n        },\n        {\n          [`${blockClass}__condition--interacting`]: showAllActions,\n        }\n      )}\n      role=\"row\"\n      aria-label={conditionRowText}\n      {...getAriaAttributes()}\n      onMouseEnter={showAllActionsHandler}\n      onMouseLeave={hideAllActionsHandler}\n      onBlur={hideAllActionsHandler}\n    >\n      {conjunction ? (\n        <ConditionConnector\n          className={`${blockClass}__gap`}\n          operator={conjunction}\n          onChange={(op) => onConnectorOperatorChange?.(op)}\n        />\n      ) : (\n        ''\n      )}\n\n      {isStatement && (\n        <ConditionBuilderItem\n          label={group.statement}\n          title={conditionText}\n          data-name=\"connectorField\"\n          popOverClassName={`${blockClass}__gap ${blockClass}__connector`}\n          className={`${blockClass}__statement-button`}\n          tabIndex={0}\n        >\n          <ItemOption\n            conditionState={{\n              value: group.statement,\n              label: conditionText,\n            }}\n            onChange={onStatementChangeHandler}\n            config={{ options: statementConfig, isStatement: true }}\n          />\n        </ConditionBuilderItem>\n      )}\n      <div className={`${blockClass}__condition-inner-block`}>\n        <ConditionBuilderItem\n          label={label ?? condition?.property}\n          title={propertyText}\n          renderIcon={icon ?? undefined}\n          className={`${blockClass}__property-field`}\n          data-name=\"propertyField\"\n          condition={condition}\n          type={type}\n          description={description}\n          onChange={onPropertyChangeHandler}\n          renderChildren={renderItemOption}\n        />\n        {checkIsValid(property) && (\n          <ConditionBuilderItem\n            label={operator}\n            title={operatorText}\n            data-name=\"operatorField\"\n            condition={condition}\n            type={type}\n            config={config as ConfigType}\n            onChange={onOperatorChangeHandler}\n          >\n            <ItemOption\n              config={{\n                options: getOperators(),\n              }}\n              conditionState={{\n                value: operator,\n                label: operatorText,\n              }}\n              onChange={onOperatorChangeHandler}\n            />\n          </ConditionBuilderItem>\n        )}\n        {checkIsValid(property) && checkIsValid(operator) && (\n          <ConditionBuilderItem\n            label={value}\n            type={type}\n            title={label}\n            showToolTip={true}\n            data-name=\"valueField\"\n            condition={condition}\n            config={config as ConfigType}\n            onChange={onValueChangeHandler}\n            renderChildren={renderChildren}\n          />\n        )}\n      </div>\n      {!readOnly && (\n        <span role=\"gridcell\" aria-label={removeConditionText}>\n          <ConditionBuilderButton\n            hideLabel\n            label={removeConditionText}\n            onClick={onRemove}\n            onMouseEnter={handleShowDeletionPreview}\n            onMouseLeave={handleHideDeletionPreview}\n            onFocus={handleShowDeletionPreview}\n            onBlur={handleHideDeletionPreview}\n            renderIcon={Close}\n            className={`${blockClass}__close-condition`}\n            data-name=\"closeCondition\"\n            wrapperClassName={`${blockClass}__close-condition-wrapper`}\n          />\n        </span>\n      )}\n      {!readOnly && manageActionButtons(conditionIndex, group.conditions) ? (\n        <ConditionBuilderAdd\n          onClick={() => {\n            addConditionHandler?.(conditionIndex);\n          }}\n          addConditionSubGroupHandler={() => {\n            addConditionSubGroupHandler?.(conditionIndex);\n          }}\n          showConditionSubGroupPreviewHandler={\n            showConditionSubGroupPreviewHandler\n          }\n          hideConditionSubGroupPreviewHandler={\n            hideConditionSubGroupPreviewHandler\n          }\n          enableSubGroup={variant == HIERARCHICAL_VARIANT}\n          showConditionPreviewHandler={showConditionPreviewHandler}\n          hideConditionPreviewHandler={hideConditionPreviewHandler}\n          className={`${blockClass}__gap ${blockClass}__gap-left`}\n          group={group}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default ConditionBlock;\n\nConditionBlock.propTypes = {\n  /**\n   * callback to add a new condition\n   */\n  addConditionHandler: PropTypes.func,\n  /**\n   * callback to add a new condition subgroup\n   */\n  addConditionSubGroupHandler: PropTypes.func,\n  /**\n   * object hold aria attributes\n   */\n  aria: PropTypes.object,\n\n  condition: PropTypes.object,\n  conditionIndex: PropTypes.number,\n  /**\n   * string that decides to show the condition connector\n   */\n  conjunction: PropTypes.string,\n\n  /**\n   * object that hold the current group object where is condition is part of\n   */\n  group: PropTypes.object,\n  /**\n   * handler for hiding sub group preview\n   */\n  hideConditionPreviewHandler: PropTypes.func,\n  /**\n   * handler for hiding sub group preview\n   */\n  hideConditionSubGroupPreviewHandler: PropTypes.func,\n\n  isLastCondition: PropTypes.func,\n  /**\n   *  boolean that decides to show the statement(if/ excl.if)\n   */\n  isStatement: PropTypes.bool,\n  /**\n   * callback to update the current condition of the state tree\n   */\n  onChange: PropTypes.func,\n  /**\n   * callback to handle the connector(and/or) change\n   */\n  onConnectorOperatorChange: PropTypes.func,\n  /**\n   * callback for Remove a condition\n   */\n  onRemove: PropTypes.func,\n\n  /**\n   * callback to handle the statement(if/ excl.if) change\n   */\n  onStatementChange: PropTypes.func,\n  /**\n   * handler for showing add condition preview\n   */\n  showConditionPreviewHandler: PropTypes.func,\n  /**\n   * handler for showing sub group preview\n   */\n  showConditionSubGroupPreviewHandler: PropTypes.func,\n  /**\n   * object that hold the current condition\n   */\n  state: PropTypes.object,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport { ConditionBuilderItem } from '../ConditionBuilderItem/ConditionBuilderItem';\nimport ConditionConnector from '../ConditionBuilderConnector/ConditionConnector';\nimport { useTranslations } from '../utils/useTranslations';\nimport { Bee } from '@carbon/react/icons';\nimport { ConditionGroup } from '../ConditionBuilder.types';\nimport { blockClass } from '../utils/util';\n\ninterface ConditionPreviewProps {\n  previewType: 'newGroup' | 'subGroup' | 'condition';\n  group: ConditionGroup;\n  colorIndex?: number;\n  className?: string;\n}\nconst ConditionPreview = ({\n  previewType,\n  group,\n  colorIndex,\n  className,\n}: ConditionPreviewProps) => {\n  const [animate, setAnimate] = useState(false);\n  const [propertyText, operatorText, valueText, ifText] = useTranslations([\n    'valueText',\n    'operatorText',\n    'propertyText',\n    'ifText',\n  ]);\n\n  useEffect(() => {\n    setAnimate(true);\n  }, []);\n  const getConditionSection = () => {\n    return (\n      <div className={`${blockClass}__preview-condition`}>\n        <ConditionBuilderItem label={propertyText} renderIcon={Bee} />\n        <ConditionBuilderItem label={operatorText} />\n        <ConditionBuilderItem label={valueText} />\n      </div>\n    );\n  };\n\n  return (\n    <>\n      {previewType == 'newGroup' && (\n        <>\n          <div\n            className={cx([\n              `${blockClass}__group__row ${blockClass}__group-preview ${className}`,\n              { [`${blockClass}__group-preview-animate`]: animate },\n            ])}\n          >\n            <ConditionBuilderItem\n              className={`${blockClass}__statement-button`}\n              label={group.groupOperator}\n            />\n          </div>\n          <div\n            data-color-index={colorIndex}\n            aria-hidden\n            className={cx([\n              `${blockClass}__group  ${blockClass}__condition-wrapper ${blockClass}__group-preview ${blockClass}__group-wrapper ${className}`,\n              { [`${blockClass}__group-preview-animate`]: animate },\n            ])}\n          >\n            <div className={`${blockClass}__gap`}>\n              <ConditionBuilderItem\n                className={`${blockClass}__statement-button`}\n                label={ifText}\n              />\n            </div>\n            {getConditionSection()}\n          </div>\n        </>\n      )}\n\n      {previewType == 'subGroup' && (\n        <div\n          className={cx([\n            `${blockClass}__group__row ${blockClass}__group-preview ${blockClass}__gap-bottom`,\n            { [`${blockClass}__group-preview-animate`]: animate },\n          ])}\n        >\n          <div className={`${blockClass}__condition-block  ${blockClass}__gap`}>\n            <ConditionBuilderItem\n              label={group.groupOperator}\n              className={`${blockClass}__statement-button`}\n              popOverClassName={`${blockClass}__gap`}\n            />\n\n            <div\n              className={`${blockClass}__group ${blockClass}__condition-wrapper`}\n            >\n              <ConditionConnector\n                className={`${blockClass}__gap ${blockClass}__groupConnector`}\n                operator={ifText}\n              />\n              {getConditionSection()}\n            </div>\n          </div>\n        </div>\n      )}\n      {previewType == 'condition' && (\n        <div\n          className={cx([\n            `${blockClass}__group__row ${blockClass}__group-preview ${blockClass}__gap-bottom`,\n            { [`${blockClass}__group-preview-animate`]: animate },\n          ])}\n        >\n          <div className={`${blockClass}__condition-block  ${blockClass}__gap`}>\n            <ConditionBuilderItem\n              label={group.groupOperator}\n              className={`${blockClass}__statement-button`}\n              popOverClassName={`${blockClass}__gap`}\n            />\n            {getConditionSection()}\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ConditionPreview;\n\nConditionPreview.propTypes = {\n  className: PropTypes.string,\n  /**\n   * index of the color for next group\n   */\n  colorIndex: PropTypes.number,\n  /**\n   * current conditional group\n   */\n  group: PropTypes.object,\n  /**\n   * type of review to be displayed\n   */\n  previewType: PropTypes.oneOf(['condition', 'subGroup', 'newGroup']),\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  Fragment,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport ConditionBlock from '../ConditionBlock/ConditionBlock';\nimport PropTypes from 'prop-types';\n\nimport cx from 'classnames';\n\nimport { ConditionBuilderItem } from '../ConditionBuilderItem/ConditionBuilderItem';\nimport {\n  blockClass,\n  focusThisField,\n  HIERARCHICAL_VARIANT,\n  manageTabIndexAndFocus,\n  NON_HIERARCHICAL_VARIANT,\n} from '../utils/util';\nimport ConditionConnector from '../ConditionBuilderConnector/ConditionConnector';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport uuidv4 from '../../../global/js/utils/uuidv4';\nimport ConditionPreview from '../ConditionPreview/ConditionPreview';\nimport { ItemOption } from '../ConditionBuilderItem/ConditionBuilderItemOption/ItemOption';\nimport { useTranslations } from '../utils/useTranslations';\nimport {\n  Condition,\n  ConditionGroup,\n  LogicalOperator,\n} from '../ConditionBuilder.types';\nimport { useDataConfigs } from '../utils/useDataConfigs';\n/**\n *\n *  state - this is the current group that is being rendered . This can be a inner group or outer group\n * All the inner components of group are called from here.\n * @returns\n */\n\ninterface ConditionGroupBuilderProps {\n  group: ConditionGroup;\n  onRemove: (e: Event) => void;\n  onChange: (group: ConditionGroup) => void;\n  className?: string;\n  aria: {\n    level: number;\n    posinset: number;\n    setsize: number;\n  };\n}\n\nconst ConditionGroupBuilder = ({\n  group,\n  aria,\n  onRemove,\n  onChange,\n  className,\n}: ConditionGroupBuilderProps) => {\n  const [conditionBuilderGroupText, conditionText, conditionBuilderText] =\n    useTranslations([\n      'conditionBuilderGroupText',\n      'conditionText',\n      'conditionBuilderText',\n    ]);\n  const { statementConfig } = useDataConfigs();\n  const { variant, conditionBuilderRef } = useContext(ConditionBuilderContext);\n  const [showConditionPreview, setShowConditionPreview] = useState(-1);\n  const [showConditionSubGroupPreview, setShowConditionSubGroupPreview] =\n    useState(-1);\n  useState(false);\n  const conditionBuilderContentRef = useRef<HTMLDivElement>(null);\n  const scrollParentRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // getting scrollable parent initially\n    if (\n      typeof conditionBuilderRef !== 'function' &&\n      conditionBuilderRef?.current\n    ) {\n      scrollParentRef.current = getScrollableParent(\n        conditionBuilderRef.current\n      );\n    }\n  }, [conditionBuilderRef]);\n\n  useEffect(() => {\n    // This fix addresses a flickering issue when hovering over \"Add Condition\" or \"Add Subgroup\".\n    // On hover, the component inserts a preview element below, ideally pushing the layout downward to create space.\n    // However, if the container is scrolled to the bottom, the layout may instead shift content upward,\n    // breaking the hover chain and causing the preview to flicker.\n    // Fix: When showing the preview on hover, if the scroll position is at the bottom,\n    // scrolling up by 1px prevents layout shift from breaking the hover chain and eliminates flickering.\n\n    const parent = scrollParentRef.current;\n    let atBottom = false;\n\n    if (\n      parent instanceof Window ||\n      parent === document.body ||\n      parent === document.documentElement\n    ) {\n      atBottom =\n        window.innerHeight + window.scrollY >= document.body.scrollHeight;\n    } else if (scrollParentRef.current) {\n      const parent = scrollParentRef.current;\n      atBottom = parent.scrollTop + parent.clientHeight >= parent.scrollHeight;\n    }\n\n    if ((showConditionPreview || showConditionSubGroupPreview) && atBottom) {\n      scrollParentRef.current?.scrollBy(0, -1);\n    }\n  }, [showConditionPreview, showConditionSubGroupPreview]);\n\n  const getScrollableParent = (element) => {\n    while (element && element !== document.body) {\n      const style = getComputedStyle(element);\n      const overflowY = style.overflowY;\n      const isScrollable =\n        overflowY === 'auto' ||\n        overflowY === 'scroll' ||\n        overflowY === 'overlay';\n\n      if (isScrollable && element.scrollHeight > element.clientHeight) {\n        return element;\n      }\n\n      element = element.parentElement;\n    }\n\n    return window; // fallback to window\n  };\n\n  const onRemoveHandler = (conditionId, evt, conditionIndex) => {\n    if (group && group.conditions && group.conditions.length > 1) {\n      if (variant == HIERARCHICAL_VARIANT) {\n        handleFocusOnCloseHierarchical(evt);\n      } else {\n        handleFocusOnClose(evt, conditionIndex);\n      }\n\n      if (!checkGroupHaveCondition(group.conditions, conditionId)) {\n        //when we delete the last  condition of a group without deleting  the subgroup, we need to restructure the group.\n        //we will shift the group one level up. The subgroups will open up as conditions.\n\n        //spreading out the condition inside the subgroup\n        const allConditions = group?.conditions?.reduce(\n          (acc: (ConditionGroup | Condition)[], condition) => {\n            const _condition: ConditionGroup = condition as ConditionGroup;\n            if (_condition.conditions) {\n              //this is a subgroup\n              return acc.concat(_condition.conditions);\n            }\n            return acc;\n          },\n          []\n        );\n\n        onChange?.({\n          ...group,\n          conditions: allConditions,\n        });\n      } else {\n        const filteredConditions: (ConditionGroup | Condition)[] =\n          group.conditions.filter((condition) => conditionId !== condition.id);\n        //This is to handle a edge case.\n        //When a group has structure as 1 condition,1 subgroup, 1 condition and if we delete first condition,\n        //the group will start with a subgroup. To avoid this,opening up that subgroup.\n        if ((filteredConditions?.[0] as ConditionGroup).conditions) {\n          const firstFilteredConditions: ConditionGroup =\n            filteredConditions[0] as ConditionGroup;\n\n          filteredConditions.splice(\n            0,\n            1,\n            ...(firstFilteredConditions?.conditions as ConditionGroup[])\n          );\n        }\n        onChange?.({\n          ...group,\n          conditions: filteredConditions,\n        });\n      }\n    } else {\n      onRemove?.(evt);\n    }\n  };\n  //check to identify a group without a plain condition\n  const checkGroupHaveCondition = (conditions, conditionId) => {\n    return conditions.find((eachCondition) => {\n      return !eachCondition.conditions && eachCondition.id !== conditionId;\n    });\n  };\n\n  const onChangeHandler = (updatedCondition, conditionIndex) => {\n    const updatedConditions = [\n      ...(group?.conditions ? group.conditions.slice(0, conditionIndex) : []),\n      updatedCondition,\n      ...(group?.conditions ? group.conditions.slice(conditionIndex + 1) : []),\n    ];\n    onChange?.({\n      ...group,\n      conditions: updatedConditions,\n      id: group?.id ?? uuidv4(),\n    });\n  };\n\n  const addConditionHandler = (conditionIndex) => {\n    const newCondition = {\n      property: undefined,\n      operator: '',\n      value: '',\n      popoverToOpen: 'propertyField',\n      id: uuidv4(),\n    };\n\n    onChange?.({\n      ...group,\n      conditions: [\n        ...(group.conditions\n          ? group.conditions.slice(0, conditionIndex + 1)\n          : []),\n        newCondition,\n        ...(group.conditions ? group.conditions.slice(conditionIndex + 1) : []),\n      ],\n    } as ConditionGroup);\n  };\n\n  const handleFocusOnClose = (e, conditionIndex) => {\n    //get all close buttons.\n    //if the last condition is closing, focus the second last one.\n    //or focus the next one.\n    const currentGroupCloseButtons = e.currentTarget\n      .closest(`.${blockClass}__group`)\n      ?.querySelectorAll('[data-name=\"closeCondition\"]');\n    if (conditionIndex == currentGroupCloseButtons.length - 1) {\n      manageTabIndexAndFocus(\n        currentGroupCloseButtons[conditionIndex - 1],\n        conditionBuilderRef\n      );\n    } else {\n      manageTabIndexAndFocus(\n        currentGroupCloseButtons[conditionIndex + 1],\n        conditionBuilderRef\n      );\n    }\n  };\n  const handleFocusOnCloseHierarchical = (evt) => {\n    //getting the current aria-level and aria-posinset.\n    const currentLevel = evt.currentTarget\n      ?.closest('[role=\"row\"]')\n      ?.getAttribute('aria-level');\n    const currentPos = evt.currentTarget\n      ?.closest('[role=\"row\"]')\n      ?.getAttribute('aria-posinset');\n\n    //finding the next and previous items in same level\n    const nextElement = conditionBuilderContentRef.current?.querySelector(\n      `[aria-level=\"${currentLevel}\"][aria-posinset=\"${\n        Number(currentPos) + 1\n      }\"]`\n    );\n    const prevElement = conditionBuilderContentRef.current?.querySelector(\n      `[aria-level=\"${currentLevel}\"][aria-posinset=\"${\n        Number(currentPos) - 1\n      }\"]`\n    );\n    //checking if next level is a valid condition. If then, focus the close button inside that condition\n    //Otherwise , check the previous item is a valid condition\n\n    if (nextElement?.classList.contains(`${blockClass}__condition-block`)) {\n      manageTabIndexAndFocus(\n        nextElement?.querySelector('[data-name=\"closeCondition\"]'),\n        conditionBuilderRef\n      );\n    } else if (\n      prevElement?.classList.contains(`${blockClass}__condition-block`)\n    ) {\n      manageTabIndexAndFocus(\n        prevElement?.querySelector('[data-name=\"closeCondition\"]'),\n        conditionBuilderRef\n      );\n    }\n    //If there are no valid condition in this group, focus next or previous row\n    else {\n      const prevRows = conditionBuilderContentRef.current?.querySelectorAll(\n        `[aria-level=\"${Number(currentLevel) - 1}\"][role=\"row\"]`\n      );\n      const nextRow = conditionBuilderContentRef.current?.querySelector(\n        `[aria-level=\"${Number(currentLevel) + 1}\"][role=\"row\"]`\n      );\n      if (nextRow) {\n        //since there are no condition in current group, this group will move one level up\n\n        const rowIdentity = {\n          ariaLevel: Number(nextRow.ariaLevel) - 1,\n          ariaPosInSet: nextRow.ariaPosInSet,\n        };\n        setTimeout(() => {\n          const currentRowToFocus =\n            conditionBuilderContentRef.current?.querySelector(\n              `[role=\"row\"][aria-level=\"${rowIdentity.ariaLevel}\"][aria-posinset=\"${rowIdentity.ariaPosInSet}\"]`\n            );\n          manageTabIndexAndFocus(\n            currentRowToFocus?.querySelector('[data-name=\"closeCondition\"]'),\n            conditionBuilderRef\n          );\n        }, 0);\n      } else if (prevRows?.length && prevRows.length > 1) {\n        manageTabIndexAndFocus(\n          prevRows[prevRows.length - 2]?.querySelector(\n            '[data-name=\"closeCondition\"]'\n          ),\n          conditionBuilderRef\n        );\n      }\n    }\n  };\n\n  const addConditionSubGroupHandler = (conditionIndex) => {\n    onChange({\n      ...group,\n      conditions: [\n        ...(group.conditions\n          ? group.conditions.slice(0, conditionIndex + 1)\n          : []),\n        {\n          statement: 'ifAll',\n          groupOperator: 'and',\n          conditions: [\n            {\n              property: undefined,\n              operator: '',\n              value: '',\n              popoverToOpen: 'propertyField',\n              id: uuidv4(),\n            },\n          ],\n          id: uuidv4(),\n        },\n        ...(group.conditions ? group.conditions.slice(conditionIndex + 1) : []),\n      ],\n    });\n  };\n  const isLastCondition = (conditionIndex, conditionArr) => {\n    return (\n      conditionIndex + 1 >= conditionArr.length ||\n      (conditionArr.length - 1 != conditionIndex &&\n        conditionArr[conditionIndex + 1].conditions)\n    );\n  };\n\n  const showConditionSubGroupPreviewHandler = (conditionIndex) => {\n    setShowConditionSubGroupPreview(conditionIndex);\n  };\n  const hideConditionSubGroupPreviewHandler = () => {\n    setShowConditionSubGroupPreview(-1);\n  };\n  const showConditionPreviewHandler = (conditionIndex) => {\n    setShowConditionPreview(conditionIndex);\n  };\n  const hideConditionPreviewHandler = () => {\n    setShowConditionPreview(-1);\n  };\n  const onStatementChangeHandler = (updatedStatement) => {\n    const groupOperator = statementConfig.find(\n      (statement) => statement.id == updatedStatement\n    )?.connector as LogicalOperator;\n    onChange({\n      ...group,\n      groupOperator: groupOperator,\n      statement: updatedStatement,\n    });\n  };\n\n  const onConnectorOperatorChange = (op) => {\n    onChange({\n      ...group,\n      groupOperator: op,\n    });\n  };\n\n  const getNonHierarchicalVariant = () => {\n    return (\n      <div className={`${className}  eachGroup`}>\n        <div\n          className={`${blockClass}__condition-wrapper`}\n          role=\"grid\"\n          aria-label={conditionBuilderText}\n        >\n          {/* condition loop starts here */}\n\n          {group?.conditions?.map((eachCondition, conditionIndex) => (\n            <div\n              key={eachCondition.id}\n              className={`${blockClass}__group-wrapper`}\n            >\n              <ConditionBlock\n                conjunction={\n                  conditionIndex > 0 ? group.groupOperator : undefined\n                }\n                aria={{\n                  level: aria.level + 1,\n                  posinset: conditionIndex + 1,\n                  setsize: group?.conditions?.length,\n                }}\n                isStatement={conditionIndex == 0}\n                condition={eachCondition}\n                group={group}\n                conditionIndex={conditionIndex}\n                onChange={(updatedConditions) => {\n                  onChangeHandler(updatedConditions, conditionIndex);\n                }}\n                addConditionHandler={addConditionHandler}\n                onRemove={(e) => {\n                  onRemoveHandler(eachCondition.id, e, conditionIndex);\n                }}\n                onConnectorOperatorChange={onConnectorOperatorChange}\n                onStatementChange={onStatementChangeHandler}\n                isLastCondition={isLastCondition}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  };\n\n  const getHierarchicalVariant = () => {\n    return (\n      <div\n        className={`${className} ${blockClass}__condition-wrapper`}\n        role={aria.level === 1 ? 'rowgroup' : undefined}\n        aria-label={aria.level == 1 ? conditionBuilderGroupText : undefined}\n        ref={conditionBuilderContentRef}\n      >\n        {/* condition loop starts here */}\n        {\n          <div\n            tabIndex={0}\n            role=\"row\"\n            aria-level={aria.level}\n            aria-posinset={aria.posinset}\n            aria-setsize={aria.setsize}\n          >\n            <ConditionBuilderItem\n              label={group.statement}\n              title={conditionText}\n              data-name=\"connectorField\"\n              popOverClassName={`${blockClass}__gap ${blockClass}__connector`}\n              className={`${blockClass}__statement-button`}\n            >\n              <ItemOption\n                conditionState={{\n                  value: group.statement,\n                  label: conditionText,\n                }}\n                onChange={(v, evt) => {\n                  focusThisField(evt, conditionBuilderRef);\n                  onStatementChangeHandler(v);\n                }}\n                config={{ options: statementConfig, isStatement: true }}\n              />\n            </ConditionBuilderItem>\n          </div>\n        }\n\n        {group?.conditions?.map((eachCondition, conditionIndex) => (\n          <Fragment key={eachCondition.id}>\n            {/* This condition is for tree model where there will be subgroups inside each group */}\n            {(eachCondition as ConditionGroup).conditions ? (\n              <div\n                className={cx(\n                  `${blockClass}__condition-block subgroup  ${blockClass}__gap`,\n\n                  {\n                    [`${blockClass}__gap-bottom`]:\n                      group &&\n                      group.conditions &&\n                      group.conditions.length < conditionIndex + 1,\n                  },\n                  {}\n                )}\n              >\n                <ConditionConnector\n                  className={`${blockClass}__gap ${blockClass}__gap-bottom ${blockClass}__groupConnector`}\n                  operator={group.groupOperator as string}\n                  aria-hidden\n                />\n\n                <ConditionGroupBuilder\n                  aria={{\n                    level: aria.level + 1,\n                    posinset: conditionIndex + 1,\n                    setsize: group.conditions?.length ?? 0,\n                  }}\n                  className={`${blockClass}__group`}\n                  group={eachCondition as ConditionGroup}\n                  onChange={(updatedConditions) => {\n                    onChangeHandler(updatedConditions, conditionIndex);\n                  }}\n                  onRemove={(e) => {\n                    onRemoveHandler(eachCondition.id, e, conditionIndex);\n                  }}\n                />\n              </div>\n            ) : (\n              <div>\n                <ConditionBlock\n                  conjunction={\n                    conditionIndex > 0 ? group.groupOperator : undefined\n                  }\n                  aria={{\n                    level: aria.level + 1,\n                    posinset: conditionIndex + 1,\n                    setsize: group.conditions?.length ?? 0,\n                  }}\n                  isStatement={false}\n                  condition={eachCondition}\n                  group={group}\n                  conditionIndex={conditionIndex}\n                  addConditionHandler={addConditionHandler}\n                  addConditionSubGroupHandler={addConditionSubGroupHandler}\n                  onChange={(updatedConditions) => {\n                    onChangeHandler(updatedConditions, conditionIndex);\n                  }}\n                  onRemove={(e) => {\n                    onRemoveHandler(eachCondition.id, e, conditionIndex);\n                  }}\n                  onConnectorOperatorChange={onConnectorOperatorChange}\n                  onStatementChange={onStatementChangeHandler}\n                  showConditionSubGroupPreviewHandler={() => {\n                    showConditionSubGroupPreviewHandler(conditionIndex);\n                  }}\n                  hideConditionSubGroupPreviewHandler={\n                    hideConditionSubGroupPreviewHandler\n                  }\n                  showConditionPreviewHandler={() => {\n                    showConditionPreviewHandler(conditionIndex);\n                  }}\n                  hideConditionPreviewHandler={hideConditionPreviewHandler}\n                  isLastCondition={isLastCondition}\n                />\n              </div>\n            )}\n\n            {conditionIndex === showConditionSubGroupPreview && (\n              <ConditionPreview previewType=\"subGroup\" group={group} />\n            )}\n            {conditionIndex === showConditionPreview && (\n              <ConditionPreview previewType=\"condition\" group={group} />\n            )}\n          </Fragment>\n        ))}\n      </div>\n    );\n  };\n  return (\n    <>\n      {variant == HIERARCHICAL_VARIANT && getHierarchicalVariant()}\n      {variant == NON_HIERARCHICAL_VARIANT && getNonHierarchicalVariant()}\n    </>\n  );\n};\n\nexport default ConditionGroupBuilder;\nConditionGroupBuilder.propTypes = {\n  /**\n   * object contains the aria attributes\n   */\n  aria: PropTypes.object,\n\n  /**\n   * state defines the current group\n   */\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n\n  group: PropTypes.object,\n  /**\n   * callback to update the current condition of the state tree\n   */\n  onChange: PropTypes.func,\n  /**\n   * call back to remove the particular group from the state tree\n   */\n  onRemove: PropTypes.func,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext } from 'react';\nimport { ConditionBuilderItem } from '../ConditionBuilderItem/ConditionBuilderItem';\nimport { ItemOption } from '../ConditionBuilderItem/ConditionBuilderItemOption/ItemOption';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport { useTranslations } from '../utils/useTranslations';\nimport { blockClass } from '../utils/util';\nimport { useDataConfigs } from '../utils/useDataConfigs';\n\nconst GroupConnector = () => {\n  const { rootState, setRootState } = useContext(ConditionBuilderContext);\n  const [conditionText] = useTranslations(['conditionText']);\n  const { connectorConfig } = useDataConfigs();\n\n  const onStatementChangeHandler = (updatedStatement) => {\n    setRootState({\n      ...rootState,\n      operator: updatedStatement,\n    });\n  };\n\n  return (\n    <div\n      className={`${blockClass}__group-separator ${blockClass}__group-separator-row`}\n      role=\"row\"\n      tabIndex={-1}\n      aria-level={1}\n    >\n      <ConditionBuilderItem\n        label={rootState.operator}\n        title={conditionText}\n        data-name=\"connectorField\"\n        popOverClassName={`${blockClass}__gap ${blockClass}__groupConnector`}\n        className={`${blockClass}__statement-button`}\n      >\n        <ItemOption\n          conditionState={{\n            value: rootState.operator,\n            label: conditionText,\n          }}\n          onChange={onStatementChangeHandler}\n          config={{ options: connectorConfig }}\n        />\n      </ConditionBuilderItem>\n    </div>\n  );\n};\n\nexport default GroupConnector;\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { Close } from '@carbon/react/icons';\n/**@ts-ignore */\nimport { Section, Heading } from '@carbon/react';\nimport { ConditionBuilderItem } from '../ConditionBuilderItem/ConditionBuilderItem';\nimport { ConditionBuilderContext } from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport ConditionBuilderAdd from '../ConditionBuilderAdd/ConditionBuilderAdd';\nimport uuidv4 from '../../../global/js/utils/uuidv4';\nimport { ConditionBuilderButton } from '../ConditionBuilderButton/ConditionBuilderButton';\nimport { useTranslations } from '../utils/useTranslations';\nimport { ItemOptionForValueField } from '../ConditionBuilderItem/ConditionBuilderItemOption/ItemOptionForValueField';\nimport { Action, Option } from '../ConditionBuilder.types';\nimport { blockClass } from '../utils/util';\n\ninterface ConditionBuilderActionsProps {\n  actions: Action[] | Option[];\n  className?: string;\n}\nconst ConditionBuilderActions = ({\n  actions,\n  className,\n}: ConditionBuilderActionsProps) => {\n  const {\n    actionState = [],\n    setActionState,\n    readOnly,\n  } = useContext(ConditionBuilderContext);\n  const [showDeletionPreview, setShowDeletionPreview] = useState(-1);\n  const [\n    actionsText,\n    thenText,\n    andText,\n    removeActionText,\n    addActionText,\n    actionSectionText,\n  ] = useTranslations([\n    'actionsText',\n    'then',\n    'and',\n    'removeActionText',\n    'addActionText',\n    'actionSectionText',\n  ]);\n\n  const addActionHandler = () => {\n    if (readOnly) {\n      return;\n    }\n    const action = {\n      id: uuidv4(),\n      label: undefined,\n      popoverToOpen: 'valueField',\n    };\n    setActionState?.([...actionState, action]);\n  };\n\n  const onchangeHandler = (selectedId: string, actionIndex: number) => {\n    const action = actions.find((action) => action.id === selectedId); //fetch the selected action from the input action array\n\n    // same actions can be added multiple times\n    const newAction = { ...action, id: actionState[actionIndex].id };\n    setActionState?.([\n      ...actionState.slice(0, actionIndex),\n      newAction,\n      ...actionState.slice(actionIndex + 1),\n    ]);\n  };\n\n  const onRemove = (selectedId) => {\n    setActionState?.(actionState.filter((action) => action.id !== selectedId));\n  };\n  const handleShowDeletionPreview = (index: number) => {\n    setShowDeletionPreview(index);\n  };\n  const handleHideDeletionPreview = () => {\n    setShowDeletionPreview(-1);\n  };\n  return (\n    <div className={className}>\n      <Section className={`${blockClass}__heading`} level={4}>\n        <Heading>{actionsText}</Heading>\n      </Section>\n      <div\n        className={`${blockClass}__condition-wrapper`}\n        role=\"grid\"\n        aria-label={actionSectionText}\n      >\n        {actionState?.map((action, index) => (\n          <div\n            key={action.id}\n            role=\"row\"\n            className={cx(\n              `${blockClass}__condition-block ${blockClass}__gap ${blockClass}__gap-bottom`,\n              {\n                [`${blockClass}__condition__deletion-preview`]:\n                  showDeletionPreview == index,\n              }\n            )}\n          >\n            <ConditionBuilderItem\n              className={`${blockClass}__statement-button`}\n              tabIndex={0}\n              popOverClassName={`${blockClass}__gap ${blockClass}__connector`}\n              label={index === 0 ? thenText : andText}\n            />\n\n            <ConditionBuilderItem\n              label={action.label}\n              title={actionsText}\n              condition={action as Action}\n              data-name=\"valueField\"\n              type=\"option\"\n              popOverClassName={`${blockClass}__action-block`}\n            >\n              <ItemOptionForValueField\n                conditionState={{\n                  value: action.label,\n                }}\n                onChange={(selection) => onchangeHandler(selection.id, index)}\n                config={{ options: actions as Option[] }}\n              />\n            </ConditionBuilderItem>\n            {!readOnly && (\n              <span role=\"gridcell\" aria-label={removeActionText}>\n                <ConditionBuilderButton\n                  hideLabel\n                  label={removeActionText}\n                  onClick={() => onRemove(action.id)}\n                  onMouseEnter={() => handleShowDeletionPreview(index)}\n                  onMouseLeave={handleHideDeletionPreview}\n                  onFocus={() => handleShowDeletionPreview(index)}\n                  onBlur={handleHideDeletionPreview}\n                  renderIcon={Close}\n                  className={`${blockClass}__close-condition`}\n                  data-name=\"closeCondition\"\n                />\n              </span>\n            )}\n            {!readOnly && actionState.length === index + 1 && (\n              <ConditionBuilderAdd\n                onClick={addActionHandler}\n                className={`${blockClass}__gap ${blockClass}__gap-left`}\n                buttonLabel={addActionText}\n                tabIndex={0}\n              />\n            )}\n          </div>\n        ))}\n\n        {actionState.length === 0 && (\n          <ConditionBuilderAdd\n            onClick={addActionHandler}\n            className={`${blockClass}__gap ${blockClass}__gap-left`}\n            buttonLabel={addActionText}\n            tabIndex={0}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ConditionBuilderActions;\n\nConditionBuilderActions.propTypes = {\n  /**\n   * optional array of object that give the list of actions.\n   */\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n      label: PropTypes.string.isRequired,\n    })\n  ),\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n};\n","/**\n * Copyright IBM Corp. 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from '@carbon/react';\nimport { Add, TextNewLine } from '@carbon/react/icons';\nimport ConditionGroupBuilder from '../ConditionGroupBuilder/ConditionGroupBuilder';\nimport {\n  ConditionBuilderContext,\n  emptyState,\n} from '../ConditionBuilderContext/ConditionBuilderProvider';\nimport { ConditionBuilderButton } from '../ConditionBuilderButton/ConditionBuilderButton';\nimport uuidv4 from '../../../global/js/utils/uuidv4';\nimport ConditionPreview from '../ConditionPreview/ConditionPreview';\nimport { Heading } from '@carbon/react';\n/**@ts-ignore */\nimport { Section } from '@carbon/react';\nimport GroupConnector from '../ConditionBuilderConnector/GroupConnector';\nimport ConditionBuilderActions from '../ConditionBuilderActions/ConditionBuilderActions';\nimport { useTranslations } from '../utils/useTranslations';\nimport {\n  Action,\n  ConditionBuilderContextProps,\n  ConditionBuilderState,\n  ConditionGroup,\n  InitialState,\n} from '../ConditionBuilder.types';\nimport { blockClass, HIERARCHICAL_VARIANT } from '../utils/util';\ninterface ConditionBuilderContentProps {\n  startConditionLabel: string;\n  getConditionState: (state: ConditionBuilderState) => void;\n  getActionsState?: (state: Action[]) => void;\n  initialState?: InitialState;\n  actions?: Action[];\n}\nconst ConditionBuilderContent = ({\n  startConditionLabel,\n  getConditionState,\n  getActionsState,\n  initialState,\n  actions,\n}: ConditionBuilderContentProps) => {\n  const { rootState, setRootState, variant, actionState, onAddItem, readOnly } =\n    useContext<ConditionBuilderContextProps>(ConditionBuilderContext);\n\n  const initialConditionState = useRef(\n    initialState?.state ? JSON.parse(JSON.stringify(initialState?.state)) : null\n  );\n  const [isConditionBuilderActive, setIsConditionBuilderActive] =\n    useState(false);\n  const [showConditionGroupPreview, setShowConditionGroupPreview] =\n    useState(false);\n\n  const [\n    addConditionGroupText,\n    conditionHeadingText,\n    conditionBuilderHierarchicalText,\n  ] = useTranslations([\n    'addConditionGroupText',\n    'conditionHeadingText',\n    'conditionBuilderHierarchicalText',\n  ]);\n  const showConditionGroupPreviewHandler = () => {\n    setShowConditionGroupPreview(true);\n  };\n\n  const hideConditionGroupPreviewHandler = () => {\n    setShowConditionGroupPreview(false);\n  };\n\n  useEffect(() => {\n    if (rootState?.groups?.length) {\n      setIsConditionBuilderActive(true);\n    } else {\n      setIsConditionBuilderActive(false);\n    }\n\n    if (getConditionState) {\n      getConditionState(rootState ?? {});\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [rootState]);\n\n  useEffect(() => {\n    getActionsState?.(actionState ?? []);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [actionState]);\n  useEffect(() => {\n    if (initialState?.enabledDefault) {\n      setRootState?.(initialState.state);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [initialState]);\n\n  const onStartConditionBuilder = () => {\n    //when add condition button is clicked.\n    setIsConditionBuilderActive(true);\n    if (initialConditionState?.current?.groups?.length) {\n      setRootState?.(initialConditionState.current);\n      initialConditionState.current = null;\n    } else {\n      setRootState?.(emptyState); //here we can set an empty skeleton object for an empty condition builder,\n    }\n\n    //or we can even pre-populate some existing builder and continue editing\n  };\n\n  const onRemove = useCallback(\n    (groupId) => {\n      const groups = rootState?.groups?.filter(\n        (group) => groupId !== group?.id\n      );\n      setRootState?.({\n        ...rootState,\n        groups: rootState ? groups : [],\n      });\n      //set the initial state to empty.\n      if (groups?.length === 0) {\n        initialConditionState.current = null;\n      }\n    },\n    [setRootState, rootState]\n  );\n\n  const onChangeHandler = (updatedGroup, groupIndex) => {\n    /**\n     * This method is triggered from inner components. This will be called every time when any change is to be updated in the rootState.\n     * This gets the updated group as argument.\n     */\n    if (rootState && rootState.groups) {\n      const groups = [\n        ...(rootState.groups ? rootState.groups.slice(0, groupIndex) : []),\n        updatedGroup,\n        ...(rootState.groups ? rootState.groups.slice(groupIndex + 1) : []),\n      ];\n      setRootState?.({\n        ...rootState,\n        groups,\n      });\n    }\n  };\n\n  const addConditionGroupHandler = () => {\n    const { preventAdd } =\n      onAddItem?.({\n        type: 'group',\n        state: rootState as ConditionBuilderState,\n      }) ?? {};\n    if (!preventAdd) {\n      const newGroup: ConditionGroup = {\n        statement: 'ifAll',\n        groupOperator: 'and',\n        id: uuidv4(),\n        conditions: [\n          {\n            property: undefined,\n            operator: '',\n            value: '',\n            popoverToOpen: 'propertyField',\n            id: uuidv4(),\n          },\n        ],\n      };\n      setRootState?.({\n        ...rootState,\n        groups:\n          rootState && rootState.groups\n            ? [...rootState.groups, newGroup]\n            : [newGroup],\n      });\n    }\n  };\n\n  const getColorIndex = () => {\n    const groupLength = rootState?.groups?.length ?? 0;\n    return groupLength % 5;\n  };\n\n  if (!isConditionBuilderActive) {\n    return (\n      <Button\n        className={`${blockClass}__addConditionText-button`}\n        renderIcon={(props) => <Add {...props} />}\n        iconDescription={startConditionLabel}\n        kind=\"ghost\"\n        size=\"sm\"\n        onClick={onStartConditionBuilder}\n      >\n        {startConditionLabel}\n      </Button>\n    );\n  }\n  const wrapperRole =\n    variant === HIERARCHICAL_VARIANT\n      ? { role: 'treegrid', 'aria-label': conditionBuilderHierarchicalText }\n      : null;\n\n  return (\n    <>\n      <Section className={`${blockClass}__heading`} level={4}>\n        <Heading>{conditionHeadingText}</Heading>\n      </Section>\n\n      <div className={`${blockClass}__content-container`} {...wrapperRole}>\n        {rootState &&\n          rootState?.groups?.map((eachGroup, groupIndex) => (\n            <div key={eachGroup.id} className={`${blockClass}__group-wrapper`}>\n              <ConditionGroupBuilder\n                className={`${blockClass}__group`}\n                aria={{\n                  level: 1,\n                  posinset: groupIndex * 2 + 1,\n                  setsize:\n                    (rootState.groups && rootState.groups.length * 2) ?? 0,\n                }}\n                group={eachGroup}\n                onRemove={() => {\n                  onRemove(eachGroup.id);\n                }}\n                onChange={(updatedGroup) => {\n                  onChangeHandler(updatedGroup, groupIndex);\n                }}\n              />\n\n              {/* displaying the connector field between groups */}\n              {rootState.groups && groupIndex < rootState.groups.length - 1 && (\n                <GroupConnector />\n              )}\n            </div>\n          ))}\n\n        {/* button to add a new group */}\n        {!readOnly && variant == HIERARCHICAL_VARIANT && (\n          <div\n            role=\"row\"\n            tabIndex={-1}\n            aria-level={1}\n            className={`${blockClass}__add-group`}\n          >\n            {\n              <ConditionBuilderButton\n                renderIcon={TextNewLine}\n                onClick={addConditionGroupHandler}\n                onMouseEnter={showConditionGroupPreviewHandler}\n                onMouseLeave={hideConditionGroupPreviewHandler}\n                onFocus={showConditionGroupPreviewHandler}\n                onBlur={hideConditionGroupPreviewHandler}\n                className={`${blockClass}__add-condition-group `}\n                hideLabel\n                label={addConditionGroupText}\n                wrapperProps={{\n                  role: 'gridcell',\n                  'aria-label': addConditionGroupText,\n                }}\n              />\n            }\n          </div>\n        )}\n\n        {variant === HIERARCHICAL_VARIANT ? (\n          <ConditionPreview\n            previewType=\"newGroup\"\n            colorIndex={getColorIndex()}\n            className={\n              showConditionGroupPreview\n                ? `${blockClass}__visible`\n                : `${blockClass}__hidden`\n            }\n            group={{ groupOperator: rootState?.operator, id: uuidv4() }}\n          />\n        ) : null}\n      </div>\n      {actions && (\n        <ConditionBuilderActions\n          actions={actions}\n          className={`${blockClass}__actions-container`}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ConditionBuilderContent;\n\nConditionBuilderContent.propTypes = {\n  /**\n   * optional array of object that give the list of actions.\n   */\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n      label: PropTypes.string.isRequired,\n    })\n  ),\n  /**\n   * callback functions that will provide the updated action state back.\n   */\n  getActionsState: PropTypes.func,\n  /**\n   * This is a callback function that returns the updated state\n   */\n  getConditionState: PropTypes.func.isRequired,\n  /**\n   * Optional prop if the condition building need to start from a predefined initial state\n   */\n  initialState: PropTypes.shape({\n    state: PropTypes.shape({\n      groups: PropTypes.arrayOf(\n        PropTypes.shape({\n          groupOperator: PropTypes.string,\n          statement: PropTypes.string,\n          conditions: PropTypes.arrayOf(\n            PropTypes.oneOfType([\n              PropTypes.shape({\n                property: PropTypes.string,\n                operator: PropTypes.string,\n                value: PropTypes.oneOfType([\n                  PropTypes.string,\n                  PropTypes.arrayOf(\n                    PropTypes.shape({\n                      id: PropTypes.string,\n                      label: PropTypes.string,\n                    })\n                  ),\n                  PropTypes.shape({\n                    id: PropTypes.string,\n                    label: PropTypes.string,\n                  }),\n                ]),\n              }),\n              PropTypes.object,\n            ])\n          ),\n        })\n      ),\n      operator: PropTypes.string,\n    }),\n    enabledDefault: PropTypes.bool,\n  }),\n  /* Provide a label to the button that starts condition builder\n   */\n  startConditionLabel: PropTypes.string.isRequired,\n};\n","/**\n * Copyright IBM Corp. 2024, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// Import portions of React that are needed.\nimport React, { ForwardedRef, useRef } from 'react';\n\n/**@ts-ignore */\nimport { VStack } from '@carbon/react';\n\n// Other standard imports.\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport { getDevtoolsProps } from '../../global/js/utils/devtools';\n\nimport ConditionBuilderContent from './ConditionBuilderContent/ConditionBuilderContent';\nimport { ConditionBuilderProvider } from './ConditionBuilderContext/ConditionBuilderProvider';\nimport { pkg } from '../../settings';\n\nimport { ConditionBuilderProps } from './ConditionBuilder.types';\n\nimport { handleKeyDown } from './utils/handleKeyboardEvents';\nimport { blockClass, NON_HIERARCHICAL_VARIANT } from './utils/util';\n\n// Carbon and package components we use.\n/* TODO: @import(s) of carbon components and other package components. */\n\nconst componentName = 'ConditionBuilder';\n\n// NOTE: the component SCSS is not imported here: it is rolled up separately.\n\n// Default values can be included here and then assigned to the prop params,\n// e.g. prop = defaults.prop,\n// This gathers default values together neatly and ensures non-primitive\n// values are initialized early to avoid react making unnecessary re-renders.\n// Note that default values are not required for props that are 'required',\n// nor for props where the component can apply undefined values reasonably.\n// Default values should be provided when the component needs to make a choice\n// or assumption when a prop is not supplied.\n\n// Default values for props\n// const defaults = {\n//   /* TODO: add defaults for relevant props if needed */\n// };\n\n/**\n * TODO: A description of the component.\n */\n\nexport const ConditionBuilder = React.forwardRef(\n  (\n    {\n      className,\n      inputConfig,\n      startConditionLabel = 'Add Condition',\n      popOverSearchThreshold,\n      getOptions,\n      initialState,\n      getConditionState,\n      getActionsState,\n      variant = NON_HIERARCHICAL_VARIANT,\n      actions,\n      translateWithId,\n      statementConfigCustom,\n      onAddItem,\n      readOnly,\n      ...rest\n    }: ConditionBuilderProps,\n    ref: ForwardedRef<HTMLDivElement>\n  ) => {\n    const localRef = useRef(null);\n    const conditionBuilderRef = ref || localRef;\n\n    const handleKeyDownHandler = (evt) => {\n      handleKeyDown(evt, conditionBuilderRef, variant);\n    };\n\n    return (\n      <ConditionBuilderProvider\n        inputConfig={inputConfig}\n        popOverSearchThreshold={popOverSearchThreshold}\n        getOptions={getOptions}\n        variant={variant}\n        translateWithId={translateWithId}\n        conditionBuilderRef={conditionBuilderRef}\n        statementConfigCustom={statementConfigCustom}\n        onAddItem={onAddItem}\n        readOnly={!!readOnly}\n      >\n        <div\n          {\n            // Pass through any other property values as HTML attributes.\n            ...rest\n          }\n          className={cx(\n            blockClass, // Apply the block class to the main HTML element\n            className, // Apply any supplied class names to the main HTML element.\n            { [`${blockClass}__readonly`]: readOnly },\n            {\n              // switched classes dependant on props or state\n              // example: [`${blockClass}__here-if-small`]: size === 'sm',\n            }\n          )}\n          ref={conditionBuilderRef}\n          {...getDevtoolsProps(componentName)}\n        >\n          <VStack\n            className={`${blockClass}__${variant}`}\n            onKeyDown={handleKeyDownHandler}\n          >\n            <ConditionBuilderContent\n              startConditionLabel={startConditionLabel}\n              getConditionState={getConditionState}\n              getActionsState={getActionsState}\n              initialState={initialState}\n              actions={actions}\n            />\n          </VStack>\n        </div>\n      </ConditionBuilderProvider>\n    );\n  }\n);\n\n// Return a placeholder if not released and not enabled by feature flag\n\n// The display name of the component, used by React. Note that displayName\n// is used in preference to relying on function.name.\nConditionBuilder.displayName = componentName;\n\n// The types and DocGen commentary for the component props,\n// in alphabetical order (for consistency).\n// See https://www.npmjs.com/package/prop-types#usage.\nConditionBuilder.propTypes = {\n  /**\n   * optional array of actions\n   */\n  /**@ts-ignore */\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n      label: PropTypes.string.isRequired,\n    })\n  ),\n  /**\n   * Provide an optional class to be applied to the containing node.\n   */\n  className: PropTypes.string,\n\n  /**\n   * This is a callback that gives back the updated action state\n   */\n  getActionsState: PropTypes.func,\n  /**\n   * This is a callback that gives back updated condition state\n   */\n  getConditionState: PropTypes.func.isRequired,\n  /**\n * Callback triggered to dynamically fetch options for a property of type 'option'.\n * This is invoked when no static options array is provided in the input config.\n * The function should return a Promise that resolves with an array of options in the required format.\n \n */\n  getOptions: PropTypes.func,\n  /**\n   * Optional prop if you want to pass a saved condition state, pass as \"initialState.state\".\n   * \"initialState.enabledDefault\" will populate the builder with the provided initial state before clicking Add Condition button.\n   *\n   *  This state should respect the structure of condition state that is available in getConditionState callback\n   */\n  /**@ts-ignore */\n  initialState: PropTypes.shape({\n    state: PropTypes.shape({\n      groups: PropTypes.arrayOf(\n        PropTypes.shape({\n          groupOperator: PropTypes.string,\n          statement: PropTypes.string,\n          conditions: PropTypes.arrayOf(\n            PropTypes.oneOfType([\n              PropTypes.shape({\n                property: PropTypes.string,\n                operator: PropTypes.string,\n                value: PropTypes.oneOfType([\n                  PropTypes.string,\n                  PropTypes.arrayOf(\n                    PropTypes.shape({\n                      id: PropTypes.string,\n                      label: PropTypes.string,\n                    })\n                  ),\n                  PropTypes.shape({\n                    id: PropTypes.string,\n                    label: PropTypes.string,\n                  }),\n                ]),\n              }),\n              PropTypes.object,\n            ])\n          ),\n        })\n      ),\n      operator: PropTypes.string,\n    }),\n    enabledDefault: PropTypes.bool,\n  }),\n\n  /**\n   * This is a mandatory prop that defines the input to the condition builder.\n\n   */\n  /**@ts-ignore */\n  inputConfig: PropTypes.shape({\n    properties: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        label: PropTypes.string.isRequired,\n        icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n        type: PropTypes.oneOf([\n          'text',\n          'textarea',\n          'number',\n          'date',\n          'option',\n          'time',\n          'custom',\n        ]).isRequired,\n        description: PropTypes.string, //will be displayed on hover of property field\n        getIsDisabled: PropTypes.func,\n        getIsHidden: PropTypes.func,\n        config: PropTypes.shape({\n          options: PropTypes.arrayOf(\n            PropTypes.shape({\n              id: PropTypes.string.isRequired,\n              label: PropTypes.string.isRequired,\n              icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n            })\n          ),\n          component: PropTypes.func,\n          operators: PropTypes.arrayOf(\n            PropTypes.shape({\n              id: PropTypes.string.isRequired,\n              label: PropTypes.string.isRequired,\n            })\n          ),\n          valueFormatter: PropTypes.func,\n        }),\n      })\n    ),\n  }).isRequired,\n  /**\n   * this is an optional callback triggered before adding any condition , subgroup or group.\n   * User can optionally perform any validation and can stop add action if they return back {preventAdd:true}\n   */\n  onAddItem: PropTypes.func,\n\n  /**\n   * Provide an mandatory numeric value that will be used to enable search option in the popovers with list.\n   */\n  popOverSearchThreshold: PropTypes.number.isRequired,\n\n  /**\n   * Whether the conditionBuilder should be readOnly\n   */\n  readOnly: PropTypes.bool,\n\n  /**\n   * Provide a label to the button that starts condition builder\n   */\n  startConditionLabel: PropTypes.string,\n  /**\n   * Optional prop for passing custom configuration for statement option from default op\n   */\n  /**@ts-ignore */\n  statementConfigCustom: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      connector: PropTypes.oneOf(['and', 'or']).isRequired,\n      label: PropTypes.string.isRequired,\n      secondaryLabel: PropTypes.string,\n    })\n  ),\n  /**\n   * Optional prop, if you need to pass translations to the texts on the component instead of the defined defaults.\n   * This callback function will receive the message id and you need to return the corresponding text for that id.\n   \n   */\n  /**@ts-ignore */\n  translateWithId: PropTypes.func,\n\n  /* TODO: add types and DocGen for all props. */\n  /**\n   * Provide the condition builder variant: Non-Hierarchical/ Hierarchical\n   */\n  variant: PropTypes.oneOf(['Non-Hierarchical', 'Hierarchical']),\n};\n"],"names":["blockClass","pkg","NON_HIERARCHICAL_VARIANT","HIERARCHICAL_VARIANT","focusThisField","evt","conditionBuilderRef","target","itemRow","buttonName","selector","manageTabIndexAndFocus","focusThisItem","currentElement","traverseClockwise","eachElem","index","allElements","rotate","trapFocus","traverseReverse","checkForHoldingKey","key","checkIsValid","item","contentContainer","element","getValue","type","value","config","option","checkForMultiSelectOperator","condition","operator","onKeyDownHandlerForSearch","closePopover","emptyState","uuidv4","ConditionBuilderContext","createContext","ConditionBuilderProvider","props","rootState","setRootState","useState","actionState","setActionState","contextValue","PropTypes","ConditionBuilderButton","className","label","hideLabel","tooltipAlign","Icon","onClick","showToolTip","wrapperProps","onBlur","onFocus","onMouseEnter","onMouseLeave","isInvalid","wrapperClassName","tabIndex","description","rest","tooltipText","carbonPrefix","usePrefix","Button","dataName","readOnly","useContext","handleClick","e","React","cx","WarningAltFilled","Tooltip","translationsObject","useTranslations","translationKeys","alterTranslationKeyMap","translateWithId","translationKey","handleKeyDown","variant","handleKeyPressForMainContent","handleKeyDownForPopover","popoverRef","excludeKeyPress","handleKeyPressForPopover","getVisibleOptions","parentContainer","el","isHoldingShiftKey","isMultiSelect","isOptionInput","allItems","allCellsInRow","handleRowNavigationHierarchical","currentItemIndex","handleCellNavigation","wrapper","handleRowNavigation","getRows","getRowIndex","row","rows","currentRowIndex","navigateToNextRowCell","nextRowIndex","nextRow","itemName","useEvent","elementOrRef","eventName","callback","savedCallback","useRef","useEffect","handler","event","ConditionBuilderItem","children","renderIcon","title","popOverClassName","renderChildren","onChange","open","setOpen","statementConfigCustom","statementIdMap","statement","invalidText","addConditionText","addPropertyText","addOperatorText","addValueText","labelText","getCustomOperatorLabel","propertyLabel","getPropertyDetails","property","currentField","openPopOver","firstFocusableElement","focusEvent","relatedTarget","popoverEl","focusLeftPopover","targetInsidePopover","focusMovedToDatePicker","manageInvalidSelection","togglePopover","handleKeyDownHandler","getLabel","Popover","Add","PopoverContent","Layer","Section","Heading","ItemOption","conditionState","group","popOverSearchThreshold","contentRef","propertyText","clearSearchText","allOptions","searchValue","setSearchValue","selection","filteredItems","opt","onClickHandler","onSearchChangeHandler","getAriaLabel","getStatementContent","Search","isSelected","disabled","hidden","Checkmark","useDataConfigs","ifAll","ifAny","unlessAll","unlessAny","and","or","is","greater","greaterEqual","lower","lowerEqual","startsWith","endsWith","contains","oneOf","before","after","between","ConditionConnector","connectorText","connectorConfig","handleConnectorHover","useCallback","parentGroup","isHover","activeConnectorHandler","inActiveConnectorHandler","onChangeHandler","op","ConditionBuilderItemNumber","invalidNumberWarnText","checkIfValid","min","max","getDefaultValue","NumberInput","ConditionBuilderItemText","inputProps","TextArea","TextInput","ConditionBuilderItemDate","parentRef","DatePickerInputRef","startText","endText","dateFromState","setDateFromState","dateFormat","datePickerType","getParsedDate","dateToParse","calendarInstance","startDate","endDate","parsedDates","onCloseHandler","selectedDate","selectedDateStr","instance","formattedDate","onKeyPressHandler","DatePicker","DatePickerInput","ConditionBuilderItemTime","getInitialValue","itemType","itemMap","initialTimeValue","initialDayZone","initialTimeZone","timeValue","setTimeValue","dayZoneValue","setDayZoneValue","timeZoneValue","setTimeZoneValue","timeToUpdate","setTimeZone","setDayZone","setTime","TimePicker","TimePickerSelect","SelectItem","timeZone","ConditionBuilderAdd","addConditionSubGroupHandler","showConditionSubGroupPreviewHandler","hideConditionSubGroupPreviewHandler","showConditionPreviewHandler","hideConditionPreviewHandler","enableSubGroup","buttonLabel","addConditionRowText","addSubgroupText","onAddItem","preventAdd","previewHandlers","previewHandlersForSubgroup","handleAddSubGroup","AddAlt","TextNewLine","ItemOptionForValueField","multiSelectable","getOptions","setAllOptions","response","handleSelectAll","updatedSelections","items","v","CheckboxCheckedFilled","Checkbox","SelectSkeleton","ConditionBlock","onRemove","conjunction","onConnectorOperatorChange","isStatement","onStatementChange","conditionIndex","addConditionHandler","aria","isLastCondition","inputConfig","showDeletionPreview","setShowDeletionPreview","showAllActions","setShowAllActions","conditionRowText","conditionText","operatorText","removeConditionText","statementConfig","operatorConfig","getCurrentConfig","eachProperty","icon","ItemComponent","showAllActionsHandler","hideAllActionsHandler","onStatementChangeHandler","onPropertyChangeHandler","newProperty","onOperatorChangeHandler","newOperator","onValueChangeHandler","newValue","currentCondition","handleShowDeletionPreview","handleHideDeletionPreview","manageActionButtons","conditions","getOperators","getAriaAttributes","renderItemOption","Close","ConditionPreview","previewType","colorIndex","animate","setAnimate","valueText","ifText","getConditionSection","Bee","ConditionGroupBuilder","conditionBuilderGroupText","conditionBuilderText","showConditionPreview","setShowConditionPreview","showConditionSubGroupPreview","setShowConditionSubGroupPreview","conditionBuilderContentRef","scrollParentRef","getScrollableParent","parent","atBottom","overflowY","onRemoveHandler","conditionId","handleFocusOnCloseHierarchical","handleFocusOnClose","checkGroupHaveCondition","filteredConditions","firstFilteredConditions","allConditions","acc","_condition","eachCondition","updatedCondition","updatedConditions","newCondition","currentGroupCloseButtons","currentLevel","currentPos","nextElement","prevElement","prevRows","rowIdentity","currentRowToFocus","conditionArr","updatedStatement","groupOperator","getNonHierarchicalVariant","getHierarchicalVariant","Fragment","GroupConnector","ConditionBuilderActions","actions","actionsText","thenText","andText","removeActionText","addActionText","actionSectionText","addActionHandler","action","onchangeHandler","selectedId","actionIndex","newAction","ConditionBuilderContent","startConditionLabel","getConditionState","getActionsState","initialState","initialConditionState","isConditionBuilderActive","setIsConditionBuilderActive","showConditionGroupPreview","setShowConditionGroupPreview","addConditionGroupText","conditionHeadingText","conditionBuilderHierarchicalText","showConditionGroupPreviewHandler","hideConditionGroupPreviewHandler","onStartConditionBuilder","groupId","groups","updatedGroup","groupIndex","addConditionGroupHandler","newGroup","getColorIndex","wrapperRole","eachGroup","componentName","ConditionBuilder","ref","localRef","getDevtoolsProps","VStack"],"mappings":"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"}