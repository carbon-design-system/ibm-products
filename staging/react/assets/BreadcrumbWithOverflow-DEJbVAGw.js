import{u as K,r as m,e,p as R,c as p,T as x,J as j,P as l}from"./iframe-BbTYfv9-.js";import{u as z}from"./useResizeObserver-DG4fyqZH.js";import{B as A,a as b}from"./BreadcrumbItem-CMz7i1Ao.js";import{L as G}from"./Link-CLBD2w3u.js";import{M as Q}from"./MenuItem-C_s8hbQW.js";import{O as S}from"./index-DxyAS3QW.js";import{u as U}from"./uuidv4-BN2rGLQG.js";import{O as W}from"./bucket-13-CbrtgyZp.js";import{T as X}from"./TooltipTrigger-DjUrMc3_.js";import{A as Y}from"./bucket-1-C8b05e8n.js";const o=`${R.prefix}--breadcrumb-with-overflow`,M="BreadcrumbWithOverflow";let h=({breadcrumbs:s,className:F,label:_,maxVisible:g,noTrailingSlash:L,overflowAriaLabel:w,overflowTooltipAlign:D,...H})=>{const B=K(),[y,T]=m.useState(3),[$,q]=m.useState([]),v=m.useRef(null),E=m.useRef(null),I=m.useRef(U()),[O,V]=m.useState([]),J=({overflowItems:a})=>{const t=(r,n)=>{n?.props?.href&&(window.location.href=n.props.href),n?.props?.onClick?.(r)};return e.createElement(b,{key:`breadcrumb-overflow-${I.current}`},e.createElement(j,{enableV12Overflowmenu:!0},e.createElement(S,{role:"navigation","aria-label":w,label:w,renderIcon:r=>e.createElement(W,{size:32,...r}),className:`${o}__overflow-menu`,tooltipAlignment:D},a.map((r,n)=>e.createElement(Q,{key:`breadcrumb-overflow-menu-item-${I.current}-${n}`,onClick:i=>t(i,r),label:r.props.children})))))};m.useEffect(()=>{V(e.createElement("div",{className:`${o}__breadcrumb-container ${o}__breadcrumb-container--hidden`,"aria-hidden":!0,ref:E},e.createElement(A,{"aria-label":`${_}-hidden`},e.createElement(b,{key:`${o}-hidden-overflow-${I}`},e.createElement(S,{role:"navigation","aria-label":w,renderIcon:a=>e.createElement(W,{size:32,...a})})),s.map(({label:a,key:t,title:r,id:n,shortTitle:i,...f})=>e.createElement(b,{key:t,...f,"data-original-id":n,title:r??a},a)))))},[s,_,w]),m.useEffect(()=>{if(s.length===0){q([]);return}const a=s.map(({className:n,key:i,label:f,shortTitle:c,title:u,...k},P)=>e.createElement(b,{key:i,className:P>0||y>1?p([n,`${o}__displayed-breadcrumb`]):n,title:P+1===s.length?u:null,...k},c||f)),t=y>1?1:0;let r=a.splice(t,s.length-y);r.length&&a.splice(t,0,e.createElement(J,{overflowItems:r,key:`displayed-breadcrumb-${I}-overflow`})),q(a)},[s,y]);const N=()=>{if(!v.current)return;const a=(t,r)=>r===0?t-1:r===1?1:t-r;if(g<=1)T(1);else{let t=0,r=v.current.offsetWidth;if(E.current){const n=E.current.querySelectorAll(`.${B}--breadcrumb-item`),i=[];for(let c of n){const u=window?window.getComputedStyle(n[0]):null,k=u?parseFloat(u.marginLeft||0,10)+parseFloat(u.marginRight||0,10):0;i.push(c.offsetWidth+k)}let f=i[0];for(let c=0;c<i.length-1;c++){const u=a(i.length,c);if(r>=i[u])r-=i[u],t+=1;else break}if(t<i.length-1)for(;t>0&&r<f;){t-=1;const c=a(i.length,t);r+=i[c]}}t<=1?T(1):T(g?Math.min(t,g):t)}};m.useEffect(()=>{N()},[O,g]);const C=()=>{N()};let d=s[s.length-1];return d.isCurrentPage&&(d=s[s.length-2]),z(E,C),z(v,C),e.createElement("div",{className:p(o,F,{[`${o}__with-items`]:$.length>1}),ref:v},e.createElement("div",{className:p([`${o}__space`])},O,e.createElement(A,{"aria-label":_,className:p(`${o}__breadcrumb-container`,{[`${o}__breadcrumb-container-with-items`]:$.length>1}),noTrailingSlash:L,...H},d?.href&&(d?.label||d?.title)&&e.createElement(b,{className:p(`${o}__breadcrumb-back`)},e.createElement(G,{href:d.href,renderIcon:()=>e.createElement(x,{align:"right",label:d.title||d.label,className:`${o}__back__button ${B}--icon-tooltip`},e.createElement(X,null,e.createElement(Y,{size:16})))})),$)))};h=R.checkComponentEnabled(h,M);h.propTypes={breadcrumbs:l.arrayOf(l.shape({href:l.string,isCurrentPage:l.bool,key:l.string.isRequired,label:l.node,shortTitle:l.string,title:l.string})),className:l.string,label:l.string,maxVisible:l.number,noTrailingSlash:l.bool,overflowAriaLabel:l.string,overflowTooltipAlign:x.propTypes.align};h.displayName=M;h.__docgenInfo={description:"The BreadcrumbWithOverflow is used internally by the PageHeader to wrap BreadcrumbItems.",methods:[],displayName:"BreadcrumbWithOverflow",props:{breadcrumbs:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{href:{name:"string",description:"Optional string representing the link location for the BreadcrumbItem",required:!1},isCurrentPage:{name:"bool",description:"Provide if this breadcrumb item represents the current page",required:!1},key:{name:"string",description:"Key required to render array efficiently",required:!0},label:{name:"node",description:"Pass in content that will be inside of the BreadcrumbItem",required:!1},shortTitle:{name:"string",description:"An optional title label for extra long breadcrumb",required:!1},title:{name:"string",description:"A string based alternative to the children, required only if children is not of type string",required:!1}}}},required:!1},className:{description:"className",type:{name:"string"},required:!1},label:{description:"Label for the Breadcrumb component",type:{name:"string"},required:!1},maxVisible:{description:"maxVisible: maximum visible breadcrumb-items before overflow is used (values less than 1 are treated as 1)",type:{name:"number"},required:!1},noTrailingSlash:{description:"noTrailing slash - same as for Carbon",type:{name:"bool"},required:!1},overflowAriaLabel:{description:"overflowAriaLabel label for open close button overflow used for breadcrumb items that do not fit.",type:{name:"string"},required:!1},overflowTooltipAlign:{description:"overflowTooltipAlign: align tooltip position",type:{name:"custom",raw:"Tooltip.propTypes.align"},required:!1}}};export{h as B};
//# sourceMappingURL=BreadcrumbWithOverflow-DEJbVAGw.js.map
