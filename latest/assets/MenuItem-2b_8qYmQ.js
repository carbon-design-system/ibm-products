import{a as W,x as X,e as Y,y as Z,z as ee,A as te,b as M,i as ne,d as v,B as ae,_ as k,p as $,D as se,E as oe,S as re,C as B,P as e}from"./index-5As4T26e.js";import{r as n,e as t}from"./index-DzvNrmz8.js";import{u as L}from"./useControllableState--uiA2kjV.js";import{M as D,u as le,a as ce}from"./useAttachedMenu-ByErO-AK.js";import{T as ie}from"./Text-DyBNjUAs.js";import{a as ue,b as me}from"./bucket-2-CdrYWKja.js";var G,K;const P=n.forwardRef(function(u,m){let{children:r,className:f,disabled:l,kind:d="default",label:p,onClick:g,renderIcon:h,shortcut:c,...s}=u;const[o,b]=n.useState(!1),[N,R]=n.useState(!1),{refs:C,floatingStyles:i,context:S}=W({open:o,onOpenChange:b,placement:N?"left-start":"right-start",whileElementsMounted:Y,middleware:[X({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:q,getFloatingProps:j}=Z([ee(S,{delay:100,enabled:!0,handleClose:te({requireIntent:!1})})]),E=M(),x=n.useContext(D),w=n.useRef(null),V=ne([m,w,C.setReference]),I=!!r,T=l&&!I,z=d==="danger"&&!I;function H(){x.dispatch({type:"registerItem",payload:{ref:w,disabled:!!l}})}function F(){w.current&&b(!0)}function U(){b(!1)}function O(a){T||(I?F():(x.state.requestCloseRoot(a),g&&g(a)))}function J(a){I&&$(a,se)&&(F(),a.stopPropagation()),($(a,oe)||$(a,re))&&O(a),s.onKeyDown&&s.onKeyDown(a)}const Q=v(f,`${E}--menu-item`,{[`${E}--menu-item--disabled`]:T,[`${E}--menu-item--danger`]:z});n.useEffect(()=>{H()},[]);const{direction:A}=le();n.useEffect(()=>{(document==null?void 0:document.dir)==="rtl"||A==="rtl"?R(!0):R(!1)},[A]);const _=x.state.mode==="basic"||s.role==="menuitemcheckbox"||s.role==="menuitemradio";return n.useEffect(()=>{_&&h&&!x.state.hasIcons&&x.dispatch({type:"enableIcons"})},[_,h,x.state.hasIcons,x]),n.useEffect(()=>{Object.keys(i).forEach(a=>{C.floating.current&&a!=="position"&&(C.floating.current.style[a]=i[a])})},[i,C.floating]),t.createElement(ae,{context:S,order:["reference","floating"],modal:!1},t.createElement("li",k({role:"menuitem"},s,{ref:V,className:Q,tabIndex:-1,"aria-disabled":T??void 0,"aria-haspopup":I??void 0,"aria-expanded":I?o:void 0,onClick:O,onKeyDown:J},q()),t.createElement("div",{className:`${E}--menu-item__icon`},_&&h&&t.createElement(h,null)),t.createElement(ie,{as:"div",className:`${E}--menu-item__label`,title:p},p),c&&!I&&t.createElement("div",{className:`${E}--menu-item__shortcut`},c),I&&t.createElement(t.Fragment,null,t.createElement("div",{className:`${E}--menu-item__shortcut`},N?G||(G=t.createElement(ue,null)):K||(K=t.createElement(me,null))),t.createElement(ce,k({label:p,open:o,onClose:()=>{var a;U(),(a=w.current)==null||a.focus()},ref:C.setFloating},j()),r))))});P.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const fe=n.forwardRef(function(u,m){let{className:r,defaultSelected:f,label:l,onChange:d,selected:p,...g}=u;const h=M(),c=n.useContext(D);c.state.mode;const[s,o]=L({value:p,onChange:d,defaultValue:f??!1});function b(R){o(!s)}n.useEffect(()=>{c.state.hasIcons||c.dispatch({type:"enableIcons"})},[c.state.hasIcons,c]);const N=v(r,`${h}--menu-item-selectable--selected`);return t.createElement(P,k({},g,{ref:m,label:l,className:N,role:"menuitemcheckbox","aria-checked":s,renderIcon:s?B:void 0,onClick:b}))});fe.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const de=n.forwardRef(function(u,m){let{children:r,className:f,label:l,...d}=u;const p=M(),g=v(f,`${p}--menu-item-group`);return t.createElement("li",{className:g,role:"none",ref:m},t.createElement("ul",k({},d,{role:"group","aria-label":l}),r))});de.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const pe=y=>y.toString(),ge=n.forwardRef(function(u,m){let{className:r,defaultSelectedItem:f,items:l,itemToString:d=pe,label:p,onChange:g,selectedItem:h,...c}=u;const s=M(),o=n.useContext(D);o.state.mode;const[b,N]=L({value:h,onChange:g,defaultValue:f});function R(i,S){N(i)}n.useEffect(()=>{o.state.hasIcons||o.dispatch({type:"enableIcons"})},[o.state.hasIcons,o]);const C=v(r,`${s}--menu-item-radio-group`);return t.createElement("li",{className:C,role:"none",ref:m},t.createElement("ul",k({},c,{role:"group","aria-label":p}),l.map((i,S)=>t.createElement(P,{key:S,label:d(i),role:"menuitemradio","aria-checked":i===b,renderIcon:i===b?B:void 0,onClick:q=>{R(i)}}))))});ge.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const he=n.forwardRef(function(u,m){let{className:r,...f}=u;const l=M(),d=v(r,`${l}--menu-item-divider`);return t.createElement("li",k({},f,{className:d,role:"separator",ref:m}))});he.propTypes={className:e.string};export{P as M,he as a,de as b,ge as c,fe as d};
