import{r as n,e as r}from"./index-DtHxqM--.js";import{d as K,P as t}from"./index-CMVdkQrl.js";import{F as ye}from"./FormGroup-BRiLUXWl.js";import{G as ge}from"./Grid-BLDZi_lT.js";import{C as Q}from"./Column-DAwp7jN5.js";import{d as Te}from"./props-helper-3VCN3cvm.js";import{F as ve}from"./Form-B9aRNkwu.js";import{T as Se}from"./TearsheetShell-Crph82d4.js";import{g as we}from"./devtools-CJD9WatR.js";import{g as X,l as qe,u as Ne,a as xe,b as Ee,C as Re,c as Pe}from"./lastIndexInArray-BWLIekNC.js";import{p as B,a as Ce}from"./settings-C3kz8lqM.js";import{u as Z}from"./usePreviousValue-CuNkkQo9.js";const ke=({firstIncludedStep:d,previousState:f,open:l,setCurrentStep:b,stepData:c,initialStep:a,totalSteps:p,componentName:m})=>{n.useEffect(()=>{if(!(f!=null&&f.open)&&l){if(a&&p&&Number(a)<=Number(p)&&Number(a)>0){const x=X(c,a);b(Number(a+x))}else b(d);(a&&p&&Number(a)>Number(p)||Number(a)<=0)&&console.warn(`${m}: An invalid \`initialStep\` prop was supplied. The \`initialStep\` prop should be a number that is greater than 0 or less than or equal to the number of steps your ${m} has.`)}},[d,l,f,b,c,a,p,m])},N="CreateTearsheet",$=`${B.prefix}--tearsheet-create`,ee=n.createContext(null),te=n.createContext(-1);let k=n.forwardRef(({backButtonText:d,cancelButtonText:f,children:l,className:b,experimentalSecondarySubmitText:c,firstFocusElement:a,description:p,hasError:m,influencerWidth:x="narrow",initialStep:S,label:I,nextButtonText:F,onClose:E,onRequestSubmit:D,open:y,selectorPrimaryFocus:R,slug:L,decorator:M,submitButtonText:V,title:q,verticalPosition:h="normal",...e},u)=>{const[G,W]=n.useState([]),[g,O]=n.useState(!1),[T,o]=n.useState(0),[w,j]=n.useState(!1),[ne,re]=n.useState(!1),[ae,oe]=n.useState(!1),[se,ie]=n.useState(),[le,ue]=n.useState(),[de,ce]=n.useState(),[s,pe]=n.useState([]),[_,me]=n.useState(1),[z,he]=n.useState(),[P,fe]=n.useState(),U=Z({currentStep:T,open:y}),be=n.useRef(null);return n.useEffect(()=>{const i=s.findIndex(H=>H.shouldIncludeStep===!0)+1,C=qe(s,"shouldIncludeStep",!0);if(i!==_&&(o(i),me(i)),C!==z&&he(C),y&&S){const H=X(s,S);o(Number(S+H))}},[_,S,z,y,s]),Ne({previousState:U,currentStep:T,blockClass:$,onMount:de,firstFocusElement:a}),xe(s.length,N),ke({firstIncludedStep:_,previousState:U,open:y,setCurrentStep:o,stepData:s,initialStep:S,totalSteps:s==null?void 0:s.length,componentName:N}),Ee({firstIncludedStep:_,lastIncludedStep:z,stepData:s,onPrevious:se,onNext:le,isSubmitDisabled:ne,setCurrentStep:o,setIsSubmitting:j,setShouldViewAll:O,setLoadingPrevious:oe,loadingPrevious:ae,onClose:E,onRequestSubmit:D,componentName:N,currentStep:T,shouldViewAll:g,backButtonText:d,cancelButtonText:f,submitButtonText:V,nextButtonText:F,isSubmitting:w,componentBlockClass:$,experimentalSecondarySubmit:P,experimentalSecondarySubmitText:P!=null&&P.labelText?P.labelText:c,setCreateComponentActions:W}),r.createElement(Se,{...we(N),...e,ref:u,actions:G,className:K($,b),description:p,influencer:r.createElement(Re,{currentStep:T,stepData:s}),influencerWidth:x,label:I,onClose:E,open:y,size:"wide",decorator:M||L,title:q,verticalPosition:h,closeIconDescription:"",currentStep:T,hasError:m,selectorPrimaryFocus:R},r.createElement("div",{className:`${$}__content`,ref:be},r.createElement(ve,{"aria-label":q},r.createElement(ee.Provider,{value:{currentStep:T,setExperimentalSecondarySubmit:fe,setIsDisabled:re,setOnPrevious:i=>ie(()=>i),setOnNext:i=>ue(()=>i),setOnMount:i=>ce(()=>i),setStepData:pe,stepData:s}},r.Children.toArray(l).filter(Boolean).map((i,C)=>r.createElement(te.Provider,{value:C+1,key:C},i))))))});k=B.checkComponentEnabled(k,N);k.displayName=N;const Ie={slug:Te(t.node)};k.propTypes={backButtonText:t.string.isRequired,cancelButtonText:t.string.isRequired,children:t.node,className:t.string,decorator:t.node,description:t.node,experimentalSecondarySubmitText:t.string,firstFocusElement:t.string,hasError:t.bool,influencerWidth:t.oneOf(["narrow","wide"]),initialStep:t.number,label:t.node,nextButtonText:t.string.isRequired,onClose:t.func,onRequestSubmit:t.func.isRequired,open:t.bool,selectorPrimaryFocus:t.string,submitButtonText:t.string.isRequired,title:t.node,verticalPosition:t.oneOf(["normal","lower"]),...Ie};k.__docgenInfo={description:"",methods:[],displayName:"CreateTearsheet",props:{backButtonText:{required:!0,tsType:{name:"string"},description:"The back button text",type:{name:"string"}},cancelButtonText:{required:!0,tsType:{name:"string"},description:"The cancel button text",type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"An optional class or classes to be added to the outermost element.",type:{name:"string"}},experimentalSecondarySubmitText:{required:!1,tsType:{name:"string"},description:"The experimentalSecondary submit button text",type:{name:"string"}},decorator:{required:!1,tsType:{name:"ReactNode"},description:"Optional prop that allows you to pass any component.",type:{name:"node"}},firstFocusElement:{required:!1,tsType:{name:"string"},description:"Specifies elements to focus on first on render.",type:{name:"string"}},description:{required:!1,tsType:{name:"ReactNode"},description:"A description of the flow, displayed in the header area of the tearsheet.",type:{name:"node"}},selectorPrimaryFocus:{required:!1,tsType:{name:"string"},description:`Specify a CSS selector that matches the DOM element that should be
focused when the Modal opens.`,type:{name:"string"}},hasError:{required:!1,tsType:{name:"boolean"},description:`To indicate an error occurred in the Tearsheet step
Used to pass this value to TearsheetShell`,type:{name:"bool"}},influencerWidth:{required:!1,tsType:{name:"union",raw:"'narrow' | 'wide'",elements:[{name:"literal",value:"'narrow'"},{name:"literal",value:"'wide'"}]},description:"Used to set the size of the influencer",defaultValue:{value:"'narrow'",computed:!1},type:{name:"enum",value:[{value:"'narrow'",computed:!1},{value:"'wide'",computed:!1}]}},initialStep:{required:!1,tsType:{name:"number"},description:`This can be used to open the component to a step other than the first step.
For example, a create flow was previously in progress, data was saved, and
is now being completed.`,type:{name:"number"}},label:{required:!1,tsType:{name:"ReactNode"},description:`A label for the tearsheet, displayed in the header area of the tearsheet
to maintain context for the tearsheet (e.g. as the title changes from page
to page of a multi-page task).`,type:{name:"node"}},nextButtonText:{required:!0,tsType:{name:"string"},description:"The next button text",type:{name:"string"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"An optional handler that is called when the user closes the tearsheet (by\nclicking the close button, if enabled, or clicking outside, if enabled).\nReturning `false` here prevents the modal from closing.",type:{name:"func"}},onRequestSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`Specify a handler for submitting the multi step tearsheet (final step).
This function can _optionally_ return a promise that is either resolved or rejected and the CreateTearsheet will handle the submitting state of the create button.`,type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specifies whether the tearsheet is currently open.",type:{name:"bool"}},submitButtonText:{required:!0,tsType:{name:"string"},description:"The submit button text",type:{name:"string"}},title:{required:!1,tsType:{name:"ReactNode"},description:"The main title of the tearsheet, displayed in the header area.",type:{name:"node"}},verticalPosition:{required:!1,tsType:{name:"union",raw:"'normal' | 'lower'",elements:[{name:"literal",value:"'normal'"},{name:"literal",value:"'lower'"}]},description:`The position of the top of tearsheet in the viewport. The 'normal'
position (the default) is a short distance down from the top of the
viewport, leaving room at the top for a global header bar to show through
from below. The 'lower' position provides a little extra room at the top
to allow an action bar navigation or breadcrumbs to also show through.`,defaultValue:{value:"'normal'",computed:!1},type:{name:"enum",value:[{value:"'normal'",computed:!1},{value:"'lower'",computed:!1}]}},slug:{required:!1,tsType:{name:"ReactNode"},description:"@deprecated Property replaced by `decorator`",type:{name:"custom",raw:"deprecateProp(PropTypes.node, 'Property replaced by `decorator`')"}},children:{description:"The main content of the tearsheet",type:{name:"node"},required:!1}},composes:["PropsWithChildren"]};const Y="CreateTearsheetStep",v=`${B.prefix}--tearsheet-create__step`,J={hasFieldset:!0,includeStep:!0};let A=n.forwardRef(({children:d,className:f,description:l,disableSubmit:b,experimentalSecondarySubmit:c,fieldsetLegendText:a,hasFieldset:p=J.hasFieldset,includeStep:m=J.includeStep,introStep:x,invalid:S,onMount:I,onNext:F,onPrevious:E,secondaryLabel:D,subtitle:y,title:R,...L},M)=>{const V=n.useRef(null),q=M||V,h=q.current,e=n.useContext(ee),u=n.useContext(te),[G,W]=n.useState(m),g=Z({currentStep:e==null?void 0:e.currentStep});Pe({stepsContext:e,stepNumber:u,introStep:!!x,shouldIncludeStep:G,secondaryLabel:D||"",title:R,invalid:!!S}),n.useEffect(()=>{u===(e==null?void 0:e.currentStep)&&(g==null?void 0:g.currentStep)!==(e==null?void 0:e.currentStep)&&(e==null||e.setOnMount(I),e==null||e.setExperimentalSecondarySubmit(c))},[I,c,e,u,g==null?void 0:g.currentStep]),n.useEffect(()=>{W(m)},[m,e,R]);const O=(o,w)=>{o!=null&&o.length&&o.forEach(j=>{j.tabIndex=w})};n.useEffect(()=>{const o="button, input, select, textarea, a";if(u!==(e==null?void 0:e.currentStep)){const w=h==null?void 0:h.querySelectorAll(o);O(w,-1)}if(u===(e==null?void 0:e.currentStep)){const w=h==null?void 0:h.querySelectorAll(o);O(w,0),e.setIsDisabled(!!b),e==null||e.setOnNext(F),e==null||e.setOnPrevious(E),e==null||e.setExperimentalSecondarySubmit(c)}},[e,u,b,F,E,q,h,c]);const T=()=>{if(l){if(typeof l=="string")return r.createElement("p",{className:`${v}--description`},l);if(n.isValidElement(l))return r.createElement("div",{className:`${v}--description`},l)}return null};return e?r.createElement("div",{ref:q},r.createElement(ge,{...L,className:K(v,f,{[`${v}__step--hidden-step`]:u!==(e==null?void 0:e.currentStep),[`${v}__step--visible-step`]:u===(e==null?void 0:e.currentStep)})},r.createElement(Q,{xlg:12,lg:12,md:8,sm:4},r.createElement("h4",{className:`${v}--title`},R),y&&r.createElement("h6",{className:`${v}--subtitle`},y),T()),r.createElement(Q,{span:100},p?r.createElement(ye,{legendText:a,className:`${v}--fieldset`},d):d))):Ce.warn(`You have tried using a ${Y} component outside of a CreateTearsheet. This is not allowed. ${Y}s should always be children of the CreateTearsheet`)});A=B.checkComponentEnabled(A,Y);A.propTypes={children:t.node,className:t.string,description:t.node,disableSubmit:t.bool,experimentalSecondarySubmit:t.shape({labelText:t.string,disabled:t.bool,hideSecondarySubmit:t.bool,onClick:t.func}),fieldsetLegendText:t.string.isRequired.if(({hasFieldset:d})=>!!d),hasFieldset:t.bool,includeStep:t.bool,introStep:t.bool,invalid:t.bool,onMount:t.func,onNext:t.func,onPrevious:t.func,secondaryLabel:t.string,subtitle:t.string,title:t.node.isRequired};A.__docgenInfo={description:"",methods:[],displayName:"CreateTearsheetStep",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Content that shows in the tearsheet step",type:{name:"node"}},className:{required:!1,tsType:{name:"string"},description:"Sets an optional className to be added to the tearsheet step",type:{name:"string"}},description:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Sets an optional description on the step component",type:{name:"node"}},disableSubmit:{required:!1,tsType:{name:"boolean"},description:"This will conditionally disable the submit button in the multi step Tearsheet",type:{name:"bool"}},experimentalSecondarySubmit:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  labelText?: string;
  disabled?: boolean;
  hideSecondarySubmit?: boolean;
  onClick?: () => void;
}`,signature:{properties:[{key:"labelText",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"hideSecondarySubmit",value:{name:"boolean",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}}]}},description:"Configuration options for customizing the behavior of the experimentalSecondary submit button.",type:{name:"shape",value:{labelText:{name:"string",required:!1},disabled:{name:"bool",required:!1},hideSecondarySubmit:{name:"bool",required:!1},onClick:{name:"func",required:!1}}}},includeStep:{required:!1,tsType:{name:"boolean"},description:"This prop is used to help track dynamic steps. If this value is `false` then the step is not included in the visible steps or the ProgressIndicator\nsteps. If this value is `true` then the step will be included in the list of visible steps, as well as being included in the ProgressIndicator step list",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},introStep:{required:!1,tsType:{name:"boolean"},description:"This prop can be used on the first step to mark it as an intro step, which will not render the progress indicator steps",type:{name:"bool"}},invalid:{required:!1,tsType:{name:"boolean"},description:"This optional prop will indicate an error icon on the progress indicator step item",type:{name:"bool"}},onMount:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`Optional function to be called on initial mount of a step.
For example, this can be used to fetch data that is required on a particular step.`,type:{name:"func"}},onNext:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:`Optional function to be called when you move to the next step.
For example, this can be used to validate input fields before proceeding to the next step.
This function can _optionally_ return a promise that is either resolved or rejected and the CreateTearsheet will handle the submitting state of the next button.`,type:{name:"func"}},onPrevious:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Optional function to be called when you move to the previous step.",type:{name:"func"}},secondaryLabel:{required:!1,tsType:{name:"string"},description:"Sets the optional secondary label on the progress step component",type:{name:"string"}},subtitle:{required:!1,tsType:{name:"string"},description:"Sets an optional subtitle on the step component",type:{name:"string"}},title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Sets the title text for a tearsheet step",type:{name:"node"}},hasFieldset:{defaultValue:{value:"true",computed:!1},description:"This optional prop will render your form content inside of a fieldset html element\nand is defaulted to true.\nYou can set this prop to `false` if you have multiple fieldset elements or want to control the children of your Full Page's step content.",type:{name:"bool"},required:!1},fieldsetLegendText:{description:"This is the required legend text that appears above a fieldset html element for accessibility purposes.\nYou can set the `hasFieldset` prop to false if you have multiple fieldset elements or want to control the children of your Full Page's step content.\nOtherwise, use CSS to hide/remove this label text.",type:{name:"string"},required:!0}},composes:["PropsWithChildren"]};export{k as C,A as a};
