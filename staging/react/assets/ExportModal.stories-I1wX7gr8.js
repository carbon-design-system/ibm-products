import{j as n,aA as S,r as a,e,B as d,A as M}from"./iframe-CtoKioxt.js";import{C as N,M as w,a as O,b as $}from"./ComposedModal-pOSCZM5i.js";import{F as I}from"./FormGroup-B0XPk2U9.js";import{L as H}from"./InlineLoading-DkB9Uu8m.js";import{R}from"./RadioButton-Gs5rkmcR.js";import{R as P}from"./RadioButtonGroup-Dqz5Dyvb.js";import{T as z}from"./TextInput-Dm_0xiFW.js";import{useMDXComponents as D}from"./index-ClRINNPk.js";import{w as y}from"./wait-CTNFjQS8.js";import{a as L}from"./bucket-6-i50ze4pO.js";import{s as j}from"./codePreviewer-LEktwlSI.js";import"./preload-helper-PPVm8Dsz.js";import"./index-BSoC1KHw.js";import"./LayerContext-BaPPZ-kh.js";import"./clamp--00YEiB8.js";import"./ButtonSet-Ce5dyIwV.js";import"./mergeRefs-BZpmU3mx.js";import"./requiredIfGivenPropIsTruthy-C6rAip-Q.js";import"./wrapFocus-BVfmuAZ2.js";import"./Text-vtctM3R-.js";import"./index-HEmqX-Cu.js";import"./bucket-18-22lNaWnZ.js";import"./utils-CqcRd8Iu.js";import"./useNormalizedInputProps-BVbxDgXH.js";import"./bucket-19-uAShayzU.js";import"./FormContext-4Dpo2sxO.js";import"./AccordionItem-YF8pV8eS.js";import"./SkeletonText-B0_TKw0x.js";import"./AspectRatio-CQN2pA75.js";import"./BreadcrumbItem-DdBsCFcL.js";import"./Link-DwHVNOML.js";import"./bucket-13-DH4S8Q-V.js";import"./Checkbox-ymzLf8mF.js";import"./index-Bexmo1Ys.js";import"./inheritsLoose-DHKJTbHM.js";import"./MultiSelect-LN_GYSUt.js";import"./defaultItemToString-zSItMTD_.js";import"./useAttachedMenu-Bqdk6DpD.js";import"./DataTable-BZJ433Y4.js";import"./TableRow-BMp98_tw.js";import"./wrapComponent-CXYKIYfS.js";import"./bucket-0-DXtRMgo-.js";import"./bucket-1-C8DJuThw.js";import"./TableToolbar-B5G2iR9g.js";import"./index-DTsfMTRK.js";import"./TableSelectRow-CoT_Yxqy.js";import"./OverflowMenuItem-DjjDZLJ3.js";import"./TableToolbarSearch-Cl_R2Czt.js";import"./Search-M8VRMu75.js";import"./bucket-15-YwHKJHA7.js";import"./index-DXIofiWL.js";import"./useOutsideClick-DrI2TK2-.js";import"./DatePicker-B4899aqc.js";import"./bucket-2-Dc1HokXJ.js";import"./documentLang-E105Y72C.js";import"./Dropdown-CEppJsEi.js";import"./Form-CHqvDui1.js";import"./FormLabel-B8Fp55q3.js";import"./Grid-_vqycvVT.js";import"./Row-BxZsmL_7.js";import"./Column-DTMooUPy.js";import"./Icon.Skeleton-9G85h8eo.js";import"./ListItem-CJGqZJNk.js";import"./MenuItem-DjmtQX8o.js";import"./useControllableState-Dfz1WBb9.js";import"./index-DpImqhDG.js";import"./Notification-BPZZGYQs.js";import"./bucket-10-BO8_jnn_.js";import"./NumberInput-DaPfIJOD.js";import"./bucket-17-BQfr1mYr.js";import"./useMatchMedia-CBRQ4son.js";import"./DefinitionTooltip-C9lYYM92.js";import"./Tag-CcGCr1ub.js";import"./OperationalTag-CRXNsrH_.js";import"./Pagination-8AsCZutz.js";import"./Select-C7kr957Z.js";import"./SelectItem-D_CE_QNr.js";import"./ProgressIndicator-CC1MDzQS.js";import"./bucket-9-CDp7DofW.js";import"./TileGroup-CNEbsxzH.js";import"./bucket-14-77bPhugF.js";import"./TimePickerSelect-DSRUFblQ.js";import"./Slider-YFoIA5c2.js";import"./StructuredList-vINiGdyg.js";import"./Tabs-BYduEMti.js";import"./DismissibleTag-Ds86Ya5g.js";import"./SelectableTag-DDI6Ihm3.js";import"./TextArea-BsT_qUWs.js";import"./Tile-RM1KY7mh.js";import"./Toggle-Cm44yp2E.js";import"./Content-CHWQshQs.js";import"./HeaderName-C7BoylIX.js";import"./Link-COMR-DBN.js";import"./HeaderContainer-CNaUckMc.js";import"./HeaderGlobalBar-C19wffAl.js";import"./AriaPropTypes-CBIV36DD.js";import"./SideNavLink-CDK1HIEw.js";import"./bucket-11-CeCKrT2h.js";import"./SideNavLinkText-BC32X0jR.js";import"./HeaderPanel-Xzz2Wk4s.js";import"./SideNavMenuItem-CgVM_8WK.js";import"./UnorderedList-BvJq_iGz.js";import"./bucket-5-BKyxIbo4.js";import"./index-DmSUPUUr.js";import"./bucket-7-CeLNIsQe.js";import"./bucket-8-Dv6_Vd5G.js";import"./bucket-12-BYhhMqLM.js";import"./bucket-16--vIDZkzO.js";import"./bucket-20-X70UIe2r.js";const W=".export-modal__body{margin-block-end:1rem;padding-inline-end:calc(20% - 1rem)}.export-modal__messaging{display:flex;align-items:center}.export-modal__messaging p{margin-inline-start:.5rem}.export-modal__checkmark-icon{fill:var(--cds-button-primary, #0f62fe)}.export-modal__error-icon{fill:var(--cds-button-danger-primary, #da1e28)}",B=[y];function T(s){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...D(),...s.components};return n.jsxs(n.Fragment,{children:[n.jsx(t.h1,{id:"export-modal",children:"Export Modal"}),`
`,n.jsxs(t.p,{children:[n.jsx(t.a,{href:"https://pages.github.ibm.com/carbon/ibm-products/patterns/export/usage/",rel:"nofollow",children:"Usage guidelines"}),`
|
`,n.jsx(t.a,{href:"https://www.carbondesignsystem.com/components/modal/usage",rel:"nofollow",children:"Carbon modal usage guidelines"}),`
|
`,n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-modal",rel:"nofollow",children:"Carbon modal documentation"})]}),`
`,n.jsx(t.h2,{id:"table-of-contents",children:"Table of Contents"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#overview",children:"Overview"})}),`
`,n.jsxs(t.li,{children:[n.jsx(t.a,{href:"#example-usage",children:"Example usage"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#standard",children:"Standard"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#with-extension-validation",children:"With Extension Validation"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#with-preformatted-extensions",children:"With Preformatted Extensions"})}),`
`]}),`
`]}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"#component-api",children:"Component API"})}),`
`]}),`
`,n.jsx(t.h2,{id:"overview",children:"Overview"}),`
`,n.jsx(t.p,{children:`Export modal is a pattern which is applicable to both exporting and downloading.
Below is the Modal dialog version of the export pattern.`}),`
`,n.jsx(t.p,{children:"To build this pattern, we recommend including the following ingredients:"}),`
`,n.jsxs(t.ul,{children:[`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-composedmodal",rel:"nofollow",children:"ComposedModal"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-button",rel:"nofollow",children:"cds-button"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-formgroup",rel:"nofollow",children:"FormGroup"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-textinput",rel:"nofollow",children:"TextInput"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-radiobutton",rel:"nofollow",children:"RadioButton"})}),`
`,n.jsx(t.li,{children:n.jsx(t.a,{href:"https://react.carbondesignsystem.com/?path=/docs/components-loading",rel:"nofollow",children:"Loading"})}),`
`]}),`
`,n.jsx(t.h3,{id:"standard",children:"Standard"}),`
`,n.jsx(S,{of:b,additionalActions:[{title:"Open in Stackblitz",onClick:()=>j({story:b,customFunctionDefs:B,styles:F.parameters.styles})}]}),`
`,n.jsx(t.h3,{id:"with-extension-validation",children:"With Extension Validation"}),`
`,n.jsx(S,{of:E,additionalActions:[{title:"Open in Stackblitz",onClick:()=>j({story:E,customFunctionDefs:B,styles:F.parameters.styles})}]}),`
`,n.jsx(t.h3,{id:"with-preformatted-extensions",children:"With Preformatted Extensions"}),`
`,n.jsx(S,{of:g,additionalActions:[{title:"Open in Stackblitz",onClick:()=>j({story:g,customFunctionDefs:B,styles:F.parameters.styles})}]})]})}function G(s={}){const{wrapper:t}={...D(),...s.components};return t?n.jsx(t,{...s,children:n.jsx(T,{...s})}):T(s)}const F={title:"Patterns/Export Modal",component:()=>{},tags:["autodocs"],parameters:{styles:W,docs:{page:G}}},V=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState("Sample02.pdf"),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(!1),m=i||x||u,o="export-modal",c=()=>{t(!1),f(!1),_(!1)},h=async()=>{p(!0),await y(1e3),f(!0),p(!1)},k=i||!l;return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",preventCloseOnClickOutside:!0,onClose:c},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:c}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement(z,{labelText:"File name",value:l,onChange:v=>C(v.target.value)}),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},i&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),u&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),x&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:c},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:h,disabled:k},"Export"))))},X=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState("Sample02.pdf"),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(!1),m=i||x||u,o="export-modal",c=()=>{t(!1),f(!1),_(!1)},h=async()=>{p(!0),await y(1e3),f(!0),p(!1)},k=()=>{let r=["pdf"];if(!r||!r.length)return!1;if(!l.includes("."))return!0;const A=l.split(".").pop();return!r.includes(A)},v=i||!l||k();return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",onClose:c},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:c}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement("p",{className:`${o}__body`},"File must be exported in a PDF format."),!m&&e.createElement(z,{labelText:"File name",value:l,onChange:r=>C(r.target.value),invalid:k(),invalidText:"File must have valid extension .pdf"}),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},i&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),u&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),x&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:c},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:h,disabled:v},"Export"))))},Y=()=>{const[s,t]=a.useState(!1),[l,C]=a.useState(!1),[i,p]=a.useState(!1),[u,f]=a.useState(!1),[x,_]=a.useState(""),m=l||u||i,o="export-modal",c=[{extension:"YAML",description:"best for IBM managed cloud"},{extension:"BAR",description:"best for integration server"}];a.useEffect(()=>{s||_(c[0].extension)},[s]);const h=()=>{t(!1),p(!1),f(!1)},k=async()=>{C(!0),await y(1e3),p(!0),C(!1)},v=l;return e.createElement(e.Fragment,null,e.createElement(d,{onClick:()=>t(!0)},"Launch modal"),s&&e.createElement(N,{open:s,size:"sm",onClose:h},e.createElement(w,{className:`${o}__header`,title:"Export",closeModal:h}),e.createElement(O,{className:`${o}__body-container`},!m&&e.createElement(I,{legendText:"Choose an export format"},e.createElement(P,{orientation:"vertical",onChange:r=>_(r),valueSelected:x,name:"extensions","aria-label":"extensions"},c.map(r=>e.createElement(R,{key:r.extension,id:r.extension,value:r.extension,labelText:`${r.extension} (${r.description})`,"data-modal-primary-focus":!0})))),e.createElement("div",{"aria-live":"polite",className:`${o}__messaging`},l&&e.createElement(e.Fragment,null,e.createElement(H,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,"Exporting file...")),i&&e.createElement(e.Fragment,null,e.createElement(M,{size:16,className:`${o}__checkmark-icon`}),e.createElement("p",null,"The file has been exported.")),u&&e.createElement(e.Fragment,null,e.createElement(L,{size:16,className:`${o}__error-icon`}),e.createElement("p",null,"errorServer error 500")))),!m&&e.createElement($,{className:`${o}__footer`},e.createElement(d,{type:"button",kind:"secondary",onClick:h},"Cancel"),e.createElement(d,{type:"submit",kind:"primary",onClick:k,disabled:v},"Export"))))},b=V.bind({});b.args={};const E=X.bind({});E.args={};const g=Y.bind({});g.args={};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [name, setName] = useState('Sample02.pdf');
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const primaryButtonDisabled = loading || !name;
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" preventCloseOnClickOutside onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <TextInput labelText="File name" value={name} onChange={evt => setName(evt.target.value)} />}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...b.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [name, setName] = useState('Sample02.pdf');
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const hasInvalidExtension = () => {
    let validExtensions = ['pdf'];
    if (!validExtensions || !validExtensions.length) {
      return false;
    }
    if (!name.includes('.')) {
      return true;
    }
    const ext = name.split('.').pop();
    if (!validExtensions.includes(ext)) {
      return true;
    }
    return false;
  };
  const primaryButtonDisabled = loading || !name || hasInvalidExtension();
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <p className={\`\${blockClass}__body\`}>
                File must be exported in a PDF format.
              </p>}
            {!submitted && <TextInput labelText="File name" value={name} onChange={evt => setName(evt.target.value)} invalid={hasInvalidExtension()} invalidText="File must have valid extension .pdf" />}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...E.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`() => {
  const [isOpen, setOpen] = useState(false);
  const [loading, setLoading] = useState(false);
  const [successful, setSuccessful] = useState(false);
  const [error, setError] = useState(false);
  const [extension, setExtension] = useState('');
  const submitted = loading || error || successful;
  const blockClass = 'export-modal';
  const preformattedExtensions = [{
    extension: 'YAML',
    description: 'best for IBM managed cloud'
  }, {
    extension: 'BAR',
    description: 'best for integration server'
  }];
  useEffect(() => {
    if (!isOpen) {
      setExtension(preformattedExtensions[0].extension);
    }
  }, [isOpen]);
  const onCloseHandler = () => {
    setOpen(false);
    setSuccessful(false);
    setError(false);
  };
  const onSubmitHandler = async () => {
    setLoading(true);
    await wait(1000);
    setSuccessful(true);
    setLoading(false);
  };
  const primaryButtonDisabled = loading;
  return <>
      <Button onClick={() => setOpen(true)}>Launch modal</Button>
      {isOpen && <ComposedModal open={isOpen} size="sm" onClose={onCloseHandler}>
          <ModalHeader className={\`\${blockClass}__header\`} title="Export" closeModal={onCloseHandler} />
          <ModalBody className={\`\${blockClass}__body-container\`}>
            {!submitted && <FormGroup legendText="Choose an export format">
                <RadioButtonGroup orientation="vertical" onChange={value => setExtension(value)} valueSelected={extension} name="extensions" aria-label="extensions">
                  {preformattedExtensions.map(o => <RadioButton key={o.extension} id={o.extension} value={o.extension} labelText={\`\${o.extension} (\${o.description})\`} data-modal-primary-focus />)}
                </RadioButtonGroup>
              </FormGroup>}

            <div aria-live="polite" className={\`\${blockClass}__messaging\`}>
              {loading && <>
                  <Loading aria-live="off" description="" small withOverlay={false} />
                  <p>Exporting file...</p>
                </>}
              {successful && <>
                  <CheckmarkFilled size={16} className={\`\${blockClass}__checkmark-icon\`} />
                  <p>The file has been exported.</p>
                </>}
              {error && <>
                  <ErrorFilled size={16} className={\`\${blockClass}__error-icon\`} />
                  <p>errorServer error 500</p>
                </>}
            </div>
          </ModalBody>
          {!submitted && <ModalFooter className={\`\${blockClass}__footer\`}>
              <Button type="button" kind="secondary" onClick={onCloseHandler}>
                Cancel
              </Button>
              <Button type="submit" kind="primary" onClick={onSubmitHandler} disabled={primaryButtonDisabled}>
                Export
              </Button>
            </ModalFooter>}
        </ComposedModal>}
    </>;
}`,...g.parameters?.docs?.source}}};const qt=["Standard","WithExtensionValidation","WithPreformattedExtensions"];export{b as Standard,E as WithExtensionValidation,g as WithPreformattedExtensions,qt as __namedExportsOrder,F as default};
//# sourceMappingURL=ExportModal.stories-I1wX7gr8.js.map
