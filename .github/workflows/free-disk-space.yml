name: 'Free Disk Space'

on:
  workflow_call:

jobs:
  free-disk-space:
    runs-on: ubuntu-latest
    steps:
      - name: Free disk space
        run: |
          echo "=== Before cleanup ==="
          df -h
          echo ""
          echo "=== Removing build artifacts and generated files ==="
          
          # Remove build outputs
          rm -rf packages/*/dist
          rm -rf packages/*/lib
          rm -rf packages/*/storybook-static
          
          # Remove test artifacts
          rm -rf .playwright
          
          # Remove cache directories (will be restored from GitHub cache if needed)
          rm -rf .yarn/cache
          rm -rf node_modules/.cache
          
          echo ""
          echo "=== After cleanup ==="
          df -h
          echo ""
          echo "=== Disk space freed successfully ==="
