import{e as r,u as w,r as l,k as z,d as ee,c as T,_ as te,l as N,m as se,n as g,E as ae,o as re,q as d,P as e,i as ne,t as ce}from"./iframe-B06X_oSn.js";import{F as oe}from"./FormContext-CV1tIC8k.js";import{S as le}from"./bucket-15-uKcem5Zx.js";var I;const D=r.forwardRef(({autoComplete:i="off",className:u,closeButtonLabelText:b="Clear search input",defaultValue:y,disabled:m,isExpanded:o=!0,id:O,labelText:E,light:F,onChange:C=()=>{},onClear:K=()=>{},onKeyDown:x,onExpand:s,placeholder:$="Search",renderIcon:j,role:k="searchbox",size:h="md",type:q="text",value:c,...V},_)=>{const B=!!(c||y),t=w(),{isFluid:H}=l.useContext(oe),n=l.useRef(null),M=z([_,n]),v=l.useRef(null),A=ee("search-input"),f=O||A,P=`${f}-search`,[G,p]=l.useState(B||!1),[J,L]=l.useState(c),Q=T({[`${t}--search`]:!0,[`${t}--search--sm`]:h==="sm",[`${t}--search--md`]:h==="md",[`${t}--search--lg`]:h==="lg",[`${t}--search--light`]:F,[`${t}--search--disabled`]:m,[`${t}--search--fluid`]:H},u),U=T({[`${t}--search-close`]:!0,[`${t}--search-close--hidden`]:!G||!o});c!==J&&(p(!!c),L(c));function S(){if(!c&&n.current&&(n.current.value=""),n.current){const a=Object.assign({},n.current,{value:""}),Z={bubbles:!1,cancelable:!1,currentTarget:n.current,defaultPrevented:!1,eventPhase:0,isDefaultPrevented:()=>!1,isPropagationStopped:()=>!1,isTrusted:!1,nativeEvent:new Event("change"),persist:d,preventDefault:d,stopPropagation:d,target:a,timeStamp:0,type:"change"};C(Z)}K(),p(!1),n.current?.focus()}function W(a){p(a.target.value!=="")}function X(a){g(a,ce)&&(a.stopPropagation(),n.current?.value?S():s&&o&&v.current?.focus())}function Y(a){(g(a,ae)||g(a,re))&&(a.stopPropagation(),s&&s(a))}return r.createElement("div",{role:"search","aria-label":$,className:Q},r.createElement("div",{"aria-labelledby":s?P:void 0,role:s?"button":void 0,className:`${t}--search-magnifier`,onClick:s,onKeyDown:Y,tabIndex:s&&!o?0:-1,ref:v,"aria-expanded":s&&o?!0:s&&!o?!1:void 0,"aria-controls":s?f:void 0},r.createElement(R,{icon:j})),r.createElement("label",{id:P,htmlFor:f,className:`${t}--label`},E),r.createElement("input",te({autoComplete:i,className:`${t}--search-input`,defaultValue:y,disabled:m,role:k,ref:M,id:f,onChange:N([C,W]),onKeyDown:N([x,X]),placeholder:$,type:q,value:c,tabIndex:s&&!o?-1:void 0},V)),r.createElement("button",{"aria-label":b,className:U,disabled:m,onClick:S,title:b,type:"button"},I||(I=r.createElement(se,null))))});D.displayName="Search";D.propTypes={autoComplete:e.string,className:e.string,closeButtonLabelText:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,id:e.string,isExpanded:e.bool,labelText:e.node.isRequired,light:ne(e.bool),onChange:e.func,onClear:e.func,onExpand:e.func,onKeyDown:e.func,placeholder:e.string,renderIcon:e.oneOfType([e.func,e.object]),role:e.string,size:e.oneOf(["sm","md","lg"]),type:e.string,value:e.oneOfType([e.string,e.number])};function R({icon:i}){const u=w();return i?r.createElement(i,{className:`${u}--search-magnifier-icon`}):r.createElement(le,{className:`${u}--search-magnifier-icon`})}R.propTypes={icon:e.oneOfType([e.func,e.object])};export{D as S};
