import{r as m,e as b,c as L,p as V,P as u}from"./iframe-arkle79Y.js";import{w as j}from"./wait-CTNFjQS8.js";import{P as z,a as G}from"./ProgressIndicator-CAMGWto7.js";import{S as J,H as K}from"./index-Bv0Kxzda.js";const B=({previousState:r,currentStep:e,blockClass:n,onMount:a,firstFocusElement:t})=>{m.useEffect(()=>{typeof a=="function"&&a()},[a]),m.useEffect(()=>{const p=async o=>{await j(10),o.focus()};if(r?.currentStep!==e&&e>0&&t){const o=document.querySelector(t);o&&p(o)}},[e,r,n,a,t])},D=({firstIncludedStep:r,lastIncludedStep:e,stepData:n,onPrevious:a,onNext:t,isSubmitDisabled:p,setCurrentStep:o,setIsSubmitting:s,setLoadingPrevious:l=null,loadingPrevious:i=!1,onClose:c,onRequestSubmit:h,componentName:y,currentStep:w,backButtonText:S,cancelButtonText:P,submitButtonText:_,nextButtonText:v,isSubmitting:I,componentBlockClass:O,setCreateComponentActions:T,setModalIsOpen:H,experimentalSecondarySubmit:g,experimentalSecondarySubmitText:C})=>{const $=m.useCallback(()=>{s(!1),o(f=>{do f++;while(!n[f-1]?.shouldIncludeStep);return f})},[o,s,n]),q=m.useCallback(()=>{y!=="CreateFullPage"&&l(!1),o(f=>{do f--;while(!n[f-1]?.shouldIncludeStep);return f})},[o,n,l,y]);m.useEffect(()=>{const f=()=>{y!=="CreateFullPage"&&o(1),s(!1),c()},F=async()=>{try{(await h())?.preventClose||f()}catch(d){s(!1),console.warn(`${y} submit error: ${d}`)}},R=async()=>{if(l?.(!0),typeof a=="function")try{await a(),q()}catch(d){console.warn(`${y} onBack error: ${d}`)}else q()},A=async()=>{if(s(!0),typeof t=="function")try{await t(),$()}catch(d){s(!1),console.warn(`${y} onNext error: ${d}`)}else $()},N=async()=>{if(s(!0),typeof t=="function")try{await t(),await F()}catch(d){s(!1),console.warn(`${y} onNext error: ${d}`)}else await F()},U=()=>{typeof g?.onClick=="function"&&g.onClick()};if(n?.length>0){const d=[];n?.length>1&&d.push({key:"create-action-button-back",label:S,onClick:R,kind:"secondary",disabled:w===r,loading:i}),d.push({key:"create-action-button-cancel",label:P,onClick:y==="CreateFullPage"?()=>H(!0):f,kind:"ghost"}),C&&!g?.hideSecondarySubmit&&d.push({key:"create-action-button-experimentalSecondarySubmit",label:C,onClick:U,kind:"secondary",disabled:g?.disabled}),d.push({key:"create-action-button-submit",label:w<e?v:_,onClick:w<e?A:N,disabled:p,kind:"primary",loading:I,className:`${O}__create-button`}),T(d)}},[r,e,n,t,p,S,P,w,c,v,_,h,I,O,y,$,o,T,s,H,q,a,l,i,g,C])},M=(r,e)=>{let n=0;return r.forEach((a,t)=>{t+1>e||a.shouldIncludeStep===!1&&(n+=1)}),n},x=({stepsContext:r,stepNumber:e,introStep:n,invalid:a,shouldIncludeStep:t,secondaryLabel:p,title:o})=>{m.useEffect(()=>{r&&r.setStepData(s=>{const l={title:o,secondaryLabel:p,introStep:n,invalid:a,shouldIncludeStep:t},i=s[e-1];if(i?.title!==l.title||i?.secondaryLabel!==l.secondaryLabel||i?.introStep!==l.introStep||i?.shouldIncludeStep!==l.shouldIncludeStep||i?.invalid!==l.invalid){const c=[...s];return c[e-1]=l,c}return s})},[t,o,p,n,a,r,e])},ee=(r,e)=>{m.useEffect(()=>{r===1&&console.warn(`${e}: ${e}s with one step are not permitted. If you require only one step, please use either the CreateTearsheetNarrow, CreateSidePanel, or CreateModal components.`)},[r,e])},k=`${V.prefix}--create-influencer`,Q="CreateInfluencer",E=({className:r,currentStep:e,onClickStep:n,stepData:a,title:t})=>{const p=(s,l)=>{const i=[];return s.forEach((c,h)=>{s[h]?.[l]===!1&&h<=e-1&&i.push(c)}),i.length},o=()=>{const l=a?.filter(c=>!c?.introStep)?.filter(c=>c?.shouldIncludeStep),i=p(a,"shouldIncludeStep")||0;return b.createElement(J,{className:`${k}__left-nav`},t&&b.createElement(K,{className:`${k}__title`},t),e===1&&a[0]?.introStep?null:b.createElement(z,{currentIndex:a[0]?.introStep?e-i-2:e-i-1,spaceEqually:!0,vertical:!0,className:L(`${k}__progress-indicator`),onChange:n},l.map((c,h)=>b.createElement(G,{label:c?.title,key:h,secondaryLabel:c.secondaryLabel||void 0,invalid:c.invalid}))))};return b.createElement("div",{className:L(k,r)},o())};E.displayName=Q;E.propTypes={className:u.string,currentStep:u.number.isRequired,onClickStep:u.func,stepData:u.arrayOf(u.shape({introStep:u.bool,secondaryLabel:u.string,shouldIncludeStep:u.bool,title:u.node})),title:u.string};E.__docgenInfo={description:"",methods:[],displayName:"CreateInfluencer",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},currentStep:{required:!0,tsType:{name:"number"},description:"Provide the current step number.",type:{name:"number"}},onClickStep:{required:!1,tsType:{name:"signature",type:"function",raw:"(step: number) => void",signature:{arguments:[{type:{name:"number"},name:"step"}],return:{name:"void"}}},description:"onChange event for Progress Indicator",type:{name:"func"}},stepData:{required:!1,tsType:{name:"Array",elements:[{name:"Step"}],raw:"Step[]"},description:"Provide the Set Data.",type:{name:"arrayOf",value:{name:"shape",value:{introStep:{name:"bool",required:!1},secondaryLabel:{name:"string",required:!1},shouldIncludeStep:{name:"bool",required:!1},title:{name:"node",required:!1}}}}},title:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"Title.",type:{name:"string"}}}};const ae=(r,e,n)=>{for(let a=r.length-1;a>=0;a--)if(r[a]?.[e]===n)return a+1;return-1};export{E as C,ee as a,D as b,x as c,M as g,ae as l,B as u};
