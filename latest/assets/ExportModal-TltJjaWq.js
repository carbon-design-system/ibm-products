import{F as ee,d as te,v as ae,P as t}from"./index-CMVdkQrl.js";import{p as k,c as ne,B as N}from"./settings-C3kz8lqM.js";import{C as re,M as se,a as ie,b as oe}from"./ComposedModal-DK_gDe0c.js";import{F as le}from"./FormGroup-BRiLUXWl.js";import{L as pe}from"./InlineLoading-C_FY6vWy.js";import{P as de}from"./PasswordInput-CKmzISgI.js";import{R as me}from"./RadioButton-B542YUZn.js";import{R as ue}from"./RadioButtonGroup-DY6Qt54Z.js";import{T as ce}from"./TextInput-CixU1YEY.js";import{r as s,e}from"./index-DtHxqM--.js";import{g as fe}from"./devtools-CJD9WatR.js";import{u as ye}from"./usePortalTarget-BpuhspP7.js";import{u as ge}from"./uuidv4-BN2rGLQG.js";import{a as he}from"./bucket-6-CRocNvF-.js";const y="ExportModal",_={preformattedExtensions:Object.freeze([]),validExtensions:Object.freeze([])};let o=s.forwardRef(({body:g,className:B,error:h,errorMessage:R,filename:p,hidePasswordLabel:$,inputLabel:C,inputType:O="text",invalidInputText:F,loading:d,loadingMessage:L,onClose:m,onRequestSubmit:u,open:b,portalTarget:P,preformattedExtensions:r=_.preformattedExtensions,preformattedExtensionsLabel:I,primaryButtonText:S,secondaryButtonText:z,showPasswordLabel:j,successMessage:D,successful:l,title:x,triggerButtonRef:H,validExtensions:c=_.validExtensions,...V},G)=>{const n=`${k.prefix}--export-modal`,[i,v]=s.useState(""),[W,A]=s.useState(!1),[f,T]=s.useState(""),U=ye(P);s.useEffect(()=>{var a,M;v(p),r&&r.length>0&&((a=r[0])!=null&&a.extension)&&T((M=r==null?void 0:r[0])==null?void 0:M.extension)},[p,r,b]),s.useEffect(()=>{if(l){const a=document.querySelector(`.${n} .${ne.prefix}--modal-close-button button`);a==null||a.focus()}},[l,n]);const J=a=>{v(a.target.value)},K=a=>{T(a)},Q=()=>{A(!0)},X=()=>{const a=f?`${p}.${f.toLocaleLowerCase()}`:i;u==null||u(a)},E=()=>{if(!W||!c||!c.length)return!1;if(!i.includes("."))return!0;const a=i.split(".").pop();return!c.includes(a)},Y=s.useRef(ge()),Z=d||!i||E(),q=d||h||l,w={id:`text-input--${Y.current}`,value:i,onChange:J,labelText:C,invalid:E(),invalidText:F,onBlur:Q,"data-modal-primary-focus":!0};return U(e.createElement(ee,{enableExperimentalFocusWrapWithoutSentinels:!0},e.createElement(re,{...V,className:te(n,B),"aria-label":x,size:"sm",preventCloseOnClickOutside:!0,launcherButtonRef:H,open:b,ref:G,onClose:m,...fe(y)},e.createElement(se,{className:`${n}__header`,closeModal:m,title:x}),e.createElement(ie,{className:`${n}__body-container`},!q&&e.createElement(e.Fragment,null,g&&e.createElement("p",{className:`${n}__body`},g),r.length?e.createElement(le,{legendText:I},e.createElement(ue,{orientation:"vertical",onChange:K,valueSelected:f,name:"extensions"},r.map(a=>e.createElement(me,{key:a.extension,id:a.extension,value:a.extension,labelText:`${a.extension} (${a.description})`,"data-modal-primary-focus":!0})))):e.createElement("div",{className:`${n}__input-container`},O==="text"?e.createElement(ce,{...w}):e.createElement(de,{...w,showPasswordLabel:j,hidePasswordLabel:$,tooltipPosition:"left"}))),e.createElement("div",{"aria-live":"polite",className:`${n}__messaging`},d&&e.createElement(e.Fragment,null,e.createElement(pe,{"aria-live":"off",description:"",small:!0,withOverlay:!1}),e.createElement("p",null,L)),l&&e.createElement(e.Fragment,null,e.createElement(ae,{size:16,className:`${n}__checkmark-icon`}),e.createElement("p",null,D)),h&&e.createElement(e.Fragment,null,e.createElement(he,{size:16,className:`${n}__error-icon`}),e.createElement("p",null,R)))),!q&&e.createElement(oe,{className:`${n}__footer`},e.createElement(N,{type:"button",kind:"secondary",onClick:m},z),e.createElement(N,{type:"submit",kind:"primary",onClick:X,disabled:Z},S)))))});o=k.checkComponentEnabled(o,y);o.propTypes={body:t.string,className:t.string,error:t.bool,errorMessage:t.string,filename:t.string.isRequired,hidePasswordLabel:t.string,inputLabel:t.string,inputType:t.oneOf(["text","password"]),invalidInputText:t.string,loading:t.bool,loadingMessage:t.string,onClose:t.func,onRequestSubmit:t.func,open:t.bool,portalTarget:t.node,preformattedExtensions:t.arrayOf(t.shape({extension:t.string,description:t.string})),preformattedExtensionsLabel:t.string,primaryButtonText:t.string.isRequired,secondaryButtonText:t.string.isRequired,showPasswordLabel:t.string,successMessage:t.string,successful:t.bool,title:t.string.isRequired,triggerButtonRef:t.any,validExtensions:t.array};o.displayName=y;o.__docgenInfo={description:"Modal dialog version of the export pattern",methods:[],displayName:"ExportModal",props:{body:{required:!1,tsType:{name:"string"},description:"Body content for the modal",type:{name:"string"}},className:{required:!1,tsType:{name:"string"},description:"Optional class name",type:{name:"string"}},error:{required:!1,tsType:{name:"boolean"},description:"specify if an error occurred",type:{name:"bool"}},errorMessage:{required:!1,tsType:{name:"string"},description:"messaging to display in the event of an error",type:{name:"string"}},filename:{required:!0,tsType:{name:"string"},description:"name of the file being exported",type:{name:"string"}},hidePasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to hide key",type:{name:"string"}},inputLabel:{required:!1,tsType:{name:"string"},description:"label for the text input",type:{name:"string"}},inputType:{required:!1,tsType:{name:"union",raw:"'text' | 'password'",elements:[{name:"literal",value:"'text'"},{name:"literal",value:"'password'"}]},description:"specify the type of text input",defaultValue:{value:"'text'",computed:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'password'",computed:!1}]}},invalidInputText:{required:!1,tsType:{name:"string"},description:"text for an invalid input",type:{name:"string"}},loading:{required:!1,tsType:{name:"boolean"},description:"specify if the modal is in a loading state",type:{name:"bool"}},loadingMessage:{required:!1,tsType:{name:"string"},description:"message to display during the loading state",type:{name:"string"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Specify a handler for closing modal",type:{name:"func"}},onRequestSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:'Specify a handler for "submitting" modal. Returns the file name',type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Specify whether the Modal is currently open",type:{name:"bool"}},portalTarget:{required:!1,tsType:{name:"ReactNode"},description:"The DOM node the tearsheet should be rendered within. Defaults to document.body.",type:{name:"node"}},preformattedExtensions:{required:!1,tsType:{name:"unknown"},description:"Array of extensions to display as radio buttons",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"arrayOf",value:{name:"shape",value:{extension:{name:"string",required:!1},description:{name:"string",required:!1}}}}},preformattedExtensionsLabel:{required:!1,tsType:{name:"string"},description:"Label for the preformatted label form group",type:{name:"string"}},primaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the primary button",type:{name:"string"}},secondaryButtonText:{required:!0,tsType:{name:"string"},description:"Specify the text for the secondary button",type:{name:"string"}},showPasswordLabel:{required:!1,tsType:{name:"string"},description:"label text that's displayed when hovering over visibility toggler to show key",type:{name:"string"}},successMessage:{required:!1,tsType:{name:"string"},description:"messaging to display if the export was successful",type:{name:"string"}},successful:{required:!1,tsType:{name:"boolean"},description:"specify if the export was successful",type:{name:"bool"}},title:{required:!0,tsType:{name:"string"},description:"The text displayed at the top of the modal",type:{name:"string"}},triggerButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Reference to trigger button",type:{name:"any"}},validExtensions:{required:!1,tsType:{name:"unknown"},description:"array of valid extensions the file can have",defaultValue:{value:"Object.freeze([])",computed:!0},type:{name:"array"}}}};export{o as E};
