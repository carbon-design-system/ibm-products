import{e,r as u}from"./index-CPiZ6Cnx.js";import{a as m}from"./index-B-lxVbXh.js";import{b as ve,n as Ge,c as C,_ as je,j as Ke,E as Ze,P as n,l as We,C as Xe,L as Qe}from"./index-BPCFiO9b.js";import{p as le,B as Q,I as Je}from"./settings-41bnSjHp.js";import{H as et,a as tt}from"./HeaderName-PsCVDtGM.js";import{H as nt,a as ie}from"./HeaderGlobalBar-CLqyr2gF.js";import{u as at}from"./index-H2wBg9na.js";import{S as Te}from"./StoryDocsPage-vEZJbmBv.js";import{u as v}from"./uuidv4-BN2rGLQG.js";import{L as it}from"./Link-BmRyJrPM.js";import{T as st}from"./Toggle-BulcM5ZS.js";import{u as ot}from"./usePrefersReducedMotion-B4CsCXC2.js";import{g as rt}from"./devtools-Ca6Wku6c.js";import{p as lt}from"./props-helper-C4WGU-Xx.js";import{g as ct}from"./getSupportedLocale--Qslfae5.js";import{u as ut}from"./usePresence-V30dXmOF.js";import{u as mt}from"./useClickOutside-CmCSbinx.js";import{N as dt}from"./NotificationsEmptyState-aMzpPtsq.js";import{b as pt}from"./bucket-15-e1AWIpaL.js";import{a as ft,U as gt}from"./bucket-18-CAzey7tD.js";import{b as ht}from"./bucket-9-qDf-0NK_.js";import{E as yt}from"./bucket-6-CO2LLwKX.js";import{N as bt}from"./bucket-12-6vZmyEHs.js";import{d as vt}from"./bucket-16-D6LVaITE.js";import"./_commonjsHelpers-BosuxZz1.js";import"./v4-CtRu48qb.js";import"./index-B83en7q5.js";import"./index-ZKO_qc5e.js";import"./events-OVwOsPzJ.js";import"./Link-DItntcEQ.js";import"./wrapComponent-NawzZkim.js";import"./index-DblCLej2.js";import"./iframe-DG_HeTRT.js";import"./index-Dytf1aFS.js";import"./index-DrFu-skq.js";import"./story-helper-C7pmvIin.js";import"./useControllableState-uQXf5Mu5.js";import"./Text-DJS5NTiV.js";import"./useIsomorphicEffect-CqAX3nH-.js";import"./EmptyState-DH2gBtAG.js";import"./index-DtQVt1M7.js";import"./EmptyStateV2-CLfnSPcH.js";import"./NotificationsIllustration-CpR8GSeR.js";import"./useId-f4Cxwosn.js";const Tt=()=>{},ee=e.forwardRef(function(o,y){let{children:L,className:N,expanded:b,addFocusListeners:_=!0,onHeaderPanelFocus:w=Tt,href:f,...D}=o;const d=ve(),T=u.useRef(null),S=Ge([T,y]),M=u.useRef(b!==void 0).current,[E,$]=u.useState(b),P=M?b:E,[O,r]=u.useState(null),p=C(`${d}--header-panel`,{[`${d}--header-panel--expanded`]:P,[N]:!!N}),c={};return _&&(c.onBlur=g=>{var A;!g.currentTarget.contains(g.relatedTarget)&&!((A=O==null?void 0:O.classList)!=null&&A.contains(`${d}--switcher__item-link`))&&($(!1),r(null),b&&w())},c.onKeyDown=g=>{Ke(g,Ze)&&($(!1),w(),f&&(window.location.href=f))}),at("click",()=>{var Y,q;const g=document.activeElement;r(g);const A=L;((Y=A==null?void 0:A.type)==null?void 0:Y.displayName)==="Switcher"&&!(g!=null&&g.closest(`.${d}--header-panel--expanded`))&&!(g!=null&&g.closest(`.${d}--header__action`))&&!((q=T==null?void 0:T.current)!=null&&q.classList.contains(`${d}--switcher`))&&b&&($(!1),w())}),e.createElement("div",je({},D,{className:p,ref:S},c),L)});ee.propTypes={addFocusListeners:n.bool,children:n.node,className:n.string,expanded:n.bool,href:n.string,onHeaderPanelFocus:n.func};ee.displayName="HeaderPanel";function Nt(i,o){const y=new Intl.RelativeTimeFormat(o==null?void 0:o.locale,{style:(o==null?void 0:o.style)??"long"}),L=typeof i=="number"?new Date(i):i,N=Date.now(),b=Math.floor((N-L.getTime())/1e3),_=Math.floor(b/60),w=Math.floor(_/60),f=Math.floor(w/24),D=Math.floor(f/7),d=Math.floor(D/4),T=Math.floor(f/365);return Math.abs(b)<60?new Intl.RelativeTimeFormat(o==null?void 0:o.locale,{numeric:"auto",style:(o==null?void 0:o.style)??"long"}).format(0,"seconds"):Math.abs(_)<60?y.format(_*-1,"minutes"):Math.abs(w)<24?y.format(w*-1,"hours"):Math.abs(f)<7?y.format(f*-1,"days"):Math.abs(D)<4?y.format(D*-1,"weeks"):Math.abs(f)<365?y.format(d*-1,"months"):y.format(T*-1,"years")}const wt=Object.freeze(Object.defineProperty({__proto__:null,format:Nt},Symbol.toStringTag,{value:"Module"})),Dt={relative:wt},At=({previousTime:i,secondsAgoText:o,minuteAgoText:y,minutesAgoText:L,hoursAgoText:N,hourAgoText:b,daysAgoText:_,yesterdayAtText:w,monthsAgoText:f,monthAgoText:D,yearsAgoText:d,yearAgoText:T,nowText:S})=>{const r=new Date-i;switch(!0){case r<6e4:return Math.round(r/1e3)>10?o(Math.round(r/1e3)):S;case r<36e5:return Math.round(r/6e4)>1?L(Math.round(r/6e4)):y(Math.round(r/6e4));case r<864e5:return Math.round(r/36e5)>1?N(Math.round(r/36e5)):b(Math.round(r/36e5));case r<2592e6:return Math.round(r/864e5)>1?_(Math.round(r/864e5)):w(new Date(i).toLocaleTimeString(kt[0]));case r<31536e6:return Math.round(r/2592e6)>1?f(Math.round(r/2592e6)):D(Math.round(r/2592e6));default:return Math.round(r/31536e6)>1?d(Math.round(r/31536e6)):T(Math.round(r/31536e6))}},kt=()=>(navigator.languages===void 0?[navigator.language,"en"]:navigator.languages).map(o=>o.trim()),ce="NotificationsPanel",a=`${le.prefix}--notifications-panel`,xt="en-US",l={dateTimeStyle:"long",daysAgoText:i=>`${i} days ago`,dismissAllLabel:"Dismiss all",dismissSingleNotificationIconDescription:"Dismiss",doNotDisturbLabel:"Do not disturb",emptyStateLabel:"You do not have any notifications",hourAgoText:i=>`${i} hour ago`,hoursAgoText:i=>`${i} hours ago`,illustrationTheme:"light",minuteAgoText:i=>`${i} minute ago`,minutesAgoText:i=>`${i} minutes ago`,monthAgoText:i=>`${i} month ago`,monthsAgoText:i=>`${i} months ago`,nowText:"Now",onDismissAllNotifications:()=>{},onDismissSingleNotification:()=>{},previousLabel:"Previous",readLessLabel:"Read less",readMoreLabel:"Read more",secondsAgoText:i=>`${i} seconds ago`,settingsIconDescription:"Settings",title:"Notifications",todayLabel:"Today",viewAllLabel:i=>`View all (${i})`,yearAgoText:i=>`${i} year ago`,yearsAgoText:i=>`${i} years ago`,yesterdayAtText:i=>`Yesterday at ${i}`,yesterdayLabel:"Yesterday"};let V=e.forwardRef(({className:i,data:o,dateTimeLocale:y,dateTimeStyle:L=l.dateTimeStyle,daysAgoText:N=l.daysAgoText,dismissAllLabel:b=l.dismissAllLabel,dismissSingleNotificationIconDescription:_=l.dismissSingleNotificationIconDescription,doNotDisturbDefaultToggled:w,doNotDisturbLabel:f=l.doNotDisturbLabel,emptyStateLabel:D=l.emptyStateLabel,hourAgoText:d=l.hourAgoText,hoursAgoText:T=l.hoursAgoText,illustrationTheme:S=l.illustrationTheme,minuteAgoText:M=l.minuteAgoText,minutesAgoText:E=l.minutesAgoText,monthAgoText:$=l.monthAgoText,monthsAgoText:P=l.monthsAgoText,nowText:O=l.nowText,onClickOutside:r,onDismissAllNotifications:p=l.onDismissAllNotifications,onDismissSingleNotification:c=l.onDismissSingleNotification,onDoNotDisturbChange:g,onSettingsClick:A,onViewAllClick:Y,open:q,previousLabel:Ae=l.previousLabel,readLessLabel:ue=l.readLessLabel,readMoreLabel:me=l.readMoreLabel,secondsAgoText:ke=l.secondsAgoText,settingsIconDescription:xe=l.settingsIconDescription,title:_e=l.title,todayLabel:Ce=l.todayLabel,viewAllLabel:Le=l.viewAllLabel,yearAgoText:Se=l.yearAgoText,yearsAgoText:Ee=l.yearsAgoText,yesterdayAtText:$e=l.yesterdayAtText,yesterdayLabel:Pe=l.yesterdayLabel,triggerButtonRef:I,...Oe},de)=>{const H=u.useRef(null),Me=u.useRef(null),qe=u.useRef(null),He=u.useRef(null),[h,pe]=u.useState([]),Ue=ct(y,xt),fe=ve(),Re=ot()?"notifications-panel-exit-reduced":"notifications-panel-fade-out",{shouldRender:Ve}=ut(q,H,Re);u.useEffect(()=>{pe(o)},[o]),mt(de||H,()=>{r==null||r(),setTimeout(()=>{var s;(s=I==null?void 0:I.current)==null||s.focus()},0)});const Ie=s=>{s.stopPropagation(),s.key==="Escape"&&(r==null||r(),setTimeout(()=>{var t;(t=I==null?void 0:I.current)==null||t.focus()},100))};u.useEffect(()=>{if(q){const s=new MutationObserver(()=>{var t;if(H.current){const k=H.current;(t=k==null?void 0:k.querySelector(`.${a}__dismiss-button`))==null||t.focus(),s.disconnect()}});if(H.current){const t=H.current,k=t==null?void 0:t.querySelector(`.${a}__dismiss-button`);k==null||k.focus()}else s.observe(document.body,{childList:!0,subtree:!0});return()=>s.disconnect()}},[q]);const te=s=>{if(!(!s||s&&!s.length))return s.sort((t,k)=>k.timestamp-t.timestamp)};let G=new Date;G=new Date(G.setDate(G.getDate()-1));let j=new Date;j=new Date(j.setDate(j.getDate()-2));let K=h&&h.length&&h.filter(s=>s.timestamp.getTime()>=G.getTime());K=te(K);let Z=h&&h.length&&h.filter(s=>s.timestamp.getTime()<G.getTime()&&s.timestamp.getTime()>=j.getTime());Z=te(Z);let W=h&&h.length&&h.filter(s=>s.timestamp.getTime()<j.getTime());W=te(W);const Be=s=>{const t=h&&h.length&&h.filter(B=>B.id===s)[0],k=88,J=t==null?void 0:t.description,ae=C([`${a}__notification-description`,{[`${a}__notification-long-description`]:t==null?void 0:t.showAll,[`${a}__notification-short-description`]:!(t!=null&&t.showAll)}]),U=C([{[`${a}__notification-read-less-button`]:t==null?void 0:t.showAll,[`${a}__notification-read-more-button`]:!(t!=null&&t.showAll)}]);return e.createElement("div",null,e.createElement("p",{className:ae},J),J.length>k&&e.createElement(Q,{kind:"ghost",size:"sm",renderIcon:B=>e.createElement(Qe,{size:16,...B}),iconDescription:t!=null&&t.showAll?ue:me,onClick:B=>{B.preventDefault(),B.stopPropagation();const Ye=h.map(z=>z.id===(t==null?void 0:t.id)?Object.assign({},z,{showAll:!(z!=null&&z.showAll)}):z);pe(Ye)},className:U},t!=null&&t.showAll?ue:me))},ne=(s,t,k)=>{const J=C([`${a}__notification`,`${a}__notification-${s}`]),ae=C([`${a}__notification-title`,{[`${a}__notification-title-unread`]:t.unread}]);return e.createElement("div",{key:`${t.timestamp}-${t.title}-${k}`,className:J,role:"button",tabIndex:0,onClick:()=>t.onNotificationClick(t),onKeyDown:U=>{U.target instanceof HTMLElement&&U.target.classList.contains(`${a}__dismiss-single-button`)||U.which===13&&t.onNotificationClick(t)}},t.type==="error"&&e.createElement(yt,{size:16,className:C([`${a}__notification-status-icon`,`${a}__notification-status-icon-error`])}),t.type==="success"&&e.createElement(We,{size:16,className:C([`${a}__notification-status-icon`,`${a}__notification-status-icon-success`])}),t.type==="warning"&&e.createElement(ft,{size:16,className:C([`${a}__notification-status-icon`,`${a}__notification-status-icon-warning`])}),t.type==="informational"&&e.createElement(ht,{size:16,className:C([`${a}__notification-status-icon`,`${a}__notification-status-icon-informational`])}),e.createElement("div",{className:`${a}__notification-content`},e.createElement("p",{className:`${a}__notification-time-label`},y?Dt.relative.format(t.timestamp,{locale:Ue,style:L}):At({previousTime:t.timestamp,secondsAgoText:ke,minuteAgoText:M,minutesAgoText:E,hoursAgoText:T,hourAgoText:d,daysAgoText:N,yesterdayAtText:$e,monthsAgoText:P,monthAgoText:$,yearsAgoText:Ee,yearAgoText:Se,nowText:O})),e.createElement("h6",{className:ae},t.title),t.description&&t.description.length&&Be(t.id),t.link&&t.link.text&&t.link.url&&e.createElement(it,{href:t.link.url,className:`${a}__notifications-link`,...lt({},t.link,["text","url"])},t.link.text)),e.createElement(Je,{align:"left",kind:"ghost",size:"sm",label:_,className:`${a}__dismiss-single-button`,onClick:U=>ze(U,t)},e.createElement(Xe,{size:16})))},ze=(s,t)=>{s.preventDefault(),s.stopPropagation(),c(t)},Fe=C([`${a}__main-section`,{[`${a}__main-section-empty`]:h&&!h.length}]);return Ve?e.createElement(e.Fragment,null,e.createElement("button",{type:"button",className:`${fe}--visually-hidden`,ref:qe},"Focus sentinel start"),e.createElement("div",{role:"dialog","aria-label":"Notification Panel",onKeyDown:Ie,tabIndex:0,...Oe,id:a,className:C(a,i,`${a}__container`,{[`${a}__entrance`]:q,[`${a}__exit`]:!q}),ref:de||H,...rt(ce)},e.createElement("div",{ref:Me},e.createElement("div",{className:`${a}__header-container`},e.createElement("div",{className:`${a}__header-flex`},e.createElement("h2",{className:`${a}__header`},_e),e.createElement(Q,{size:"sm",kind:"ghost",className:`${a}__dismiss-button`,onClick:p},b)),g&&e.createElement(st,{size:"sm",className:`${a}__do-not-disturb-toggle`,id:`${a}__do-not-disturb-toggle-component`,labelA:f,labelB:f,onToggle:s=>g(s),defaultToggled:w,"aria-label":f,labelText:f})),e.createElement("div",{className:Fe},K&&K.length?e.createElement(e.Fragment,null,e.createElement("h6",{className:`${a}__time-section-label`},Ce),K.map((s,t)=>ne("today",s,t))):null,Z&&Z.length?e.createElement(e.Fragment,null,e.createElement("h6",{className:`${a}__time-section-label`},Pe),Z.map((s,t)=>ne("yesterday",s,t))):null,W&&W.length?e.createElement(e.Fragment,null,e.createElement("h6",{className:`${a}__time-section-label`},Ae),W.map((s,t)=>ne("previous",s,t))):null,!h.length&&e.createElement(dt,{illustrationTheme:S,title:"",subtitle:D})),Y&&A&&h&&h.length>0&&e.createElement("div",{className:`${a}__bottom-actions`},e.createElement(Q,{kind:"ghost",className:`${a}__view-all-button`,onClick:Y},Le(h.length)),e.createElement(Q,{kind:"ghost",size:"sm",className:`${a}__settings-button`,renderIcon:s=>e.createElement(pt,{size:16,...s}),iconDescription:xe,onClick:A,hasIconOnly:!0,tooltipPosition:"left"})))),e.createElement("button",{type:"button",className:`${fe}--visually-hidden`,ref:He},"Focus sentinel end")):null});V=le.checkComponentEnabled(V,ce);V.displayName=ce;V.propTypes={className:n.string,data:n.arrayOf(n.shape({id:n.oneOfType([n.string,n.number]),type:n.oneOf(["error","warning","success","informational"]),timestamp:n.instanceOf(Date),title:n.string,description:n.string,link:n.shape({url:n.string,text:n.string}),unread:n.bool,onNotificationClick:n.func})).isRequired,dateTimeLocale:n.string,dateTimeStyle:n.string,daysAgoText:n.func,dismissAllLabel:n.string,dismissSingleNotificationIconDescription:n.string,doNotDisturbDefaultToggled:n.bool,doNotDisturbLabel:n.string,emptyStateLabel:n.string,hourAgoText:n.func,hoursAgoText:n.func,illustrationTheme:n.oneOf(["light","dark"]),minuteAgoText:n.func,minutesAgoText:n.func,monthAgoText:n.func,monthsAgoText:n.func,nowText:n.string,onClickOutside:n.func,onDismissAllNotifications:n.func,onDismissSingleNotification:n.func,onDoNotDisturbChange:n.func,onSettingsClick:n.func,onViewAllClick:n.func,open:n.bool.isRequired,previousLabel:n.string,readLessLabel:n.string,readMoreLabel:n.string,secondsAgoText:n.func,settingsIconDescription:n.string,title:n.string,todayLabel:n.string,triggerButtonRef:n.any,viewAllLabel:n.func,yearAgoText:n.func,yearsAgoText:n.func,yesterdayAtText:n.func,yesterdayLabel:n.string};V.__docgenInfo={description:'The `NotificationsPanel` sets expectations on the behavior for notifications,\nallowing the user to view and interact with them all in one place.\n\n**To adopt the new localization:**\n\n**Step 1:** Provide a locale to the `dateTimeLocale` prop, such as "de" or "fr-CA".\n\n**Step 2:** Remove the now _deprecated_ props: `daysAgoText`,\n`hourAgoText`, `hoursAgoText`, `minuteAgoText`, `minutesAgoText`,\n`monthAgoText`, `monthsAgoText`, `nowText`, `secondsAgoText`,\n`yearAgoText`, `yearsAgoText`, `yesterdayAtText`.\n\nIf you do not provide a locale, the deprecated props will be applied instead.',methods:[],displayName:"NotificationsPanel",props:{className:{required:!1,tsType:{name:"string"},description:"Provide an optional class to be applied to the containing node.",type:{name:"string"}},data:{required:!0,tsType:{name:"Array",elements:[{name:"Data"}],raw:"Data[]"},description:"Array of data for Notifications component to render",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"union",value:[{name:"string"},{name:"number"}],required:!1},type:{name:"enum",value:[{value:"'error'",computed:!1},{value:"'warning'",computed:!1},{value:"'success'",computed:!1},{value:"'informational'",computed:!1}],required:!1},timestamp:{name:"instanceOf",value:"Date",required:!1},title:{name:"string",required:!1},description:{name:"string",required:!1},link:{name:"shape",value:{url:{name:"string",required:!1},text:{name:"string",required:!1}},required:!1},unread:{name:"bool",required:!1},onNotificationClick:{name:"func",required:!1}}}}},dateTimeLocale:{required:!1,tsType:{name:"string"},description:"The language for each notification's time stamp.\nUsed with `dateTimeStyle`.",type:{name:"string"}},dateTimeStyle:{required:!1,tsType:{name:"union",raw:"'long' | 'short' | 'narrow'",elements:[{name:"literal",value:"'long'"},{name:"literal",value:"'short'"},{name:"literal",value:"'narrow'"}]},description:'The date/time format for each notification\'s time stamp.\nUsed with `dateTimeLocale`.\n\nE.g. `long` as "6 minutes ago", `short` as "6m ago".',defaultValue:{value:"'long'",computed:!1},type:{name:"string"}},daysAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `days ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} days ago`",computed:!1},type:{name:"func"}},dismissAllLabel:{required:!1,tsType:{name:"string"},description:"Label for Dismiss all button",defaultValue:{value:"'Dismiss all'",computed:!1},type:{name:"string"}},dismissSingleNotificationIconDescription:{required:!1,tsType:{name:"string"},description:"Label for Dismiss single notification icon button",defaultValue:{value:"'Dismiss'",computed:!1},type:{name:"string"}},doNotDisturbDefaultToggled:{required:!1,tsType:{name:"boolean"},description:"Optional: Determines if the `Do not disturb` toggle is on or off when the component is rendered",type:{name:"bool"}},doNotDisturbLabel:{required:!1,tsType:{name:"string"},description:"Optional: Label for Do not disturb toggle",defaultValue:{value:"'Do not disturb'",computed:!1},type:{name:"string"}},emptyStateLabel:{required:!1,tsType:{name:"string"},description:"Sets the empty state label text when there are no notifications",defaultValue:{value:"'You do not have any notifications'",computed:!1},type:{name:"string"}},hourAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `hour ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} hour ago`",computed:!1},type:{name:"func"}},hoursAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `hours ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} hours ago`",computed:!1},type:{name:"func"}},illustrationTheme:{required:!1,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"Determines the theme of the empty state's illustration.",defaultValue:{value:"'light'",computed:!1},type:{name:"enum",value:[{value:"'light'",computed:!1},{value:"'dark'",computed:!1}]}},minuteAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `minute ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} minute ago`",computed:!1},type:{name:"func"}},minutesAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `minutes ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} minutes ago`",computed:!1},type:{name:"func"}},monthAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `month ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} month ago`",computed:!1},type:{name:"func"}},monthsAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `months ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} months ago`",computed:!1},type:{name:"func"}},nowText:{required:!1,tsType:{name:"string"},description:"Sets the `now` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"'Now'",computed:!1},type:{name:"string"}},onClickOutside:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Optional function called after clicking outside of the panel.",type:{name:"func"}},onDismissAllNotifications:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:'Optional function called after clicking the "Dismiss all" button.',defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},onDismissSingleNotification:{required:!1,tsType:{name:"signature",type:"function",raw:"(prop) => void",signature:{arguments:[{name:"prop"}],return:{name:"void"}}},description:`Optional function called after clicking a notification's "X" button.`,defaultValue:{value:"() => {}",computed:!1},type:{name:"func"}},onDoNotDisturbChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(prop) => void",signature:{arguments:[{name:"prop"}],return:{name:"void"}}},description:'Optional function called after toggling "Do not disturb".',type:{name:"func"}},onSettingsClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Optional function called after clicking settings / gear icon button.",type:{name:"func"}},onViewAllClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:'Optional function called after clicking the "View all" button.',type:{name:"func"}},open:{required:!0,tsType:{name:"boolean"},description:"Determines whether the notifications panel should render or not",type:{name:"bool"}},previousLabel:{required:!1,tsType:{name:"string"},description:"Sets the previous label text",defaultValue:{value:"'Previous'",computed:!1},type:{name:"string"}},readLessLabel:{required:!1,tsType:{name:"string"},description:"Sets the `read less` label text",defaultValue:{value:"'Read less'",computed:!1},type:{name:"string"}},readMoreLabel:{required:!1,tsType:{name:"string"},description:"Sets the `read more` label text",defaultValue:{value:"'Read more'",computed:!1},type:{name:"string"}},secondsAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `seconds ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} seconds ago`",computed:!1},type:{name:"func"}},settingsIconDescription:{required:!1,tsType:{name:"string"},description:"Sets the settings icon description text",defaultValue:{value:"'Settings'",computed:!1},type:{name:"string"}},title:{required:!1,tsType:{name:"string"},description:"Sets the title for the Notifications panel",defaultValue:{value:"'Notifications'",computed:!1},type:{name:"string"}},todayLabel:{required:!1,tsType:{name:"string"},description:"Sets the today label text",defaultValue:{value:"'Today'",computed:!1},type:{name:"string"}},triggerButtonRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"any"}],raw:"RefObject<any>"},description:"Reference to trigger button",type:{name:"any"}},viewAllLabel:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the View all button text",defaultValue:{value:"(value: string | number) => `View all (${value})`",computed:!1},type:{name:"func"}},yearAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `year ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} year ago`",computed:!1},type:{name:"func"}},yearsAgoText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `years ago` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `${value} years ago`",computed:!1},type:{name:"func"}},yesterdayAtText:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:"Sets the `Yesterday at` label text\n\n@deprecated use `dateTimeLocale` instead.",defaultValue:{value:"(value) => `Yesterday at ${value}`",computed:!1},type:{name:"func"}},yesterdayLabel:{required:!1,tsType:{name:"string"},description:"Sets the yesterday label text",defaultValue:{value:"'Yesterday'",computed:!1},type:{name:"string"}}}};const _t=".c4p--notifications-panel__story--full-height{block-size:100vh;max-block-size:var(--doc-story-height)}.c4p--notifications-panel__story__add{padding:4rem 0 0 1rem}.c4p--notifications-panel__story__header-panel{padding:4rem 1rem 0;font-weight:700;line-height:1.4;text-align:center}.cds--header__global{z-index:2}",Ne=()=>e.createElement("svg",{width:"18px",height:"19px",viewBox:"0 0 18 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e.createElement("title",null,"Unread notification bell"),e.createElement("g",{id:"Group",transform:"translate(-1.000000, 0.000000)"},e.createElement("path",{d:"M17.9419375,12.058125 L16.25,10.3661875 L16.25,8.125 C16.245845,4.91692673 13.816599,2.23147626 10.625,1.90675 L10.625,0.625 L9.375,0.625 L9.375,1.90675 C6.183401,2.23147626 3.754155,4.91692673 3.75,8.125 L3.75,10.3661875 L2.0580625,12.058125 C1.94086706,12.1753182 1.875,12.3342622 1.875,12.5 L1.875,14.375 C1.875,14.720178 2.15482203,15 2.5,15 L6.875,15 L6.875,15.4855 C6.84694527,17.1272367 8.05869477,18.5271305 9.6875,18.7346875 C10.5660567,18.8218694 11.4405518,18.5337871 12.0952737,17.9415019 C12.7499955,17.3492167 13.1239886,16.5078712 13.125,15.625 L13.125,15 L17.5,15 C17.845178,15 18.125,14.720178 18.125,14.375 L18.125,12.5 C18.125,12.3342622 18.0591329,12.1753182 17.9419375,12.058125 Z M11.875,15.625 C11.875,16.6605339 11.0355339,17.5 10,17.5 C8.96446609,17.5 8.125,16.6605339 8.125,15.625 L8.125,15 L11.875,15 L11.875,15.625 Z M16.875,13.75 L3.125,13.75 L3.125,12.7588125 L4.816875,11.066875 C4.93409336,10.949692 4.9999646,10.7907468 5,10.625 L5,8.125 C5,5.36357625 7.23857625,3.125 10,3.125 C12.7614237,3.125 15,5.36357625 15,8.125 L15,10.625 C15.0000354,10.7907468 15.0659066,10.949692 15.183125,11.066875 L16.875,12.7588125 L16.875,13.75 Z",id:"Shape",fillRule:"nonzero"}),e.createElement("circle",{id:"Oval",stroke:"#161616",fill:"#DA1E28",cx:"15",cy:"4.375",r:"2.5"})));Ne.__docgenInfo={description:"",methods:[],displayName:"UnreadNotificationBell"};const we=()=>e.createElement(Te,{altGuidelinesHref:[{href:"https://pages.github.ibm.com/carbon/ibm-products/components/notification-panel/usage/",label:"NotificationsPanel usage guidelines"}],blocks:[{story:F}]});we.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const Ct=new Date().getFullYear(),R=new Date(Ct,0,1);let De=new Date(R);De.setDate(R.getDate()-1);let x=new Date(R);x.setDate(R.getDate()-2);const ge=6e4,re=[{id:v(),type:"error",title:"LogRhythm connection failure",description:"LogRhythm is failing to connect, check timeout.",timestamp:R,unread:!0,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"LogDNA cannot be reached.",description:"Unable to communicate with LogDNA.",timestamp:new Date(new Date().getTime()-30*1e3),unread:!0,onNotificationClick:m("Clicked on notification")},{id:v(),type:"warning",title:"System alert",description:"Email classification was exported successfully.",timestamp:new Date(R.getTime()-11*ge),unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"success",title:"IBM Cloud Pak for Automation Success",description:"Successfully connected cartridge",timestamp:new Date(R.getTime()-120*ge),unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"success",title:"Successfully connected LogDNA",description:"App connection succeeded",timestamp:De,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"warning",title:"Cloud Foundry app memory",description:"Allocated app memory low",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"informational",title:"Logs are now being monitored",link:{text:"View logs",url:"https://www.carbondesignsystem.com"},timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")},{id:v(),type:"error",title:"Cluster unreachable",description:"Not able to establish connection with provided cluster. Please check your logs and memory allocation to resolve this issue further.",timestamp:x,unread:!1,onNotificationClick:m("Clicked on notification")}],X=`${le.prefix}--notifications-panel__story`,se={"Sample data set":re,"Empty data set":[]},oe={undefined:void 0,bg:"bg",cs:"cs","da-DK":"da-DK","de-CH":"de-CH",de:"de","en-AU":"en-AU","en-GB":"en-GB","en-US":"en-US","en-ZA":"en-ZA","es-ES":"es-ES",es:"es",et:"et",fi:"fi","fr-CA":"fr-CA","fr-CH":"fr-CH",fr:"fr",hu:"hu",it:"it",ja:"ja",lv:"lv","nl-BE":"nl-BE","nl-NL":"nl-NL",no:"no",pl:"pl","pt-BR":"pt-BR","pt-PT":"pt-PT","ru-UA":"ru-UA",ru:"ru",sk:"sk",sl:"sl",th:"th",tr:"tr","uk-UA":"uk-UA",vi:"vi"},An={title:"IBM Products/Components/Notifications panel/NotificationsPanel",component:V,tags:["autodocs"],parameters:{styles:_t,layout:"fullscreen",percy:{waitForTimeout:1e3},docs:{page:we}},argTypes:{data:{control:{type:"select",labels:Object.keys(se)},options:Object.values(se).map((i,o)=>o),mapping:Object.values(se)},dateTimeLocale:{control:{type:"select",labels:Object.keys(oe)},options:Object.values(oe).map((i,o)=>o),mapping:Object.values(oe)},dateTimeStyle:{options:["long","short","narrow"],control:{type:"radio"}},docs:{page:()=>e.createElement(Te,{altGuidelinesHref:"https://pages.github.ibm.com/carbon/ibm-products/components/notification-panel/usage/"})}}},Lt={data:0,dateTimeLocale:0,dateTimeStyle:"long",open:!0,onDoNotDisturbChange:m('Toggled "Do not disturb"'),onViewAllClick:m('Clicked "View all"'),onSettingsClick:m("Clicked gear icon")},St=()=>{const i=Math.floor(Math.random()*re.length),o={...re[i]};return o.id=v(),o.timestamp=new Date,o.unread=!0,o},Et=i=>{const{data:o,open:y,...L}=i,[N,b]=u.useState(o),[_,w]=u.useState(!0),[f,D]=u.useState(!1),[d,T]=u.useState(y),[S,M]=u.useState(!1),E=u.useRef(null),$=u.useRef(null),P=u.useRef(null),O=()=>{let p=[...N];p.forEach(c=>c.unread=!1),b(p)};u.useEffect(()=>{const p=N.find(c=>c.unread===!0);w(p)},[N]),u.useEffect(()=>{d&&O()},[d]),u.useEffect(()=>{b(o)},[o]),u.useEffect(()=>{T(y)},[y]);const r=()=>{const p=St();b(c=>[...c,{...p}])};return e.createElement("div",{className:`${X}--full-height`},e.createElement(et,{"aria-label":"IBM Cloud Pak",className:`${X}--header`},e.createElement(tt,{href:"/",prefix:"IBM",onClick:p=>{p.preventDefault()}},"Cloud Pak"),e.createElement(nt,null,e.createElement(ie,{ref:E,"aria-label":f?"Close user account":"Open user account",isActive:f,onClick:p=>{p.preventDefault(),D(c=>!c),T(!1),M(!1),setTimeout(()=>{var c;(c=E==null?void 0:E.current)==null||c.focus()},0)}},e.createElement(gt,{size:20})),e.createElement(ee,{expanded:f},e.createElement("div",{className:`${X}__header-panel`},"User account",e.createElement("br",null),"example panel")),e.createElement(ie,{ref:$,"aria-label":d?"Close notifications":"Open notifications","aria-expanded":d,isActive:d,onClick:p=>{p.preventDefault(),O(),T(c=>!c),D(!1),M(!1)}},!d&&_?e.createElement(Ne,null):e.createElement(bt,{size:20})),e.createElement(V,{triggerButtonRef:$,data:N,open:d,onClickOutside:()=>{m("Clicked outside")(),T(!1)},onDismissAllNotifications:()=>{m('Clicked "Dismiss all"')(),b([])},onDismissSingleNotification:({id:p})=>{const c=N.find(A=>A.id);m('Clicked "Dismiss notification"')(c);let g=[...N];g=g.filter(A=>A.id!==p),b(g)},...L}),e.createElement(ie,{ref:P,"aria-label":S?"Close switcher":"Open switcher",isActive:S,onClick:p=>{p.preventDefault(),M(c=>!c),D(!1),T(!1),setTimeout(()=>{var c;(c=P==null?void 0:P.current)==null||c.focus()},0)}},e.createElement(vt,{size:20})),e.createElement(ee,{expanded:S},e.createElement("div",{className:`${X}__header-panel`},"App switcher",e.createElement("br",null),"example panel")))),e.createElement("div",{className:`${X}__add`},e.createElement(Q,{onClick:r},"Add new notification")))},F=Et.bind({});F.args={...Lt};var he,ye,be;F.parameters={...F.parameters,docs:{...(he=F.parameters)==null?void 0:he.docs,source:{originalSource:`args => {
  const {
    data,
    open,
    ...rest
  } = args;
  const [notificationsData, setNotificationsData] = useState(data);
  const [hasUnreadNotifications, setHasUnreadNotifications] = useState(true);
  const [userOpen, setUserOpen] = useState(false);
  const [notificationsOpen, setNotificationsOpen] = useState(open);
  const [switcherOpen, setSwitcherOpen] = useState(false);
  const userActionRef = useRef(null);
  const notificationActionRef = useRef(null);
  const switcherActionRef = useRef(null);
  const markAllAsUnread = () => {
    let tempData = [...notificationsData];
    tempData.forEach(element => element.unread = false);
    setNotificationsData(tempData);
  };

  // Every time data is added or removed, check for unread notifications.
  useEffect(() => {
    const hasUnread = notificationsData.find(notification => notification.unread === true);
    setHasUnreadNotifications(hasUnread);
  }, [notificationsData]);

  // Every time the panel is opened, mark all notifications as unread.
  useEffect(() => {
    if (notificationsOpen) {
      markAllAsUnread();
    }
  }, [notificationsOpen]);

  // After changing \`data\` from the Storybook control.
  useEffect(() => {
    setNotificationsData(data);
  }, [data]);
  // After changing \`open\` from the Storybook control.
  useEffect(() => {
    setNotificationsOpen(open);
  }, [open]);
  const addNewNotification = () => {
    const notification = newNotification();
    setNotificationsData(data => [...data, {
      ...notification
    }]);
  };
  return <div className={\`\${storyBlockClass}--full-height\`}>
      <Header aria-label="IBM Cloud Pak" className={\`\${storyBlockClass}--header\`}>
        <HeaderName href="/" prefix="IBM" onClick={e => {
        e.preventDefault();
      }}>
          Cloud Pak
        </HeaderName>
        <HeaderGlobalBar>
          {/**
           *
           * User account
           *
           */}
          <HeaderGlobalAction ref={userActionRef} aria-label={userOpen ? 'Close user account' : 'Open user account'} isActive={userOpen} onClick={e => {
          e.preventDefault();
          setUserOpen(prevState => !prevState);
          setNotificationsOpen(false);
          setSwitcherOpen(false);
          setTimeout(() => {
            userActionRef?.current?.focus();
          }, 0);
        }}>
            <User size={20} />
          </HeaderGlobalAction>
          <HeaderPanel expanded={userOpen}>
            <div className={\`\${storyBlockClass}__header-panel\`}>
              User account
              <br />
              example panel
            </div>
          </HeaderPanel>
          {/**
           *
           * Notifications
           *
           */}
          <HeaderGlobalAction ref={notificationActionRef} aria-label={notificationsOpen ? 'Close notifications' : 'Open notifications'} aria-expanded={notificationsOpen} isActive={notificationsOpen} onClick={e => {
          e.preventDefault();
          markAllAsUnread();
          setNotificationsOpen(prevState => !prevState);
          setUserOpen(false);
          setSwitcherOpen(false);
        }}>
            {!notificationsOpen && hasUnreadNotifications ? <UnreadNotificationBell /> : <Notification size={20} />}
          </HeaderGlobalAction>
          <NotificationsPanel triggerButtonRef={notificationActionRef} data={notificationsData} open={notificationsOpen} onClickOutside={() => {
          action('Clicked outside')();
          setNotificationsOpen(false);
        }} onDismissAllNotifications={() => {
          action('Clicked "Dismiss all"')();
          setNotificationsData([]);
        }} onDismissSingleNotification={({
          id
        }) => {
          const deletedItem = notificationsData.find(item => item.id);
          action('Clicked "Dismiss notification"')(deletedItem);
          let tempData = [...notificationsData];
          tempData = tempData.filter(item => item.id !== id);
          setNotificationsData(tempData);
        }} {...rest} />
          {/**
           *
           * App switcher
           *
           */}
          <HeaderGlobalAction ref={switcherActionRef} aria-label={switcherOpen ? 'Close switcher' : 'Open switcher'} isActive={switcherOpen} onClick={e => {
          e.preventDefault();
          setSwitcherOpen(prevState => !prevState);
          setUserOpen(false);
          setNotificationsOpen(false);
          setTimeout(() => {
            switcherActionRef?.current?.focus();
          }, 0);
        }}>
            <Switcher size={20} />
          </HeaderGlobalAction>
          <HeaderPanel expanded={switcherOpen}>
            <div className={\`\${storyBlockClass}__header-panel\`}>
              App switcher
              <br />
              example panel
            </div>
          </HeaderPanel>
        </HeaderGlobalBar>
      </Header>
      <div className={\`\${storyBlockClass}__add\`}>
        <Button onClick={addNewNotification}>Add new notification</Button>
      </div>
    </div>;
}`,...(be=(ye=F.parameters)==null?void 0:ye.docs)==null?void 0:be.source}}};const kn=["Default"];export{F as Default,kn as __namedExportsOrder,An as default};
