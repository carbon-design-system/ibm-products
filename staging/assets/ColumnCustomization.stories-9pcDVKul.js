import{e as t,r as g}from"./index-BOZkNhcz.js";import{a as G}from"./chunk-D5ZWXAHU-DlerbUHg.js";import{I as Ie,a as $e,D as X,m as ge,u as be,b as Pe}from"./_storybook-styles-CsWMTTXp.js";import{S as we}from"./StoryDocsPage-CUDE-DA-.js";import{D as fe}from"./DatagridActions-5hiWsdyJ.js";import{D as Ce}from"./DatagridPagination-BVtVI2oS.js";import{A as L}from"./getArgTypes-Ci8wh0IQ.js";import{c as K,P as s,M as A,bc as Re}from"./index-Cd8snwnz.js";import{p as N,B as He,bk as ye}from"./settings-DqneCnpo.js";import{W as he}from"./index-4Q4DW5HA.js";import{r as Ne}from"./index.esm-BDMpHATI.js";import"./feature-flags-D5BeACme.js";import{C as Te}from"./Checkbox-DURplLdT.js";import{g as Oe}from"./_commonjsHelpers-BosuxZz1.js";import{a as Ae,b as Ve}from"./toNumber-cOipFfRl.js";import{u as Be,C as Fe,a as ae,P as We,K as je,b as Ge,D as Ue,r as Me,e as Ke,c as Je,S as Ye,v as Qe}from"./modifiers.esm-t4Cq-LLK.js";import{c as Xe}from"./bucket-5-DaBRhwMZ.js";import{a as Ze}from"./bucket-10-C7Sy9uaK.js";import{g as V}from"./getNodeTextContent-C8IeKkUQ.js";import{u as et}from"./uuidv4-BQrI85uz.js";import{S as tt}from"./Search-ByDDtaAB.js";import{T as st}from"./TearsheetNarrow-NxeiiRI6.js";import{u as rt}from"./useActionsColumn-B_G9i-5K.js";import{u as ot}from"./useStickyColumn-De0Z-1Cb.js";import{a as Se}from"./bucket-6-Bh7P8rIU.js";import{C as it}from"./bucket-2-BRYD7UVO.js";import{T as xe}from"./bucket-17-CXe10FQN.js";import"./v4-CtRu48qb.js";import"./devtools-Bjt2CwRv.js";import"./TableRow-CU2-ZFr3.js";import"./index-CN8ymWyE.js";import"./wrapComponent-BmELSzk6.js";import"./bucket-0-BxsXdw_5.js";import"./TableToolbar-EFhxjZFU.js";import"./Text-Rb3iZwUo.js";import"./ErrorEmptyState-BENOpWF7.js";import"./Link-BqtwLYC0.js";import"./EmptyState-7S70Lmhc.js";import"./props-helper-DIx2Ramn.js";import"./index-pvIsy2-t.js";import"./EmptyStateV2-B82vTwc1.js";import"./iframe-DVffvOdJ.js";import"./ErrorIllustration-DDV2YgoZ.js";import"./useId-Cb6M4-BZ.js";import"./index-hBZdtWkn.js";import"./index-2uioG_CI.js";import"./events-OVwOsPzJ.js";import"./NoDataEmptyState-B-jvCND7.js";import"./NoDataIllustration-CxP-HZKR.js";import"./NotFoundEmptyState-OxTrlSPt.js";import"./NotFoundIllustration-CUhP8rkd.js";import"./useResizeObserver-DcNhBpO-.js";import"./useIsomorphicEffect-C0ObacuX.js";import"./MenuItem-BUajeAL9.js";import"./useControllableState-BHFQnaNh.js";import"./useAttachedMenu-S-3pNb8o.js";import"./useWindowResize-CIi3x59S.js";import"./mergeRefs-CTUecegF.js";import"./getFocusableElements-BW7cf991.js";import"./index-CtW6Lsnp.js";import"./index-BwgvqBjT.js";import"./useClickOutside-DHVF5Qo6.js";import"./AccordionItem-B9o-Ah8b.js";import"./index-26QMFoPE.js";import"./LayerContext-DxTbsTfh.js";import"./index-BfLKLwdO.js";import"./DatePicker-C50cTdwC.js";import"./FormContext-qEw5DNxz.js";import"./bucket-18-D95sPjw6.js";import"./bucket-1-D7l_4S5E.js";import"./Dropdown-D4dJ8elh.js";import"./index-CNhKwCqX.js";import"./FormGroup-CwhL9o_y.js";import"./NumberInput-CtjGEpw1.js";import"./useNormalizedInputProps-CMiK_Vbq.js";import"./bucket-16-B-hxUebt.js";import"./RadioButton-57mE-Hhs.js";import"./RadioButtonGroup-DraaP4WA.js";import"./MultiSelect-tJEJ51mj.js";import"./usePreviousValue-BEwlonP-.js";import"./ActionSet-BJEln6zp.js";import"./ButtonSet-DkA8no1v.js";import"./InlineLoading-82KDAKCf.js";import"./TagSet-KyB4Tq5X.js";import"./Tag-Ld9LHRlu.js";import"./DefinitionTooltip-J5OgfIIa.js";import"./DismissibleTag-CgAkKprD.js";import"./ComposedModal-CpktCI_l.js";import"./requiredIfGivenPropIsTruthy-CU7JwK8h.js";import"./wrapFocus-CTxWTAfl.js";import"./usePortalTarget-D4ub4VO0.js";import"./OperationalTag-CxiLneNY.js";import"./SkeletonText-C_VQyL87.js";import"./bucket-14-B-58TyUV.js";import"./index-CD9LV9at.js";import"./bucket-7-Djjnd2yB.js";import"./index-Cm8rDqP-.js";import"./index-CO8sV34W.js";import"./index-ogSvIofg.js";import"./story-helper-HIAsLHzl.js";import"./index-DUK5nPFV.js";import"./bucket-12-CsE6RCLW.js";import"./OverflowMenuItem-BblcxAUS.js";import"./TableToolbarSearch-CVRewwJu.js";import"./Select-C_l68ebb.js";import"./SelectItem-L_lAK4_1.js";import"./index-C4NbHa1m.js";import"./index-RATG_uWP.js";import"./bucket-9-0Zx3G2i3.js";import"./TearsheetShell-Ba8wlB-P.js";import"./checkForOverflow-B788XW49.js";import"./useFocus-BAskf9li.js";var Y,ne;function at(){if(ne)return Y;ne=1;var e=Ae(),o=Ve(),n="[object Boolean]";function i(u){return u===!0||u===!1||o(u)&&e(u)==n}return Y=i,Y}var nt=at();const lt=Oe(nt),Q=e=>lt(e.isVisible)?e.isVisible:!0,D=`${N.prefix}--datagrid`,Z=({id:e,children:o,classList:n,disabled:i,ariaLabel:u,isSticky:m,selected:b})=>{const{attributes:c,isDragging:p,listeners:a,setNodeRef:T,transform:k,transition:E}=Be({disabled:i,id:e}),I=t.createElement(t.Fragment,null,t.createElement("div",{className:K({disabled:i},`${D}__draggable-handleStyle`)},m?t.createElement(Ze,{size:16}):t.createElement(Xe,{size:16})),o),$={transform:i?void 0:Fe.Transform.toString(k),transition:E};return t.createElement("li",{className:K(n,`${D}__draggable-handleHolder`,{[`${D}__draggable-handleHolder--selected`]:b,[`${D}__draggable-handleHolder--sticky`]:m,[`${D}__draggable-handleHolder--dragging`]:p}),id:e,ref:T,style:$,...c,...a,"aria-disabled":void 0,"aria-selected":b,role:"option"},t.createElement("span",{className:`${D}__shared-ui--assistive-text`},u),t.createElement("div",{className:K({[`${D}__draggable-handleStyle`]:!i},[`${D}__draggable-handleHolder-droppable`])},I))};Z.propTypes={ariaLabel:s.string.isRequired,children:s.element.isRequired,classList:s.string,disabled:s.bool,id:s.string.isRequired,isSticky:s.bool,selected:s.bool};Z.__docgenInfo={description:"",methods:[],displayName:"DraggableElement",props:{ariaLabel:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},children:{required:!0,tsType:{name:"ReactNode"},description:"",type:{name:"element"}},classList:{required:!1,tsType:{name:"string"},description:"",type:{name:"string"}},disabled:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},id:{required:!0,tsType:{name:"string"},description:"",type:{name:"string"}},isSticky:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}},selected:{required:!1,tsType:{name:"boolean"},description:"",type:{name:"bool"}}},composes:["PropsWithChildren"]};const B=`${N.prefix}--datagrid`,w=(e,o)=>e&&o&&e.id===o.id,ee=({columns:e,filterString:o,id:n,moveElement:i,onSelectColumn:u,setAriaRegionText:m})=>{const b=`${B}__draggable-item`,c=e.filter(r=>V(r.Header).trim().length!==0).filter(Boolean).filter(r=>!r.isAction).filter(r=>r.id!=="spacer").filter(r=>o.length===0||V(r.Header).toLowerCase().includes(o)),a=(()=>{const r=[...c];return r.forEach(d=>{d.sticky&&(d.disabled=!0)}),r})(),T=r=>{var U;const{active:d,over:f}=r,l=a.filter(v=>v.id===f.id);if(l!=null&&l.length&&((U=l[0])!=null&&U.disabled))return;const C=a.findIndex(v=>w(v,d)),P=a.findIndex(v=>w(v,f)),S=V(a[C].Header);m(`${S} dropped. New position ${P+1} of ${a.length}.`);const x=e.findIndex(v=>w(v,d)),W=e.findIndex(v=>w(v,f));i(x,W)},k=r=>{const{active:d}=r,f=a.findIndex(C=>w(C,d)),l=V(a[f].Header);m(`${l} grabbed. Current position ${f+1} of ${a.length}.`)},E=r=>{const{active:d,over:f}=r,l=a.findIndex(S=>w(S,d)),C=a.findIndex(S=>w(S,f)),P=V(a[l].Header);m(`${P} grabbed. Original position ${l+1}, new position ${C+1} of ${a.length}.`)},I=ae(We,{activationConstraint:{distance:4}}),$=ae(je,{coordinateGetter:(r,d)=>{const{currentCoordinates:f}=d;let l=r.target;for(;l&&!l.classList.contains(b);)l=l.parentNode;const C=l.offsetHeight;switch(r.code){case"ArrowRight":case"ArrowLeft":return f;case"ArrowUp":return{...f,y:f.y-C};case"ArrowDown":return{...f,y:f.y+C}}}}),z=Ge(I,$),F=(r,d)=>{if(r.code==="Space")return u(d,!Q(d)),r.preventDefault(),r.stopPropagation(),!1};return t.createElement(Ue,{collisionDetection:Je,onDragEnd:T,onDragStart:k,onDragMove:E,sensors:z,modifiers:[Me,Ke]},t.createElement(t.Fragment,null,t.createElement("div",{className:`${B}__draggable-underlay`,"aria-hidden":"true",key:`draggable-underlay-${n}`},c.map(r=>t.createElement("div",{className:`${B}__draggable-underlay-item`,key:r.id}))),t.createElement(Ye,{items:a,strategy:Qe},c.map(r=>{const d=V(r.Header),l=d.split(new RegExp(`(${o})`,"gi")).map(x=>x.toLowerCase()===o.toLowerCase()?`<strong>${x}</strong>`:x).join(""),C=!!r.sticky,P=r.disabled,S=t.createElement(t.Fragment,null,t.createElement(Te,{checked:Q(r),disabled:P||C,onChange:(x,{checked:W})=>u(r,W),id:`${B}__customization-column-${r.id}`,labelText:d,title:d,className:`${B}__customize-columns-checkbox`,hideLabel:!0,onKeyDown:x=>F(x,r)}),t.createElement("div",{dangerouslySetInnerHTML:{__html:l},className:`${B}__customize-columns-checkbox-visible-label`}));return t.createElement(Z,{classList:b,key:r.id,id:r.id,disabled:o.length>0||C,ariaLabel:d,isSticky:C,selected:Q(r)},S)}))))};ee.propTypes={columns:A.PropTypes.array.isRequired,filterString:A.PropTypes.string.isRequired,id:A.PropTypes.string.isRequired,moveElement:A.PropTypes.func.isRequired,onSelectColumn:A.PropTypes.func.isRequired,setAriaRegionText:A.PropTypes.func.isRequired};ee.__docgenInfo={description:"",methods:[],displayName:"DraggableItemsList",props:{columns:{description:"",type:{name:"array"},required:!0},filterString:{description:"",type:{name:"string"},required:!0},id:{description:"",type:{name:"string"},required:!0},moveElement:{description:"",type:{name:"func"},required:!0},onSelectColumn:{description:"",type:{name:"func"},required:!0},setAriaRegionText:{description:"",type:{name:"func"},required:!0}}};const _=`${N.prefix}--datagrid`,te=({getVisibleColumnsCount:e,filterString:o,columns:n,setColumnsObject:i,onSelectColumn:u,assistiveTextInstructionsLabel:m,assistiveTextDisabledInstructionsLabel:b,selectAllLabel:c,customizeTearsheetHeadingLabel:p})=>{const a=g.useRef(et()),T=g.useRef(null),[k,E]=t.useState(""),I=t.useCallback((z,F)=>{i(r=>{const d=[...r],f=d[z];return d.splice(z,1),d.splice(F,0,f),d})},[i]),$=n==null?void 0:n.filter(z=>!z.sticky);return t.createElement("div",{className:`${_}__customize-columns-column-list`,ref:T},t.createElement("ol",{className:`${_}__customize-columns-column-list--focus`,role:"listbox","aria-label":p,"aria-describedby":`${_}__customize-columns--instructions`,tabIndex:0},t.createElement("span",{"aria-live":"assertive",className:`${_}__shared-ui--assistive-text`},k),t.createElement("span",{id:`${_}__customize-columns--instructions`,className:`${_}__shared-ui--assistive-text`},o.length===0?m:b),t.createElement("div",{id:`${_}__customize-columns-select-all`,className:K(`${_}__customize-columns-select-all`,{[`${_}__customize-columns-select-all--selected`]:e()>0}),selected:e()>0},t.createElement(Te,{className:`${_}__customize-columns-checkbox-wrapper`,checked:e()===n.length,indeterminate:e()<n.length&&e()>0,onChange:()=>{u($,e()!==n.length)},id:`${_}__customization-column-select-all`,labelText:c})),t.createElement(ee,{id:a.current,columns:n,filterString:o,moveElement:I,setAriaRegionText:E,onSelectColumn:u})))};te.propTypes={assistiveTextDisabledInstructionsLabel:s.string,assistiveTextInstructionsLabel:s.string,columns:s.array.isRequired,customizeTearsheetHeadingLabel:s.string,disabledInstructionsLabel:s.string,filterString:s.string.isRequired,getVisibleColumnsCount:s.func.isRequired,instructionsLabel:s.string,onSelectColumn:s.func.isRequired,selectAllLabel:s.string,setColumnStatus:s.func,setColumnsObject:s.func.isRequired};te.__docgenInfo={description:"",methods:[],displayName:"Columns",props:{assistiveTextDisabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{description:"",type:{name:"string"},required:!1},columns:{description:"",type:{name:"array"},required:!0},customizeTearsheetHeadingLabel:{description:"",type:{name:"string"},required:!1},disabledInstructionsLabel:{description:"",type:{name:"string"},required:!1},filterString:{description:"",type:{name:"string"},required:!0},getVisibleColumnsCount:{description:"",type:{name:"func"},required:!0},instructionsLabel:{description:"",type:{name:"string"},required:!1},onSelectColumn:{description:"",type:{name:"func"},required:!0},selectAllLabel:{description:"",type:{name:"string"},required:!1},setColumnStatus:{description:"",type:{name:"func"},required:!1},setColumnsObject:{description:"",type:{name:"func"},required:!0}}};const dt=`${N.prefix}--datagrid`,se=({searchText:e,setSearchText:o,findColumnPlaceholderLabel:n})=>g.createElement("div",{className:`${dt}__customize-columns-tearsheet--actions`},g.createElement(tt,{placeholder:n,value:e,size:"lg",labelText:n,onChange:i=>{o(i.target.value)}}));se.propTypes={columns:s.array.isRequired,findColumnPlaceholderLabel:s.string,originalColumnDefinitions:s.array.isRequired,resetToDefaultLabel:s.string,searchText:s.string.isRequired,setColumnsObject:s.func.isRequired,setSearchText:s.func.isRequired};se.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{columns:{description:"",type:{name:"array"},required:!0},findColumnPlaceholderLabel:{description:"",type:{name:"string"},required:!1},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},resetToDefaultLabel:{description:"",type:{name:"string"},required:!1},searchText:{description:"",type:{name:"string"},required:!0},setColumnsObject:{description:"",type:{name:"func"},required:!0},setSearchText:{description:"",type:{name:"func"},required:!0}}};const ct=`${N.prefix}--datagrid`,re=({isOpen:e,setIsTearsheetOpen:o,onSaveColumnPrefs:n,columnDefinitions:i,originalColumnDefinitions:u,customizeTearsheetHeadingLabel:m="Customize columns",primaryButtonTextLabel:b="Save",secondaryButtonTextLabel:c="Cancel",instructionsLabel:p="Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.",findColumnPlaceholderLabel:a="Find column",resetToDefaultLabel:T="Reset to default",assistiveTextInstructionsLabel:k="Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:E="Reordering columns are disabled because they are filtered currently.",selectAllLabel:I="Column name"})=>{const[$,z]=g.useState(""),[F,r]=g.useState(""),[d,f]=g.useState(""),[l,C]=g.useState(i),[P,S]=g.useState(!1),x=g.useRef(void 0),W=()=>{C(i),o(!1)},U=()=>{o(!1);const h=l.map(q=>({id:q.id,isVisible:q.isVisible}));n(h)},v=(h,q)=>{const O=l.map(y=>Array.isArray(h)?h.includes(y)&&y.canFilter&&!y.disabled?{...y,isVisible:q}:y:h.id===y.id?{...y,isVisible:q}:y),ie=O.filter(y=>y.isVisible&&!["datagridSelection","actions"].includes(y.id)).length,Ee=O.map(y=>ie>0?["datagridSelection","actions"].includes(y.id)?{...y,isVisible:!0}:y:["datagridSelection","actions"].includes(y.id)?{...y,isVisible:!1}:y);C(Ee),S(ie!==0)},j=g.useCallback(()=>l.filter(h=>h.isVisible).length,[l]),ke=d.trim().toLowerCase();return g.useEffect(()=>{x.current!==i&&C(i);const h=l.filter(O=>O.id==="actions").length,q=l.filter(O=>O.id==="datagridSelection").length;z(j()-h-q<0?0:j()-h-q),r(l.length-h-q),x.current=i},[j,l,i]),t.createElement(st,{className:`${ct}__customize-columns-tearsheet`,open:e,title:`${m} (${$}/${F})`,description:p,actions:[{kind:"secondary",label:c,onClick:W},{kind:"primary",label:b,onClick:U,disabled:!P}]},t.createElement(se,{columns:l,originalColumnDefinitions:u,searchText:d,setColumnsObject:h=>{C(h),S(!0)},setSearchText:f,findColumnPlaceholderLabel:a,resetToDefaultLabel:T}),e&&t.createElement(te,{assistiveTextInstructionsLabel:k,assistiveTextDisabledInstructionsLabel:E,getVisibleColumnsCount:j,columns:l,filterString:ke,onSelectColumn:v,setColumnsObject:h=>{C(h),S(j()!==0)},selectAllLabel:I,customizeTearsheetHeadingLabel:m}))};re.propTypes={assistiveTextDisabledInstructionsLabel:s.string,assistiveTextInstructionsLabel:s.string,columnDefinitions:s.array.isRequired,customizeTearsheetHeadingLabel:s.string,findColumnPlaceholderLabel:s.string,instructionsLabel:s.string,isOpen:s.bool.isRequired,onSaveColumnPrefs:s.func.isRequired,originalColumnDefinitions:s.array.isRequired,primaryButtonTextLabel:s.string,resetToDefaultLabel:s.string,secondaryButtonTextLabel:s.string,selectAllLabel:s.string,setIsTearsheetOpen:s.func.isRequired};re.__docgenInfo={description:"",methods:[],displayName:"CustomizeColumnsTearsheet",props:{customizeTearsheetHeadingLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},primaryButtonTextLabel:{defaultValue:{value:"'Save'",computed:!1},description:"",type:{name:"string"},required:!1},secondaryButtonTextLabel:{defaultValue:{value:"'Cancel'",computed:!1},description:"",type:{name:"string"},required:!1},instructionsLabel:{defaultValue:{value:"'Select columns to display them. Click and drag the box to reorder the columns. These specifications will be saved and persist if you leave and return to the data table.'",computed:!1},description:"",type:{name:"string"},required:!1},findColumnPlaceholderLabel:{defaultValue:{value:"'Find column'",computed:!1},description:"",type:{name:"string"},required:!1},resetToDefaultLabel:{defaultValue:{value:"'Reset to default'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextInstructionsLabel:{defaultValue:{value:"'Press space bar to toggle drag drop mode, use arrow keys to move selected elements.'",computed:!1},description:"",type:{name:"string"},required:!1},assistiveTextDisabledInstructionsLabel:{defaultValue:{value:"'Reordering columns are disabled because they are filtered currently.'",computed:!1},description:"",type:{name:"string"},required:!1},selectAllLabel:{defaultValue:{value:"'Column name'",computed:!1},description:"",type:{name:"string"},required:!1},columnDefinitions:{description:"",type:{name:"array"},required:!0},isOpen:{description:"",type:{name:"bool"},required:!0},onSaveColumnPrefs:{description:"",type:{name:"func"},required:!0},originalColumnDefinitions:{description:"",type:{name:"array"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const oe=({instance:e})=>{const{onSaveColumnPrefs:o,isTearsheetOpen:n,setIsTearsheetOpen:i,labels:u,...m}=e.customizeColumnsProps,{state:b}=g.useContext(Ie),{featureFlags:c}=b||{};return g.useEffect(()=>{c&&!(c!=null&&c["enable-datagrid-useCustomizeColumns"])&&console.error("Datagrid useCustomizeColumns extension has not been enabled via feature flag.")},[c]),t.createElement(re,{...m,...u,isOpen:n,setIsTearsheetOpen:i,columnDefinitions:e.allColumns,originalColumnDefinitions:e.columns,onSaveColumnPrefs:p=>{setTimeout(()=>{const a=p.filter(T=>!T.isVisible).map(T=>T.id);e.setHiddenColumns(a),typeof e.setColumnOrder=="function"?e.setColumnOrder(p.map(T=>T.id)):console.warn("Column order can not be updated. Did you forget to add 'useColumnOrder' in 'useDatagrid'")},0),typeof o=="function"&&o(p)}})};oe.propTypes={instance:s.object.isRequired};oe.__docgenInfo={description:"",methods:[],displayName:"TearsheetWrapper",props:{instance:{description:"",type:{name:"object"},required:!0}}};const ut=`${N.prefix}--datagrid`,J=({onClick:e,setIsTearsheetOpen:o,isTearsheetOpen:n,iconTooltipLabel:i="Customize columns",...u})=>g.createElement(He,{...u,renderIcon:m=>g.createElement(Re,{size:16,...m}),iconDescription:i,tooltipPosition:"bottom",kind:"ghost",hasIconOnly:!0,"test-id":`${ut}__customize-columns-trigger`,onClick:()=>{o(!n),typeof e=="function"&&e()}});J.defaultProps={onClick:()=>{}};J.propTypes={iconTooltipLabel:s.string,isTearsheetOpen:s.bool.isRequired,onClick:s.func.isRequired,setIsTearsheetOpen:s.func.isRequired};J.__docgenInfo={description:"",methods:[],displayName:"ButtonWrapper",props:{iconTooltipLabel:{defaultValue:{value:"'Customize columns'",computed:!1},description:"",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isTearsheetOpen:{description:"",type:{name:"bool"},required:!0},setIsTearsheetOpen:{description:"",type:{name:"func"},required:!0}}};const ve=e=>{const[o,n]=g.useState(!1);e.useInstance.push(i=>{const{customizeColumnsProps:u}=i,{labels:m}=u||{};Object.assign(i,{customizeColumnsProps:{...u,isTearsheetOpen:o,setIsTearsheetOpen:n},CustomizeColumnsButton:b=>g.createElement(J,{iconTooltipLabel:m==null?void 0:m.iconTooltipLabel,isTearsheetOpen:o,setIsTearsheetOpen:n,...b}),CustomizeColumnsTearsheet:oe})})},_e=Ne.useColumnOrder,qe=()=>t.createElement(we,{omitCodedExample:!0,blocks:[{title:"Customizing columns",description:"Customizing columns allows user to reorder and hide certain columns of the datagrid. Consuming component can use the provided callback to save/update according to their persistent strategy.\n- Include `useCustomizeColumns` and `useColumnOrder` hooks (required)\n  - `useColumnOrder` comes from `react-table` but is exported by `@carbon/ibm-products` to be used alongside `useCustomizeColumns`.\n- Implement `options.DatagridActions` component\n  - this component will have props: `datagridState`\n  - render `datagridState.CustomizeColumnsButton` component wherever makes sense.\n- Options available to set:\n  - `options.initialState.hiddenColumns: Array<ColumnId: String>`\n    - Array of column ids that will be hidden after initial render\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useTable#table-options)\n  - `options.initialState.columnOrder: Array<ColumnId: String>`\n    - Order of the columns. Any column ids not in this array will be ordered by their position in the `options.columns`\n    - [react-table doc](https://react-table.tanstack.com/docs/api/useColumnOrder#table-options)\n  - `options.customizeColumnsProps.onSaveColumnPrefs`\n    - type: `Function(Columns: Array<{ColumnId: String, isVisible: Boolean}>) => void`\n    - Callback function when 'Save' button clicked on the narrow tearsheet. It allows consumer to preserve the updated column preference. This output can also be used to compute the `hiddenColumns` and `columnOrder`\n        ",source:{code:`
const columns = React.useMemo(() => defaultHeader, []);
const [data] = useState(makeData(10));
const DatagridActions = (datagridState) => (
  <TableToolbarContent>
    <TableToolbarSearch ... />
    <Button ... />
    <datagridState.CustomizeColumnsButton />
  </TableToolbarContent>
)
const datagridState = useDatagrid(
  {
    columns,
    data,
    initialState: {
      hiddenColumns: ['age'],
      columnOrder: [],
    },
    customizeColumnsProps: {
      onSaveColumnPrefs: (newColDefs) => {
        console.log(newColDefs);
      },
    },
    DatagridActions,
  },
  useCustomizeColumns,
  useColumnOrder,
);

return (
  <Datagrid datagridState={datagridState} />
);
          `}}]});qe.__docgenInfo={description:"",methods:[],displayName:"DocsPage"};const xr={title:"Deprecated/Datagrid/Datagrid/ColumnCustomization",component:X,tags:["autodocs"],parameters:{styles:$e,docs:{page:qe},layout:"fullscreen"},argTypes:{featureFlags:{table:{disable:!0}}}},ze=`${N.prefix}--datagrid`,De=[{Header:"Row Index",accessor:(e,o)=>o,id:"rowIndex"},{Header:"First Name",accessor:"firstName"},{Header:"Last Name",accessor:"lastName"},{Header:"Age",accessor:"age",width:50,disableGlobalFilter:!0},{Header:"Visits",accessor:"visits",width:60},{Header:"Someone 1",accessor:"someone1"},{Header:"Someone 2",accessor:"someone2"},{Header:"Someone 3",accessor:"someone3"},{Header:"Someone 4",accessor:"someone4"},{Header:"Someone 5",accessor:"someone5"},{Header:"Someone 6",accessor:"someone6"},{Header:"Someone 7",accessor:"someone7"},{Header:"Someone 8",accessor:"someone8"},{Header:"Someone 9",accessor:"someone9"},{Header:"Someone 10",accessor:"someone10"}],M={gridTitle:"Data table title",gridDescription:"Additional information if needed",useDenseHeader:!1,rowActions:[{id:"edit",itemText:"Edit",icon:Se,onClick:G("Clicked row action: edit")},{id:"delete",itemText:"Delete",icon:xe,isDelete:!0,onClick:G("Clicked row action: delete")}]},mt=({...e})=>{const[o,n]=g.useState([]),i=t.useMemo(()=>{const b=[...De];return b.forEach(c=>{o.some(p=>{if(c.accessor===p)return c.disableGlobalFilter=!0,!0;c.disableGlobalFilter=!1})}),b},[o]),[u]=g.useState(ge(10)),m=be({className:"c4p--datagrid__hidden--columns",columns:i,data:u,initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[]},DatagridActions:fe,DatagridPagination:Ce,...e.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:b=>{const c=b.map((p,a)=>p.isVisible?null:p.id).filter(p=>p!==null);n(c)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},ve,_e);return t.createElement(he,{flags:{"enable-datagrid-useCustomizeColumns":!0}},t.createElement(X,{datagridState:m}),t.createElement("div",{className:`${ze}-story__hidden-column-id-snippet`},t.createElement("p",null,"Hidden column ids:"),t.createElement(ye,{type:"multi"},JSON.stringify(m.state.hiddenColumns,null,2))))},pt=({...e})=>t.createElement(mt,{defaultGridProps:{...e}}),Le={gridTitle:M.gridTitle,gridDescription:M.gridDescription,useDenseHeader:M.useDenseHeader,customizeColumnsProps:M.customizeColumnsProps},gt="With column customization",R=pt.bind({});R.storyName=gt;R.argTypes={gridTitle:L.gridTitle,gridDescription:L.gridDescription,useDenseHeader:L.useDenseHeader,customizeColumnsProps:L.customizeColumnsProps};R.args={...Le};const bt=({...e})=>{const[o,n]=g.useState([]),i=De.slice(2,15),u=t.useMemo(()=>{const c=[{Header:"Row Index",accessor:(p,a)=>a,sticky:"left",id:"rowIndex"},{Header:"First Name",accessor:"firstName",disabled:!0},...i,{Header:"",accessor:"actions",sticky:"right",width:48,isAction:!0}];return c.forEach(p=>{o.some(a=>{if(p.accessor===a)return p.disableGlobalFilter=!0,!0;p.disableGlobalFilter=!1})}),c},[o]),[m]=g.useState(ge(10)),b=be({className:"c4p--datagrid__hidden--columns",columns:u,data:m,ascendingSortableLabelText:"ascending",descendingSortableLabelText:"descending",defaultSortableLabelText:"none",initialState:{pageSize:10,pageSizes:[5,10,25,50],hiddenColumns:["age"],columnOrder:[],sortableColumn:{id:"rowIndex",order:"ASC"}},DatagridActions:fe,DatagridPagination:Ce,rowActions:[{id:"edit",itemText:"Edit",icon:Se,onClick:G("Clicked row action: edit")},{id:"approve",itemText:"Approve",icon:it,onClick:G("Clicked row action: approve")},{id:"delete",itemText:"Delete",icon:xe,isDelete:!0,hasDivider:!0,onClick:G("Clicked row action: delete")}],...e.defaultGridProps,customizeColumnsProps:{onSaveColumnPrefs:c=>{const p=c.map((a,T)=>a.isVisible?null:a.id).filter(a=>a!==null);n(p)},labels:{findColumnPlaceholderLabel:"Find column",resetToDefaultLabel:"Reset to default",customizeTearsheetHeadingLabel:"Customize columns",primaryButtonTextLabel:"Save",secondaryButtonTextLabel:"Cancel",instructionsLabel:"Deselect columns to hide them. Drag rows to change column order. These specifications will be saved if you leave and return to the data table.",iconTooltipLabel:"Customize columns",assistiveTextInstructionsLabel:"Press space bar to toggle drag drop mode, use arrow keys to move selected elements.",assistiveTextDisabledInstructionsLabel:"Reordering columns are disabled because they are filtered currently.",selectAllLabel:"Column name"}}},ve,_e,ot,rt,Pe);return t.createElement(he,{flags:{"enable-datagrid-useCustomizeColumns":!0}},t.createElement(X,{datagridState:b}),t.createElement("div",{className:`${ze}-story__hidden-column-id-snippet`},t.createElement("p",null,"Hidden column ids:"),t.createElement(ye,{type:"multi"},JSON.stringify(b.state.hiddenColumns,null,2))))},ft=({...e})=>t.createElement(bt,{defaultGridProps:{...e}}),Ct="With column customization and frozen columns",H=ft.bind({});H.storyName=Ct;H.argTypes={gridTitle:L.gridTitle,gridDescription:L.gridDescription,useDenseHeader:L.useDenseHeader,customizeColumnsProps:L.customizeColumnsProps};H.args={...Le};var le,de,ce;R.parameters={...R.parameters,docs:{...(le=R.parameters)==null?void 0:le.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationUsage defaultGridProps={{
    ...args
  }} />;
}`,...(ce=(de=R.parameters)==null?void 0:de.docs)==null?void 0:ce.source}}};var ue,me,pe;H.parameters={...H.parameters,docs:{...(ue=H.parameters)==null?void 0:ue.docs,source:{originalSource:`({
  ...args
}) => {
  return <ColumnCustomizationWithFixedColumn defaultGridProps={{
    ...args
  }} />;
}`,...(pe=(me=H.parameters)==null?void 0:me.docs)==null?void 0:pe.source}}};const vr=["ColumnCustomizationUsageStory","ColumnCustomizationWithFixedColumnAndDisabledStory"];export{R as ColumnCustomizationUsageStory,H as ColumnCustomizationWithFixedColumnAndDisabledStory,vr as __namedExportsOrder,xr as default};
